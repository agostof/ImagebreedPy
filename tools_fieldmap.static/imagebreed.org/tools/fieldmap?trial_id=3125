


<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<head>
  <link rel="stylesheet" type="text/css" href="/css/new_sgn.css" />
<link rel="stylesheet" type="text/css" href="/css/jquery-sgn-theme/jquery-ui-1.10.3.custom.css" />
<link rel="stylesheet" type="text/css" href="/css/jstree/themes/default/style.min.css" />
<link rel="stylesheet" type="text/css" href="/css/fullcalendar.min.css" />
<link rel="stylesheet" type="text/css" href="/documents/inc/datatables/jquery.dataTables.css" />
<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="/css/bootstrap-toggle/bootstrap-toggle.min.css" />
<link rel="stylesheet" type="text/css" href="/css/ladda-themeless.min.css" />
<link rel="stylesheet" type="text/css" href="/css/daterangepicker.css" />
<link rel="stylesheet" type="text/css" href="/css/buttons/buttons.bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="/css/buttons/buttons.dataTables.css" />
<link rel="stylesheet" type="text/css" href="/css/bootstrap3-xl-class.css" />
<link rel="stylesheet" type="text/css" href="/css/bootstrap-select.min.css" />
<link rel="stylesheet" type="text/css" href="/css/x3dom.css" />
<link rel="stylesheet" type="text/css" href="/static/css/fieldmap/leaflet-search.min.css" />
<link rel="stylesheet" type="text/css" href="/static/css/fieldmap/leaflet.css" />
<link rel="stylesheet" type="text/css" href="/css/datepicker.css" />

<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- <link rel="stylesheet" href="/css/sgn.css" type="text/css" /> -->
  <link rel="search" type="application/opensearchdescription+xml" title="Search Database" href="/documents/sgn_sol_search.xml" />
  

  <!-- <link rel="stylesheet" href="/documents/inc/colorbox/colorbox.css" type="text/css" /> -->
  <!-- <link rel="stylesheet" type="text/css" href="/css/dataTables.bootstrap.min.css"> -->

<script language="javascript" type="text/javascript">
   JSAN = {};
   JSAN.use = function() {};
   MochiKit = {__export__: false};
</script>



<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- file needed to add more styles and js libraries to sites dependent on SGN -->
  <title>ImageBreed</title>

  <!--<link href='/css/nextgen-cassava-base.css' rel='stylesheet' type='text/css'>-->
  <link href='/css/nextgen-cassava-base-new.css' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/documents/inc/jquery-cassava-theme/jquery-ui-1.10.3.custom.css" type="text/css" />

  <!--<link href='http://fonts.googleapis.com/css?family=Lato:300' rel='stylesheet' type='text/css'>-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EHE4JHN9L4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EHE4JHN9L4');
</script>




<script src="/js/legacy/jquery.js" type="text/javascript"></script>
<script src="/js/legacy/jqueryui.js" type="text/javascript"></script>
<script src="/js/legacy/sgn.js" type="text/javascript"></script>
<script src="/js/legacy/jquery/simpletooltip.js" type="text/javascript"></script>
<script src="/js/legacy/jquery/cookie.js" type="text/javascript"></script>
<script src="/js/legacy/jquery/dataTables-min.js" type="text/javascript"></script>
<script src="/js/legacy/jquerymigrate.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Dataset.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Page/FormattingHelpers.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Page/Toolbar.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/List.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Login.js" type="text/javascript"></script>
<script src="/js/legacy/bootstrap_min.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/BreedersToolbox/HTMLSelect03152022.js" type="text/javascript"></script>
<script src="/js/legacy/bootstrap-toggle_min.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/BreederSearch03152022.js" type="text/javascript"></script>
<script src="/js/legacy/MochiKit/Base.js" type="text/javascript"></script>
<script src="/js/legacy/MochiKit/Logging.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Effects.js" type="text/javascript"></script>
<script src="/js/legacy/d3/d3v4Min.js" type="text/javascript"></script>
<script src="/js/legacy/brapi/fieldmap/leaflet.js" type="text/javascript"></script>
<script src="/js/legacy/brapi/fieldmap/L-Path-Transform.js" type="text/javascript"></script>
<script src="/js/legacy/brapi/fieldmap/leaflet-search.js" type="text/javascript"></script>
<script src="/js/legacy/brapi/fieldmap/turf.js" type="text/javascript"></script>
<script src="/js/legacy/brapi/BrAPI.js" type="text/javascript"></script>
<script src="/js/legacy/brapi/BrAPIFieldmap.js" type="text/javascript"></script>
<script src="/js/legacy/calendar/moment_min.js" type="text/javascript"></script>
<script src="/js/legacy/calendar/fullcalendar_min.js" type="text/javascript"></script>
<script src="/js/legacy/jquery/dataTables.js" type="text/javascript"></script>
<script src="/js/legacy/calendar/fullcalendar_gcal_min.js" type="text/javascript"></script>
<script src="/js/legacy/calendar/bootstrap_datepicker_min.js" type="text/javascript"></script>

  
</head>

<body>

<div id="outercontainer">
  <a name="top"></a>

  <div id="clone_shoppingcart" style="display: none">
    <span id="clone_cart_count"></span> clone(s) in cart (<a class="toplink" style="text-decoration: underline" href="/search/clone-order.pl">order</a>)
  </div>

  <div class="modal fade" id="nav_dialog" role="dialog">
  <div class="modal-dialog modal-sm">

    <!-- Modal content-->
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 class="modal-title">Old browser version detected</h4>
      <!-- <h4 class="modal-title">This site is best viewed with:</h4> -->
    </div>

    <div class="modal-body">
    	<p>
        This site is optimized for modern web browsers<br>
        <center>
        <a href="http://browsehappy.com" target="_blank" class="footer">
          Please upgrade your browser<br>
          <img src="https://km.support.apple.com/kb/image.jsp?productid=PL165" width="25">
          <img src="/documents/img/o-logo.jpg" width="25">
          <img src="https://c.s-microsoft.com/en-us/CMSImages/ie_symbol_clr_56x56.png?version=73aa5bf1-0743-11e7-8f71-718675c983bf" width="25">
        </a>
        </center>
      </p>
        Sorry!, some features may not work in outdated browsers

    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    </div>
  </div>

  </div>
</div>

<script>

  var str = navigator.userAgent;
  var ie = /MSIE/.test(str);
  // alert(navigator.userAgent);

  jQuery(document).ready(function ($) {
    if(ie) {
      $('#nav_dialog').modal("show");
    }
  });

</script>

  

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
<a class="navbar-brand" href="/" style="padding:16px 10px">

<img id="sgnlogo"
src="/static/img/imagebreed/imagebreedlogo_noBackground.png" width="60" alt="ImageBreed Home" title="ImageBreed Home"></a>

<!--a class="navbar-brand sgn_brand_name" href="/">ImageBreed</a-->

      <!--& toolbar/buymeacoffee.mas &-->
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li class="dropdown"><a class="menu_click_dropdown dropdown-toggle" data-toggle="dropdown">Search</a>
  <ul class="dropdown-menu">
    <li><a href="/breeders/search">Wizard</a></li>
    <li><a href="/search/phenotypes/stock">Accessions and Plots</a></li>
    <li><a href="/search/organisms">Organisms</a></li>
    <li><a href="/search/cross">Progenies and Crosses</a></li>
    <li><a href="/search/trials">Field Trials</a></li>
    <li><a href="/search/genotyping_trials">Genotyping Plates</a></li>
    <li><a href="/search/genotyping_data_projects">Genotyping Data Projects</a></li>
    <li><a href="/search/genotyping_protocols">Genotyping Protocols</a></li>
    <li><a href="/search/traits">Traits</a></li>
    <!--<li><a href="/search/markers">Markers</a></li>-->
    <li><a href="/search/images">Images</a></li>
    <li><a href="/search/people">People</a></li>
    <!--li><a href="/help/faq.pl">FAQ</a></li-->
  </ul>
</li>

        <li class="dropdown"><a class="menu_click_dropdown dropdown-toggle" data-toggle="dropdown" href="/breeders/home">Manage</a>

  <ul class="dropdown-menu">
    <li role="separator" class="divider"></li>
    <li><a href="/breeders/drone_imagery">Aerial Imagery</a></li>
    <li><a href="/breeders/drone_rover">Ground Rover</a></li>
    <li role="separator" class="divider"></li>

    <li><a href="/breeders/companies/">Companies</a></li>
    <li><a href="/breeders/manage_roles/">User Roles</a></li>
    <li><a href="/breeders/manage_programs/">Breeding Programs</a></li>
    <li><a href="/breeders/locations">Locations</a></li>
    <li><a href="/breeders/accessions/">Accessions</a></li>
    <li><a href="/breeders/seedlots/">Seed Lots</a></li>
    <li><a href="/breeders/crosses/">Crosses</a></li>
    <li><a href="/breeders/trials/">Field Trials</a></li>
    <li><a href="/breeders/genotyping/">Genotyping Plates</a></li>
    <li><a href="/breeders/genotyping/">Genotyping (VCF, GRM, SSR)</a></li>
    <li><a href="/breeders/sequence_metadata/">Genomic Sequence Metadata</a></li>
    <li><a href="/breeders/markers/">Marker Sets</a></li>
    <li><a href="/breeders/samples/">Tissue Samples</a></li>
    <li><a href="/fieldbook">Field Book App</a></li>
    <li><a href="/breeders/phenotyping/">Phenotyping</a></li>
    <!-- li><a href="/barcode">Barcodes</a></li -->
    <li><a href="/tools/label_designer">Label Designer</a></li>
    <li><a href="/breeders/nirs">NIRS Spectroscopy</a></li>
    <li><a href="/breeders/download">Download</a></li>
    <li><a href="/breeders/upload">Upload</a></li>
    <!-- li><a href="/breeders/odk">ODK Data Collection</a></li -->
    <li><a href="/breeders/identifier_generation">Identifier Generation</a></li>
    <li><a href="/breeders/file_share_dump">File Share</a></li>
    <li role="separator" class="divider"></li>
    <li><a href="/order/stocks/view">Order Stocks</a></li>
  </ul>
</li>

        <li class="dropdown"><a class="menu_click_dropdown dropdown-toggle" data-toggle="dropdown">Analyze</a>
<!-- <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Genomes<span class="caret"></span></a> -->
  <ul class="dropdown-menu">
    <li class="dropdown-header">Breeder Tools</li>
    <li><a href="/analyses">Analyses</a></li>
    <li><a href="/analytics_protocols">Analytics Results</a></li>
    <li><a href="/selection/index">Selection Index</a></li>
    <li><a href="/noaa_ncdc_analysis">NOAA Weather</a></li>

    <!--li><a href="/solgs/search">Genomic Selection</a></li>
    <li><a href="/pca/analysis">Population Structure</a></li>
    <li><a href="/cluster/analysis">Clustering</a></li-->

    <li><a href="/accession_usage">Accession Usage</a></li>
    <li><a href="/tools/graphicalfiltering">Graphical Filtering</a></li>

    <li><a href="/tools/trial/comparison/list">Compare Trials</a></li>
    <li><a href="/tools/boxplotter">BoxPlotter Tool</a></li>

    <!--li><a href="/tools/stability">Stability AMMI and GGE</a></li-->
    <!--li><a href="/tools/heritability">Heritability</a></li-->

    <li><a href="/tools/image_analysis">Image Analysis</a></li>

    <!--li role="separator" class="divider"></li>
    <li class="dropdown-header">Sequence Analysis</li>
    <li><a href="/tools/blast/">BLAST</a></li-->

    <li role="separator" class="divider"></li>
    <li class="dropdown-header">Other</li>
    <li><a href="/tools/onto/">Ontology Browser</a></li>
    <li><a href="/tools/compose">Compose a New Trait</a></li>
  </ul>
</li>

        <li class="dropdown"><a class="menu_click_dropdown dropdown-toggle" data-toggle="dropdown">About</a>
<!-- <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">About Us<span class="caret"></span></a> -->
  <ul class="dropdown-menu">

    <li><a href="https://www.youtube.com/channel/UC1FYqz6kz9pE72sSHhG7ocQ" >Video Tutorials</a></li>
    <li><a href="https://nickmorales.github.io/imagebreed/" >Manual</a></li>

    <li role="separator" class="divider"></li>

    <li><a href="/contact/form">Contact</a></li>
    <li><a href="/forum/topics.pl">Forum</a></li>

    <li role="separator" class="divider"></li>

    <li><a href="https://www.patreon.com/nmorales" >Support ImageBreed on Patreon</a></li>
    <li><a href="https://www.buymeacoffee.com/imagebreed" >Buy ImageBreed a Coffee</a></li>

  </ul>
</li>

      </ul>
      <ul class="nav navbar-nav navbar-right">
        
<li style="height:100%">
  <form id="toolbar_search_form" class="navbar-form navbar-left form-inline" role="search" action="/search/quick_search.pl" style="padding-right: 2px;height:100%">
    <div class="input-group">
      <span id="advanced_search_li" class="btn btn-default input-group-addon" style="display:none" onclick="location.href='/search';">Advanced</span>
      <input id="quick_search_input" style="display:none;" type="text" name="term" class="form-control" placeholder="">
      <span id="quick_search_icon" class="btn btn-default" style="height:34px; font-size:16; padding-top:8px;" title="Search"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></span>
    </div>
  </form>
</li>

<script defer="defer">
  jQuery(document).ready(function() {
    
    jQuery('#quick_search_icon').click(function () {
      
      //open the search box
      if (jQuery('#quick_search_input').attr("placeholder") == "") {
        jQuery('#quick_search_input').attr("placeholder","Search");
        
        jQuery('#quick_search_icon').addClass("input-group-addon");
        
        jQuery('#advanced_search_li').css("display","table-cell");
        jQuery('#quick_search_input').css("display","table-cell");
        jQuery('#quick_search_input').css("width","0px");
        jQuery('#quick_search_input').animate({
          width: '150px'
        }, 400);

      }
      else {
        //close the search box if empty
        var search_val = jQuery('#quick_search_input').val();
        // alert("search_val: "+search_val);

        if (search_val) {
          jQuery('#toolbar_search_form').submit();
        }
        else {

          jQuery('#quick_search_input').animate({
            width: '0px'
          }, 400, function(){
            // callback function
            jQuery('#quick_search_input').attr("placeholder","");
            jQuery('#quick_search_input').css("display","none");
            jQuery('#advanced_search_li').css("display","none");
            jQuery('#quick_search_icon').removeClass("input-group-addon");
          });

        } //close search_val else
      }
    });
    
  });
</script>
        
<span id="login_button_html_div" style="white-space:nowrap;width:200;float:right"><button class="btn btn-primary disabled" type="button" style="margin: 7px 7px 0px 0px">Login</button></span>


<script>


  function update_login_button() { 

    jQuery.ajax( { 
      url: '/ajax/user/login_button_html',
      error: function(r) { alert('An error occurred'); },
      success: function(r) { 
        if (r.error) { alert(r.error); }
        else { 
          jQuery('#login_button_html_div').html(r.html);

          if (0 == 1 && !r.logged_in) {
            jQuery('#site_login_dialog').modal({backdrop: 'static', keyboard: false});
          }
        }
      }
    });
  }
        
  function logout() { 
    var answer = confirm("Are you sure you want to log out?");

    if (answer === true) { 
      jQuery.ajax( { 
        url: '/ajax/user/logout',
        error: function(r) { alert('An error occurred'); },
        success: function(r) { 
          if (r.error) { alert(r.error); }
          else { 
            location.reload();
          }
        }
      });
    }
  }
  
jQuery(document).ready(function () {

  update_login_button();
   
  jQuery(document).on('click', 'button[name="site_login_button"]', function(event) 
  { 
    jQuery('#site_login_dialog').modal("show");
  });
});
  
</script>

      </ul>
    </div>
  </div>
</nav>
<br>

<style>
  li {
    margin-bottom:0;
  }
  body {
    padding-top: 30px;
  }

  @media (min-width: 0px) and (max-width: 768px) {
    body {
      padding-top: 30px;
    }
  }

  @media (min-width: 768px) and (max-width: 856px) {
    body {
      padding-top: 90px;
    }
  }

  @media (max-width: 768px) {
    .sgn_brand_name {
      padding-left: 0px;
      padding-right: 0px;
    }
    .sgn_brand_name {
      padding-left: 0px;
      padding-right: 0px;
    }
  }

  @media (min-width: 768px) {
    .dropdown:hover .dropdown-menu {
      display: block;
      margin-top: 0;
      padding-bottom: 10px;
    }
    .dropdown-menu > li > a {
        line-height: 14px;
        font-size: 14px;
        margin-top:0px;
        padding-top:0px;
    }
  }

</style>

<script>

jQuery( document ).ready(function() {
  if (jQuery( document ).width() > 768) {
    jQuery(".menu_click_dropdown").removeClass("dropdown-toggle");
    jQuery(".menu_click_dropdown").removeAttr("data-toggle");
  }
});

</script>

  <!-- <div class="devbar"> -->
<div class="devbar_tmp">
   <span style="color: #922; font-weight: bold">Notice: </span>
   <!-- system message active -->
   System operational. Addition of new data supported. Images prior system downtime might not be viable yet. 

</div>

  <style>
    .devbar_tmp {
      width: 100%;
      padding: 5px;
      margin: 0px 0 0px 0px;
      text-align: center;
      background-color: #eef;
      border-bottom: 2px solid #905;
    }
  </style>


<script defer="defer">

jQuery(document).ready( function() { 

  setUpLogin();
  setUpLists();
  setUpDatasets();

});

</script>

<!-- END HEADER -->


<!-- START CONTENT WRAPPER -->
  <br/>

  <div id="wrapper" class="container-fluid">
    <div id="main_row" class="row">
      <div class="col-md-1 col-lg-1 col-xl-2">
      </div>
      <div class="col-sm-12 col-md-10 col-lg-10 col-xl-8">


<div id="cookie_popup" name="cookie_popup" style="display:none">
    <div class="container-fluid">
        <div id="cookie_popup_content_div">
            <div class="panel panel-danger">
                <div class="panel-body bg-danger">
                    <div class="row">
                        <div class="col-sm-10">
                            <p>This site uses cookies to provide logins and other features. Please accept the use of cookies by clicking Accept.</p>
                        </div>
                        <div class="col-sm-2">
                            <button class="btn btn-primary btn-sm" id="cookie_agree_submit">Accept</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<script>

    jQuery(document).ready(function(){

        jQuery('#cookie_agree_submit').click( function () {
            var expDate = new Date();
            expDate.setTime(expDate.getTime() + (50000 * 60 * 1000)); //about 30 days
            jQuery.cookie("cookies_approved", "1", { expires: expDate, path: '/' } );
            jQuery('#cookie_popup_content_div').html('<div class="panel panel-success"><div class="panel-body bg-success"><center><h3>Thank you :-)</h3></center></div></div>');
            setTimeout(function() {
                jQuery('#cookie_popup').hide('slow');
            }, 1500);
        });

        if (jQuery.cookie("cookies_approved") == 1) {
            jQuery('#cookie_popup').hide();
        } else {
            jQuery('#cookie_popup').show();
        }
    })

</script>










<div id="pagetitle"><h3 id="pagetitle_h3">Fieldmap app</h3></div>


<div class="row">
  <center class = "col-md-offset-2 col-md-8">
      <div id="trialList" class="col-sm-12 col-md-12 col-lg-12">
          <label for="select_trial_for_selection_index">Trial: </label>
          <select class="form-control" autofocus="autofocus" id="select_trial_for_selection_index"></select>
      </div><br>
  </center>
</div>
<br>
<form id="formOptions" class="form-inline" style="padding:10px;">
    <a class="btn btn-primary btn-sm" onclick="load()">Load Plots</a>
    <a class="btn btn-success btn-sm" onclick="update()">Save Geo Coordinates</a>
    <a class="btn btn-danger btn-sm" onclick="clear_geo_coordinates()">Delete Geo Coordinates</a>
</form>


<div id="map" style="width: 780px; height: 600px"></div>

<script>

    jQuery('#map').width(jQuery('#map').parent().width());
    jQuery('#map').height(jQuery('#map').parent().width()*0.7);
    document.getElementById("trialList").style.display="none";

    jQuery(document).ready(function() {
        jQuery('#ranking_formula').html("<center><i>Select a trial.</i></center>");
        get_select_box('trials', 'select_trial_for_selection_index', { 'name' : 'html_select_trial_for_selection_index', 'id' : 'html_select_trial_for_selection_index' , 'empty' : 1 });
        jQuery('#select_trial_for_selection_index').change(load);
        load();
    });
    document.getElementById("formOptions").style.display="none";

    var brapi_endpoint = "/brapi/v2";
    var auth_token;
    var require_login = "1";
    if (require_login === '1'){
        auth_token = "lhdyihlycbiqrglianthjjiospaxriqgxxzmphnyyknepxemzwfxlfkovqmpszrbcnzowps";
        if (!auth_token){
            alert("Login required to display field map");
        }
    }

    function setupBrAPI() {
        fieldMap.brapi_endpoint = brapi_endpoint;
        fieldMap.opts.brapi_pageSize = 1000;
        fieldMap.opts.brapi_auth = auth_token;
    }

    function load(){
        var trialId = getStudyId();
        var studyDbId = '3125' || trialId; // jQuery('#select_trial_for_selection_index').val();
        setupBrAPI();

        if (studyDbId){
            jQuery('#working_modal').modal('show');
            fieldMap.load(studyDbId)
                .then((value)=>{
                  if (!value) return setLocation(studyDbId);
                  else {
                    jQuery("#select_trial_for_selection_index option[value="+studyDbId+"]").attr('selected', 'selected');
                    jQuery('#working_modal').modal('hide');
                  }
                });
            document.getElementById("formOptions").style.display="block";
        } else alert("Invalid trial!");
    }

    function setLocation(studyDbId) {
        jQuery('#working_modal').modal('hide');
        jQuery("#select_trial_for_selection_index option[value="+studyDbId+"]").attr('selected', 'selected');
        fieldMap.setLocation(studyDbId).then(()=>alert("Please select an area over the field and click 'Load plots'."), ()=>alert("No geo reference for location in this trial!"));
    }

    function update() {
        setupBrAPI();
        fieldMap.update().then((resp)=>alert(resp), (resp)=>alert(resp));
    }

    var fieldMap = new BrAPIFieldmap("#map",brapi_endpoint);

    function getStudyId() {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        return urlParams.get('trial_id');
    }

    function clear_geo_coordinates() {
        if (window.confirm('Are you sure you want to delete the GPS Geo Coordinates?')) {
            jQuery.ajax({
                type: 'POST',
                url : '/ajax/breeders/trial/3125/delete_plot_gps',
                beforeSend: function() {
                    jQuery('#working_modal').modal('show');
                },
                success: function(response){
                    jQuery('#working_modal').modal('hide');
                    console.log(response);
                    if (response.error) {
                        alert(response.error);
                    }
                    if (response.success) {
                        alert('Plot GPS Geo Coordinates Deleted!');
                        location.reload();
                    }
                },
                error: function(response){
                    alert('Error saving analysis multiple!');
                }
            });
        }
    }
</script>




<!-- LOAD WORKING MODAL, LIST MODAL, AND CALENDAR MODAL AT END SO THAT THEY ALWAYS APPEAR ON TOP -->


<!-- Lists dialog -->

<div class="modal fade" id="list_dialog" name="list_dialog" tabindex="-1" role="dialog" aria-labelledby="listDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h3 class="modal-title" id="listDialog">Your Lists</h3>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="list_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="view_public_lists_button" type="button" class="btn btn-primary" >View Public Lists</button>
        <button id="close_list_dialog_button" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="public_list_dialog" name="public_list_dialog" tabindex="-1" role="dialog" aria-labelledby="publicListDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="publicListDialog">Public Lists</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="public_list_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="close_public_list_item_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="list_item_dialog" name="list_item_dialog" tabindex="-1" role="dialog" aria-labelledby="listItemDialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="listItemDialog">List Contents</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="list_item_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="close_list_item_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="validate_accession_error_display" name="validate_accession_error_display" tabindex="-1" role="dialog" aria-labelledby="listValidationErrorDialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="listValidationErrorDialog">List Validation Failed</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div id="validate_stock_add_missing_accessions_html">
                    </div>
                    <div class="well">
                    <h3>Elements not found:</h3>
                    <table>
                        <tbody></tbody>
                    </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close_missing_accessions_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="fuzzy_search_result_display" name="fuzzy_search_result_display" tabindex="-1" role="dialog" aria-labelledby="fuzzySearchResultDialog">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="fuzzySearchResultDialog">Fuzzy Search Results</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div id="fuzzy_search_result_display_html">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="download_fuzzy_search_result" type="button" class="btn btn-primary" onclick="javascript:downloadFuzzyResponse()" >Download</button>
                <button id="close_fuzzy_search_result_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="synonym_search_result_display" name="synonym_search_result_display" tabindex="-1" role="dialog" aria-labelledby="synonymSearchResultDialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="synonymSearchResultDialog">Synonym Search Results</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div id="synonym_search_result_display_html">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
              <form id="new-list-from-unames" class="form-inline" style="float:left">
                <label>Create a New List from Unique Names:</label>
                <input name="name" type="text" class="form-control" placeholder="List Name...">
                <button class="btn btn-primary" type="submit">Save</button>
              </form>
              <form class="form-inline" style="float:right">
                <button id="close_fuzzy_search_result_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="availible_seedlots_modal" name="availible_seedlots_modal" tabindex="-1" role="dialog" aria-labelledby="availible_seedlots_modal">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4>Available Seedlots</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    
<form id="available-seedlots">
  <table class="table table-hover table-bordered">
    <thead>
      <tr>
        <th rowspan="2" style="text-align: center;">Accessions</th><th colspan="7" style="text-align: center;">Seedlots</th>
      </tr>
      <tr>
        <th></th>
        <th style="text-align: center;">Breeding Program</th>
        <th style="text-align: center;">Seedlot Name</th>
        <th style="text-align: center;">Contents</th>
        <th style="text-align: center;">Seedlot Location</th>
        <th style="text-align: center;">Count</th>
        <th style="text-align: center;">Weight(g)</th>
      </tr>
    </thead>
  </table>
</form>
<script type="text/javascript">
  (function(global){
    var mainFormSelector = "#available-seedlots";
    var d3 = global.d3v4;
    var ex = {};
    ex.build_table = function(accession_names, list_type){
      jQuery('#working_modal').modal('show');
      jQuery.ajax({
        type: 'POST',
        url: '/ajax/accessions/possible_seedlots',
        data: {'names': accession_names, 'type': list_type},
        dataType: "json",
        success: function(response) {
          _build_table(accession_names,response.seedlots,response.synonyms);
          jQuery('#working_modal').modal('hide');
        },
        error: function(response) {
          jQuery('#working_modal').modal('hide');
          console.log(response);
          alert("Something went wrong in the available-seedlots AJAX call. See console for more information.")
        }
      });
    };
    ex.get_selected = function(){
      return jQuery(mainFormSelector).serializeArray();
    };
    var empty_placeholder = new Object();
    function _build_table(accession_list,seedlot_obj,synonyms){
      console.log(seedlot_obj);
      synonymized = {};
      for (var acc_uname in seedlot_obj) {
        if (seedlot_obj.hasOwnProperty(acc_uname)) {
          var name;
          if (accession_list.indexOf(acc_uname)>-1){
            name = acc_uname;
          } else {
            for (var i = 0; i < synonyms[acc_uname].length; i++) {
              if (accession_list.indexOf(synonyms[acc_uname][i])>-1){
                name = synonyms[acc_uname][i];
                break;
              }
            }
          }
          synonymized[name] = seedlot_obj[acc_uname];
        }
      }
      var row_data = accession_list.map(function(acc){
        return {'name':acc,'seedlots':synonymized[acc]?synonymized[acc]:[]};
      });
      var table = d3.select(mainFormSelector).select("table");
      var groups = table.selectAll("tbody").data(row_data,function(d){return d.name;});
      groups.exit().remove();
      var newGroups = groups.enter().append("tbody");
      var newInitRows = newGroups.append("tr");
      newInitRows.append("th").classed("as-acc-name",true)
        .style("text-align","center")
        .style("vertical-align","middle");
      var allGroups = newGroups.merge(groups);
      allGroups.style("border-top","2px solid #999")
      allGroups.select(".as-acc-name")
        .attr("rowspan",function(d){return Math.max(1,d.seedlots.length);})
        .text(function(d){return d.name;});
      var optionRows = allGroups.selectAll("tr")
        .data(function(d){
          return d.seedlots.length>0 ? d.seedlots : [empty_placeholder];
        });
      optionRows.exit().remove();
      newOptionRows = optionRows.enter().append("tr");
      allOptionRows = newOptionRows.merge(optionRows);
      var optionRowCells = allOptionRows.selectAll("td").data(function(d){
          if (d==empty_placeholder){
            return ['<input disabled type="checkbox">'," ","No Available Seedlots"," "," "," "," "]
          }
          var cells = [];
          cells.push('<input value="'+d.seedlot[0]+'" name="'+d.seedlot[0]+'" type="checkbox">');
          cells.push(d.program);
          cells.push('<a href="/breeders/seedlot/'+d.seedlot[1]+'">'+d.seedlot[0]+'</a>');
          cells.push('<a href="/stock/'+d.contents[1]+'/view">'+d.contents[0]+'</a>');
          cells.push(d.location);
          cells.push(d.count);
          cells.push(d.weight_gram);
          return cells;
        });
      var newOptionRowCells = optionRowCells.enter().append("td");
      optionRowCells.exit().remove();
      var allOptionRowCells = newOptionRowCells.merge(optionRowCells);
      allOptionRowCells.html(function(d){return d;});
      allOptionRows.select("td") //select the checkbox cells
        .style("text-align","center")
        .style("vertical-align","middle");
    };
    global.available_seedlots = ex;
  }(window));
</script>

                </div>
            </div>
            <div class="modal-footer">
              <form id="new-list-from-seedlots" class="form-inline" style="float:left">
                <label>Create a New List from Selected Seedlots:</label>
                <input name="name" type="text" class="form-control" placeholder="List Name...">
                <button class="btn btn-primary" type="submit">Save</button>
              </form>
              <form class="form-inline" style="float:right">
                <a href="/breeders/seedlots/" class="btn btn-primary">Manage Seedlots</a>
                <button id="close_availible_seedlots_modal" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </form>
            </div>
        </div>
    </div>
</div>


<!-- Datasets dialog -->

<div class="modal fade" id="dataset_dialog" name="dataset_dialog" tabindex="-1" role="dialog" aria-labelledby="datasetDialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h3 class="modal-title" id="datasetDialog">Your Datasets</h3>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="dataset_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="view_public_datasets_button" type="button" class="btn btn-primary" >View Public Datasets</button>
        <button id="close_dataset_dialog_button" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="public_dataset_dialog" name="public_dataset_dialog" tabindex="-1" role="dialog" aria-labelledby="publicListDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="publicListDialog">Public Datasets</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="public_dataset_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="close_public_dataset_item_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="dataset_item_dialog" name="dataset_item_dialog" tabindex="-1" role="dialog" aria-labelledby="datasetItemDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="datasetItemDialog">Dataset Contents</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="dataset_item_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="close_dataset_item_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="validate_accession_error_display" name="validate_accession_error_display" tabindex="-1" role="dialog" aria-labelledby="datasetValidationErrorDialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="datasetValidationErrorDialog">Dataset Validation Failed</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div id="validate_stock_add_missing_accessions_html">
                    </div>

                    <h3>Elements not found:</h3>
                    <table>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close_missing_accessions_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>  

<script>

jQuery("#dataset_item_dialog").draggable();
jQuery("#dataset_dialog").draggable();
jQuery("#public_dataset_dialog").draggable();

</script>





<style>
.fc-center h2 {
    font-size:1.4em;
 }

.fc-day-header {
    font-size: 0.9em;
}
.datepicker{z-index:1151 !important;}
</style>

<div class="modal fade" id="calendar_modal" name="calendar_modal"  tabindex="-1" role="dialog" aria-labelledby="calendarDialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="calendarDialog">Your Calendar</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id='calendar' style="background:#f9f9f9; padding:2px; width:100%">
            </div>
            <br/><br/>

            <div class="well well-sm">
                <center>
                    <p><b>Having trouble viewing events on the calendar?</b> <br/>Are you associated with the breeding program you are interested in viewing?</p>
                    <a class="btn btn-primary" id="calendar_bp_user_roles_show" href="/breeders/manage_roles/">Calendar Permissions</a>
                </center>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>



<div class="modal fade" id="day_dialog" name="day_dialog"  tabindex="-1" role="dialog" aria-labelledby="addEventDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="addEventDialog">Add New Event</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
  	  <form class="form-horizontal" role="form" name="day_dialog_add_event_form" id="day_dialog_add_event_form">
    	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Project: </label>
      	      <div class="col-sm-10">
		<select class="form-control" name="event_project_select" id="event_project_select"></select>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Event Type: </label>
      	      <div class="col-sm-10">
	        <select class="form-control" name="event_type_select" id="event_type_select" ></select>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Start: </label>
      	      <div class="col-sm-10">
	        <div class="input-group date">
    		  <input type="text" class="form-control datepicker" name="event_start" id="event_start">
    		  <div class="input-group-addon">
        	    <span class="glyphicon glyphicon-th"></span>
    		  </div>
		</div>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">End: </label>
      	      <div class="col-sm-10">
	        <div class="input-group date">
    		  <input type="text" class="form-control datepicker" name="event_end" id="event_end" placeholder="Leave Blank if Not Applicable">
    		  <div class="input-group-addon">
        	    <span class="glyphicon glyphicon-th"></span>
    		  </div>
		</div>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Description: </label>
      	      <div class="col-sm-10">
		<input class="form-control" name="event_description" id="event_description" type="text" >
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Web URL: </label>
      	      <div class="col-sm-10">
	        <div class="input-group">
		  <span class="input-group-addon" id="basic-addon2">http://www.</span>
  		  <input type="text" name="event_url" id="event_url" class="form-control" placeholder="example.com" aria-describedby="basic-addon2" />
  		</div>
              </div>
	    </div>
          </form>      
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" name="add_event_submit" id="add_event_submit">Add Event</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="event_dialog" name="event_dialog"  tabindex="-1" role="dialog" aria-labelledby="eventDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="eventDialog">Event Info</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <table class="table table-hover">
	    <thead>
	      <tr>
	        <th>Attribute</th>
	        <th>Value</th>
	      </tr>
	    </thead>
	    <tbody>
    	      <tr>
      	        <td>Project Name: </td>
      	        <td id="event_info_title"></td>
    	      <tr>
    	      <tr>
      	        <td>Start Date: </td>
      	        <td id="event_info_start_display"></td>
		<input id="event_info_start" type="hidden" />
    	      </tr>
    	      <tr>
      	        <td>End Date: </td>
      	        <td id="event_info_end_display"></td>
		<input id="event_info_end" type="hidden" />
    	      </tr>
    	      <tr>
      	        <td>Event Type: </td>
      	        <td id="event_info_property"></td>
		<input id="event_info_cvterm_id" type="hidden" />
    	      </tr>
    	      <tr>
      	        <td>Event Description: </td>
      	        <td id="event_info_description"></td>
    	      </tr>
    	      <tr>
      	        <td>Event Web URL: </td>
      	        <td id="event_info_url"></td>
		<input id="event_info_url_raw" type="hidden" />
    	      </tr>
	    </tbody>
  	  </table>
        </div>
      </div>
      <div class="modal-footer">
        <form name="event_dialog_more_info_form" id="event_dialog_more_info_form">
          <input type="hidden" name="event_project_id" id="event_project_id" />
	  <input type="hidden" name="event_project_title" id="event_project_title" />
        </form>
	<form name="event_dialog_delete_event_form" id="event_dialog_delete_event_form">
          <input type="hidden" name="event_projectprop_id" id="event_projectprop_id" />
        </form>
	<button type="button" class="btn btn-primary" name="event_edit_display" id="event_edit_display">Edit Event</button>
	<button type="button" class="btn btn-danger" name="delete_event_submit" id="delete_event_submit">Delete Event</button>
	<button type="button" class="btn btn-info" name="export_event_display" id="export_event_display">Export Event</button>
	<button type="button" class="btn btn-default" data-dismiss="modal" id="event_dialog_dismiss">Close</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="edit_event_dialog" name="edit_event_dialog" tabindex="-1" role="dialog" aria-labelledby="editEventDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="editEventDialog">Edit Event</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
  	  <form class="form-horizontal" role="form" name="edit_event_form" id="edit_event_form">
    	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Project: </label>
      	      <div class="col-sm-10">
		<select class="form-control" name="edit_event_project_select" id="edit_event_project_select"></select>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Event Type: </label>
      	      <div class="col-sm-10">
		<select class="form-control" name="edit_event_type_select" id="edit_event_type_select" ></select>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Start: </label>
      	      <div class="col-sm-10">
	        <div class="input-group date">
    		  <input type="text" class="form-control datepicker" name="edit_event_start" id="edit_event_start">
    		  <div class="input-group-addon">
        	    <span class="glyphicon glyphicon-th"></span>
    		  </div>
		</div>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">End: </label>
      	      <div class="col-sm-10">
	        <div class="input-group date">
    		  <input type="text" class="form-control datepicker" name="edit_event_end" id="edit_event_end" placeholder="Leave Blank if Not Applicable">
    		  <div class="input-group-addon">
        	    <span class="glyphicon glyphicon-th"></span>
    		  </div>
		</div>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Description: </label>
      	      <div class="col-sm-10">
		<input class="form-control" name="edit_event_description" id="edit_event_description" type="text" >
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Web URL: </label>
      	      <div class="col-sm-10">
		<input type="hidden" id="edit_event_projectprop_id" name="edit_event_projectprop_id" />
  		<input type="text" name="edit_event_url" id="edit_event_url" class="form-control" placeholder="example.com">
              </div>
	    </div>
          </form>      
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" name="edit_event_submit" id="edit_event_submit">Save</button>
      </div>
    </div>
  </div>
</div>



<script>

jQuery(document).ready(function() {

    jQuery(document).on('click', "button[name='personal_calendar_link']", function() {
        jQuery("#calendar_modal").modal("show");
    });

    //If a date is given in the url, using the query parameter currentDate=<timestamp>
    var captured = /currentDate=([^&]+)/.exec(window.location.href);
    var result = captured ? captured[1] : Date.now();
    var valid = (new Date(result)).getTime() > 0;
    if (valid && captured) {
      jQuery('#calendar').fullCalendar('gotoDate', result);
      jQuery("#calendar_modal").modal("show");
    }

    jQuery('#calendar_modal').on('shown.bs.modal', function () {
        jQuery("#calendar").fullCalendar('render');
    });

    jQuery('.datepicker').datepicker({
        format: 'yyyy-mm-dd',
    });

    var fcSources = {
        //month_view: {
        //    url: '/ajax/calendar/populate/personal/month',
        //    error: function() {window.location.replace('/solpeople/login.pl');},
        //    className: 'bg-info',
        //    textColor: '#000',
        //    borderColor: '#FFF',
        //},
        agendaWeek_view: {
            url: '/ajax/calendar/populate/personal/agendaWeek',
            error: function() {window.location.replace('/user/login');},
            className: 'bg-info',
            textColor: '#000',
            borderColor: '#FFF',
        },
        //gcal_cassbase: {
        //    googleCalendarId: 'mtm2tg9p10nvqttdjas4v0n0sg@group.calendar.google.com',
        //    className: 'bg-success',
        //    textColor: '#000',
        //    borderColor: '#FFF',
        //},
        //gcal_holidays: {
        //    googleCalendarId: 'en.usa#holiday@group.v.calendar.google.com',
        //    className: 'bg-danger',
        //    textColor: '#000',
        //    borderColor: '#FFF',
        //}
    };

    var lastView;
    jQuery('#calendar').fullCalendar({
        editable: true,
        eventLimit: true,
        lazyFetching: false,
        header: {
            left:   'title',
            center: 'month,agendaWeek',
            right:  'prevYear,prev,today,next,nextYear'
        },
        views: {
            month: {
                titleFormat: 'MMM YYYY'
            },
            agendaWeek: {
                titleFormat: 'MMM D YYYY'
            }
        },
        eventSources: [fcSources.month_view, fcSources.agendaWeek_view, fcSources.gcal_cassbase, fcSources.gcal_holidays],
        defaultView: 'month',
        googleCalendarApiKey: 'AIzaSyDHH6NGHEYJcYRcxr5mHBWKcqNlKyu-L-Q',
        eventRender: function(event, element, view) {
            if (!event.url) {
                element.find('.fc-title').html(event.title + ": " + event.property ); 
            }
        },
        dayClick: function(date, jsEvent, view) {
            jQuery.ajax({
                url: "/ajax/calendar/dayclick/personal",
                type: "GET",
                dataType: "json",
                success: function(data) {
                    jQuery("input#event_start").val(date.format());
                    var options = jQuery("#event_project_select");
                    options.empty();
                    jQuery.each(data.project_list, function () {
                        options.append(jQuery("<option />").val(this.project_id).text(this.project_name));
                    });
                    var options = jQuery("#event_type_select");
                    options.empty();
                    jQuery.each(data.projectprop_list, function () {
                        options.append(jQuery("<option />").val(this.cvterm_id).text(this.cvterm_name));
                    });
                    return;
                },
                error: function() {
                    alert("Error preparing Day dialog!");
                }
            });
            jQuery('#day_dialog').modal('show');
            // jQuery(this).css('background-color', '#A9F5F2');
        },
        eventClick: function(event) {
            if (event.url) {
                window.open(event.url);
                return false;
            } else {
                jQuery("#event_info_title").html("<a href='" + event.project_url + "'>" + event.title + "</a>");
                jQuery("#event_info_start_display").html(event.start_display);
                jQuery("#event_info_end_display").html(event.end_display);
                jQuery("input#event_info_start").val(event.start_drag);
                jQuery("input#event_info_end").val(event.end_drag);
                jQuery("input#event_info_cvterm_id").val(event.cvterm_id);
                jQuery("#event_info_property").html("<a href='" + event.cvterm_url + "'>" + event.property + "</a>");
                jQuery("#event_info_description").html(event.event_description);
                jQuery("input#event_info_url_raw").val(event.event_url);
                jQuery("#event_info_url").html("<a href='" + event.event_url + "'>" + event.event_url + "</a>");
                jQuery("input#event_project_title").val(event.title);
                jQuery("input#event_project_id").val(event.project_id);
                jQuery("input#event_projectprop_id").val(event.projectprop_id);
                jQuery('#event_dialog').modal('show');
                return false;
            }
        },
        eventMouseover: function(event, jsEvent) {
            if (event.url) {
                jQuery(this).popover({html:true, title:event.title, placement:'right', container:'body', content: 'Location: ' + event.location + '<br/>Description: ' + event.description,}).popover('show');
                return false;
            } else {
                jQuery(this).popover({html:true, title:event.title, placement:'right', container:'body', content: 'Start: ' + event.start_display + '<br/>End: ' + event.end_display + '<br/>Type: ' + event.property + '<br/>Description: ' + event.event_description + '<br/>URL: ' + event.event_url,}).popover('show');
                return false;
              }
        },
        eventMouseout: function(event) {
            jQuery(this).popover("hide");
            return false;
        },
        eventDrop: function(event, delta, revertFunc, jsEvent, ui, view) {
            if (!confirm("Are you sure about this change?")) {
                revertFunc();
                return;
            }
            jQuery.ajax({
                url: "/ajax/calendar/drag_or_resize",
                type: "POST",
                dataType: "json",
                data: ({
                    id: event.id,
                    start_drag: event.start_drag,
                    end_drag: event.end_drag,
                    description: event.event_description,
                    url: event.event_url,
                    projectprop_id: event.projectprop_id,
                    delta: delta.asSeconds(),
                    view: view.name,
                    allday: +event.allDay,
                    drag: 1,
                }),
                success: function(data) {
                    if (data.status ==3) {
                        alert("You do not have the permissions to edit this event.");
                    } else if (data.error ==1) {
                        alert("The was a problem editing this event.");
                    } else if (data.success == 1) {
                        event.start = data.start;
                        event.start_drag = data.start_drag;
                        event.start_display = data.start_display;
                        event.end = data.end;
                        event.end_drag = data.end_drag;
                        event.end_display = data.end_display;
                    }
                    jQuery('#calendar').fullCalendar('updateEvent', event);
                    return;
                },
                error: function() {
                    revertFunc();
                    alert("Error! Did Not Update Event! E.001");
                }
            });
        },
        eventResize: function(event, delta, revertFunc, jsEvent, ui, view) {
            if (!confirm("Are you sure about this change?")) {
                revertFunc();
                return;
            }
            jQuery.ajax({
                url: "/ajax/calendar/drag_or_resize",
                type: "POST",
                dataType: "json",
                data: ({
                    id: event.id,
                    start_drag: event.start_drag,
                    end_drag: event.end_drag,
                    description: event.event_description,
                    url: event.event_url,
                    projectprop_id: event.projectprop_id,
                    delta: delta.asSeconds(),
                    view: view.name,
                    allday: +event.allDay,
                    drag: 0,
                }),
                success: function(data) {
                    if (data.status ==3) {
                        alert("You do not have the permissions to edit this event.");
                    } else if (data.error ==1) {
                        alert("The was a problem editing this event.");
                    } else if (data.success == 1) {
                        event.start = data.start;
                        event.start_drag = data.start_drag;
                        event.start_display = data.start_display;
                        event.end = data.end;
                        event.end_drag = data.end_drag;
                        event.end_display = data.end_display;
                    }
                    jQuery('#calendar').fullCalendar('updateEvent', event);
                    return;
                },
                error: function() {
                    revertFunc();
                    alert("Error! Did Not Update Event! E.001");
                }
            });
        },
    });

    jQuery('button#add_event_submit').click( function(event) {
        event.preventDefault();
        jQuery.ajax({
            url: "/ajax/calendar/add_event",
            type: "POST",
            dataType: "json",
            data: jQuery('form#day_dialog_add_event_form').serialize(),
            success: function(data) {
                if(data.status == 1){
                    alert("Event Successfully Added!");
                    jQuery('#day_dialog').modal('hide');
                    jQuery('#calendar').fullCalendar('refetchEvents');
                }else if(data.status == 2){
                    alert("Error! Event Not Added! E.002");
                }else if(data.status == 3){
                    alert("You do not have the permissions to add an event.");
                }
            },
            error: function() {
                alert("Error! Event Not Added! E.001");
            }
        });
    });

    jQuery('button#delete_event_submit').click( function(event) {
        event.preventDefault();
        jQuery('button#export_event_display').popover('hide');
        if (!confirm("Are you sure you want to delete this event?")) {
            return;
        }
        jQuery.ajax({
            url: "/ajax/calendar/delete_event",
            type: "POST",
            dataType: "json",
            data: jQuery('form#event_dialog_delete_event_form').serialize(),
            success: function(data) {
                jQuery('#event_dialog').modal('hide');
                jQuery('#calendar').fullCalendar( 'refetchEvents' );
                if (data.status==3){
                    alert("You do not have the permissions to delete an event.");
                } else if (data.status==0){
                    alert("The event was not deleted!");
                }
            },
            error: function() {
                alert("Did Not Delete Event! E.001");
            }
        });
    });
    
    jQuery('button#event_edit_display').click( function(event) {
        event.preventDefault();
        jQuery.ajax({
            url: "/ajax/calendar/dayclick/personal",
            type: "GET",
            dataType: "json",
            success: function(data) {
                var options = jQuery("#edit_event_project_select");
                options.empty();
         	      jQuery.each(data.project_list, function () {
                    options.append(jQuery("<option />").val(this.project_id).text(this.project_name));
         	      });
                options.val(jQuery("input#event_project_id").val());
                var options = jQuery("#edit_event_type_select");
                options.empty();
         	      jQuery.each(data.projectprop_list, function () {
                    options.append(jQuery("<option />").val(this.cvterm_id).text(this.cvterm_name));
         	      });
                options.val(jQuery("input#event_info_cvterm_id").val());
                return;
            },
            error: function() {
                alert("Error Preparing Edit Event Dialog!");
            }
        });

      	jQuery("#edit_event_projectprop_id").val(jQuery("#event_projectprop_id").val());
      	jQuery("#edit_event_start").val(jQuery("#event_info_start").val());
      	jQuery("#edit_event_end").val(jQuery("#event_info_end").val());
      	jQuery("#edit_event_description").val(jQuery("#event_info_description").html());
      	jQuery("#edit_event_url").val(jQuery("#event_info_url_raw").val());
      	jQuery("#edit_event_dialog").modal("show");
    });

    jQuery('button#edit_event_submit').click( function(event) {
        event.preventDefault();
        if (!confirm("Are you sure you want to save this edit?")) {
            return;
        }
        jQuery.ajax({
            url: "/ajax/calendar/edit_event",
            type: "POST",
            dataType: "json",
            data: jQuery('form#edit_event_form').serialize(),
            success: function(data) {
                if (data.status == 1) {
                    jQuery('#event_dialog').modal('hide');
                    jQuery('#edit_event_dialog').modal('hide');
                    jQuery('#calendar').fullCalendar( 'refetchEvents' );
                } else if (data.status == 0) {
                    alert("Event Already Existed! Your Edit Was Not Saved!");
                } else if (data.status == 3) {
                    alert("You do not have the permissions to edit thie event.");
                }
            },
            error: function() {
                alert("Did Not Save Edit! E.001");
            }
        });
    });

    jQuery('button#export_event_display').click( function() {
    	jQuery(this).popover({html:true, title:"Export Event", placement:'right', container:'body', content: "Google Calendar: <a href='http://www.google.com/calendar' target='_blank' >Export</a>"}).popover('toggle');
    });

    jQuery('#event_dialog').on('hide.bs.modal', function (e) {
       jQuery('button#export_event_display').popover('hide');
    });

});



</script>


<!-- Login Dialog -->



<div class="modal fade" id="site_login_dialog" name="site_login_dialog" tabindex="-1" role="dialog" aria-labelledby="site_login_dialog_title">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title" id="site_login_dialog_title">Login</h3>
            </div>
            <div class="modal-body">
                <form id="login_form" name="login_form">
                    <div class="container-fluid">

                        <div class="input-group">
                            <input class="form-control" id="username" name="username" placeholder="Username" type="text" tabindex="1" />
                            <span class="input-group-btn">
                                <button id="forgot_username_modal_show" class="btn btn-default" type="button" tabindex="4">&nbsp;<span class="glyphicon glyphicon-question-sign"></span>&nbsp;</button>
                            </span>
                        </div>
                        <br />
                        <div class="input-group">
                            <input class="form-control" id="password" name="password" placeholder="Password" type="password" tabindex="2" />
                            <span class="input-group-btn">
                                <button id="reset_password_modal_show" class="btn btn-default" type="button" tabindex="5">&nbsp;<span class="glyphicon glyphicon-question-sign"></span>&nbsp;</button>
                            </span>
                        </div>
                        <br />

                        <input type="hidden" value="/" id="goto_url" name="goto_url" />

                        <div>
                            <button class="btn btn-default" id="new_user_modal_show" style="float:left" tabindex="6">New User</button>
                            <button class="btn btn-primary" id="submit_password" name="submit_password" type="submit" style="float:right" tabindex="3">Login</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="close_site_login_dialog_button" type="button" class="btn btn-default" data-dismiss="modal" style="float:left">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="site_login_forgot_username_dialog" name="site_login_forgot_username_dialog" tabindex="-1" role="dialog" aria-labelledby="site_login_forgot_username_dialog_title">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title" id="site_login_forgot_username_dialog_title">Forgot Username</h3>
            </div>
            <div class="modal-body">
                <div>
                    If you've forgotten your username, enter your email address below. An email will be sent with any account username(s) associated with your email address.
                </div>
                <br />
                <div style="white-space:nowrap">
                    <form id="forgot_username_form" name="forgot_username_form" style="white-space:nowrap">
                        <div style="white-space:nowrap; align:center">
                            <label class="textlabel">Email Address</label>
                            <input class="form-control" style="width:200px; white-space:nowrap; float:center" id="forgot_username_email" name="forgot_username_email" /><br />
                            <button type="submit" class="btn btn-primary" id="submit_forgot_username_email" style="float:center" >Get Username(s)</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close_site_login_forgot_username_dialog_button" type="button" class="btn btn-default" data-dismiss="modal" style="float:left">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="site_login_reset_password_dialog" name="site_login_reset_password_dialog" tabindex="-1" role="dialog" aria-labelledby="site_login_reset_password_dialog_title">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title" id="site_login_reset_password_dialog_title">Reset Password</h3>
            </div>
            <div class="modal-body">
                <div>
                    To reset your password, please enter your email address. A link will be sent to that address with a link that will enable you to reset your password.
                </div>
                <br />
                <div style="white-space:nowrap">
                    <form id="password_reset_form" name="password_reset_form" style="white-space:nowrap">
                        <div style="white-space:nowrap; align:center">
                            <label class="textlabel">Email Address</label>
                            <input class="form-control" style="width:200px; white-space:nowrap; float:center" id="password_reset_email" name="password_reset_email" /><br />
                            <button type="submit" class="btn btn-primary" id="submit_password_reset_email" style="float:center" >Get link</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close_site_login_reset_password_dialog_button" type="button" class="btn btn-default" data-dismiss="modal" style="float:left">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="site_login_new_user_dialog" name="site_login_new_user_dialog" tabindex="-1" role="dialog" aria-labelledby="site_login_new_user_dialog_title">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title" id="site_login_new_user_dialog_title">Create New User</h3>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-10 col-sm-offset-1">

                        <form id="new_account_form">
                            <div class="container-fluid">
                                <div class="panel panel-danger">
                                    <div class="panel-heading">Notice</div>
                                    <div class="panel-body">
                                        <ul>
                                            <li><b>Before</b> creating a new account, please check if you <b>already have an account</b> using the <a href="/search/direct_search.pl?search=directory">directory search</a>. </li>
                                            <li>A link will be emailed to you. Please click on it to activate the account.</li>
                                            <li><b>All fields are required.</b></li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">First Name: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="text" name="first_name" value="" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Last Name: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="text" name="last_name" value="" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Join Public Companies(s): </label>
                                        <div class="col-sm-9">
                                            <div id="private_companies_div"></div>
                                      </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Join Public Breeding Program(s): </label>
                                        <div class="col-sm-9">
                                            <div id="breeding_programs_div"></div>
                                      </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Username: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="text" name="username" value="" />
                                            <p class="help-block">Username must be at least 7 characters long.</p>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Password: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="password" name="password" value="" />
                                            <p class="help-block">Password must be at least 7 characters long and different from your username.</p>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Confirm Password: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="password" name="confirm_password" value="" />
                                            <p class="help-block">Password must be at least 7 characters long and different from your username.</p>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Email Address: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="text" name="email_address" value="" />
                                            <p class="help-block">An email will be sent to this address requiring you to confirm its receipt to activate your account.</p>
                                        </div>
                                    </div>

                                    <div align="right">
                                        <button class="btn btn-default btn-lg" type="reset" >Reset</button>
                                        <button class="btn btn-primary btn-lg" type="submit" name="create_account" >Create Account</button>
                                    </div>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close_site_login_new_user_dialog_button" type="button" class="btn btn-default" data-dismiss="modal" style="float:left">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
jQuery(document).ready( function() {

    jQuery("#site_login_dialog").on('shown.bs.modal', function() {
        jQuery("#username").focus();
    });

    jQuery('#forgot_username_modal_show').click(function() {
        jQuery('#site_login_forgot_username_dialog').modal('show');
    });

    jQuery('#forgot_username_form').submit(function(event) {
        event.preventDefault();
        var form_data = jQuery('#forgot_username_form').serialize();
        jQuery.ajax( {
            url: '/ajax/user/forgot_username',
            data: form_data,
            error: function(r) { alert('An error occurred! Sorry!');  },
            success: function(r) {
                if (r.error) { alert(r.error); }
                else {
                    alert(r.message);
                    jQuery('#site_login_forgot_username_dialog').modal('hide');
                }
            }
        });
    });

    jQuery('#reset_password_modal_show').click(function(){
        event.preventDefault();
        jQuery('#site_login_reset_password_dialog').modal('show');
    });

    jQuery('#password_reset_form').submit( function(event) {
        event.preventDefault();
        var form_data = jQuery('#password_reset_form').serialize();
        jQuery.ajax( {
            url: '/ajax/user/reset_password',
            data: form_data,
            error: function(r) { alert('An error occurred! Sorry!');  },
            success: function(r) {
                if (r.error) { alert(r.error); }
                else {
                    alert(r.message);
                    jQuery('#site_login_reset_password_dialog').modal('hide');
                }
            }
        });
    });

    jQuery('#new_user_modal_show').click(function(){
        event.preventDefault();
        jQuery('#site_login_new_user_dialog').modal('show');
    });
    jQuery("#site_login_new_user_dialog").on('shown.bs.modal', function() {
        get_select_box('breeding_programs', 'breeding_programs_div', { 'name': 'breeding_programs', 'id': 'breeding_programs', 'default': -1, 'multiple': 1, 'is_new_user':1 });
        get_select_box('private_companies', 'private_companies_div', { 'name': 'private_companies', 'id': 'private_companies', 'default': -1, 'multiple': 1, 'is_new_user':1 });
    });

    jQuery('#new_account_form').submit(function(event) {
        event.preventDefault();
        var form_data = jQuery('#new_account_form').serialize();
        //alert(JSON.stringify(form_data));
        jQuery.ajax({
            url: '/ajax/user/new',
            beforeSend: function(){
                jQuery('#working_modal').modal('show');
            },
            data: form_data,
            success: function(r) {
                jQuery('#working_modal').modal('hide');
                console.log(r);
                if (r.error) { alert(r.error); }
                else {
                    let message = r.message || 'New account added. Check your email for the confirmation link - you must confirm your account before you can login.';
                    alert(message);
                    jQuery('#site_login_new_user_dialog').modal('hide');
                    jQuery('#site_login_dialog').modal('hide');
                }
            }
        });
    });

    jQuery("#username, #password").keydown(function(event) {
        var key = event.keyCode ? event.keyCode : event.which;
        if ( key === 13 ) {
            jQuery("#login_form").submit();
            event.preventDefault();
        }
    });
    jQuery('#login_form').submit( function(event) {
        event.preventDefault();
        var form_data = jQuery('#login_form').serialize();
        if (!jQuery('#username').val() || !jQuery('#password').val()) {
            alert('Please enter a username and password');
            return;
        }
        jQuery.ajax( {
            url: '/ajax/user/login',
            data: form_data,
            error: function(r) { alert('An error occurred! Sorry!');  },
            success: function(r) {
                if (r.error) {
                    alert(r.error);
                    return;
                }
                if (r.goto_url && r.goto_url !== "" ) {
                    location.href=r.goto_url;
                }
                else {
                    location.href='/';
                }
            }
        });
    });

    // Display New User Dialog if `new_user` query param set
    url = new URL(window.location.href);
    if ( url.searchParams.get('new_user') ) {
        jQuery('#site_login_new_user_dialog').modal('show');
    }
});
</script>


<!-- End login dialog -->


<!--
<div id="working" style="text-align : center;">
  <img src="/img/wheel.gif" />
  <div id="working_msg"></div>
</div>
-->

<div class="modal fade" id="working_modal" name="working_modal" tabindex="-1" role="dialog" aria-labelledby="workingModalDialog" data-controls-modal="your_div_id" data-backdrop="static" data-keyboard="false" href="#">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
	      <center>
          <h4 class="modal-title" id="workingModalDialog">Working</h4>
	      </center>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	        <center>
	          <img src="/img/wheel.gif" />
    	      <div id="working_msg"></div>
	        </center>
          <div id="working_modal_progress_div" style="display: none">
            <br /><br />
            <div class="progress">
              <div id="working_modal_progress" class="progress-bar progress-bar-success" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" style="width: 0"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer"></div>
    </div>
  </div>
</div>

<div class="modal fade" id="progress_modal" name="progress_modal" tabindex="-1" role="dialog" aria-labelledby="progressModalDialog" data-controls-modal="your_div_id" data-backdrop="static" data-keyboard="false" href="#">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
	<center>
          <h4 class="modal-title" id="progressModalDialog">Progress</h4>
	</center>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <center>
		  <div id="progress_msg"></div>
		  <div class="progress">
		    <div id="progress_bar" class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
		  </div>
	  </center>
	  <ul id="current_task" class="form-group list-unstyled"></ul>
        </div>
      </div>
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>

<!-- END CONTENT WRAPPER -->

</div>
<div class="col-md-1 col-lg-1 col-xl-2">
</div>
</div>
</div>


<!-- END CONTENT WRAPPER -->

      </div>
      <div class="col-sm-1 col-md-1 col-lg-2">
      </div>
    </div>
  </div>

<!-- BEGIN FOOTER -->
<br/>
<!-- div id="pagefooter" class="navbar navbar-default" style="margin-bottom:0px;">


</div -->

<div class="well well-sm">

    <div class="panel panel-default">
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-1">
                </div>
                <div class="col-sm-2">
                    <center>
                        <a href="https://btiscience.org"><img src="/static/documents/img/bti_logo_2016.png" width="140" /></a>
                    </center>
                </div>
                <div class="col-sm-2">
                    <center>
                        <a href="https://foundationfar.org/"><img src="/static/documents/img/FFARlogo.jpg" width="140" /></a>
                    </center>
                </div>
                <div class="col-sm-2">
                    <center>
                        <a href="https://nifa.usda.gov/"><img src="/static/documents/img/USDANIFAlogo.png" width="140" /></a>
                    </center>
                </div>
                <div class="col-sm-2">
                    <center>
                        <a href="https://www.cornell.edu/"><img src="/static/documents/img/cu_logo.png" width="200" /></a>
                    </center>
                </div>
                <div class="col-sm-2">
                    <center>
                        <a href="https://www.iowacorn.org/iowa-corn-home/"><img src="/static/documents/img/IowaCornBoardlogo.png" width="200" /></a>
                    </center>
                </div>
                <div class="col-sm-1">
                </div>
            </div>
        </div>
    </div>

    <hr>

    <center>
        <p>Please cite <a href="https://acsess.onlinelibrary.wiley.com/doi/full/10.1002/ppj2.20004">ImageBreed</a> if you find this software useful in your research.</p>
        <p>Please show your support for this open-source software by <a href="https://www.patreon.com/nmorales">subscribing</a> or <a href="https://www.buymeacoffee.com/imagebreed" target=_blank><img src="/static/img/imagebreed/imagebreedbuyacoffee.png" width="180" alt="Buy ImageBreed a Coffee" title="Buy ImageBreed a Coffee"></a></p>
        <a href="https://www.youtube.com/channel/UC1FYqz6kz9pE72sSHhG7ocQ" target=_blank><img src="/static/img/imagebreed/imagebreed_tutorials.png" width="180" alt="Watch ImageBreed Tutorials" title="Watch ImageBreed Tutorials"></a>
        <hr>
        <p><small><b>ImageBreed v10.1</b></small></p>
    </center>
</div>

</body>
</html>


<style>
.ui-autocomplete { z-index:2147483647; }
</style>
