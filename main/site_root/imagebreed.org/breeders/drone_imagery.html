


<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<head>
  <link rel="stylesheet" type="text/css" href="/css/new_sgn.css" />
<link rel="stylesheet" type="text/css" href="/css/jquery-sgn-theme/jquery-ui-1.10.3.custom.css" />
<link rel="stylesheet" type="text/css" href="/css/jstree/themes/default/style.min.css" />
<link rel="stylesheet" type="text/css" href="/css/fullcalendar.min.css" />
<link rel="stylesheet" type="text/css" href="/documents/inc/datatables/jquery.dataTables.css" />
<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="/css/bootstrap-toggle/bootstrap-toggle.min.css" />
<link rel="stylesheet" type="text/css" href="/css/ladda-themeless.min.css" />
<link rel="stylesheet" type="text/css" href="/css/daterangepicker.css" />
<link rel="stylesheet" type="text/css" href="/css/buttons/buttons.bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="/css/buttons/buttons.dataTables.css" />
<link rel="stylesheet" type="text/css" href="/css/bootstrap3-xl-class.css" />
<link rel="stylesheet" type="text/css" href="/css/bootstrap-select.min.css" />
<link rel="stylesheet" type="text/css" href="/css/x3dom.css" />
<link rel="stylesheet" type="text/css" href="/css/datepicker.css" />

<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- <link rel="stylesheet" href="/css/sgn.css" type="text/css" /> -->
  <link rel="search" type="application/opensearchdescription+xml" title="Search Database" href="/documents/sgn_sol_search.xml" />
  

  <!-- <link rel="stylesheet" href="/documents/inc/colorbox/colorbox.css" type="text/css" /> -->
  <!-- <link rel="stylesheet" type="text/css" href="/css/dataTables.bootstrap.min.css"> -->

<script language="javascript" type="text/javascript">
   JSAN = {};
   JSAN.use = function() {};
   MochiKit = {__export__: false};
</script>



<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- file needed to add more styles and js libraries to sites dependent on SGN -->
  <title>ImageBreed</title>

  <!--<link href='/css/nextgen-cassava-base.css' rel='stylesheet' type='text/css'>-->
  <link href='/css/nextgen-cassava-base-new.css' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/documents/inc/jquery-cassava-theme/jquery-ui-1.10.3.custom.css" type="text/css" />

  <!--<link href='http://fonts.googleapis.com/css?family=Lato:300' rel='stylesheet' type='text/css'>-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EHE4JHN9L4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EHE4JHN9L4');
</script>




<script src="/js/legacy/jquery.js" type="text/javascript"></script>
<script src="/js/legacy/jqueryui.js" type="text/javascript"></script>
<script src="/js/legacy/sgn.js" type="text/javascript"></script>
<script src="/js/legacy/jquery/simpletooltip.js" type="text/javascript"></script>
<script src="/js/legacy/jquery/cookie.js" type="text/javascript"></script>
<script src="/js/legacy/jquery/dataTables-min.js" type="text/javascript"></script>
<script src="/js/legacy/jquerymigrate.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Dataset.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Page/FormattingHelpers.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Page/Toolbar.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/List.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Login.js" type="text/javascript"></script>
<script src="/js/legacy/bootstrap_min.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/BreedersToolbox/HTMLSelect03152022.js" type="text/javascript"></script>
<script src="/js/legacy/bootstrap-toggle_min.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/BreederSearch03152022.js" type="text/javascript"></script>
<script src="/js/legacy/MochiKit/Base.js" type="text/javascript"></script>
<script src="/js/legacy/MochiKit/Logging.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Effects.js" type="text/javascript"></script>
<script src="/js/legacy/jquery/iframe-post-form.js" type="text/javascript"></script>
<script src="/js/legacy/d3/d3v4Min.js" type="text/javascript"></script>
<script src="/js/legacy/opencv/opencv.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/ManageDroneImagery09072022.js" type="text/javascript"></script>
<script src="/js/legacy/jquery/colorbox.js" type="text/javascript"></script>
<script src="/js/legacy/thickbox.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Stock03152022.js" type="text/javascript"></script>
<script src="/js/legacy/workflow.js" type="text/javascript"></script>
<script src="/js/legacy/CXGN/Trial03152022.js" type="text/javascript"></script>
<script src="/js/legacy/moment_min.js" type="text/javascript"></script>
<script src="/js/legacy/daterangepicker.js" type="text/javascript"></script>
<script src="/js/legacy/calendar/moment_min.js" type="text/javascript"></script>
<script src="/js/legacy/calendar/fullcalendar_min.js" type="text/javascript"></script>
<script src="/js/legacy/jquery/dataTables.js" type="text/javascript"></script>
<script src="/js/legacy/calendar/fullcalendar_gcal_min.js" type="text/javascript"></script>
<script src="/js/legacy/calendar/bootstrap_datepicker_min.js" type="text/javascript"></script>
<script src="/js/build/runtime.min.js" type="text/javascript"></script>
<script src="/js/build/chunk.6c8fa570814c44152553.js" type="text/javascript"></script>
<script src="/js/build/runtime.min.js" type="text/javascript"></script>
<script src="/js/build/chunk.6c8fa570814c44152553.js" type="text/javascript"></script>
<script src="/js/build/runtime.min.js" type="text/javascript"></script>
<script src="/js/build/chunk.6c8fa570814c44152553.js" type="text/javascript"></script>
<script src="/js/build/runtime.min.js" type="text/javascript"></script>
<script src="/js/build/chunk.6c8fa570814c44152553.js" type="text/javascript"></script>
<script src="/js/build/runtime.min.js" type="text/javascript"></script>
<script src="/js/build/chunk.6c8fa570814c44152553.js" type="text/javascript"></script>

  
</head>

<body>

<div id="outercontainer">
  <a name="top"></a>

  <div id="clone_shoppingcart" style="display: none">
    <span id="clone_cart_count"></span> clone(s) in cart (<a class="toplink" style="text-decoration: underline" href="/search/clone-order.pl">order</a>)
  </div>

  <div class="modal fade" id="nav_dialog" role="dialog">
  <div class="modal-dialog modal-sm">

    <!-- Modal content-->
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 class="modal-title">Old browser version detected</h4>
      <!-- <h4 class="modal-title">This site is best viewed with:</h4> -->
    </div>

    <div class="modal-body">
    	<p>
        This site is optimized for modern web browsers<br>
        <center>
        <a href="http://browsehappy.com" target="_blank" class="footer">
          Please upgrade your browser<br>
          <img src="https://km.support.apple.com/kb/image.jsp?productid=PL165" width="25">
          <img src="/documents/img/o-logo.jpg" width="25">
          <img src="https://c.s-microsoft.com/en-us/CMSImages/ie_symbol_clr_56x56.png?version=73aa5bf1-0743-11e7-8f71-718675c983bf" width="25">
        </a>
        </center>
      </p>
        Sorry!, some features may not work in outdated browsers

    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    </div>
  </div>

  </div>
</div>

<script>

  var str = navigator.userAgent;
  var ie = /MSIE/.test(str);
  // alert(navigator.userAgent);

  jQuery(document).ready(function ($) {
    if(ie) {
      $('#nav_dialog').modal("show");
    }
  });

</script>

  

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
<a class="navbar-brand" href="/" style="padding:16px 10px">

<img id="sgnlogo"
src="/static/img/imagebreed/imagebreedlogo_noBackground.png" width="60" alt="ImageBreed Home" title="ImageBreed Home"></a>

<!--a class="navbar-brand sgn_brand_name" href="/">ImageBreed</a-->

      <!--& toolbar/buymeacoffee.mas &-->
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li class="dropdown"><a class="menu_click_dropdown dropdown-toggle" data-toggle="dropdown">Search</a>
  <ul class="dropdown-menu">
    <li><a href="/breeders/search">Wizard</a></li>
    <li><a href="/search/phenotypes/stock">Accessions and Plots</a></li>
    <li><a href="/search/organisms">Organisms</a></li>
    <li><a href="/search/cross">Progenies and Crosses</a></li>
    <li><a href="/search/trials">Field Trials</a></li>
    <li><a href="/search/genotyping_trials">Genotyping Plates</a></li>
    <li><a href="/search/genotyping_data_projects">Genotyping Data Projects</a></li>
    <li><a href="/search/genotyping_protocols">Genotyping Protocols</a></li>
    <li><a href="/search/traits">Traits</a></li>
    <!--<li><a href="/search/markers">Markers</a></li>-->
    <li><a href="/search/images">Images</a></li>
    <li><a href="/search/people">People</a></li>
    <!--li><a href="/help/faq.pl">FAQ</a></li-->
  </ul>
</li>

        <li class="dropdown"><a class="menu_click_dropdown dropdown-toggle" data-toggle="dropdown" href="/breeders/home">Manage</a>

  <ul class="dropdown-menu">
    <li role="separator" class="divider"></li>
    <li><a href="/breeders/drone_imagery">Aerial Imagery</a></li>
    <li><a href="/breeders/drone_rover">Ground Rover</a></li>
    <li role="separator" class="divider"></li>

    <li><a href="/breeders/companies/">Companies</a></li>
    <li><a href="/breeders/manage_roles/">User Roles</a></li>
    <li><a href="/breeders/manage_programs/">Breeding Programs</a></li>
    <li><a href="/breeders/locations">Locations</a></li>
    <li><a href="/breeders/accessions/">Accessions</a></li>
    <li><a href="/breeders/seedlots/">Seed Lots</a></li>
    <li><a href="/breeders/crosses/">Crosses</a></li>
    <li><a href="/breeders/trials/">Field Trials</a></li>
    <li><a href="/breeders/genotyping/">Genotyping Plates</a></li>
    <li><a href="/breeders/genotyping/">Genotyping (VCF, GRM, SSR)</a></li>
    <li><a href="/breeders/sequence_metadata/">Genomic Sequence Metadata</a></li>
    <li><a href="/breeders/markers/">Marker Sets</a></li>
    <li><a href="/breeders/samples/">Tissue Samples</a></li>
    <li><a href="/fieldbook">Field Book App</a></li>
    <li><a href="/breeders/phenotyping/">Phenotyping</a></li>
    <!-- li><a href="/barcode">Barcodes</a></li -->
    <li><a href="/tools/label_designer">Label Designer</a></li>
    <li><a href="/breeders/nirs">NIRS Spectroscopy</a></li>
    <li><a href="/breeders/download">Download</a></li>
    <li><a href="/breeders/upload">Upload</a></li>
    <!-- li><a href="/breeders/odk">ODK Data Collection</a></li -->
    <li><a href="/breeders/identifier_generation">Identifier Generation</a></li>
    <li><a href="/breeders/file_share_dump">File Share</a></li>
    <li role="separator" class="divider"></li>
    <li><a href="/order/stocks/view">Order Stocks</a></li>
  </ul>
</li>

        <li class="dropdown"><a class="menu_click_dropdown dropdown-toggle" data-toggle="dropdown">Analyze</a>
<!-- <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Genomes<span class="caret"></span></a> -->
  <ul class="dropdown-menu">
    <li class="dropdown-header">Breeder Tools</li>
    <li><a href="/analyses">Analyses</a></li>
    <li><a href="/analytics_protocols">Analytics Results</a></li>
    <li><a href="/selection/index">Selection Index</a></li>
    <li><a href="/noaa_ncdc_analysis">NOAA Weather</a></li>

    <!--li><a href="/solgs/search">Genomic Selection</a></li>
    <li><a href="/pca/analysis">Population Structure</a></li>
    <li><a href="/cluster/analysis">Clustering</a></li-->

    <li><a href="/accession_usage">Accession Usage</a></li>
    <li><a href="/tools/graphicalfiltering">Graphical Filtering</a></li>

    <li><a href="/tools/trial/comparison/list">Compare Trials</a></li>
    <li><a href="/tools/boxplotter">BoxPlotter Tool</a></li>

    <!--li><a href="/tools/stability">Stability AMMI and GGE</a></li-->
    <!--li><a href="/tools/heritability">Heritability</a></li-->

    <li><a href="/tools/image_analysis">Image Analysis</a></li>

    <!--li role="separator" class="divider"></li>
    <li class="dropdown-header">Sequence Analysis</li>
    <li><a href="/tools/blast/">BLAST</a></li-->

    <li role="separator" class="divider"></li>
    <li class="dropdown-header">Other</li>
    <li><a href="/tools/onto/">Ontology Browser</a></li>
    <li><a href="/tools/compose">Compose a New Trait</a></li>
  </ul>
</li>

        <li class="dropdown"><a class="menu_click_dropdown dropdown-toggle" data-toggle="dropdown">About</a>
<!-- <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">About Us<span class="caret"></span></a> -->
  <ul class="dropdown-menu">

    <li><a href="https://www.youtube.com/channel/UC1FYqz6kz9pE72sSHhG7ocQ" >Video Tutorials</a></li>
    <li><a href="https://nickmorales.github.io/imagebreed/" >Manual</a></li>

    <li role="separator" class="divider"></li>

    <li><a href="/contact/form">Contact</a></li>
    <li><a href="/forum/topics.pl">Forum</a></li>

    <li role="separator" class="divider"></li>

    <li><a href="https://www.patreon.com/nmorales" >Support ImageBreed on Patreon</a></li>
    <li><a href="https://www.buymeacoffee.com/imagebreed" >Buy ImageBreed a Coffee</a></li>

  </ul>
</li>

      </ul>
      <ul class="nav navbar-nav navbar-right">
        
<li style="height:100%">
  <form id="toolbar_search_form" class="navbar-form navbar-left form-inline" role="search" action="/search/quick_search.pl" style="padding-right: 2px;height:100%">
    <div class="input-group">
      <span id="advanced_search_li" class="btn btn-default input-group-addon" style="display:none" onclick="location.href='/search';">Advanced</span>
      <input id="quick_search_input" style="display:none;" type="text" name="term" class="form-control" placeholder="">
      <span id="quick_search_icon" class="btn btn-default" style="height:34px; font-size:16; padding-top:8px;" title="Search"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></span>
    </div>
  </form>
</li>

<script defer="defer">
  jQuery(document).ready(function() {
    
    jQuery('#quick_search_icon').click(function () {
      
      //open the search box
      if (jQuery('#quick_search_input').attr("placeholder") == "") {
        jQuery('#quick_search_input').attr("placeholder","Search");
        
        jQuery('#quick_search_icon').addClass("input-group-addon");
        
        jQuery('#advanced_search_li').css("display","table-cell");
        jQuery('#quick_search_input').css("display","table-cell");
        jQuery('#quick_search_input').css("width","0px");
        jQuery('#quick_search_input').animate({
          width: '150px'
        }, 400);

      }
      else {
        //close the search box if empty
        var search_val = jQuery('#quick_search_input').val();
        // alert("search_val: "+search_val);

        if (search_val) {
          jQuery('#toolbar_search_form').submit();
        }
        else {

          jQuery('#quick_search_input').animate({
            width: '0px'
          }, 400, function(){
            // callback function
            jQuery('#quick_search_input').attr("placeholder","");
            jQuery('#quick_search_input').css("display","none");
            jQuery('#advanced_search_li').css("display","none");
            jQuery('#quick_search_icon').removeClass("input-group-addon");
          });

        } //close search_val else
      }
    });
    
  });
</script>
        
<span id="login_button_html_div" style="white-space:nowrap;width:200;float:right"><button class="btn btn-primary disabled" type="button" style="margin: 7px 7px 0px 0px">Login</button></span>


<script>


  function update_login_button() { 

    jQuery.ajax( { 
      url: '/ajax/user/login_button_html',
      error: function(r) { alert('An error occurred'); },
      success: function(r) { 
        if (r.error) { alert(r.error); }
        else { 
          jQuery('#login_button_html_div').html(r.html);

          if (0 == 1 && !r.logged_in) {
            jQuery('#site_login_dialog').modal({backdrop: 'static', keyboard: false});
          }
        }
      }
    });
  }
        
  function logout() { 
    var answer = confirm("Are you sure you want to log out?");

    if (answer === true) { 
      jQuery.ajax( { 
        url: '/ajax/user/logout',
        error: function(r) { alert('An error occurred'); },
        success: function(r) { 
          if (r.error) { alert(r.error); }
          else { 
            location.reload();
          }
        }
      });
    }
  }
  
jQuery(document).ready(function () {

  update_login_button();
   
  jQuery(document).on('click', 'button[name="site_login_button"]', function(event) 
  { 
    jQuery('#site_login_dialog').modal("show");
  });
});
  
</script>

      </ul>
    </div>
  </div>
</nav>
<br>

<style>
  li {
    margin-bottom:0;
  }
  body {
    padding-top: 30px;
  }

  @media (min-width: 0px) and (max-width: 768px) {
    body {
      padding-top: 30px;
    }
  }

  @media (min-width: 768px) and (max-width: 856px) {
    body {
      padding-top: 90px;
    }
  }

  @media (max-width: 768px) {
    .sgn_brand_name {
      padding-left: 0px;
      padding-right: 0px;
    }
    .sgn_brand_name {
      padding-left: 0px;
      padding-right: 0px;
    }
  }

  @media (min-width: 768px) {
    .dropdown:hover .dropdown-menu {
      display: block;
      margin-top: 0;
      padding-bottom: 10px;
    }
    .dropdown-menu > li > a {
        line-height: 14px;
        font-size: 14px;
        margin-top:0px;
        padding-top:0px;
    }
  }

</style>

<script>

jQuery( document ).ready(function() {
  if (jQuery( document ).width() > 768) {
    jQuery(".menu_click_dropdown").removeClass("dropdown-toggle");
    jQuery(".menu_click_dropdown").removeAttr("data-toggle");
  }
});

</script>

  <!-- <div class="devbar"> -->
<div class="devbar_tmp">
   <span style="color: #922; font-weight: bold">Notice: </span>
   <!-- system message active -->
   System operational. Addition of new data supported. Images prior system downtime might not be viable yet. 

</div>

  <style>
    .devbar_tmp {
      width: 100%;
      padding: 5px;
      margin: 0px 0 0px 0px;
      text-align: center;
      background-color: #eef;
      border-bottom: 2px solid #905;
    }
  </style>


<script defer="defer">

jQuery(document).ready( function() { 

  setUpLogin();
  setUpLists();
  setUpDatasets();

});

</script>

<!-- END HEADER -->


<!-- START CONTENT WRAPPER -->
  <br/>

  <div id="wrapper" class="container-fluid">
    <div id="main_row" class="row">
      <div class="col-md-1 col-lg-1 col-xl-2">
      </div>
      <div class="col-sm-12 col-md-10 col-lg-10 col-xl-8">


<div id="cookie_popup" name="cookie_popup" style="display:none">
    <div class="container-fluid">
        <div id="cookie_popup_content_div">
            <div class="panel panel-danger">
                <div class="panel-body bg-danger">
                    <div class="row">
                        <div class="col-sm-10">
                            <p>This site uses cookies to provide logins and other features. Please accept the use of cookies by clicking Accept.</p>
                        </div>
                        <div class="col-sm-2">
                            <button class="btn btn-primary btn-sm" id="cookie_agree_submit">Accept</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<script>

    jQuery(document).ready(function(){

        jQuery('#cookie_agree_submit').click( function () {
            var expDate = new Date();
            expDate.setTime(expDate.getTime() + (50000 * 60 * 1000)); //about 30 days
            jQuery.cookie("cookies_approved", "1", { expires: expDate, path: '/' } );
            jQuery('#cookie_popup_content_div').html('<div class="panel panel-success"><div class="panel-body bg-success"><center><h3>Thank you :-)</h3></center></div></div>');
            setTimeout(function() {
                jQuery('#cookie_popup').hide('slow');
            }, 1500);
        });

        if (jQuery.cookie("cookies_approved") == 1) {
            jQuery('#cookie_popup').hide();
        } else {
            jQuery('#cookie_popup').show();
        }
    })

</script>







<style>
.straightLine, .hrLine{
  position: absolute;
  background-color: red;
  transition: transform .05s ease-in-out;
}
</style>

<div id="manage_drone_imagery_top_div">

    <div id="pagetitle"><h3 id="pagetitle_h3">Manage Aerial Imagery</h3></div>


    <div class="well well-sm">
        <center>
            <h4>Please use the Brave or Chrome web-browsers to view these image tools. In the future, other browsers may be supported.</h4>
            <h4><a href="https://www.youtube.com/channel/UC1FYqz6kz9pE72sSHhG7ocQ">Watch tutorial videos from processing aerial imaging events</a>.</h4>
        </center>
    </div>


    


<div class="row">
    <div class="col-sm-12">
        <div class="well">
            <div class="row">
                <div class="col-sm-0">
                    <span style="font-size:3.5em;" class=""></span>
                </div>
                <div class="col-sm-12">

                    


<a class="info_section_anchor" name="aerial_imagery"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('manage_drone_imagery_main_offswitch', 'manage_drone_imagery_main_onswitch');
		Effects.hideElement('manage_drone_imagery_main_content');
		
		return false;"
		id="manage_drone_imagery_main_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" /><h4 style='display:inline'>Aerial Imagery</h4></a>
	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('manage_drone_imagery_main_onswitch', 'manage_drone_imagery_main_offswitch');
		Effects.showElement('manage_drone_imagery_main_content');
		
		return false;"
		id="manage_drone_imagery_main_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" /><h4 style='display:inline'>Aerial Imagery</h4></a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Please cite <a href="https://acsess.onlinelibrary.wiley.com/doi/full/10.1002/ppj2.20004" target=_blank>ImageBreed</a> if you find any of these tools useful&nbsp;</td></tr></table>

<span id="manage_drone_imagery_main_content" style=""><div class="infosectioncontent" >


                        <div class="panel panel-default">
                            <div class="panel-body">
                                <button class='btn btn-primary' style='margin:3px' id='upload_drone_imagery_link'>Upload Imagery</button><button class='btn btn-success' style='margin:3px' id='drone_imagery_analytics_link'>Analytics</button><button class='btn btn-default' style='margin:3px' id='drone_imagery_view_imaging_vehicles_link'>Imaging Vehicles</button><button class='btn btn-default' style='margin:3px' id='download_phenotypes_drone_imagery_link'>Download Image-Phenotype File</button><button class='btn btn-default' style='margin:3px' id='export_drone_imagery_events'>Export Imaging Events</button>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-body">























                                
<table class="table table-bordered table-hover" id="raw_drone_image_datatable">
    <thead>
        <tr>
            <th>Field Trials -> Imaging Events</th>
        </tr>
    </thead>
</table>

<script>
jQuery(document).ready(function(){

    var raw_drone_imagery_table = jQuery('#raw_drone_image_datatable').DataTable( {
        'ajax': '/api/drone_imagery/raw_drone_imagery_top',
        'paging': false
    });

    raw_drone_imagery_table.on( 'draw', function () {
        jQuery.ajax({
            url : '/api/drone_imagery/raw_drone_imagery_plot_image_count',
            success: function(response){
                //console.log(response);
                jQuery('div[name="drone_run_band_total_plot_image_div"]').html('<div class="panel-group"><div class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><a data-toggle="collapse" >No Plot Images Saved</a></h4></div></div></div>');
                for (drone_run_project_id in response.data) {
                    var html = '<div class="panel-group" id="drone_run_plot_polygons_table_accordion_'+drone_run_project_id+'" ><div class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#drone_run_plot_polygons_table_accordion_'+drone_run_project_id+'" href="#drone_run_plot_polygons_table_accordion_one_'+drone_run_project_id+'" >View Plot Images Summary ('+response.data[drone_run_project_id]['total_plot_image_count']+')</a></h4></div><div id="drone_run_plot_polygons_table_accordion_one_'+drone_run_project_id+'" class="panel-collapse collapse"><div class="panel-body">';
                    delete response.data[drone_run_project_id]['total_plot_image_count'];
                    html = html + "<table class='table table-bordered table-sm'><thead><tr><th>Plot Image Type</th><th>Count</th></tr></thead><tbody>";
                    for (plot_image_type in response.data[drone_run_project_id]) {
                        html = html + "<tr><td>" + plot_image_type + "</td><td>" + response.data[drone_run_project_id][plot_image_type] + "</td></tr>";
                    }
                    html = html + "</tbody></table>";
                    html = html + '</div></div></div></div>';
                    jQuery('#drone_run_band_total_plot_image_count_div_'+drone_run_project_id).html(html);
                }
            },
            error: function(response){
                //alert('Error getting plot image count!')
            }
        });
    });

    jQuery(document).on('click', 'span[name="drone_image_remove"]', function(){
        var image_id = jQuery(this).data('image_id');
        if (confirm("Are you sure you want to remove this image?")) {
            jQuery.ajax({
                url : '/api/drone_imagery/remove_image?image_id='+image_id,
                beforeSend: function() {
                    jQuery("#working_modal").modal("show");
                },
                success: function(response){
                    console.log(response);
                    jQuery("#working_modal").modal("hide");
                    location.reload();
                },
                error: function(response){
                    jQuery("#working_modal").modal("hide");
                    alert('Error removing drone image!')
                }
            });
        }
    });

    jQuery(document).on('click', 'button[name="drone_runs_trial_view_geo_layout"]', function () {
        var trial_id = jQuery(this).data('field_trial_id');
        window.open('/tools/fieldmap?trial_id=' + trial_id ,'_blank');
    });

});

function manageDroneImageryDroneRunBandDisplay(project_drone_run_band_id){
    jQuery.ajax({
        url : '/api/drone_imagery/raw_drone_imagery_drone_run_band?drone_run_band_project_id='+project_drone_run_band_id,
        beforeSend: function() {
            jQuery("#working_modal").modal("show");
        },
        success: function(response){
            console.log(response);
            jQuery('#drone_run_band_accordian_drone_run_band_div_'+project_drone_run_band_id).html(response.data[0]);
            jQuery("#working_modal").modal("hide");
        },
        error: function(response){
            jQuery("#working_modal").modal("hide");
            alert('Error getting drone run band summary images!');
        }
    });
}

</script>









                            </div>
                        </div>
                    
</div>
</span>


                </div>
            </div>
        </div>
    </div>
</div>


</div>


<div class="modal fade" id="drone_imagery_analytics_dialog" name="drone_imagery_analytics_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryAnalyticsDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryAnalyticsDialog">Perform Analytics on Aerial Image Phenotypes</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            






<style media="screen">
  ol.workflow-prog{
    display: table;
    table-layout: fixed;
    list-style-type: none;
    text-align: center;
    margin: 0 0 1em 0;
    padding: 0;
    width: 100%;
    counter-reset: step;
    font-size: 16px;
  }
  
  ol.workflow-prog>li{
    display: table-cell;
    text-align: center;
    color: black;
    position: relative;
    font-size: 11px;
  }
  
  ol.workflow-prog>li>div.workflow-title{
    display: inline-block;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  ol.workflow-prog>li::after{
    font-size: 14px;
    width: 30px;
    height: 30px;
    content: counter(step);
    counter-increment: step;
    line-height: 1em;
    padding-top: 0.3em;
    border: 4px solid;
    display: block;
    text-align: center;
    position: relative;
    border-radius: 50%;
    margin: 0 auto 0 auto;
    background: white;
    border-color: #bbb;
    color: #bbb;
  }
  
  ol.workflow-prog>li.workflow-complete::after{
    border-color: #5fba7d;
    color: white;
    background: #5fba7d;
  }
  
  @keyframes pend_blink {
    0% {}
    50% {
      border-color: white;
    }
    100% {}
  }
  
  ol.workflow-prog>li.workflow-pending::after{
    animation: pend_blink 2s linear infinite;
  }
  
  ol.workflow-prog>li.workflow-skipped::after{
    border-color: #eeb700;
    background: #eeb700;
    color: white;
  }
  
  ol.workflow-prog>li.workflow-focus::after{
    border-color: #5fba7d;
    background: white;
    color: #5fba7d;
  }
  
  
  ol.workflow-prog>li::before {
    width: 100%;
    height: 2px;
    content: '';
    display: block;
    position: relative;
    top: 34px;
    margin-left: 50%;
    background-color: #bbb;
  }
  
  ol.workflow-prog>li:last-of-type::before {
    width: 0%;
  }
  
  ol.workflow-prog>li.workflow-complete::before{
    background: #5fba7d;
  }
  
  ol.workflow-content{
    display: block;
    table-layout: fixed;
    list-style-type: none;
    margin: 0;
    padding: 0;
    width: 100%;
  }
  
  ol.workflow-content>li{
    width: 100%;
    position: relative;
    display: none;
  }
  
  ol.workflow-content>li.workflow-focus{
    display: block;
  }  
  
  div.workflow-pending-message{
    display: none;
  }
  div.workflow-complete-message{
    display: none;
  }
  div.workflow-message-show{
    display: block;
  }
  
</style>



                
    
                
    
                
    
            
<div id="drone_imagery_analytics_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Field Trial</div></li>
      <li><div class="workflow-title">Analytics Reporting</div></li>
      <li><div class="workflow-title">Results</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the field trial you are interested in. Select only one. Field trial MUST have row and column assigned and should be a rectangular design.</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial(s): </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_analytics_trial_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_analytics_field_trial_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Create a New Analytics Protocol</h3></div>


                    <!--div id="drone_imagery_analytics_analytics_protocols_select_div">Loading...</div-->

                    <div class="well well-sm">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Model: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_imagery_analytics_select_input">
                                        <!--option value="">Sommer Multi/Uni Spatial 2Dspl, REMLf90 RR Identiy/Env, ASREML Uni Spatial AR1xAR1</option-->
                                        <!--option value="lmer_germplasmname_replicate">LMER BLUPs y~replicate+1|Germplasm. Univariate genetic effects</option-->

                                        <!--option value="sommer_grm_genetic_blups">Sommer GBLUPs Y~replicate+GRM. Multivariate genetic effects using GRM</option-->

                                        <!--option value="sommer_grm_univariate_spatial_genetic_blups">Sommer Spatial GBLUPs Y~replicate+GRM+Row+Col+2Dspline. Univariate genetic + 2Dspl spatial effects</option-->
                                        <option value="sommer_grm_univariate_spatial_pure_2dspl_genetic_blups">Sommer Spatial GBLUPs Y~replicate+GRM+2Dspline. Univariate genetic + 2Dspl spatial effects</option>

                                        <!-- option value="sommer_grm_spatial_genetic_blups">Sommer Spatial GBLUPs Y~replicate+GRM+Row+Col+2Dspline. Multivariate genetic + 2Dspl spatial effects</option-->
                                        <option value="sommer_grm_spatial_pure_2dspl_genetic_blups">Sommer Spatial GBLUPs Y~replicate+GRM+2Dspline. Multivariate genetic + 2Dspl spatial effects</option>

                                        <!--option value="blupf90_grm_random_regression_dap_blups">BLUPf90 GBLUPs Y~replicate+GRM+temporal random regression using days after planting. Multivariate genetic + permanent environment effects</option>
                                        <option value="blupf90_grm_random_regression_gdd_blups">BLUPf90 GBLUPs Y~replicate+GRM+temporal random regression using growing degree days. Multivariate genetic + permanent environment effects</option-->

                                        <option value="airemlf90_grm_random_regression_dap_blups">AIREMLf90 GBLUPs Y~replicate+GRM+temporal random regression using days after planting. Multivariate genetic + permanent environment effects</option>

                                        <!--option value="asreml_grm_univariate_spatial_genetic_blups">ASREML Spatial GBLUPs Y~replicate+GRM+Row+Col+spatial. Univariate genetic + AR1xAR1 spatial effects</option-->
                                        <option value="asreml_grm_univariate_pure_spatial_genetic_blups">ASREML Spatial GBLUPs Y~replicate+GRM+spatial. Univariate genetic + AR1xAR1 spatial effects (License Required)</option>
                                        <option value="asreml_grm_multivariate_spatial_genetic_blups">ASREML Spatial GBLUPs Y~replicate+GRM+spatial. Multivariate genetic + AR1xAR1 spatial effects (License Required)</option>

                                        <!--option value="airemlf90_grm_random_regression_gdd_blups">AIREMLf90 GBLUPs Y~replicate+GRM+temporal random regression using growing degree days. Multivariate genetic + permanent environment effects</option-->

                                        <!--option value="sommer_grm_temporal_random_regression_dap_genetic_blups">Sommer Temporal Random Regression GBLUPs Y~replicate+GRM+LegendrePoly. Multivariate genetic + permanent environment effects using days after planting</option>
                                        <option value="sommer_grm_temporal_random_regression_gdd_genetic_blups">Sommer Temporal Random Regression GBLUPs Y~replicate+GRM+LegendrePoly. Multivariate genetic + permanent environment effects using growing degree days</option>
                                        <option value="sommer_grm_genetic_only_random_regression_dap_genetic_blups">Sommer Random Regression GBLUPs Y~replicate+GRM+LegendrePoly. Multivariate genetic effects using days after planting</option>
                                        <option value="sommer_grm_genetic_only_random_regression_gdd_genetic_blups">Sommer Random Regression GBLUPs Y~replicate+GRM+LegendrePoly. Multivariate genetic effects using growing degree days</option-->

                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-3 control-label">Analytics Name: </label>
                                <div class="col-sm-9" >
                                    <input type="text" class="form-control" id="drone_imagery_analytics_select_analytics_name" />
                                </div>
                            </div>
                            <!-- div class="form-group">
                                <label class="col-sm-3 control-label">Analytics Type: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_imagery_analytics_select_analytics_type">
                                        <option value="minimize_local_env_effect">Minimize Spatial or PE Effects</option>
                                    </select>
                                </div>
                            </div-->
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Analytics Description: </label>
                                <div class="col-sm-9" >
                                    <input type="text" class="form-control" id="drone_imagery_analytics_select_analytics_desc" />
                                </div>
                            </div>
                            <!--div class="form-group">
                                <label class="col-sm-3 control-label">Number Interations: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_imagery_analytics_number_iterations">
                                        <option value="2">2</option>
                                        <option value="10">10</option>
                                        <option value="25">25</option>
                                        <option value="1">1</option>
                                    </select>
                                </div>
                            </div-->
                            <!--div class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-sm-5 control-label">Perform Cross Validation (Can take a long time): </label>
                                    <div class="col-sm-7" >
                                        <select class="form-control" id="drone_imagery_analytics_select_perform_cv">
                                            <option value="0">No</option>
                                            <option value="1">Yes</option>
                                        </select>
                                    </div>
                                </div>
                            </div-->
                        </div>
                    </div>

                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the Aerial Image Phenotype(s). Only Select Time Points for a Single Variable!</h3></div>


                    <div class="well well-sm">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-4 control-label">Observation Variable Type: </label>
                                <div class="col-sm-8" >
                                    <select class="form-control" id="drone_imagery_analytics_select_observation_variable_type">
                                        <option value="time_ontology">Time Series</option>
                                        <option value="">Variable List</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">Observation Variable(s) Phenotyped in the Selected Field Trial: </label>
                                <div class="col-sm-8" >
                                    <div id="drone_imagery_analytics_trait_select_div">Loading...</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="pagetitle"><h3 id="pagetitle_h3">Statistics Parameters</h3></div>


                    <div class="well well-sm">
                        <div class="panel panel-default">
                            <div class="panel-body">

                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-sm-4 control-label">Genetic Relationship Matrix Type: </label>
                                        <div class="col-sm-8" >
                                            <select class="form-control" id="drone_imagery_analytics_relationship_matrix_type_select_div">
                                                <option value="">Identity</option>
                                                <option value="genotypes">Genotyping Data</option>
                                                <option value="htp_phenotypes">High-throughput Phenotyping Data</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div id="drone_imagery_analytics_genotyping_protocol_div" style="display:none">
                                    <div class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">Genotyping Protocol To Calculate Genomic Relationship Matrix (optional. If none selected, an identity matrix is used): </label>
                                            <div class="col-sm-8" >
                                                <div id="drone_imagery_analytics_genotyping_protocol_select_div"></div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">Compute Genotypes From Parents: </label>
                                            <div class="col-sm-8" >
                                                <select class="form-control" id="drone_image_analytics_genotyping_protocol_compute_from_parents_select">
                                                    <option value="no">No</option>
                                                    <option value="yes">Yes</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group" id="drone_image_analytics_genotyping_protocol_use_parental_grms_select_div" style="display:none">
                                            <label class="col-sm-4 control-label">Use Parental Relationship Matrices: </label>
                                            <div class="col-sm-8" >
                                                <select class="form-control" id="drone_image_analytics_genotyping_protocol_use_parental_grms_select">
                                                    <option value="no">No</option>
                                                    <option value="yes">Yes</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group" id="drone_image_analytics_genotyping_protocol_include_pedigree_select_div" style="display:none">
                                            <label class="col-sm-4 control-label">Include Pedigree Info Into Relationship Matrix: </label>
                                            <div class="col-sm-8" >
                                                <select class="form-control" id="drone_image_analytics_genotyping_protocol_include_pedigree_select">
                                                    <option value="no">No</option>
                                                    <option value="yes">Yes</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="drone_imagery_analytics_htp_phenotypes_rel_matrix_div" style="display:none">
                                    <div class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">How to calculate the relationship matrix with high-throughput phenotypes: </label>
                                            <div class="col-sm-8" >
                                                <select class="form-control" id="drone_image_analytics_htp_phenotypes_rel_matrix_select">
                                                    <option value="correlations">Correlations</option>
                                                    <option value="blues">BLUEs</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">Time Points to Use: </label>
                                            <div class="col-sm-8" >
                                                <select class="form-control" id="drone_image_analytics_htp_phenotypes_rel_matrix_times_select">
                                                    <option value="all">All Available</option>
                                                    <option value="latest_trait">Up to latest days after planting selecting in traits</option>
                                                    <option value="vegetative" disabled>Vegetative Growth Stage</option>
                                                    <option value="reproductive" disabled>Reproductive Growth Stage</option>
                                                    <option value="mature" disabled>Mature Growth Stage</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group" id="drone_image_analytics_htp_phenotypes_rel_matrix_inversion_select_div" style="display:none">
                                            <label class="col-sm-4 control-label">HTP BLUEs Inversion Tolerance: </label>
                                            <div class="col-sm-8" >
                                                <select class="form-control" id="drone_image_analytics_htp_phenotypes_rel_matrix_inversion_select">
                                                    <option value="0.00001">0.00001</option>
                                                    <option value="0.0001">0.0001</option>
                                                    <option value="0.001">0.001</option>
                                                    <option value="0.01">0.01</option>
                                                    <option value="0.1">0.1</option>
                                                    <option value="0.5">0.5</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-body">

                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-sm-4 control-label">Legendre Polynomial Order: </label>
                                        <div class="col-sm-8" >
                                            <select class="form-control" id="drone_image_analytics_legendre_order_number_select">
                                                <option value="3">3</option>
                                                <!--option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option-->
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-4 control-label">AIMREMLf90 Permanent Environment Structure: </label>
                                        <div class="col-sm-8" >
                                            <select class="form-control" id="drone_image_analytics_permanent_env_structure_select">
                                                <option value="identity">Identity Matrix</option>
                                                <option value="phenotype_correlation">Phenotype Correlation Matrix</option>
                                                <option value="phenotype_2dspline_effect">Multi 2D-Spline Effect of Phenotype Correlation Matrix</option>
                                                <option value="phenotype_2dspline_uni_effect">Uni 2D-Spline Effect of Phenotype Correlation Matrix</option>
                                                <option value="phenotype_ar1xar1_effect">Multi AR1xAR1 Effect of Phenotype Correlation Matrix</option>
                                                <option value="phenotype_ar1xar1_uni_effect">Uni AR1xAR1 Effect of Phenotype Correlation Matrix</option>
                                                <option value="euclidean_rows_and_columns">Euclidean Distance From Rows and Columns Matrix</option>
                                                <option value="env_corr_structure">Simulated Phenotype Correlation Matrix</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div id="drone_imagery_analytics_permanent_env_structure_phenotype_correlation_div" style="display:none">
                                    <div class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">Phenotypes For Correlation Matrix: </label>
                                            <div class="col-sm-8" >
                                                <div id="drone_imagery_analytics_permanent_env_structure_phenotype_correlation_select_div"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="drone_imagery_analytics_permanent_env_structure_phenotype_effect_select_div" style="display:none">
                                    <div class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">Phenotype For 2D-spline or AR1xAR1 Effects in Permanent Environment Structure: </label>
                                            <div class="col-sm-8" >
                                                <div id="drone_imagery_analytics_permanent_env_structure_phenotype_select_div"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-sm-4 control-label">Simulated Environment Processes: </label>
                                        <div class="col-sm-8" >
                                            <select class="form-control" id="drone_imagery_analytics_simulated_environment_processes_select_div">
                                                <option value="none">No Simulation Process</option>
                                                <option value="6sims">Linear, 1D Normal, 2D Normal, AR1xAR1, Random, Real Data</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div style="display:none" id="drone_imagery_analytics_simulated_environment_real_data_trait_select_section">
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">Simulated Environments (Linear, 1D-Normal, 2D-Normal, Random, AR1xAR1): </label>
                                            <div class="col-sm-8" >
                                                <select class="form-control" id="drone_imagery_analytics_select_sim_env_change_over_time_type">
                                                    <option value="">Constant over timepoints</option>
                                                    <option value="changing_gradual">Gradual change over timepoints</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">Simulated Environment Correlation Through Time: </label>
                                            <div class="col-sm-8" >
                                                <select class="form-control" id="drone_imagery_analytics_sim_env_change_over_time_correlation">
                                                    <option value="0.9">0.9</option>
                                                    <option value="0.75">0.75</option>
                                                    <option value="0.6">0.6</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">Simulated Environment Variance: </label>
                                            <div class="col-sm-8" >
                                                <select class="form-control" id="drone_imagery_analytics_env_variance">
                                                    <option value="0.2">0.2</option>
                                                    <option value="0.1">0.1</option>
                                                    <option value="0.05">0.05</option>
                                                    <option value="0.01">0.01</option>
                                                    <option value="0.3">0.3</option>
                                                    <option value="0.2,0.1,0.05,0.01,0.3">0.2,0.1,0.05,0.01,0.3</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">Trait For Real Data Environment Simulation: </label>
                                            <div class="col-sm-5" >
                                                <div id="drone_imagery_analytics_simulated_environment_real_data_trait_select_div"></div>
                                            </div>
                                            <div class="col-sm-3" >
                                                <button class="btn btn-default" id="drone_imagery_analytics_simulated_environment_processes_select_example_button">Show Simulations Example</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-sm-4 control-label">Fixed Effects: </label>
                                        <div class="col-sm-8" >
                                            <select class="form-control" id="drone_imagery_analytics_fixed_effect_select_div">
                                                <option value="replicate">Replicate</option>
                                                <option value="fixed_effect_trait">Select a continuous trait (e.g. soil elevation curvature)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group" id="drone_imagery_analytics_fixed_effect_select_trait_div" style="display:none">
                                        <label class="col-sm-4 control-label">Fixed Effect Trait: </label>
                                        <div class="col-sm-8" >
                                            <div id="drone_imagery_analytics_fixed_effect_trait_select_div"></div>
                                        </div>
                                    </div>
                                    <div class="form-group" id="drone_imagery_analytics_fixed_effect_select_quantile_div" style="display:none">
                                        <label class="col-sm-4 control-label">Fixed Effect Continuous Trait Quantile Binning: </label>
                                        <div class="col-sm-8" >
                                            <select class="form-control" id="drone_imagery_analytics_fixed_effect_select_quantile">
                                                <option value="4">25% Quantiles</option>
                                                <option value="5">20% Quantiles</option>
                                                <option value="10">10% Quantiles</option>
                                                <option value="3">33% Quantiles</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-sm-4 control-label">Inversion Tolerance: </label>
                                        <div class="col-sm-8" >
                                            <select class="form-control" id="drone_image_analytics_tolparinv_select">
                                                <option value="0.000001">0.000001</option>
                                                <option value="0.00001">0.00001</option>
                                                <option value="0.0001">0.0001</option>
                                                <option value="0.0005">0.0005</option>
                                                <option value="0.0008">0.0008</option>
                                                <option value="0.001">0.001</option>
                                                <option value="0.01">0.01</option>
                                                <option value="0.05">0.05</option>
                                                <option value="0.08">0.08</option>
                                                <option value="0.1">0.1</option>
                                                <option value="0.2">0.2</option>
                                                <option value="0.5">0.5</option>
                                                <option value="1">1</option>
                                                <option value="10">10</option>
                                            </select>
                                        </div>
                                    </div>
                                    <!--div class="form-group">
                                        <label class="col-sm-4 control-label">Use Cumulative Area-Under-Curve Phenotype in Analysis: </label>
                                        <div class="col-sm-8" >
                                            <select class="form-control" id="drone_image_analytics_use_area_under_curve_select">
                                                <option value="no">No</option>
                                                <option value="yes">Yes</option>
                                            </select>
                                        </div>
                                    </div-->
                                </div>
                            </div>
                        </div>

                    </div>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_analytics_select_step">Submit</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Statistics results</h3></div>


                    <hr>
                    <button class="btn btn-primary" id="drone_imagery_analytics_analysis_save_blups_genetic_pe_residual" style="display:none">Go To Save Analysis Results For Genetic and Environment BLUPS and Residuals</button>
                    <button class="btn btn-primary" id="drone_imagery_analytics_analysis_save_blups_genetic" style="display:none">Go To Save Analysis Results For Genetic BLUPS</button>
                    <button class="btn btn-primary" id="drone_imagery_analytics_analysis_save_blups_spatial" style="display:none">Go To Save Analysis Results For Spatial BLUPS</button>
                    <button class="btn btn-primary" id="drone_imagery_analytics_analysis_save_blups_pe" style="display:none">Go To Save Analysis Results For Permanent Environmental BLUPS</button>
                    <button class="btn btn-primary" id="drone_imagery_analytics_analysis_save_residuals" style="display:none">Go To Save Analysis Results For Residuals</button>
                    <button class="btn btn-primary" id="drone_imagery_analytics_analysis_save_fitted" style="display:none">Go To Save Analysis Results For Fitted Values</button>
                    <hr>

                    <div id ="drone_imagery_analytics_result_div">
                    </div>
                </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_analytics_workflow");
</script>


        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_analytics_temp_results_dialog" name="drone_imagery_analytics_temp_results_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryAnalyticsTempResultsDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryAnalyticsTempResultsDialog">Results</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="drone_imagery_analytics_temp_results_dialog_div">
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script>
jQuery(document).ready(function() {
    jQuery('#drone_imagery_analytics_link').click(function(){
        get_select_box('trials', 'drone_imagery_analytics_trial_select_div', { 'name' : 'drone_imagery_analytics_field_trial_id', 'id' : 'drone_imagery_analytics_field_trial_id', 'empty':1, 'multiple':1 });

        jQuery('#drone_imagery_analytics_dialog').modal('show');
    });

    var manage_drone_imagery_analytics_field_trial_id_array = undefined;
    var manage_drone_imagery_analytics_field_trial_id_string = "";
    var manage_drone_imagery_analytics_observation_variable_type;
    var manage_drone_imagery_analytics_trait_ids = [];
    var manage_drone_imagery_analytics_trait_names = [];
    var manage_drone_imagery_analytics_accession_names = [];
    var manage_drone_imagery_analytics_plot_names = [];
    var manage_drone_imagery_analytics_statistics_select = '';
    var manage_drone_imagery_analytics_phenotype_training_file;
    var manage_drone_imagery_analytics_grm_training_file;
    var manage_drone_imagery_analytics_response = {};
    var manage_drone_imagery_analytics_name = "";
    var manage_drone_imagery_analytics_desc = "";
    var manage_drone_imagery_analytics_type = "";
    var manage_drone_imagery_analytics_protocol_id = undefined;

    jQuery('#drone_imagery_analytics_field_trial_select_step').click(function(){
        manage_drone_imagery_analytics_field_trial_id_array = undefined;
        manage_drone_imagery_analytics_field_trial_id_string = "";
        manage_drone_imagery_analytics_field_trial_id_array = jQuery('#drone_imagery_analytics_field_trial_id').val();

        if (!manage_drone_imagery_analytics_field_trial_id_array || manage_drone_imagery_analytics_field_trial_id_array.length > 1) {
            alert('Please only select a single field trial for now!');
            return false;
        }

        manage_drone_imagery_analytics_field_trial_id_string = manage_drone_imagery_analytics_field_trial_id_array.join(",");
        manage_drone_imagery_analytics_observation_variable_type = jQuery('#drone_imagery_analytics_select_observation_variable_type').val();
        if (manage_drone_imagery_analytics_field_trial_id_string == '') {
            alert('Please select a field trial first!');
        } else {
            if (manage_drone_imagery_analytics_observation_variable_type == 'time_ontology') {
                get_select_box('traits', 'drone_imagery_analytics_trait_select_div', { 'name' : 'drone_imagery_analytics_trait_id_select', 'id' : 'drone_imagery_analytics_trait_id_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_analytics_field_trial_id_string, 'stock_type':'plot', 'contains_composable_cv_type':manage_drone_imagery_analytics_observation_variable_type, 'select_format':'component_table_select' });
            }
            else {
                get_select_box('traits', 'drone_imagery_analytics_trait_select_div', { 'name' : 'drone_imagery_analytics_trait_id_select', 'id' : 'drone_imagery_analytics_trait_id_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_analytics_field_trial_id_string, 'stock_type':'plot', 'contains_composable_cv_type':manage_drone_imagery_analytics_observation_variable_type });
            }

            get_select_box('traits', 'drone_imagery_analytics_permanent_env_structure_phenotype_correlation_select_div', { 'name' : 'drone_imagery_analytics_permanent_env_structure_phenotype_correlation_select', 'id' : 'drone_imagery_analytics_permanent_env_structure_phenotype_correlation_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_analytics_field_trial_id_string, 'stock_type':'plot' });

            get_select_box('traits', 'drone_imagery_analytics_permanent_env_structure_phenotype_select_div', { 'name' : 'drone_imagery_analytics_permanent_env_structure_phenotype_select', 'id' : 'drone_imagery_analytics_permanent_env_structure_phenotype_select', 'empty':1, 'multiple':1, 'size':20, 'trial_ids':manage_drone_imagery_analytics_field_trial_id_string, 'stock_type':'plot', 'contains_composable_cv_type':'time_ontology', 'select_format':'component_table_select' });

            get_select_box('traits', 'drone_imagery_analytics_simulated_environment_real_data_trait_select_div', { 'name' : 'drone_imagery_analytics_simulated_environment_real_data_trait_select', 'id' : 'drone_imagery_analytics_simulated_environment_real_data_trait_select', 'empty':0, 'multiple':0, 'trial_ids':manage_drone_imagery_analytics_field_trial_id_string, 'stock_type':'plot' });

            get_select_box('traits', 'drone_imagery_analytics_fixed_effect_trait_select_div', { 'name' : 'drone_imagery_analytics_fixed_effect_trait_select', 'id' : 'drone_imagery_analytics_fixed_effect_trait_select', 'empty':0, 'multiple':0, 'trial_ids':manage_drone_imagery_analytics_field_trial_id_string, 'stock_type':'plot' });

            //get_select_box('analytics_protocols', 'drone_imagery_analytics_analytics_protocols_select_div', { 'checkbox_name' : 'drone_imagery_analytics_analytics_protocols_select_id', 'analytics_protocol_type' : 'drone_imagery_analytics_env_simulation_protocol', 'limit':1, 'disabled':1 });

            get_select_box('genotyping_protocol', 'drone_imagery_analytics_genotyping_protocol_select_div', { 'name' : 'drone_image_analytics_genotyping_protocol_select', 'id' : 'drone_image_analytics_genotyping_protocol_select', 'empty':1 });

            Workflow.complete("#drone_imagery_analytics_field_trial_select_step");
            Workflow.focus('#drone_imagery_analytics_workflow', 1);
        }
        return false;
    });

    jQuery('#drone_imagery_analytics_simulated_environment_processes_select_div').change(function() {
        if (jQuery(this).val() == '6sims') {
            jQuery('#drone_imagery_analytics_simulated_environment_real_data_trait_select_section').show();
        }
        else {
            jQuery('#drone_imagery_analytics_simulated_environment_real_data_trait_select_section').hide();
        }
    });

    jQuery('#drone_imagery_analytics_simulated_environment_processes_select_example_button').click(function(){
        var drone_imagery_analytics_simulated_environment_processes_select_example_button_sims = jQuery('#drone_imagery_analytics_simulated_environment_processes_select_div').val();
        var drone_imagery_analytics_simulated_environment_processes_select_example_button_trait = jQuery('#drone_imagery_analytics_simulated_environment_real_data_trait_select').val();
        if (drone_imagery_analytics_simulated_environment_processes_select_example_button_sims == '6sims' && drone_imagery_analytics_simulated_environment_processes_select_example_button_trait == '') {
            alert('Please select the real data trait to show example of!');
            return false;
        }

        var drone_imagery_analytics_simulated_environment_processes_select_example_button_trait_ids = [];
        manage_drone_imagery_analytics_observation_variable_type = jQuery('#drone_imagery_analytics_select_observation_variable_type').val();
        if (manage_drone_imagery_analytics_observation_variable_type == 'time_ontology') {
            jQuery('input[name="drone_imagery_analytics_trait_id_select"]').each(function() {
                if (this.checked){
                    drone_imagery_analytics_simulated_environment_processes_select_example_button_trait_ids.push(jQuery(this).val());
                }
            });

            if (drone_imagery_analytics_simulated_environment_processes_select_example_button_trait_ids.length < 1) {
                alert('Please select at least one observation variable first!');
                return false;
            }
        }
        else {
            drone_imagery_analytics_simulated_environment_processes_select_example_button_trait_ids = jQuery('#drone_imagery_analytics_trait_id_select').val();
            if (drone_imagery_analytics_simulated_environment_processes_select_example_button_trait_ids == null || drone_imagery_analytics_simulated_environment_processes_select_example_button_trait_ids == undefined) {
                alert('Please select at least one observation variable first!');
                return false;
            }
        }

        jQuery.ajax({
            url : '/api/drone_imagery/show_example_simulations',
            beforeSend: function() {
                jQuery("#working_modal").modal("show");
            },
            method:'POST',
            data: {
                'field_trial_id':manage_drone_imagery_analytics_field_trial_id_string,
                'simulations':drone_imagery_analytics_simulated_environment_processes_select_example_button_sims,
                'real_data_trait_id':drone_imagery_analytics_simulated_environment_processes_select_example_button_trait,
                'trait_ids':JSON.stringify(drone_imagery_analytics_simulated_environment_processes_select_example_button_trait_ids),
                'change_over_time':jQuery('#drone_imagery_analytics_select_sim_env_change_over_time_type').val(),
                'correlation_over_time':jQuery('#drone_imagery_analytics_sim_env_change_over_time_correlation').val()
            },
            success: function(response){
                console.log(response);
                jQuery("#working_modal").modal("hide");

                if (response.error) {
                    alert(response.error);
                }
                else {
                    var html = '<img src="'+response.plot+'">';
                    jQuery('#drone_imagery_analytics_temp_results_dialog_div').html(html);
                    jQuery('#drone_imagery_analytics_temp_results_dialog').modal('show');
                }
            },
            error: function(response){
                jQuery("#working_modal").modal("hide");
                alert('Error showing example sims!')
            }
        });
    });

    jQuery('#drone_imagery_analytics_select_observation_variable_type').change(function(){
        manage_drone_imagery_analytics_observation_variable_type = jQuery('#drone_imagery_analytics_select_observation_variable_type').val();
        if (manage_drone_imagery_analytics_observation_variable_type == 'time_ontology') {
            get_select_box('traits', 'drone_imagery_analytics_trait_select_div', { 'name' : 'drone_imagery_analytics_trait_id_select', 'id' : 'drone_imagery_analytics_trait_id_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_analytics_field_trial_id_string, 'stock_type':'plot', 'contains_composable_cv_type':manage_drone_imagery_analytics_observation_variable_type, 'select_format':'component_table_select' });
        }
        else {
            get_select_box('traits', 'drone_imagery_analytics_trait_select_div', { 'name' : 'drone_imagery_analytics_trait_id_select', 'id' : 'drone_imagery_analytics_trait_id_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_analytics_field_trial_id_string, 'stock_type':'plot', 'contains_composable_cv_type':manage_drone_imagery_analytics_observation_variable_type });
        }
    });

    jQuery('#drone_imagery_analytics_select_input').change(function(){
        jQuery("#drone_imagery_analytics_relationship_matrix_type_select_div").val('').change();
        jQuery("#drone_image_analytics_genotyping_protocol_compute_from_parents_select").val('no').change();

        manage_drone_imagery_analytics_statistics_select = jQuery('#drone_imagery_analytics_select_input').val();

        if (manage_drone_imagery_analytics_statistics_select == 'lmer_germplasmname_replicate') {
            jQuery('#drone_imagery_analytics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic_pe_residual').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic').show();
            jQuery('#drone_imagery_analytics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_analytics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_analytics_analysis_save_fitted').hide();
        }
        else if (manage_drone_imagery_analytics_statistics_select == 'sommer_grm_spatial_genetic_blups' || manage_drone_imagery_analytics_statistics_select == 'sommer_grm_spatial_pure_2dspl_genetic_blups') {
            jQuery('#drone_imagery_analytics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic_pe_residual').show();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_analytics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_analytics_analysis_save_fitted').hide();
        }
        else if (manage_drone_imagery_analytics_statistics_select == 'sommer_grm_temporal_random_regression_dap_genetic_blups' || manage_drone_imagery_analytics_statistics_select == 'sommer_grm_temporal_random_regression_gdd_genetic_blups') {
            jQuery('#drone_imagery_analytics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic_pe_residual').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic').show();
            jQuery('#drone_imagery_analytics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_pe').show();
            jQuery('#drone_imagery_analytics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_analytics_analysis_save_fitted').hide();
        }
        else if (manage_drone_imagery_analytics_statistics_select == 'sommer_grm_genetic_only_random_regression_dap_genetic_blups' || manage_drone_imagery_analytics_statistics_select == 'sommer_grm_genetic_only_random_regression_gdd_genetic_blups') {
            jQuery('#drone_imagery_analytics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic_pe_residual').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic').show();
            jQuery('#drone_imagery_analytics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_analytics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_analytics_analysis_save_fitted').hide();
        }
        else if (manage_drone_imagery_analytics_statistics_select == 'blupf90_grm_random_regression_dap_blups' || manage_drone_imagery_analytics_statistics_select == 'blupf90_grm_random_regression_gdd_blups' || manage_drone_imagery_analytics_statistics_select == 'airemlf90_grm_random_regression_dap_blups' || manage_drone_imagery_analytics_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {
            jQuery('#drone_imagery_analytics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic_pe_residual').show();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_analytics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_analytics_analysis_save_fitted').hide();
        }
        else if (manage_drone_imagery_analytics_statistics_select == 'sommer_grm_genetic_blups') {
            jQuery('#drone_imagery_analytics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic_pe_residual').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic').show();
            jQuery('#drone_imagery_analytics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_analytics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_analytics_analysis_save_fitted').hide();
        }
        else {
            jQuery('#drone_imagery_analytics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic_pe_residual').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_genetic').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_analytics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_analytics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_analytics_analysis_save_fitted').hide();
        }

        jQuery('#drone_imagery_analytics_genotyping_protocol_div').hide();
        jQuery('#drone_imagery_analytics_analysis_save_blups_genetic_pe_residual').hide();
        jQuery('#drone_imagery_analytics_analysis_save_blups_genetic').hide();
        jQuery('#drone_imagery_analytics_analysis_save_blups_spatial').hide();
        jQuery('#drone_imagery_analytics_analysis_save_blups_pe').hide();
        jQuery('#drone_imagery_analytics_analysis_save_residuals').hide();
        jQuery('#drone_imagery_analytics_analysis_save_fitted').hide();
    });

    jQuery('#drone_imagery_analytics_relationship_matrix_type_select_div').change(function(){
        if (jQuery(this).val() == 'genotypes') {
            jQuery('#drone_imagery_analytics_genotyping_protocol_div').show();
            jQuery('#drone_imagery_analytics_htp_phenotypes_rel_matrix_div').hide();
        }
        else if (jQuery(this).val() == 'htp_phenotypes') {
            jQuery('#drone_imagery_analytics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_analytics_htp_phenotypes_rel_matrix_div').show();
        }
        else {
            jQuery('#drone_imagery_analytics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_analytics_htp_phenotypes_rel_matrix_div').hide();
        }
    });

    jQuery('#drone_image_analytics_htp_phenotypes_rel_matrix_select').change(function(){
        if (jQuery(this).val() == 'blues') {
            jQuery('#drone_image_analytics_htp_phenotypes_rel_matrix_inversion_select_div').show();
        }
        else {
            jQuery('#drone_image_analytics_htp_phenotypes_rel_matrix_inversion_select_div').hide();
        }
    });

    jQuery('#drone_image_analytics_genotyping_protocol_compute_from_parents_select').change(function(){
        if (jQuery(this).val() == 'yes') {
            //jQuery('#drone_image_analytics_genotyping_protocol_include_pedigree_select_div').show();
            //jQuery('#drone_image_analytics_genotyping_protocol_use_parental_grms_select_div').show();
        }
        if (jQuery(this).val() == 'no') {
            jQuery('#drone_image_analytics_genotyping_protocol_include_pedigree_select_div').hide();
            jQuery('#drone_image_analytics_genotyping_protocol_use_parental_grms_select_div').hide();
            jQuery('#drone_image_analytics_genotyping_protocol_include_pedigree_select option[value=no]').attr('selected','selected');
            jQuery('#drone_image_analytics_genotyping_protocol_use_parental_grms_select option[value=no]').attr('selected','selected');
        }
    });

    jQuery('#drone_image_analytics_genotyping_protocol_use_parental_grms_select').change(function(){
        if (jQuery(this).val() == 'yes') {
            jQuery('#drone_image_analytics_genotyping_protocol_include_pedigree_select option[value=no]').attr('selected','selected');
            jQuery('#drone_image_analytics_genotyping_protocol_include_pedigree_select_div').hide();
        }
        if (jQuery(this).val() == 'no') {
            jQuery('#drone_image_analytics_genotyping_protocol_include_pedigree_select_div').show();
        }
    });

    jQuery('#drone_image_analytics_permanent_env_structure_select').change(function(){
        if (jQuery(this).val() == 'euclidean_rows_and_columns') {
            jQuery('#drone_imagery_analytics_permanent_env_structure_phenotype_correlation_div').hide();
            jQuery('#drone_imagery_analytics_permanent_env_structure_phenotype_effect_select_div').hide();
        }
        else if (jQuery(this).val() == 'phenotype_correlation') {
            jQuery('#drone_imagery_analytics_permanent_env_structure_phenotype_correlation_div').show();
            jQuery('#drone_imagery_analytics_permanent_env_structure_phenotype_effect_select_div').hide();
        }
        else if (jQuery(this).val() == 'phenotype_2dspline_effect' || jQuery(this).val() == 'phenotype_2dspline_uni_effect') {
            jQuery('#drone_imagery_analytics_permanent_env_structure_phenotype_correlation_div').hide();
            jQuery('#drone_imagery_analytics_permanent_env_structure_phenotype_effect_select_div').show();
        }
        else if (jQuery(this).val() == 'phenotype_ar1xar1_effect' || jQuery(this).val() == 'phenotype_ar1xar1_uni_effect') {
            jQuery('#drone_imagery_analytics_permanent_env_structure_phenotype_correlation_div').hide();
            jQuery('#drone_imagery_analytics_permanent_env_structure_phenotype_effect_select_div').show();
        }
        else {
            jQuery('#drone_imagery_analytics_permanent_env_structure_phenotype_correlation_div').hide();
            jQuery('#drone_imagery_analytics_permanent_env_structure_phenotype_effect_select_div').hide();
        }
    });

    jQuery('#drone_imagery_analytics_fixed_effect_select_div').change(function(){
        if (jQuery(this).val() == 'replicate') {
            jQuery('#drone_imagery_analytics_fixed_effect_select_trait_div').hide();
            jQuery('#drone_imagery_analytics_fixed_effect_select_quantile_div').hide();
        }
        if (jQuery(this).val() == 'fixed_effect_trait') {
            jQuery('#drone_imagery_analytics_fixed_effect_select_trait_div').show();
            jQuery('#drone_imagery_analytics_fixed_effect_select_quantile_div').show();
        }
    });

    jQuery('#drone_imagery_analytics_select_step').click(function(){

        manage_drone_imagery_analytics_statistics_select = jQuery('#drone_imagery_analytics_select_input').val();

        var manage_drone_imagery_analytics_protocol_ids = [];
        jQuery('input[name="drone_imagery_analytics_analytics_protocols_select_id"]').each(function() {
            if (this.checked){
                manage_drone_imagery_analytics_protocol_ids.push(jQuery(this).val());
            }
        });

        if (manage_drone_imagery_analytics_protocol_ids.length > 1) {
            alert('Please select only one protocol!');
            return false;
        }
        if (manage_drone_imagery_analytics_protocol_ids.length == 1) {
            manage_drone_imagery_analytics_protocol_id = manage_drone_imagery_analytics_protocol_ids[0];
        }

        manage_drone_imagery_analytics_name = jQuery('#drone_imagery_analytics_select_analytics_name').val();
        manage_drone_imagery_analytics_desc = jQuery('#drone_imagery_analytics_select_analytics_desc').val();
        manage_drone_imagery_analytics_type = jQuery('#drone_imagery_analytics_select_analytics_type').val();

        if (!manage_drone_imagery_analytics_protocol_id && manage_drone_imagery_analytics_name == '') {
            alert('Please give an analytics name or select a previously saved analytics report.');
            return false;
        }
        if (!manage_drone_imagery_analytics_protocol_id && manage_drone_imagery_analytics_desc == '') {
            alert('Please give an analytics description.');
            return false;
        }
        if (manage_drone_imagery_analytics_protocol_id && manage_drone_imagery_analytics_name != '') {
            alert('Please give an analytics name OR select a previously saved analytics report, not both!');
            return false;
        }

        manage_drone_imagery_analytics_trait_ids = [];

        if (manage_drone_imagery_analytics_observation_variable_type == 'time_ontology') {
            jQuery('input[name="drone_imagery_analytics_trait_id_select"]').each(function() {
                if (this.checked){
                    manage_drone_imagery_analytics_trait_ids.push(jQuery(this).val());
                }
            });
        }
        else {
            manage_drone_imagery_analytics_trait_ids = jQuery('#drone_imagery_analytics_trait_id_select').val();
            if (manage_drone_imagery_analytics_trait_ids == null || manage_drone_imagery_analytics_trait_ids == undefined) {
                alert('Please select at least one observation variable!');
                return false;
            }
        }

        if (!manage_drone_imagery_analytics_protocol_id && manage_drone_imagery_analytics_trait_ids.length < 1){
            alert('Please select at least one observation variable!');
            return false;
        }

        if (jQuery('#drone_image_analytics_genotyping_protocol_include_pedigree_select').val() == 'yes' && jQuery('#drone_image_analytics_genotyping_protocol_compute_from_parents_select').val() != 'yes') {
            alert('You can only use pedigree info in the relationship matrix if you will compute the genotypes from the parents!');
            return false;
        }
        if (jQuery('#drone_image_analytics_genotyping_protocol_use_parental_grms_select').val() == 'yes' && jQuery('#drone_image_analytics_genotyping_protocol_compute_from_parents_select').val() != 'yes') {
            alert('You can only use parental relationship matrices if you will compute the genotypes from the parents!');
            return false;
        }

        var manage_drone_imagery_analytics_rr_structure_phenotype_correlation = [];
        if (jQuery('#drone_image_analytics_permanent_env_structure_select').val() == 'phenotype_correlation') {
            manage_drone_imagery_analytics_rr_structure_phenotype_correlation = jQuery('#drone_imagery_analytics_permanent_env_structure_phenotype_correlation_select').val();
            if (!manage_drone_imagery_analytics_rr_structure_phenotype_correlation || manage_drone_imagery_analytics_rr_structure_phenotype_correlation.length < 3) {
                alert('Please select at least three phenotypes to use in random regression permanent environment phenotype correlation structure!');
                return false;
            }
        }

        var manage_drone_imagery_analytics_rr_env_structure_trait_ids = [];
        jQuery('input[name="drone_imagery_analytics_permanent_env_structure_phenotype_select"]').each(function() {
            if (this.checked){
                manage_drone_imagery_analytics_rr_env_structure_trait_ids.push(jQuery(this).val());
            }
        });

        var analyticsDataInput = {
                'observation_variable_id_list':manage_drone_imagery_analytics_trait_ids.toString(),
                'field_trial_id_list':manage_drone_imagery_analytics_field_trial_id_array.toString(),
                'statistics_select':manage_drone_imagery_analytics_statistics_select,
                'analytics_protocol_id':manage_drone_imagery_analytics_protocol_id,
                'analytics_protocol_name':manage_drone_imagery_analytics_name,
                'analytics_protocol_desc':manage_drone_imagery_analytics_desc,
                'analytics_select':manage_drone_imagery_analytics_type,
                'number_iterations':jQuery('#drone_imagery_analytics_number_iterations').val(),
                'relationship_matrix_type':jQuery('#drone_imagery_analytics_relationship_matrix_type_select_div').val(),
                'protocol_id':jQuery('#drone_image_analytics_genotyping_protocol_select').val(),
                'compute_from_parents':jQuery('#drone_image_analytics_genotyping_protocol_compute_from_parents_select').val(),
                'use_parental_grms_if_compute_from_parents':jQuery('#drone_image_analytics_genotyping_protocol_use_parental_grms_select').val(),
                'include_pedgiree_info_if_compute_from_parents':jQuery('#drone_image_analytics_genotyping_protocol_include_pedigree_select').val(),
                'htp_pheno_rel_matrix_type':jQuery('#drone_image_analytics_htp_phenotypes_rel_matrix_select').val(),
                'htp_pheno_rel_matrix_time_points':jQuery('#drone_image_analytics_htp_phenotypes_rel_matrix_times_select').val(),
                'htp_pheno_rel_matrix_blues_inversion':jQuery('#drone_image_analytics_htp_phenotypes_rel_matrix_inversion_select').val(),
                'tolparinv':jQuery('#drone_image_analytics_tolparinv_select').val(),
                'legendre_order_number':jQuery('#drone_image_analytics_legendre_order_number_select').val(),
                'use_area_under_curve':jQuery('#drone_image_analytics_use_area_under_curve_select').val(),
                'permanent_environment_structure':jQuery('#drone_image_analytics_permanent_env_structure_select').val(),
                'permanent_environment_structure_phenotype_correlation_traits':JSON.stringify(manage_drone_imagery_analytics_rr_structure_phenotype_correlation),
                'permanent_environment_structure_phenotype_trait_ids':JSON.stringify(manage_drone_imagery_analytics_rr_env_structure_trait_ids),
                'sim_env_change_over_time':jQuery('#drone_imagery_analytics_select_sim_env_change_over_time_type').val(),
                'env_variance_percent':jQuery('#drone_imagery_analytics_env_variance').val(),
                'simulated_environment_real_data_trait_id':jQuery('#drone_imagery_analytics_simulated_environment_real_data_trait_select').val(),
                'sim_env_change_over_time_correlation':jQuery('#drone_imagery_analytics_sim_env_change_over_time_correlation').val(),
                'fixed_effect_type':jQuery('#drone_imagery_analytics_fixed_effect_select_div').val(),
                'fixed_effect_trait_id':jQuery('#drone_imagery_analytics_fixed_effect_trait_select').val(),
                'fixed_effect_quantiles':jQuery('#drone_imagery_analytics_fixed_effect_select_quantile').val(),
                'simulations_to_run':jQuery('#drone_imagery_analytics_simulated_environment_processes_select_div').val()
            }

        jQuery.ajax({
            url : '/api/drone_imagery/calculate_analytics',
            type : 'POST',
            contentType : 'application/json',
            data : JSON.stringify(analyticsDataInput),
            beforeSend: function() {
                jQuery("#working_modal").modal("show");
            },
            success: function(response){
                console.log(response);
                jQuery("#working_modal").modal("hide");

                if (response.error) {
                    alert(response.error);
                }
                else {
                    manage_drone_imagery_analytics_response = response;
                    manage_drone_imagery_analytics_protocol_id = response.analytics_protocol_id;

                    var html = '<h4>Summary :</h4><ul>';
                    if (response.sum_square_residual_original) {
                        html = html + '<li>Sum square residual original: '+response.sum_square_residual_original+'</li>';
                    }
                    if (response.sum_square_residual_altered) {
                        html = html + '<li>Sum square residual altered: '+response.sum_square_residual_altered+'</li>';
                    }
                    if (response.genetic_effect_sum_original) {
                        html = html + '<li>Genetic effect sum original: '+response.genetic_effect_sum_original+'</li>';
                    }
                    if (response.genetic_effect_sum_altered) {
                        html = html + '<li>Genetic effect sum altered: '+response.genetic_effect_sum_altered+'</li>';
                    }
                    if (response.env_effect_sum_original) {
                        html = html + '<li>Env effect sum original: '+response.env_effect_sum_original+'</li>';
                    }
                    if (response.env_effect_sum_altered) {
                        html = html + '<li>Env effect sum altered: '+response.env_effect_sum_altered+'</li>';
                    }
                    html = html + '</ul>';

                    if (response.simulated_environment_to_effect_correlations) {
                        html = html + '<h4>Simulated Env to Effects Correlations:</h4><ul>';
                        for(var i=0; i<response.simulated_environment_to_effect_correlations.length; i++) {
                            html = html + '<li>' + response.simulated_environment_to_effect_correlations[i] + '</li>';
                        }
                        html = html + '</ul><hr>';
                    }

                    if (response.spatial_effects_plots) {
                        for (i=0; i<response.spatial_effects_plots.length; i++) {
                            html = html + '<p>'+response.spatial_effects_plots[i][1]+'</p><img src="'+response.spatial_effects_plots[i][0]+'"><hr>';
                        }
                    }

                    if (response.unique_accessions.length > 0 && response.unique_traits.length > 0 && response.result_blup_genetic_data_altered) {
                        manage_drone_imagery_analytics_accession_names = response.unique_accessions;
                        manage_drone_imagery_analytics_trait_names = response.unique_traits;
                        manage_drone_imagery_analytics_phenotype_training_file = response.stats_tempfile;
                        manage_drone_imagery_analytics_grm_training_file = response.grm_file;

                        html = html + '<table class="table table-bordered table-hover"><thead><tr><th>Accessions</th>';
                        for (var i=0; i<manage_drone_imagery_analytics_trait_names.length; i++) {
                            html = html + '<th>'+manage_drone_imagery_analytics_trait_names[i]+'</th>';
                        }
                        html = html + '</tr></thead><tbody>';
                        for (var k=0; k<response.unique_accessions.length; k++) {
                            var acc = response.unique_accessions[k];
                            html = html + '<tr><td>'+acc+'</td>';
                            for (var i=0; i<manage_drone_imagery_analytics_trait_names.length; i++) {
                                if (response.result_blup_genetic_data_altered[acc] && response.result_blup_genetic_data_altered[acc][manage_drone_imagery_analytics_trait_names[i]]) {
                                    html = html + '<td>'+response.result_blup_genetic_data_altered[acc][manage_drone_imagery_analytics_trait_names[i]][0]+'</td>';
                                }
                                else {
                                    html = html + '<td>NA</td>';
                                }
                            }
                            html = html + '</tr>';
                        }
                        html = html + '</tbody></table>';
                    }

                    if (response.unique_plots.length > 0 && response.unique_traits.length > 0 && response.result_blup_spatial_data_altered) {
                        manage_drone_imagery_analytics_plot_names = response.unique_plots;
                        manage_drone_imagery_analytics_trait_names = response.unique_traits;

                        html = html + '<table class="table table-bordered table-hover"><thead><tr><th>Plots</th>';
                        for (var i=0; i<response.unique_traits.length; i++) {
                            html = html + '<th>'+response.unique_traits[i]+'</th>';
                        }
                        html = html + '</tr></thead><tbody>';
                        for (var k=0; k<response.unique_plots.length; k++) {
                            var plot = response.unique_plots[k];
                            html = html + '<tr><td>'+plot+'</td>';
                            for (var i=0; i<response.unique_traits.length; i++) {
                                html = html + '<td>'+response.result_blup_spatial_data_altered[plot][response.unique_traits[i]][0]+'</td>';
                            }
                            html = html + '</tr>';
                        }
                        html = html + '</tbody></table>';
                    }

                    if (response.unique_plots.length > 0 && response.unique_traits.length > 0 && response.result_blup_pe_data_altered) {
                        manage_drone_imagery_analytics_plot_names = response.unique_plots;
                        manage_drone_imagery_analytics_trait_names = response.unique_traits;

                        html = html + '<table class="table table-bordered table-hover"><thead><tr><th>Plots</th>';
                        for (var i=0; i<response.unique_traits.length; i++) {
                            html = html + '<th>'+response.unique_traits[i]+'</th>';
                        }
                        html = html + '</tr></thead><tbody>';
                        for (var k=0; k<response.unique_plots.length; k++) {
                            var plot = response.unique_plots[k];
                            html = html + '<tr><td>'+plot+'</td>';
                            for (var i=0; i<response.unique_traits.length; i++) {
                                if (response.result_blup_pe_data_altered[plot] && response.result_blup_pe_data_altered[plot][response.unique_traits[i]]) {
                                    html = html + '<td>'+response.result_blup_pe_data_altered[plot][response.unique_traits[i]][0]+'</td>';
                                }
                                else {
                                    html = html + '<td>NA</td>';
                                }
                            }
                            html = html + '</tr>';
                        }
                        html = html + '</tbody></table>';
                    }

                    html = html + '<hr><a href="'+response.stats_out_tempfile_string+'.log" target=_blank>Stats file or log</a>';

                    if (jQuery('#drone_imagery_analytics_relationship_matrix_type_select_div').val() == 'htp_phenotypes') {
                        html = html + '<hr><a href="'+response.stats_out_htp_rel_tempfile_out_string+'" target=_blank>HTP Relationship Matrix</a>';
                    }

                    jQuery('#drone_imagery_analytics_result_div').html(html);

                    Workflow.complete("#drone_imagery_analytics_select_step");
                    Workflow.focus('#drone_imagery_analytics_workflow', 2);
                }
            },
            error: function(response){
                console.log(response);
                jQuery("#working_modal").modal("hide");
                alert('Error calculating statistics analytics!')
            }
        });
    });

});
</script>


<!--button class='btn btn-success' style='margin:3px;float:right' id='drone_imagery_calculate_statistics_link'>Drone Imagery Statistics</button-->

<div class="modal fade" id="drone_imagery_calculate_statistics_dialog" name="drone_imagery_calculate_statistics_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCalculateStatisticsDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCalculateStatisticsDialog">Calculate statistics on aerial image phenotypes</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            









                
    
                
    
                
    
                
    
                
    
            
<div id="drone_imagery_calculate_statistics_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Field Trial</div></li>
      <li><div class="workflow-title">Trait Selection</div></li>
      <li><div class="workflow-title">Statistics</div></li>
      <li><div class="workflow-title">Results</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the type of analysis to perform</h3></div>

                    <center>
                    <button class="btn btn-default" id="drone_imagery_calculate_statistics_intro_single_trial_select_step">Single Trial Field Analysis</button>
                    </center>
                    <br/>
                    <!--center>
                    <button class="btn btn-default" id="drone_imagery_calculate_statistics_intro_single_trial_multiseason_select_step">Single Trial Multi-Season Field Analysis</button>
                    </center-->
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the field trial you are interested in. Select only one.</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial(s): </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_calculate_statistics_trial_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_field_trial_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the observation variable(s) you are interested in</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Observation Variable Type: </label>
                            <div class="col-sm-9" >
                                <select class="form-control" id="drone_imagery_calculate_statistics_select_observation_variable_type">
                                    <option value="time_ontology">Time Series</option>
                                    <option value="">Single Trait</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Observation Variables Phenotyped in the Selected Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_calculate_statistics_trait_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_trait_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select statistics to calculate</h3></div>


                    <select class="form-control" id="drone_imagery_calculate_statistics_select_input">
                        <option value="">Select A Model</option>
                        <!--option value="lmer_germplasmname_replicate">LMER BLUPs y~replicate+1|Germplasm. Univariate genetic effects</option-->

                        <option value="sommer_grm_genetic_blups">Sommer GBLUPs Y~replicate+GRM. Multivariate genetic effects using GRM</option>
                        <option value="sommer_grm_spatial_genetic_blups">Sommer Spatial GBLUPs Y~replicate+GRM+spatial. Multivariate genetic + 2Dspl spatial effects</option>

                        <!--option value="blupf90_grm_random_regression_dap_blups">BLUPf90 GBLUPs Y~replicate+GRM+temporal random regression using days after planting. Multivariate genetic + permanent environment effects</option>
                        <option value="blupf90_grm_random_regression_gdd_blups">BLUPf90 GBLUPs Y~replicate+GRM+temporal random regression using growing degree days. Multivariate genetic + permanent environment effects</option-->

                        <option value="airemlf90_grm_random_regression_dap_blups">AIREMLf90 GBLUPs Y~replicate+GRM+temporal random regression using days after planting. Multivariate genetic + permanent environment effects</option>
                        <option value="airemlf90_grm_random_regression_gdd_blups">AIREMLf90 GBLUPs Y~replicate+GRM+temporal random regression using growing degree days. Multivariate genetic + permanent environment effects</option>

                        <!--option value="sommer_grm_temporal_random_regression_dap_genetic_blups">Sommer Temporal Random Regression GBLUPs Y~replicate+GRM+LegendrePoly. Multivariate genetic + permanent environment effects using days after planting</option>
                        <option value="sommer_grm_temporal_random_regression_gdd_genetic_blups">Sommer Temporal Random Regression GBLUPs Y~replicate+GRM+LegendrePoly. Multivariate genetic + permanent environment effects using growing degree days</option>
                        <option value="sommer_grm_genetic_only_random_regression_dap_genetic_blups">Sommer Random Regression GBLUPs Y~replicate+GRM+LegendrePoly. Multivariate genetic effects using days after planting</option>
                        <option value="sommer_grm_genetic_only_random_regression_gdd_genetic_blups">Sommer Random Regression GBLUPs Y~replicate+GRM+LegendrePoly. Multivariate genetic effects using growing degree days</option-->

                        <!--option value="marss_germplasmname_block">MARSS prediction for each germplasm</option-->
                    </select>

                    <div id="drone_imagery_calculate_statistics_relationship_matrix_type_div" style="display:none">
                        <hr>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Relationship Matrix Type: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_imagery_calculate_statistics_relationship_matrix_type_select_div">
                                        <option value="">Identity</option>
                                        <option value="htp_phenotypes">High-throughput Phenotyping Data</option>
                                        <option value="genotypes">Genotyping Data</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="drone_imagery_calculate_statistics_genotyping_protocol_div" class="well well-sm" style="display:none">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Genotyping Protocol To Calculate Genomic Relationship Matrix (optional. If none selected, an identity matrix is used): </label>
                                <div class="col-sm-9" >
                                    <div id="drone_imagery_calculate_statistics_genotyping_protocol_select_div"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Compute Genotypes From Parents: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="drone_image_calculate_statistics_genotyping_protocol_use_parental_grms_select_div" style="display:none">
                                <label class="col-sm-3 control-label">Use Parental Relationship Matrices: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_genotyping_protocol_use_parental_grms_select">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="drone_image_calculate_statistics_genotyping_protocol_include_pedigree_select_div" style="display:none">
                                <label class="col-sm-3 control-label">Include Pedigree Info Into Relationship Matrix: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_genotyping_protocol_include_pedigree_select">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="drone_imagery_calculate_statistics_htp_phenotypes_rel_matrix_div" class="well well-sm" style="display:none">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">How to calculate the relationship matrix with high-throughput phenotypes: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_htp_phenotypes_rel_matrix_select">
                                        <option value="correlations">Correlations</option>
                                        <option value="blues">BLUEs</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Time Points to Use: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_htp_phenotypes_rel_matrix_times_select">
                                        <option value="all">All Available</option>
                                        <option value="latest_trait">Up to the latest date selected in traits</option>
                                        <option value="vegetative" disabled>Vegetative Growth Stage</option>
                                        <option value="reproductive" disabled>Reproductive Growth Stage</option>
                                        <option value="mature" disabled>Mature Growth Stage</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="drone_image_calculate_statistics_htp_phenotypes_rel_matrix_inversion_select_div" style="display:none">
                                <label class="col-sm-3 control-label">HTP BLUEs Inversion Tolerance: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_htp_phenotypes_rel_matrix_inversion_select">
                                        <option value="0.00001">0.00001</option>
                                        <option value="0.0001">0.0001</option>
                                        <option value="0.001">0.001</option>
                                        <option value="0.01">0.01</option>
                                        <option value="0.1">0.1</option>
                                        <option value="0.5">0.5</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="drone_image_calculate_statistics_use_area_under_curve_select_div" style="display:none">
                        <hr>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Use Cumulative Area-Under-Curve Phenotype in Analysis: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_use_area_under_curve_select">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="drone_image_calculate_statistics_inversion_tolerance_select_div" style="display:none">
                        <hr>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Inversion Tolerance: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_tolparinv_select">
                                        <option value="0.000001">0.000001</option>
                                        <option value="0.00001">0.00001</option>
                                        <option value="0.0001">0.0001</option>
                                        <option value="0.001">0.001</option>
                                        <option value="0.01">0.01</option>
                                        <option value="0.05">0.05</option>
                                        <option value="0.08">0.08</option>
                                        <option value="0.1">0.1</option>
                                        <option value="0.2">0.2</option>
                                        <option value="0.5">0.5</option>
                                        <option value="1">1</option>
                                        <option value="10">10</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="drone_imagery_calculate_statistics_legendre_polynomial_div" style="display:none">
                        <hr>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Legendre Polynomial Order: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_legendre_order_number_select">
                                        <!--option value="1">1</option>
                                        <option value="2">2</option-->
                                        <option value="3">3</option>
                                        <!--option value="4">4</option>
                                        <option value="5">5</option-->
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="drone_imagery_calculate_statistics_marss_div" style="display:none">
                        $$x_t = Bx_{t-1} + u + w_t\\ w_t \sim MVN(0,Q)\\ y_t = Zx_t + a + v_t\\ v_t \sim MVN(0,R)\\ x_0 \sim MVN(\pi, \Lambda)$$
                        <hr>
                        <select class="form-control" id="drone_imagery_calculate_statistics_select_marss" name="drone_imagery_calculate_statistics_select_marss">
                            <option value="marss_predict_last_time_point">Predict Last Time Point</option>
                            <option value="marss_predict_last_two_time_points">Predict Last Two Time Point</option>
                        </select>
                    </div>

                    <div id="drone_imagery_calculate_statistics_permanent_env_structure_div" style="display:none">
                        <hr>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Permanent Environment Structure: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_permanent_env_structure_select">
                                        <option value="identity">Identity Matrix</option>
                                        <option value="phenotype_correlation">Phenotype Correlation Matrix</option>
                                        <option value="euclidean_rows_and_columns">Euclidean Distance From Rows and Columns Matrix</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div id="drone_imagery_calculate_statistics_permanent_env_structure_phenotype_correlation_div" style="display:none">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">Phenotypes For Correlation Matrix: </label>
                                    <div class="col-sm-9" >
                                        <div id="drone_imagery_calculate_statistics_permanent_env_structure_phenotype_correlation_select_div"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_select_step">Submit</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Statistics results</h3></div>


                    <hr>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_analysis_save_blups_genetic_pe_residual" style="display:none">Go To Save Analysis Results For Genetic and Environment BLUPS and Residuals</button>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_analysis_save_blups_genetic" style="display:none">Go To Save Analysis Results For Genetic BLUPS</button>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_analysis_save_blups_spatial" style="display:none">Go To Save Analysis Results For Spatial BLUPS</button>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_analysis_save_blups_pe" style="display:none">Go To Save Analysis Results For Permanent Environmental BLUPS</button>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_analysis_save_residuals" style="display:none">Go To Save Analysis Results For Residuals</button>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_analysis_save_fitted" style="display:none">Go To Save Analysis Results For Fitted Values</button>
                    <hr>

                    <div id ="drone_imagery_calculate_statistics_result_div">
                    </div>
                </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_calculate_statistics_workflow");
</script>


        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_calculate_statistics_single_trial_multiseason_dialog" name="drone_imagery_calculate_statistics_single_trial_multiseason_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCalculateStatisticsSingleTrialMultiSeasonDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCalculateStatisticsSingleTrialMultiSeasonDialog">Calculate statistics on aerial image phenotypes</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            









                
    
                
    
                
    
                
    
            
<div id="drone_imagery_calculate_statistics_single_trial_multiseason_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Field Trial</div></li>
      <li><div class="workflow-title">Trait Selection</div></li>
      <li><div class="workflow-title">Statistics</div></li>
      <li><div class="workflow-title">Results</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the field trial you are interested in. Select only one.</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial(s): </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_calculate_statistics_multiseason_trial_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_multiseason_field_trial_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the observation variable(s) you are interested in</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Observation Variables Phenotyped in the Selected Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_calculate_statistics_multiseason_trait_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_multiseason_trait_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select statistics to calculate</h3></div>


                    <select class="form-control" id="drone_imagery_calculate_statistics_multiseason_select_input">
                        <option value="">Select A Model</option>

                        <option value="sommer_grm_genetic_blups">Sommer GBLUPs Y~replicate+GRM. Multivariate genetic effects using GRM</option>
                        <option value="sommer_grm_spatial_genetic_blups">Sommer Spatial GBLUPs Y~replicate+GRM+spatial. Multivariate genetic + 2Dspl spatial effects</option>
                    </select>

                    <hr>
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Relationship Matrix Type: </label>
                            <div class="col-sm-9" >
                                <select class="form-control" id="drone_imagery_calculate_statistics_multiseason_relationship_matrix_type_select_div">
                                    <option value="">Identity</option>
                                    <option value="htp_phenotypes">High-throughput Phenotyping Data</option>
                                    <option value="genotypes">Genotyping Data</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div id="drone_imagery_calculate_statistics_multiseason_genotyping_protocol_div" class="well well-sm" style="display:none">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Genotyping Protocol To Calculate Genomic Relationship Matrix (optional. If none selected, an identity matrix is used): </label>
                                <div class="col-sm-9" >
                                    <div id="drone_imagery_calculate_statistics_multiseason_genotyping_protocol_select_div"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Compute Genotypes From Parents: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_multiseason_genotyping_protocol_compute_from_parents_select">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="drone_image_calculate_statistics_multiseason_genotyping_protocol_use_parental_grms_select_div" style="display:none">
                                <label class="col-sm-3 control-label">Use Parental Relationship Matrices: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_multiseason_genotyping_protocol_use_parental_grms_select">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="drone_image_calculate_statistics_multiseason_genotyping_protocol_include_pedigree_select_div" style="display:none">
                                <label class="col-sm-3 control-label">Include Pedigree Info Into Relationship Matrix: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_multiseason_genotyping_protocol_include_pedigree_select">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="drone_imagery_calculate_statistics_multiseason_htp_phenotypes_rel_matrix_div" class="well well-sm" style="display:none">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">How to calculate the relationship matrix with high-throughput phenotypes: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_multiseason_htp_phenotypes_rel_matrix_select">
                                        <option value="correlations">Correlations</option>
                                        <option value="blues">BLUEs</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Time Points to Use: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_multiseason_htp_phenotypes_rel_matrix_times_select">
                                        <option value="all">All Available</option>
                                        <option value="latest_trait">Up to the latest date selected in traits</option>
                                        <option value="vegetative" disabled>Vegetative Growth Stage</option>
                                        <option value="reproductive" disabled>Reproductive Growth Stage</option>
                                        <option value="mature" disabled>Mature Growth Stage</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="drone_image_calculate_statistics_multiseason_htp_phenotypes_rel_matrix_inversion_select_div" style="display:none">
                                <label class="col-sm-3 control-label">HTP BLUEs Inversion Tolerance: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_multiseason_htp_phenotypes_rel_matrix_inversion_select">
                                        <option value="0.00001">0.00001</option>
                                        <option value="0.0001">0.0001</option>
                                        <option value="0.001">0.001</option>
                                        <option value="0.01">0.01</option>
                                        <option value="0.1">0.1</option>
                                        <option value="0.5">0.5</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Inversion Tolerance: </label>
                            <div class="col-sm-9" >
                                <select class="form-control" id="drone_image_calculate_statistics_multiseason_tolparinv_select">
                                    <option value="0.000001">0.000001</option>
                                    <option value="0.00001">0.00001</option>
                                    <option value="0.0001">0.0001</option>
                                    <option value="0.001">0.001</option>
                                    <option value="0.01">0.01</option>
                                    <option value="0.05">0.05</option>
                                    <option value="0.08">0.08</option>
                                    <option value="0.1">0.1</option>
                                    <option value="0.2">0.2</option>
                                    <option value="0.5">0.5</option>
                                    <option value="1">1</option>
                                    <option value="10">10</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div id="drone_imagery_calculate_statistics_multiseason_legendre_polynomial_div" style="display:none">
                        <hr>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Legendre Polynomial Order: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_multiseason_legendre_order_number_select">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="drone_imagery_calculate_statistics_multiseason_permanent_env_structure_div" style="display:none">
                        <hr>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Permanent Environment Structure: </label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_calculate_statistics_multiseason_permanent_env_structure_select">
                                        <option value="identity">Identity Matrix</option>
                                        <option value="phenotype_correlation">Phenotype Correlation Matrix</option>
                                        <option value="euclidean_rows_and_columns">Euclidean Distance From Rows and Columns Matrix</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div id="drone_imagery_calculate_statistics_multiseason_permanent_env_structure_phenotype_correlation_div" style="display:none">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">Phenotypes For Correlation Matrix: </label>
                                    <div class="col-sm-9" >
                                        <div id="drone_imagery_calculate_statistics_multiseason_permanent_env_structure_phenotype_correlation_select_div"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_calculate_statistics_multiseason_select_step">Submit</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Statistics results</h3></div>


                    <div id ="drone_imagery_calculate_statistics_multiseason_result_div">
                    </div>
                </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_calculate_statistics_single_trial_multiseason_workflow");
</script>


        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script>

jQuery(document).ready(function() {

    //
    // Calculate statistics
    //

    var manage_drone_imagery_calculate_statistics_field_trial_id_array = undefined;
    var manage_drone_imagery_calculate_statistics_field_trial_id_string = "";
    var manage_drone_imagery_calculate_statistics_observation_variable_type;
    var manage_drone_imagery_calculate_statistics_trait_ids = [];
    var manage_drone_imagery_calculate_statistics_trait_names = [];
    var manage_drone_imagery_calculate_statistics_accession_names = [];
    var manage_drone_imagery_calculate_statistics_plot_names = [];
    var manage_drone_imagery_calculate_statistics_select = '';
    var manage_drone_imagery_calculate_statistics_phenotype_training_file;
    var manage_drone_imagery_calculate_statistics_grm_training_file;
    var manage_drone_imagery_calculate_statistics_response = {};

    var manage_drone_imagery_calculate_statistics_multiseason_field_trial_id_array = undefined;
    var manage_drone_imagery_calculate_statistics_multiseason_field_trial_id_string = "";
    var manage_drone_imagery_calculate_statistics_multiseason_trait_ids = [];
    var manage_drone_imagery_calculate_statistics_multiseason_trait_names = [];
    var manage_drone_imagery_calculate_statistics_multiseason_accession_names = [];
    var manage_drone_imagery_calculate_statistics_multiseason_plot_names = [];
    var manage_drone_imagery_calculate_statistics_multiseason_select = '';
    var manage_drone_imagery_calculate_statistics_multiseason_phenotype_training_file;
    var manage_drone_imagery_calculate_statistics_multiseason_grm_training_file;
    var manage_drone_imagery_calculate_statistics_multiseason_response = {};

    jQuery('#drone_imagery_calculate_statistics_link').click(function(){
        get_select_box('trials', 'drone_imagery_calculate_statistics_trial_select_div', { 'name' : 'drone_imagery_calculate_statistics_field_trial_id', 'id' : 'drone_imagery_calculate_statistics_field_trial_id', 'empty':1, 'multiple':1 });

        get_select_box('trials', 'drone_imagery_calculate_statistics_multiseason_trial_select_div', { 'name' : 'drone_imagery_calculate_statistics_multiseason_field_trial_id', 'id' : 'drone_imagery_calculate_statistics_multiseason_field_trial_id', 'empty':1, 'multiple':1 });

        jQuery('#drone_imagery_calculate_statistics_dialog').modal('show');
    });

    jQuery('#drone_imagery_calculate_statistics_intro_single_trial_multiseason_select_step').click(function(){
        jQuery('#drone_imagery_calculate_statistics_single_trial_multiseason_dialog').modal('show');
    });

    jQuery('#drone_imagery_calculate_statistics_intro_single_trial_select_step').click(function(){
        Workflow.complete("#drone_imagery_calculate_statistics_intro_single_trial_select_step");
        Workflow.focus('#drone_imagery_calculate_statistics_workflow', 1);
    });

    jQuery('#drone_imagery_calculate_statistics_select_observation_variable_type').change(function(){
        manage_drone_imagery_calculate_statistics_observation_variable_type = jQuery('#drone_imagery_calculate_statistics_select_observation_variable_type').val();
        if (manage_drone_imagery_calculate_statistics_observation_variable_type == 'time_ontology') {
            get_select_box('traits', 'drone_imagery_calculate_statistics_trait_select_div', { 'name' : 'drone_imagery_calculate_statistics_trait_id_select', 'id' : 'drone_imagery_calculate_statistics_trait_id_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_calculate_statistics_field_trial_id_string, 'stock_type':'plot', 'contains_composable_cv_type':manage_drone_imagery_calculate_statistics_observation_variable_type, 'select_format':'component_table_select' });
        }
        else {
            get_select_box('traits', 'drone_imagery_calculate_statistics_trait_select_div', { 'name' : 'drone_imagery_calculate_statistics_trait_id_select', 'id' : 'drone_imagery_calculate_statistics_trait_id_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_calculate_statistics_field_trial_id_string, 'stock_type':'plot', 'contains_composable_cv_type':manage_drone_imagery_calculate_statistics_observation_variable_type });
        }
    });

    jQuery('#drone_imagery_calculate_statistics_field_trial_select_step').click(function(){
        manage_drone_imagery_calculate_statistics_field_trial_id_array = undefined;
        manage_drone_imagery_calculate_statistics_field_trial_id_string = "";
        manage_drone_imagery_calculate_statistics_field_trial_id_array = jQuery('#drone_imagery_calculate_statistics_field_trial_id').val();

        if (manage_drone_imagery_calculate_statistics_field_trial_id_array.length > 1) {
            alert('Please only select a single field trial for now!');
            return false;
        }

        manage_drone_imagery_calculate_statistics_field_trial_id_string = manage_drone_imagery_calculate_statistics_field_trial_id_array.join(",");
        manage_drone_imagery_calculate_statistics_observation_variable_type = jQuery('#drone_imagery_calculate_statistics_select_observation_variable_type').val();
        if (manage_drone_imagery_calculate_statistics_field_trial_id_string == '') {
            alert('Please select a field trial first!');
        } else {
            if (manage_drone_imagery_calculate_statistics_observation_variable_type == 'time_ontology') {
                get_select_box('traits', 'drone_imagery_calculate_statistics_trait_select_div', { 'name' : 'drone_imagery_calculate_statistics_trait_id_select', 'id' : 'drone_imagery_calculate_statistics_trait_id_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_calculate_statistics_field_trial_id_string, 'stock_type':'plot', 'contains_composable_cv_type':manage_drone_imagery_calculate_statistics_observation_variable_type, 'select_format':'component_table_select' });
            }
            else {
                get_select_box('traits', 'drone_imagery_calculate_statistics_trait_select_div', { 'name' : 'drone_imagery_calculate_statistics_trait_id_select', 'id' : 'drone_imagery_calculate_statistics_trait_id_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_calculate_statistics_field_trial_id_string, 'stock_type':'plot', 'contains_composable_cv_type':manage_drone_imagery_calculate_statistics_observation_variable_type });
            }

            get_select_box('traits', 'drone_imagery_calculate_statistics_permanent_env_structure_phenotype_correlation_select_div', { 'name' : 'drone_imagery_calculate_statistics_permanent_env_structure_phenotype_correlation_select', 'id' : 'drone_imagery_calculate_statistics_permanent_env_structure_phenotype_correlation_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_calculate_statistics_field_trial_id_string, 'stock_type':'plot' });

            Workflow.complete("#drone_imagery_calculate_statistics_field_trial_select_step");
            Workflow.focus('#drone_imagery_calculate_statistics_workflow', 2);
        }
        return false;
    });

    jQuery('#drone_imagery_calculate_statistics_multiseason_field_trial_select_step').click(function(){
        manage_drone_imagery_calculate_statistics_multiseason_field_trial_id_array = undefined;
        manage_drone_imagery_calculate_statistics_multiseason_field_trial_id_string = "";
        manage_drone_imagery_calculate_statistics_multiseason_field_trial_id_array = jQuery('#drone_imagery_calculate_statistics_multiseason_field_trial_id').val();

        if (manage_drone_imagery_calculate_statistics_multiseason_field_trial_id_array.length > 1) {
            alert('Please only select a single field trial for now!');
            return false;
        }

        manage_drone_imagery_calculate_statistics_multiseason_field_trial_id_string = manage_drone_imagery_calculate_statistics_multiseason_field_trial_id_array.join(",");

        get_select_box('traits', 'drone_imagery_calculate_statistics_multiseason_trait_select_div', { 'name' : 'drone_imagery_calculate_statistics_multiseason_trait_id_select', 'id' : 'drone_imagery_calculate_statistics_multiseason_trait_id_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_calculate_statistics_multiseason_field_trial_id_string, 'stock_type':'plot', 'contains_composable_cv_type':'time_ontology', 'select_format':'component_table_multiseason_select' });

        get_select_box('traits', 'drone_imagery_calculate_statistics_multiseason_permanent_env_structure_phenotype_correlation_select_div', { 'name' : 'drone_imagery_calculate_statistics_multiseason_permanent_env_structure_phenotype_correlation_select', 'id' : 'drone_imagery_calculate_statistics_multiseason_permanent_env_structure_phenotype_correlation_select', 'empty':1, 'multiple':1, 'size': 20, 'trial_ids':manage_drone_imagery_calculate_statistics_multiseason_field_trial_id_string, 'stock_type':'plot' });

        Workflow.complete("#drone_imagery_calculate_statistics_multiseason_field_trial_select_step");
        Workflow.focus('#drone_imagery_calculate_statistics_single_trial_multiseason_workflow', 2);
    });

    jQuery('#drone_imagery_calculate_statistics_trait_select_step').click(function(){
        get_select_box('genotyping_protocol', 'drone_imagery_calculate_statistics_genotyping_protocol_select_div', { 'name' : 'drone_image_calculate_statistics_genotyping_protocol_select', 'id' : 'drone_image_calculate_statistics_genotyping_protocol_select', 'empty':1 });

        manage_drone_imagery_calculate_statistics_trait_ids = [];

        if (manage_drone_imagery_calculate_statistics_observation_variable_type == 'time_ontology') {
            jQuery('input[name="drone_imagery_calculate_statistics_trait_id_select"]').each(function() {
                if (this.checked){
                    manage_drone_imagery_calculate_statistics_trait_ids.push(jQuery(this).val());
                }
            });
        }
        else {
            manage_drone_imagery_calculate_statistics_trait_ids = jQuery('#drone_imagery_calculate_statistics_trait_id_select').val();
            if (manage_drone_imagery_calculate_statistics_trait_ids == null || manage_drone_imagery_calculate_statistics_trait_ids == undefined) {
                alert('Please select at least one observation variable!');
                return false;
            }
        }

        if (manage_drone_imagery_calculate_statistics_trait_ids.length < 1){
            alert('Please select at least one observation variable!');
        } else {
            Workflow.complete("#drone_imagery_calculate_statistics_trait_select_step");
            Workflow.focus('#drone_imagery_calculate_statistics_workflow', 3);
        }
        return false;
    });

    jQuery('#drone_imagery_calculate_statistics_select_input').change(function(){
        jQuery("#drone_imagery_calculate_statistics_relationship_matrix_type_select_div").val('').change();
        jQuery("#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select").val('no').change();

        manage_drone_imagery_calculate_statistics_select = jQuery('#drone_imagery_calculate_statistics_select_input').val();
        if (manage_drone_imagery_calculate_statistics_select == 'marss_germplasmname_block') {
            jQuery('#drone_imagery_calculate_statistics_marss_div').show();
            jQuery('#drone_imagery_calculate_statistics_relationship_matrix_type_div').hide();
            jQuery('#drone_imagery_calculate_statistics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic_pe_residual').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_fitted').hide();
            jQuery('#drone_imagery_calculate_statistics_legendre_polynomial_div').hide();
            jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_div').hide();
            jQuery('#drone_image_calculate_statistics_use_area_under_curve_select_div').hide();
            jQuery('#drone_image_calculate_statistics_inversion_tolerance_select_div').hide();
        }
        else if (manage_drone_imagery_calculate_statistics_select == 'lmer_germplasmname_replicate') {
            jQuery('#drone_imagery_calculate_statistics_marss_div').hide();
            jQuery('#drone_imagery_calculate_statistics_relationship_matrix_type_div').hide();
            jQuery('#drone_imagery_calculate_statistics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic_pe_residual').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic').show();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_fitted').hide();
            jQuery('#drone_imagery_calculate_statistics_legendre_polynomial_div').hide();
            jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_div').hide();
            jQuery('#drone_image_calculate_statistics_use_area_under_curve_select_div').hide();
            jQuery('#drone_image_calculate_statistics_inversion_tolerance_select_div').hide();
        }
        else if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_spatial_genetic_blups') {
            jQuery('#drone_imagery_calculate_statistics_marss_div').hide();
            jQuery('#drone_imagery_calculate_statistics_relationship_matrix_type_div').show();
            jQuery('#drone_imagery_calculate_statistics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic_pe_residual').show();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_fitted').hide();
            jQuery('#drone_imagery_calculate_statistics_legendre_polynomial_div').hide();
            jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_div').hide();
            jQuery('#drone_image_calculate_statistics_use_area_under_curve_select_div').hide();
            jQuery('#drone_image_calculate_statistics_inversion_tolerance_select_div').show();
        }
        else if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_dap_genetic_blups' || manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_gdd_genetic_blups') {
            jQuery('#drone_imagery_calculate_statistics_marss_div').hide();
            jQuery('#drone_imagery_calculate_statistics_relationship_matrix_type_div').show();
            jQuery('#drone_imagery_calculate_statistics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic_pe_residual').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic').show();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_pe').show();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_fitted').hide();
            jQuery('#drone_imagery_calculate_statistics_legendre_polynomial_div').show();
            jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_div').hide();
            jQuery('#drone_image_calculate_statistics_use_area_under_curve_select_div').show();
            jQuery('#drone_image_calculate_statistics_inversion_tolerance_select_div').show();
        }
        else if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_genetic_only_random_regression_dap_genetic_blups' || manage_drone_imagery_calculate_statistics_select == 'sommer_grm_genetic_only_random_regression_gdd_genetic_blups') {
            jQuery('#drone_imagery_calculate_statistics_marss_div').hide();
            jQuery('#drone_imagery_calculate_statistics_relationship_matrix_type_div').show();
            jQuery('#drone_imagery_calculate_statistics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic_pe_residual').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic').show();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_fitted').hide();
            jQuery('#drone_imagery_calculate_statistics_legendre_polynomial_div').show();
            jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_div').hide();
            jQuery('#drone_image_calculate_statistics_use_area_under_curve_select_div').show();
            jQuery('#drone_image_calculate_statistics_inversion_tolerance_select_div').show();
        }
        else if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_dap_blups' || manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_gdd_blups' || manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_dap_blups' || manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {
            jQuery('#drone_imagery_calculate_statistics_marss_div').hide();
            jQuery('#drone_imagery_calculate_statistics_relationship_matrix_type_div').show();
            jQuery('#drone_imagery_calculate_statistics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic_pe_residual').show();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_fitted').hide();
            jQuery('#drone_imagery_calculate_statistics_legendre_polynomial_div').show();
            jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_div').show();
            jQuery('#drone_image_calculate_statistics_use_area_under_curve_select_div').show();
            jQuery('#drone_image_calculate_statistics_inversion_tolerance_select_div').show();
        }
        else if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_genetic_blups') {
            jQuery('#drone_imagery_calculate_statistics_marss_div').hide();
            jQuery('#drone_imagery_calculate_statistics_relationship_matrix_type_div').show();
            jQuery('#drone_imagery_calculate_statistics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic_pe_residual').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic').show();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_fitted').hide();
            jQuery('#drone_imagery_calculate_statistics_legendre_polynomial_div').hide();
            jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_div').hide();
            jQuery('#drone_image_calculate_statistics_use_area_under_curve_select_div').hide();
            jQuery('#drone_image_calculate_statistics_inversion_tolerance_select_div').show();
        }
        else {
            jQuery('#drone_imagery_calculate_statistics_marss_div').hide();
            jQuery('#drone_imagery_calculate_statistics_relationship_matrix_type_div').hide();
            jQuery('#drone_imagery_calculate_statistics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic_pe_residual').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_spatial').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_pe').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_residuals').hide();
            jQuery('#drone_imagery_calculate_statistics_analysis_save_fitted').hide();
            jQuery('#drone_imagery_calculate_statistics_legendre_polynomial_div').hide();
            jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_div').hide();
            jQuery('#drone_image_calculate_statistics_use_area_under_curve_select_div').hide();
            jQuery('#drone_image_calculate_statistics_inversion_tolerance_select_div').hide();
        }

    });

    jQuery('#drone_imagery_calculate_statistics_relationship_matrix_type_select_div').change(function(){
        if (jQuery(this).val() == 'genotypes') {
            jQuery('#drone_imagery_calculate_statistics_genotyping_protocol_div').show();
            jQuery('#drone_imagery_calculate_statistics_htp_phenotypes_rel_matrix_div').hide();
        }
        else if (jQuery(this).val() == 'htp_phenotypes') {
            jQuery('#drone_imagery_calculate_statistics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_calculate_statistics_htp_phenotypes_rel_matrix_div').show();
        }
        else {
            jQuery('#drone_imagery_calculate_statistics_genotyping_protocol_div').hide();
            jQuery('#drone_imagery_calculate_statistics_htp_phenotypes_rel_matrix_div').hide();
        }
    });

    jQuery('#drone_image_calculate_statistics_htp_phenotypes_rel_matrix_select').change(function(){
        if (jQuery(this).val() == 'blues') {
            jQuery('#drone_image_calculate_statistics_htp_phenotypes_rel_matrix_inversion_select_div').show();
        }
        else {
            jQuery('#drone_image_calculate_statistics_htp_phenotypes_rel_matrix_inversion_select_div').hide();
        }
    });

    jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').change(function(){
        if (jQuery(this).val() == 'yes') {
            jQuery('#drone_image_calculate_statistics_genotyping_protocol_include_pedigree_select_div').show();
            jQuery('#drone_image_calculate_statistics_genotyping_protocol_use_parental_grms_select_div').show();
        }
        if (jQuery(this).val() == 'no') {
            jQuery('#drone_image_calculate_statistics_genotyping_protocol_include_pedigree_select_div').hide();
            jQuery('#drone_image_calculate_statistics_genotyping_protocol_use_parental_grms_select_div').hide();
            jQuery('#drone_image_calculate_statistics_genotyping_protocol_include_pedigree_select option[value=no]').attr('selected','selected');
            jQuery('#drone_image_calculate_statistics_genotyping_protocol_use_parental_grms_select option[value=no]').attr('selected','selected');
        }
    });

    jQuery('#drone_image_calculate_statistics_genotyping_protocol_use_parental_grms_select').change(function(){
        if (jQuery(this).val() == 'yes') {
            jQuery('#drone_image_calculate_statistics_genotyping_protocol_include_pedigree_select option[value=no]').attr('selected','selected');
            jQuery('#drone_image_calculate_statistics_genotyping_protocol_include_pedigree_select_div').hide();
        }
        if (jQuery(this).val() == 'no') {
            jQuery('#drone_image_calculate_statistics_genotyping_protocol_include_pedigree_select_div').show();
        }
    });

    jQuery('#drone_image_calculate_statistics_permanent_env_structure_select').change(function(){
        if (jQuery(this).val() == 'euclidean_rows_and_columns') {
            jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_phenotype_correlation_div').hide();
        }
        else if (jQuery(this).val() == 'phenotype_correlation') {
            jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_phenotype_correlation_div').show();
        }
        else {
            jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_phenotype_correlation_div').hide();
        }
    });

    jQuery('#drone_imagery_calculate_statistics_select_step').click(function(){

        manage_drone_imagery_calculate_statistics_select = jQuery('#drone_imagery_calculate_statistics_select_input').val();

        if (manage_drone_imagery_calculate_statistics_select == 'marss_germplasmname_block' && manage_drone_imagery_calculate_statistics_observation_variable_type != 'time_ontology') {
            alert('The MARSS model fit and prediction only works for Time Series traits! Please go to Trait Selection and select time series traits.');
            return false;
        }
        if (jQuery('#drone_image_calculate_statistics_genotyping_protocol_include_pedigree_select').val() == 'yes' && jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val() != 'yes') {
            alert('You can only use pedigree info in the relationship matrix if you will compute the genotypes from the parents!');
            return false;
        }
        if (jQuery('#drone_image_calculate_statistics_genotyping_protocol_use_parental_grms_select').val() == 'yes' && jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val() != 'yes') {
            alert('You can only use parental relationship matrices if you will compute the genotypes from the parents!');
            return false;
        }

        var manage_drone_imagery_calculate_statistics_rr_structure_phenotype_correlation = [];
        if (jQuery('#drone_image_calculate_statistics_permanent_env_structure_select').val() == 'phenotype_correlation') {
            manage_drone_imagery_calculate_statistics_rr_structure_phenotype_correlation = jQuery('#drone_imagery_calculate_statistics_permanent_env_structure_phenotype_correlation_select').val();
            if (!manage_drone_imagery_calculate_statistics_rr_structure_phenotype_correlation || manage_drone_imagery_calculate_statistics_rr_structure_phenotype_correlation.length < 3) {
                alert('Please select at least three phenotypes to use in random regression phenotype correlation structure!');
                return false;
            }
        }

        jQuery.ajax({
            url : '/api/drone_imagery/calculate_statistics',
            type : 'POST',
            data : {
                'observation_variable_id_list':JSON.stringify(manage_drone_imagery_calculate_statistics_trait_ids),
                'field_trial_id_list':JSON.stringify(manage_drone_imagery_calculate_statistics_field_trial_id_array),
                'statistics_select':manage_drone_imagery_calculate_statistics_select,
                'statistics_select_marss_options':jQuery('#drone_imagery_calculate_statistics_select_marss').val(),
                'relationship_matrix_type':jQuery('#drone_imagery_calculate_statistics_relationship_matrix_type_select_div').val(),
                'protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'use_parental_grms_if_compute_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_use_parental_grms_select').val(),
                'include_pedgiree_info_if_compute_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_include_pedigree_select').val(),
                'htp_pheno_rel_matrix_type':jQuery('#drone_image_calculate_statistics_htp_phenotypes_rel_matrix_select').val(),
                'htp_pheno_rel_matrix_time_points':jQuery('#drone_image_calculate_statistics_htp_phenotypes_rel_matrix_times_select').val(),
                'htp_pheno_rel_matrix_blues_inversion':jQuery('#drone_image_calculate_statistics_htp_phenotypes_rel_matrix_inversion_select').val(),
                'tolparinv':jQuery('#drone_image_calculate_statistics_tolparinv_select').val(),
                'legendre_order_number':jQuery('#drone_image_calculate_statistics_legendre_order_number_select').val(),
                'use_area_under_curve':jQuery('#drone_image_calculate_statistics_use_area_under_curve_select').val(),
                'permanent_environment_structure':jQuery('#drone_image_calculate_statistics_permanent_env_structure_select').val(),
                'permanent_environment_structure_phenotype_correlation_traits':JSON.stringify(manage_drone_imagery_calculate_statistics_rr_structure_phenotype_correlation)
            },
            beforeSend: function() {
                jQuery("#working_modal").modal("show");
            },
            success: function(response){
                console.log(response);
                jQuery("#working_modal").modal("hide");

                if (response.error) {
                    alert(response.error);
                }
                else {
                    manage_drone_imagery_calculate_statistics_response = response;

                    var html = '';
                    if (response.sum_square_residual) {
                        html = html + '<h4>Sum square residual: '+response.sum_square_residual+'</h4><hr>';
                    }
                    if (response.genetic_effects_line_plot) {
                        html = html + '<img src="'+response.genetic_effects_line_plot+'"><hr>';
                    }
                    if (response.env_effects_heatmap_plot) {
                        html = html + '<img src="'+response.env_effects_heatmap_plot+'"><hr>';
                    }
                    if (response.env_effects_ggcorr_plot) {
                        html = html + '<img src="'+response.env_effects_ggcorr_plot+'"><hr>';
                    }
                    if (response.env_effects_line_plot) {
                        html = html + '<img src="'+response.env_effects_line_plot+'"><hr>';
                    }
                    if (response.unique_accessions.length > 0 && response.unique_traits.length > 0 && response.result_blup_genetic_data) {
                        manage_drone_imagery_calculate_statistics_accession_names = response.unique_accessions;
                        manage_drone_imagery_calculate_statistics_trait_names = response.unique_traits;
                        manage_drone_imagery_calculate_statistics_phenotype_training_file = response.stats_tempfile;
                        manage_drone_imagery_calculate_statistics_grm_training_file = response.grm_file;

                        html = html + '<table class="table table-bordered table-hover"><thead><tr><th>Accessions</th>';
                        for (var i=0; i<manage_drone_imagery_calculate_statistics_trait_names.length; i++) {
                            html = html + '<th>'+manage_drone_imagery_calculate_statistics_trait_names[i]+'</th>';
                        }
                        html = html + '</tr></thead><tbody>';
                        for (var k=0; k<response.unique_accessions.length; k++) {
                            var acc = response.unique_accessions[k];
                            html = html + '<tr><td>'+acc+'</td>';
                            for (var i=0; i<manage_drone_imagery_calculate_statistics_trait_names.length; i++) {
                                if (response.result_blup_genetic_data[acc] && response.result_blup_genetic_data[acc][manage_drone_imagery_calculate_statistics_trait_names[i]]) {
                                    html = html + '<td>'+response.result_blup_genetic_data[acc][manage_drone_imagery_calculate_statistics_trait_names[i]][0]+'</td>';
                                }
                                else {
                                    html = html + '<td>NA</td>';
                                }
                            }
                            html = html + '</tr>';
                        }
                        html = html + '</tbody></table>';
                    }

                    if (response.unique_plots.length > 0 && response.unique_traits.length > 0 && response.result_blup_spatial_data) {
                        manage_drone_imagery_calculate_statistics_plot_names = response.unique_plots;
                        manage_drone_imagery_calculate_statistics_trait_names = response.unique_traits;

                        html = html + '<table class="table table-bordered table-hover"><thead><tr><th>Plots</th>';
                        for (var i=0; i<response.unique_traits.length; i++) {
                            html = html + '<th>'+response.unique_traits[i]+'</th>';
                        }
                        html = html + '</tr></thead><tbody>';
                        for (var k=0; k<response.unique_plots.length; k++) {
                            var plot = response.unique_plots[k];
                            html = html + '<tr><td>'+plot+'</td>';
                            for (var i=0; i<response.unique_traits.length; i++) {
                                html = html + '<td>'+response.result_blup_spatial_data[plot][response.unique_traits[i]][0]+'</td>';
                            }
                            html = html + '</tr>';
                        }
                        html = html + '</tbody></table>';
                    }

                    if (response.unique_plots.length > 0 && response.unique_traits.length > 0 && response.result_blup_pe_data) {
                        manage_drone_imagery_calculate_statistics_plot_names = response.unique_plots;
                        manage_drone_imagery_calculate_statistics_trait_names = response.unique_traits;

                        html = html + '<table class="table table-bordered table-hover"><thead><tr><th>Plots</th>';
                        for (var i=0; i<response.unique_traits.length; i++) {
                            html = html + '<th>'+response.unique_traits[i]+'</th>';
                        }
                        html = html + '</tr></thead><tbody>';
                        for (var k=0; k<response.unique_plots.length; k++) {
                            var plot = response.unique_plots[k];
                            html = html + '<tr><td>'+plot+'</td>';
                            for (var i=0; i<response.unique_traits.length; i++) {
                                if (response.result_blup_pe_data[plot] && response.result_blup_pe_data[plot][response.unique_traits[i]]) {
                                    html = html + '<td>'+response.result_blup_pe_data[plot][response.unique_traits[i]][0]+'</td>';
                                }
                                else {
                                    html = html + '<td>NA</td>';
                                }
                            }
                            html = html + '</tr>';
                        }
                        html = html + '</tbody></table>';
                    }

                    if (response.results.length > 0) {
                        html = '<table class="table table-bordered table-hover"><thead><tr><th>Observation Variable</th><th>Statistics</th><th>Plot</th></tr></thead><tbody>';
                        for (var i=0; i<response.results.length; i++) {
                            html = html + '<tr><td>'+response.results[i][0]+'</td><td>'+response.results[i][1]+'</td><td><img src="'+response.results[i][2]+'"></td></tr>';
                        }
                        html = html + '</tbody></table>';
                    }

                    html = html + '<hr><a href="'+response.stats_out_tempfile_string+'.log" target=_blank>Stats file or log</a>';

                    if (jQuery('#drone_imagery_calculate_statistics_relationship_matrix_type_select_div').val() == 'htp_phenotypes') {
                        html = html + '<hr><a href="'+response.stats_out_htp_rel_tempfile_out_string+'" target=_blank>HTP Relationship Matrix</a>';
                    }

                    jQuery('#drone_imagery_calculate_statistics_result_div').html(html);

                    Workflow.complete("#drone_imagery_calculate_statistics_select_step");
                    Workflow.focus('#drone_imagery_calculate_statistics_workflow', 4);
                }
            },
            error: function(response){
                jQuery("#working_modal").modal("hide");
                alert('Error calculating statistics!')
            }
        });
    });

    jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic_pe_residual').click(function(){
        jQuery('#generic_save_analysis_template_dialog').modal('show');
    });

    jQuery('#generic_save_analysis_template_submit_button').click(function(){
        var generic_save_analysis_template_analysis_name = jQuery('#generic_save_analysis_template_analysis_name').val();
        var generic_save_analysis_template_analysis_description = jQuery('#generic_save_analysis_template_analysis_description').val();
        var generic_save_analysis_template_analysis_year = jQuery('#generic_save_analysis_template_analysis_year').val();
        var generic_save_analysis_template_breeding_program_id = jQuery('#generic_save_analysis_template_breeding_program_id').val();

        if (generic_save_analysis_template_analysis_name == '') {
            alert('Please give an analysis template name');
            return false;
        }
        if (generic_save_analysis_template_analysis_description == '') {
            alert('Please give an analysis template description');
            return false;
        }
        if (generic_save_analysis_template_analysis_year == '') {
            alert('Please give an analysis template year');
            return false;
        }

        var drone_imagery_stats_parameters = {};
        var drone_imagery_stats_protocol = '';
        var drone_imagery_stats_auxiliary_files = [];
        var drone_imagery_stats_result_summary = {};
        var statistical_ontology_term = '';
        var drone_imagery_stats_compose_trait_info;

        var drone_imagery_stats_tolparinv_param = jQuery('#drone_image_calculate_statistics_tolparinv_select').val();
        var drone_imagery_stats_numbers_traits = manage_drone_imagery_calculate_statistics_response.unique_traits.length;
        var drone_imagery_legendre_order = jQuery('#drone_image_calculate_statistics_legendre_order_number_select').val();

        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_spatial_genetic_blups') {

            var drone_imagery_stats_mv_traits = [];
            for (var i=1; i<drone_imagery_stats_numbers_traits+1; i++) {
                drone_imagery_stats_mv_traits.push('t'+i);
            }
            var drone_imagery_stats_mv_traits_string = drone_imagery_stats_mv_traits.join();

            drone_imagery_stats_protocol = 'mmer('+drone_imagery_stats_mv_traits_string+'~1+replicate, random=~vs(id, Gu=geno_mat, Gtc=unsm('+drone_imagery_stats_numbers_traits+')) +vs(rowNumberFactor, Gtc=diag('+drone_imagery_stats_numbers_traits+')) +vs(colNumberFactor, Gtc=diag('+drone_imagery_stats_numbers_traits+')) + spl2Da(rowNumber, colNumber), rcov=~vs(units, Gtc=unsm('+drone_imagery_stats_numbers_traits+')), data=mat, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [{'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_spatial_genetic_blups_grm_file'}];

            drone_imagery_stats_compose_trait_info = JSON.stringify(manage_drone_imagery_calculate_statistics_response.trait_composing_info);

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and row and column spatial effects computed using Sommer R|SGNSTAT:0000001";
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_genetic_blups') {

            var drone_imagery_stats_mv_traits = [];
            for (var i=1; i<drone_imagery_stats_numbers_traits+1; i++) {
                drone_imagery_stats_mv_traits.push('t'+i);
            }
            var drone_imagery_stats_mv_traits_string = drone_imagery_stats_mv_traits.join();

            drone_imagery_stats_protocol = 'mmer('+drone_imagery_stats_mv_traits_string+'~1+replicate, random=~vs(id, Gu=geno_mat, Gtc=unsm('+drone_imagery_stats_numbers_traits+')), rcov=~vs(units, Gtc=unsm('+drone_imagery_stats_numbers_traits+')), data=mat, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [{'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_genetic_blups_grm_file'}];

            drone_imagery_stats_compose_trait_info = JSON.stringify(manage_drone_imagery_calculate_statistics_response.trait_composing_info);

            statistical_ontology_term = "Multivariate genetic BLUPs using genetic relationship matrix computed using Sommer R|SGNSTAT:0000024";
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_dap_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_DAP, '+drone_imagery_legendre_order+', intercept=TRUE), id) +vs(leg(time_DAP, '+drone_imagery_legendre_order+', intercept=TRUE), plot_id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'legendre_polynomial_order':drone_imagery_legendre_order,
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_permanent_environment_coefficients_file'},
            ];

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using Sommer R|SGNSTAT:0000004";
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_gdd_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), id) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), plot_id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'legendre_polynomial_order':drone_imagery_legendre_order,
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_permanent_environment_coefficients_file'}
            ];

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using Sommer R|SGNSTAT:0000006";
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_genetic_only_random_regression_dap_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_DAP, '+drone_imagery_legendre_order+', intercept=TRUE), id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'legendre_polynomial_order':drone_imagery_legendre_order,
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_genetic_legendre_polynomial_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_genetic_legendre_polynomial_genetic_blups_genetic_coefficients_file'},
            ];

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using Sommer R|SGNSTAT:0000004";
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_genetic_only_random_regression_gdd_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), id) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), plot_id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'legendre_polynomial_order':drone_imagery_legendre_order,
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_genetic_legendre_polynomial_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_genetic_legendre_polynomial_genetic_blups_genetic_coefficients_file'},
            ];

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using Sommer R|SGNSTAT:0000006";
        }

        var training_data_file = manage_drone_imagery_calculate_statistics_response.stats_tempfile;

        if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_gdd_blups' || manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_dap_blups' || manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_dap_blups' || manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {

            training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
            var drone_imagery_permanent_env_structure = jQuery('#drone_image_calculate_statistics_permanent_env_structure_select').val();

            if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_gdd_blups' || manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_dap_blups') {
                drone_imagery_stats_protocol = 'blupf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';
            }
            if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_dap_blups' || manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {
                drone_imagery_stats_protocol = 'airemlf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';
            }

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'legendre_polynomial_order':drone_imagery_legendre_order,
                'protocol':drone_imagery_stats_protocol,
                'permanent_environment_structure':drone_imagery_permanent_env_structure
            };

            if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_gdd_blups') {
                statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using BLUPf90|SGNSTAT:0000010";

                drone_imagery_stats_auxiliary_files = [
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_genetic_blups_grm_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_genetic_blups_param_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_genetic_blups_log_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_genetic_blups_genetic_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_genetic_blups_permanent_environment_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'}
                ];
                if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                    drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
                }
            }
            else if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_dap_blups') {
                statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using BLUPf90|SGNSTAT:0000008";

                drone_imagery_stats_auxiliary_files = [
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_genetic_blups_grm_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_genetic_blups_param_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_genetic_blups_log_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_genetic_blups_genetic_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_genetic_blups_permanent_environment_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'}
                ];
                if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                    drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
                }
            }
            else if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_dap_blups') {
                statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using AIREMLf90|SGNSTAT:0000018";

                drone_imagery_stats_auxiliary_files = [
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_genetic_blups_grm_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_genetic_blups_param_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_genetic_blups_log_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_genetic_blups_genetic_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_genetic_blups_permanent_environment_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'}
                ];
                if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                    drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
                }
            }
            else if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {
                statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using AIREMLf90|SGNSTAT:0000020";

                drone_imagery_stats_auxiliary_files = [
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_genetic_blups_grm_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_genetic_blups_param_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_genetic_blups_log_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_genetic_blups_genetic_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_genetic_blups_permanent_environment_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'}
                ];
                if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                    drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
                }
            }
        }
        if (manage_drone_imagery_calculate_statistics_select == 'lmer_germplasmname_replicate') {
            drone_imagery_stats_protocol = 'lmer(t1~replicate + 1|germplasmName, data=mat, na.action = na.omit)';
            drone_imagery_stats_parameters = {
                'protocol':drone_imagery_stats_protocol
            };
            statistical_ontology_term = "Univariate linear mixed model genetic BLUPs using germplasmName computed using LMER R|SGNSTAT:0000002";
        }

        jQuery.ajax({
            type: 'POST',
            url : '/ajax/analysis/store/json',
            data : {
                'analysis_to_save_boolean':'yes',
                'analysis_name':generic_save_analysis_template_analysis_name+'_GBLUPS',
                'analysis_description':generic_save_analysis_template_analysis_description,
                'analysis_year':generic_save_analysis_template_analysis_year,
                'analysis_breeding_program_id':generic_save_analysis_template_breeding_program_id,
                'analysis_protocol':drone_imagery_stats_protocol,
                'analysis_dataset_id':'',
                'analysis_accession_names':JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_accessions),
                'analysis_trait_names':JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_traits),
                'analysis_statistical_ontology_term':statistical_ontology_term,
                'analysis_precomputed_design_optional':'',
                'analysis_result_values':JSON.stringify(manage_drone_imagery_calculate_statistics_response.result_blup_genetic_data),
                'analysis_result_values_type':'analysis_result_values_match_accession_names',
                'analysis_result_summary':JSON.stringify(drone_imagery_stats_result_summary),
                'analysis_result_trait_compose_info':drone_imagery_stats_compose_trait_info,
                'analysis_model_id':'',
                'analysis_model_name':generic_save_analysis_template_analysis_name+'_GBLUPSandPEandResiduals_Model',
                'analysis_model_description':generic_save_analysis_template_analysis_description,
                'analysis_model_is_public':'yes',
                'analysis_model_language':manage_drone_imagery_calculate_statistics_response.analysis_model_language,
                'analysis_model_type':manage_drone_imagery_calculate_statistics_response.analysis_model_type,
                'analysis_model_properties':JSON.stringify(drone_imagery_stats_parameters),
                'analysis_model_application_name':manage_drone_imagery_calculate_statistics_response.application_name,
                'analysis_model_application_version':manage_drone_imagery_calculate_statistics_response.application_version,
                'analysis_model_file':'',
                'analysis_model_file_type':'',
                'analysis_model_training_data_file':training_data_file,
                'analysis_model_training_data_file_type':manage_drone_imagery_calculate_statistics_response.analysis_model_training_data_file_type,
                'analysis_model_auxiliary_files':JSON.stringify(drone_imagery_stats_auxiliary_files)
            },
            beforeSend: function() {
                jQuery('#working_modal').modal('show');
            },
            success: function(response){
                console.log(response);
                if (response.error) {
                    alert(response.error);
                }
                if (response.success) {
                    var html = '<center>';
                    if (response.model_id) {
                        html = html + '<p>Go to saved <a href="/analyses_model/'+response.model_id+'" target=_blank >model</a></p>';
                    }
                    if (response.analysis_id) {
                        html = html + '<p>Go to saved <a href="/analyses/'+response.analysis_id+'" target=_blank >GBLUP analysis</a></p>';
                    }
                    html = html + '</center>';
                    jQuery('#generic_save_analysis_template_response_div').html(html);

                    var statistical_ontology_term;
                    var drone_imagery_stats_auxiliary_files;
                    var drone_imagery_stats_training_data_file;
                    var generic_save_analysis_template_name_type = '_PermanentEnvironment';
                    var generic_save_analysis_template_env1_result_values = JSON.stringify(manage_drone_imagery_calculate_statistics_response.result_blup_pe_data);

                    if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_dap_genetic_blups') {
                        drone_imagery_stats_auxiliary_files = [
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_grm_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_genetic_coefficients_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_permanent_environment_coefficients_file'}
                        ];

                        statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using Sommer R|SGNSTAT:0000004";

                        drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.stats_tempfile;
                    }
                    if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_gdd_genetic_blups') {
                        drone_imagery_stats_auxiliary_files = [
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_grm_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_genetic_coefficients_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_permanent_environment_coefficients_file'}
                        ];

                        statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using Sommer R|SGNSTAT:0000006";

                        drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.stats_tempfile;
                    }
                    if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_gdd_blups') {
                        statistical_ontology_term = "Multivariate linear mixed model permanent environment BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using BLUPf90|SGNSTAT:0000011";

                        drone_imagery_stats_auxiliary_files = [
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_grm_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_param_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_log_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_genetic_coefficients_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_permanent_environment_coefficients_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'}
                        ];
                        if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                            drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
                        }

                        drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
                    }
                    else if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_dap_blups') {
                        statistical_ontology_term = "Multivariate linear mixed model permanent environment BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using BLUPf90|SGNSTAT:0000009";

                        drone_imagery_stats_auxiliary_files = [
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_grm_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_param_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_log_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_genetic_coefficients_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_permanent_environment_coefficients_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'}
                        ];
                        if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                            drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
                        }

                        drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
                    }
                    if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {
                        statistical_ontology_term = "Multivariate linear mixed model permanent environment BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using AIREMLf90|SGNSTAT:0000021";

                        drone_imagery_stats_auxiliary_files = [
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_grm_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_param_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_log_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_genetic_coefficients_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_permanent_environment_coefficients_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'}
                        ];
                        if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                            drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
                        }

                        drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
                    }
                    else if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_dap_blups') {
                        statistical_ontology_term = "Multivariate linear mixed model permanent environment BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using AIREMLf90|SGNSTAT:0000019";

                        drone_imagery_stats_auxiliary_files = [
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_grm_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_param_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_log_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_genetic_coefficients_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_permanent_environment_coefficients_file'},
                            {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'}
                        ];
                        if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                            drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
                        }

                        drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
                    }

                    if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_spatial_genetic_blups') {
                        statistical_ontology_term = "Multivariate linear mixed model 2D spline spatial BLUPs using genetic relationship matrix and row and column spatial effects computed using Sommer R|SGNSTAT:0000003";

                        drone_imagery_stats_auxiliary_files = [{'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_spatial_genetic_blups_grm_file'}];

                        generic_save_analysis_template_name_type = '_Spatial';
                        generic_save_analysis_template_env1_result_values = JSON.stringify(manage_drone_imagery_calculate_statistics_response.result_blup_spatial_data);

                        drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.stats_tempfile;
                    }

                    jQuery.ajax({
                        type: 'POST',
                        url : '/ajax/analysis/store/json',
                        data : {
                            'analysis_to_save_boolean':'yes',
                            'analysis_name':generic_save_analysis_template_analysis_name+generic_save_analysis_template_name_type,
                            'analysis_description':generic_save_analysis_template_analysis_description,
                            'analysis_year':generic_save_analysis_template_analysis_year,
                            'analysis_breeding_program_id':generic_save_analysis_template_breeding_program_id,
                            'analysis_protocol':drone_imagery_stats_protocol,
                            'analysis_dataset_id':'',
                            'analysis_accession_names':JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_accessions),
                            'analysis_trait_names':JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_traits),
                            'analysis_statistical_ontology_term':statistical_ontology_term,
                            'analysis_precomputed_design_optional':JSON.stringify(manage_drone_imagery_calculate_statistics_response.field_trial_design),
                            'analysis_result_values':generic_save_analysis_template_env1_result_values,
                            'analysis_result_values_type':'analysis_result_values_match_precomputed_design',
                            'analysis_result_summary':JSON.stringify(drone_imagery_stats_result_summary),
                            'analysis_result_trait_compose_info':'',
                            'analysis_model_id':response.model_id,
                            'analysis_model_name':'',
                            'analysis_model_description':'',
                            'analysis_model_is_public':'yes',
                            'analysis_model_language':manage_drone_imagery_calculate_statistics_response.analysis_model_language,
                            'analysis_model_type':manage_drone_imagery_calculate_statistics_response.analysis_model_type,
                            'analysis_model_properties':JSON.stringify(drone_imagery_stats_parameters),
                            'analysis_model_application_name':manage_drone_imagery_calculate_statistics_response.application_name,
                            'analysis_model_application_version':manage_drone_imagery_calculate_statistics_response.application_version,
                            'analysis_model_file':'',
                            'analysis_model_file_type':'',
                            'analysis_model_training_data_file':drone_imagery_stats_training_data_file,
                            'analysis_model_training_data_file_type':manage_drone_imagery_calculate_statistics_response.analysis_model_training_data_file_type,
                            'analysis_model_auxiliary_files':JSON.stringify(drone_imagery_stats_auxiliary_files)
                        },
                        success: function(response){
                            console.log(response);
                            if (response.error) {
                                alert(response.error);
                            }
                            if (response.success) {
                                html = html + '<center>';
                                if (response.analysis_id) {
                                    if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_spatial_genetic_blups') {
                                        html = html + '<p>Go to saved <a href="/analyses/'+response.analysis_id+'" target=_blank >spatial BLUP analysis</a></p>';
                                    }
                                    else {
                                        html = html + '<p>Go to saved <a href="/analyses/'+response.analysis_id+'" target=_blank >permanent environment BLUP analysis</a></p>';
                                    }
                                }
                                html = html + '</center>';
                                jQuery('#generic_save_analysis_template_response_div').html(html);

                                var drone_imagery_stats_auxiliary_files;
                                var drone_imagery_stats_training_data_file;
                                if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_dap_genetic_blups') {

                                    drone_imagery_stats_auxiliary_files = [
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_grm_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_genetic_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_permanent_environment_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_residual_file'}
                                    ];

                                    statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using Sommer R|SGNSTAT:0000030";

                                    drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.stats_tempfile;
                                }
                                if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_gdd_genetic_blups') {

                                    drone_imagery_stats_auxiliary_files = [
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_grm_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_genetic_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_permanent_environment_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_residual_file'}
                                    ];

                                    statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using Sommer R|SGNSTAT:0000031";

                                    drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.stats_tempfile;
                                }
                                if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_gdd_blups') {
                                    statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using BLUPf90|SGNSTAT:0000029";

                                    drone_imagery_stats_auxiliary_files = [
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_grm_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_param_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_log_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_genetic_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_permanent_environment_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_residual_file'}
                                    ];
                                    if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                                        drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
                                    }

                                    drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
                                }
                                else if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_dap_blups') {
                                    statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using BLUPf90|SGNSTAT:0000028";

                                    drone_imagery_stats_auxiliary_files = [
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_grm_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_param_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_log_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_genetic_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_permanent_environment_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_residual_file'}
                                    ];
                                    if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                                        drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
                                    }

                                    drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
                                }
                                if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {
                                    statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using AIREMLf90|SGNSTAT:0000027";

                                    drone_imagery_stats_auxiliary_files = [
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_grm_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_param_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_log_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_genetic_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_permanent_environment_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_residual_file'}
                                    ];
                                    if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                                        drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
                                    }

                                    drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
                                }
                                else if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_dap_blups') {
                                    statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using AIREMLf90|SGNSTAT:0000026";

                                    drone_imagery_stats_auxiliary_files = [
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_grm_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_param_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_log_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_genetic_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_permanent_environment_coefficients_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'},
                                        {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_residual_file'}
                                    ];
                                    if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                                        drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
                                    }

                                    drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
                                }

                                if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_spatial_genetic_blups') {
                                    jQuery('#working_modal').modal('hide');
                                    alert('Analysis and/or model saved!');
                                    return false;
                                }

                                jQuery.ajax({
                                    type: 'POST',
                                    url : '/ajax/analysis/store/json',
                                    data : {
                                        'analysis_to_save_boolean':'yes',
                                        'analysis_name':generic_save_analysis_template_analysis_name+'_Residual',
                                        'analysis_description':generic_save_analysis_template_analysis_description,
                                        'analysis_year':generic_save_analysis_template_analysis_year,
                                        'analysis_breeding_program_id':generic_save_analysis_template_breeding_program_id,
                                        'analysis_protocol':drone_imagery_stats_protocol,
                                        'analysis_dataset_id':'',
                                        'analysis_accession_names':JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_accessions),
                                        'analysis_trait_names':JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_residual_traits),
                                        'analysis_statistical_ontology_term':statistical_ontology_term,
                                        'analysis_precomputed_design_optional':JSON.stringify(manage_drone_imagery_calculate_statistics_response.field_trial_design),
                                        'analysis_result_values':JSON.stringify(manage_drone_imagery_calculate_statistics_response.result_residual_data),
                                        'analysis_result_values_type':'analysis_result_values_match_precomputed_design',
                                        'analysis_result_summary':JSON.stringify(drone_imagery_stats_result_summary),
                                        'analysis_result_trait_compose_info':JSON.stringify(manage_drone_imagery_calculate_statistics_response.trait_composing_info),
                                        'analysis_model_id':response.model_id,
                                        'analysis_model_name':'',
                                        'analysis_model_description':'',
                                        'analysis_model_is_public':'yes',
                                        'analysis_model_language':manage_drone_imagery_calculate_statistics_response.analysis_model_language,
                                        'analysis_model_type':manage_drone_imagery_calculate_statistics_response.analysis_model_type,
                                        'analysis_model_properties':JSON.stringify(drone_imagery_stats_parameters),
                                        'analysis_model_application_name':manage_drone_imagery_calculate_statistics_response.application_name,
                                        'analysis_model_application_version':manage_drone_imagery_calculate_statistics_response.application_version,
                                        'analysis_model_file':'',
                                        'analysis_model_file_type':'',
                                        'analysis_model_training_data_file':drone_imagery_stats_training_data_file,
                                        'analysis_model_training_data_file_type':manage_drone_imagery_calculate_statistics_response.analysis_model_training_data_file_type,
                                        'analysis_model_auxiliary_files':JSON.stringify(drone_imagery_stats_auxiliary_files)
                                    },
                                    success: function(response){
                                        jQuery('#working_modal').modal('hide');
                                        console.log(response);
                                        if (response.error) {
                                            alert(response.error);
                                        }
                                        if (response.success) {
                                            alert('Analysis and/or model saved!');
                                            html = html + '<center>';
                                            if (response.analysis_id) {
                                                html = html + '<p>Go to saved <a href="/analyses/'+response.analysis_id+'" target=_blank >residuals analysis</a></p>';
                                            }
                                            html = html + '</center>';
                                            jQuery('#generic_save_analysis_template_response_div').html(html);
                                        }
                                    },
                                    error: function(response){
                                        alert('Error saving analysis multiple!');
                                    }
                                });
                            }
                        },
                        error: function(response){
                            alert('Error saving analysis multiple!');
                        }
                    });
                }
            },
            error: function(response){
                jQuery('#working_modal').modal('hide');
                alert('Error saving analysis multiple!');
            }
        });
    });

    jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_genetic').click(function(){
        jQuery('#generic_save_analysis_dialog').modal('show');

        var drone_imagery_stats_parameters = {};
        var drone_imagery_stats_protocol = '';
        var drone_imagery_stats_auxiliary_files = [];
        var drone_imagery_stats_result_summary = {};
        var statistical_ontology_term = '';

        var drone_imagery_stats_tolparinv_param = jQuery('#drone_image_calculate_statistics_tolparinv_select').val();
        var drone_imagery_stats_numbers_traits = manage_drone_imagery_calculate_statistics_response.unique_traits.length;
        var drone_imagery_legendre_order = jQuery('#drone_image_calculate_statistics_legendre_order_number_select').val();

        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_spatial_genetic_blups') {

            var drone_imagery_stats_mv_traits = [];
            for (var i=1; i<drone_imagery_stats_numbers_traits+1; i++) {
                drone_imagery_stats_mv_traits.push('t'+i);
            }
            var drone_imagery_stats_mv_traits_string = drone_imagery_stats_mv_traits.join();

            drone_imagery_stats_protocol = 'mmer('+drone_imagery_stats_mv_traits_string+'~1+replicate, random=~vs(id, Gu=geno_mat, Gtc=unsm('+drone_imagery_stats_numbers_traits+')) +vs(rowNumberFactor, Gtc=diag('+drone_imagery_stats_numbers_traits+')) +vs(colNumberFactor, Gtc=diag('+drone_imagery_stats_numbers_traits+')) + spl2Da(rowNumber, colNumber), rcov=~vs(units, Gtc=unsm('+drone_imagery_stats_numbers_traits+')), data=mat, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [{'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_spatial_genetic_blups_grm_file'}];

            jQuery('#generic_save_analysis_result_compose_trait_info').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.trait_composing_info));

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and row and column spatial effects computed using Sommer R|SGNSTAT:0000001";
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_genetic_blups') {

            var drone_imagery_stats_mv_traits = [];
            for (var i=1; i<drone_imagery_stats_numbers_traits+1; i++) {
                drone_imagery_stats_mv_traits.push('t'+i);
            }
            var drone_imagery_stats_mv_traits_string = drone_imagery_stats_mv_traits.join();

            drone_imagery_stats_protocol = 'mmer('+drone_imagery_stats_mv_traits_string+'~1+replicate, random=~vs(id, Gu=geno_mat, Gtc=unsm('+drone_imagery_stats_numbers_traits+')), rcov=~vs(units, Gtc=unsm('+drone_imagery_stats_numbers_traits+')), data=mat, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [{'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_genetic_blups_grm_file'}];

            jQuery('#generic_save_analysis_result_compose_trait_info').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.trait_composing_info));

            statistical_ontology_term = "Multivariate genetic BLUPs using genetic relationship matrix computed using Sommer R|SGNSTAT:0000024";
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_dap_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_DAP, '+drone_imagery_legendre_order+', intercept=TRUE), id) +vs(leg(time_DAP, '+drone_imagery_legendre_order+', intercept=TRUE), plot_id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'legendre_polynomial_order':drone_imagery_legendre_order,
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_permanent_environment_coefficients_file'},
            ];

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using Sommer R|SGNSTAT:0000004";
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_gdd_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), id) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), plot_id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'legendre_polynomial_order':drone_imagery_legendre_order,
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_permanent_environment_coefficients_file'}
            ];

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using Sommer R|SGNSTAT:0000006";
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_genetic_only_random_regression_dap_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_DAP, '+drone_imagery_legendre_order+', intercept=TRUE), id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'legendre_polynomial_order':drone_imagery_legendre_order,
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_genetic_legendre_polynomial_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_genetic_legendre_polynomial_genetic_blups_genetic_coefficients_file'},
            ];

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using Sommer R|SGNSTAT:0000004";
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_genetic_only_random_regression_gdd_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), id) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), plot_id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'legendre_polynomial_order':drone_imagery_legendre_order,
                'protocol':drone_imagery_stats_protocol
            };

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_genetic_legendre_polynomial_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_genetic_legendre_polynomial_genetic_blups_genetic_coefficients_file'},
            ];

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using Sommer R|SGNSTAT:0000006";
        }

        var training_data_file = manage_drone_imagery_calculate_statistics_response.stats_tempfile;

        if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_gdd_blups' || manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_dap_blups' || manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_dap_blups' || manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {

            training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
            var drone_imagery_permanent_env_structure = jQuery('#drone_image_calculate_statistics_permanent_env_structure_select').val();

            if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_gdd_blups' || manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_dap_blups') {
                drone_imagery_stats_protocol = 'blupf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';
            }
            if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_dap_blups' || manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {
                drone_imagery_stats_protocol = 'airemlf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';
            }

            drone_imagery_stats_parameters = {
                'tolparinv':drone_imagery_stats_tolparinv_param,
                'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
                'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
                'legendre_polynomial_order':drone_imagery_legendre_order,
                'protocol':drone_imagery_stats_protocol,
                'permanent_environment_structure':drone_imagery_permanent_env_structure
            };

            if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_gdd_blups') {
                statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using BLUPf90|SGNSTAT:0000010";

                drone_imagery_stats_auxiliary_files = [
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_genetic_blups_grm_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_genetic_blups_param_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_genetic_blups_log_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_genetic_blups_genetic_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_genetic_blups_permanent_environment_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'}
                ];
                if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                    drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
                }
            }
            else if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_dap_blups') {
                statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using BLUPf90|SGNSTAT:0000008";

                drone_imagery_stats_auxiliary_files = [
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_genetic_blups_grm_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_genetic_blups_param_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_genetic_blups_log_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_genetic_blups_genetic_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_genetic_blups_permanent_environment_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'}
                ];
                if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                    drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
                }
            }
            else if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_dap_blups') {
                statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using AIREMLf90|SGNSTAT:0000018";

                drone_imagery_stats_auxiliary_files = [
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_genetic_blups_grm_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_genetic_blups_param_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_genetic_blups_log_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_genetic_blups_genetic_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_genetic_blups_permanent_environment_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'}
                ];
                if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                    drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
                }
            }
            else if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {
                statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using AIREMLf90|SGNSTAT:0000020";

                drone_imagery_stats_auxiliary_files = [
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_genetic_blups_grm_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_genetic_blups_param_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_genetic_blups_log_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_genetic_blups_genetic_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_genetic_blups_permanent_environment_coefficients_file'},
                    {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'}
                ];
                if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                    drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
                }
            }
        }
        if (manage_drone_imagery_calculate_statistics_select == 'lmer_germplasmname_replicate') {
            drone_imagery_stats_protocol = 'lmer(t1~replicate + 1|germplasmName, data=mat, na.action = na.omit)';
            drone_imagery_stats_parameters = {
                'protocol':drone_imagery_stats_protocol
            };
            statistical_ontology_term = "Univariate linear mixed model genetic BLUPs using germplasmName computed using LMER R|SGNSTAT:0000002";
        }

        jQuery('#generic_save_analysis_protocol').val(drone_imagery_stats_protocol);
        jQuery('#generic_save_analysis_model_properties').val(JSON.stringify(drone_imagery_stats_parameters));
        //jQuery('#generic_save_analysis_dataset_id').val();
        jQuery('#generic_save_analysis_accession_names').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_accessions));
        jQuery('#generic_save_analysis_trait_names').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_traits));
        jQuery('#generic_save_analysis_statistical_ontology_term').val(statistical_ontology_term);
        //jQuery('#generic_save_analysis_design').val();
        jQuery('#generic_save_analysis_result_values').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.result_blup_genetic_data));
        jQuery('#generic_save_analysis_result_values_type').val(manage_drone_imagery_calculate_statistics_response.analysis_result_values_type);
        jQuery('#generic_save_analysis_result_summary_values').val(JSON.stringify(drone_imagery_stats_result_summary));
        jQuery('#generic_save_analysis_model_language').val(manage_drone_imagery_calculate_statistics_response.analysis_model_language);
        jQuery('#generic_save_analysis_model_type').val(manage_drone_imagery_calculate_statistics_response.analysis_model_type);
        jQuery('#generic_save_analysis_model_application_name').val(manage_drone_imagery_calculate_statistics_response.application_name);
        jQuery('#generic_save_analysis_model_application_version').val(manage_drone_imagery_calculate_statistics_response.application_version);
        //jQuery('#generic_save_analysis_model_file').val();
        //jQuery('#generic_save_analysis_model_archived_model_file_type').val();
        jQuery('#generic_save_analysis_model_training_data_file').val(training_data_file);
        jQuery('#generic_save_analysis_model_archived_training_data_file_type').val(manage_drone_imagery_calculate_statistics_response.analysis_model_training_data_file_type);
        jQuery('#generic_save_analysis_model_auxiliary_files').val(JSON.stringify(drone_imagery_stats_auxiliary_files));

        return false;
    });

    jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_spatial').click(function(){
        if (manage_drone_imagery_calculate_statistics_field_trial_id_array.length>1) {
            alert('Saving spatial BLUPs currently only implemented for a single trial, so only select one field trial in your analysis');
            return false;
        }

        jQuery('#generic_save_analysis_dialog').modal('show');

        var drone_imagery_stats_result_summary = {};

        var drone_imagery_stats_tolparinv_param = jQuery('#drone_image_calculate_statistics_tolparinv_select').val();
        var drone_imagery_stats_numbers_traits = manage_drone_imagery_calculate_statistics_response.unique_traits.length;

        var drone_imagery_stats_mv_traits = [];
        for (var i=1; i<drone_imagery_stats_numbers_traits+1; i++) {
            drone_imagery_stats_mv_traits.push('t'+i);
        }
        var drone_imagery_stats_mv_traits_string = drone_imagery_stats_mv_traits.join();

        var drone_imagery_stats_protocol = 'mmer('+drone_imagery_stats_mv_traits_string+'~1, random=~vs(id, Gu=geno_mat, Gtc=unsm('+drone_imagery_stats_numbers_traits+')) +vs(rowNumberFactor, Gtc=diag('+drone_imagery_stats_numbers_traits+')) +vs(colNumberFactor, Gtc=diag('+drone_imagery_stats_numbers_traits+')), rcov=~vs(units, Gtc=unsm('+drone_imagery_stats_numbers_traits+')), data=mat, tolparinv='+drone_imagery_stats_tolparinv_param+');';

        var drone_imagery_stats_parameters = {
            'tolparinv':drone_imagery_stats_tolparinv_param,
            'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
            'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
            'protocol':drone_imagery_stats_protocol
        };

        var statistical_ontology_term = "Multivariate linear mixed model 2D spline spatial BLUPs using genetic relationship matrix and row and column spatial effects computed using Sommer R|SGNSTAT:0000003";

        jQuery('#generic_save_analysis_result_compose_trait_info').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.trait_composing_info));

        var drone_imagery_stats_auxiliary_files = [{'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_spatial_genetic_blups_grm_file'}];

        jQuery('#generic_save_analysis_protocol').val(drone_imagery_stats_protocol);
        jQuery('#generic_save_analysis_model_properties').val(JSON.stringify(drone_imagery_stats_parameters));
        //jQuery('#generic_save_analysis_dataset_id').val();
        jQuery('#generic_save_analysis_accession_names').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_accessions));
        jQuery('#generic_save_analysis_trait_names').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_traits));
        jQuery('#generic_save_analysis_statistical_ontology_term').val(statistical_ontology_term);
        jQuery('#generic_save_analysis_design').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.field_trial_design));
        jQuery('#generic_save_analysis_result_values').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.result_blup_spatial_data));
        jQuery('#generic_save_analysis_result_values_type').val('analysis_result_values_match_precomputed_design');
        jQuery('#generic_save_analysis_result_summary_values').val(JSON.stringify(drone_imagery_stats_result_summary));
        jQuery('#generic_save_analysis_model_language').val(manage_drone_imagery_calculate_statistics_response.analysis_model_language);
        jQuery('#generic_save_analysis_model_type').val(manage_drone_imagery_calculate_statistics_response.analysis_model_type);
        jQuery('#generic_save_analysis_model_application_name').val(manage_drone_imagery_calculate_statistics_response.application_name);
        jQuery('#generic_save_analysis_model_application_version').val(manage_drone_imagery_calculate_statistics_response.application_version);
        //jQuery('#generic_save_analysis_model_file').val();
        //jQuery('#generic_save_analysis_model_archived_model_file_type').val();
        jQuery('#generic_save_analysis_model_training_data_file').val(manage_drone_imagery_calculate_statistics_response.stats_tempfile);
        jQuery('#generic_save_analysis_model_archived_training_data_file_type').val(manage_drone_imagery_calculate_statistics_response.analysis_model_training_data_file_type);
        jQuery('#generic_save_analysis_model_auxiliary_files').val(JSON.stringify(drone_imagery_stats_auxiliary_files));

        return false;
    });

    jQuery('#drone_imagery_calculate_statistics_analysis_save_blups_pe').click(function(){
        if (manage_drone_imagery_calculate_statistics_field_trial_id_array.length>1) {
            alert('Saving spatial BLUPs currently only implemented for a single trial, so only select one field trial in your analysis');
            return false;
        }

        jQuery('#generic_save_analysis_dialog').modal('show');

        var drone_imagery_stats_result_summary = {};

        var drone_imagery_stats_tolparinv_param = jQuery('#drone_image_calculate_statistics_tolparinv_select').val();
        var drone_imagery_legendre_order = jQuery('#drone_image_calculate_statistics_legendre_order_number_select').val();
        var drone_imagery_permanent_env_structure = jQuery('#drone_image_calculate_statistics_permanent_env_structure_select').val();

        var drone_imagery_stats_protocol = '';
        var statistical_ontology_term;
        var drone_imagery_stats_auxiliary_files;
        var drone_imagery_stats_training_data_file;
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_dap_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_DAP, '+drone_imagery_legendre_order+', intercept=TRUE), id) +vs(leg(time_DAP, '+drone_imagery_legendre_order+', intercept=TRUE), plot_id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_permanent_environment_coefficients_file'}
            ];

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using Sommer R|SGNSTAT:0000004";

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.stats_tempfile;
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_gdd_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), id) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), plot_id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_permanent_environment_coefficients_file'}
            ];

            statistical_ontology_term = "Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using Sommer R|SGNSTAT:0000006";

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.stats_tempfile;
        }
        if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_gdd_blups') {
            drone_imagery_stats_protocol = 'blupf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';

            statistical_ontology_term = "Multivariate linear mixed model permanent environment BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using BLUPf90|SGNSTAT:0000011";

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_param_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_log_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_permanent_environment_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'}
            ];
            if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
            }

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
        }
        else if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_dap_blups') {
            drone_imagery_stats_protocol = 'blupf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';

            statistical_ontology_term = "Multivariate linear mixed model permanent environment BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using BLUPf90|SGNSTAT:0000009";

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_param_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_log_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_permanent_environment_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'}
            ];
            if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
            }

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
        }
        if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {
            drone_imagery_stats_protocol = 'airemlf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';

            statistical_ontology_term = "Multivariate linear mixed model permanent environment BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using AIREMLf90|SGNSTAT:0000021";

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_param_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_log_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_permanent_environment_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'}
            ];
            if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
            }

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
        }
        else if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_dap_blups') {
            drone_imagery_stats_protocol = 'airemlf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';

            statistical_ontology_term = "Multivariate linear mixed model permanent environment BLUPs using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using AIREMLf90|SGNSTAT:0000019";

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_param_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_log_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_permanent_environment_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'}
            ];
            if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
            }

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
        }

        var drone_imagery_stats_parameters = {
            'tolparinv':drone_imagery_stats_tolparinv_param,
            'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
            'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
            'legendre_polynomial_order':drone_imagery_legendre_order,
            'protocol':drone_imagery_stats_protocol,
            'permanent_environment_structure':drone_imagery_permanent_env_structure
        };

        jQuery('#generic_save_analysis_protocol').val(drone_imagery_stats_protocol);
        jQuery('#generic_save_analysis_model_properties').val(JSON.stringify(drone_imagery_stats_parameters));
        //jQuery('#generic_save_analysis_dataset_id').val();
        jQuery('#generic_save_analysis_accession_names').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_accessions));
        jQuery('#generic_save_analysis_trait_names').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_traits));
        jQuery('#generic_save_analysis_statistical_ontology_term').val(statistical_ontology_term);
        jQuery('#generic_save_analysis_design').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.field_trial_design));
        jQuery('#generic_save_analysis_result_values').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.result_blup_pe_data));
        jQuery('#generic_save_analysis_result_values_type').val('analysis_result_values_match_precomputed_design');
        jQuery('#generic_save_analysis_result_summary_values').val(JSON.stringify(drone_imagery_stats_result_summary));
        jQuery('#generic_save_analysis_model_language').val(manage_drone_imagery_calculate_statistics_response.analysis_model_language);
        jQuery('#generic_save_analysis_model_type').val(manage_drone_imagery_calculate_statistics_response.analysis_model_type);
        jQuery('#generic_save_analysis_model_application_name').val(manage_drone_imagery_calculate_statistics_response.application_name);
        jQuery('#generic_save_analysis_model_application_version').val(manage_drone_imagery_calculate_statistics_response.application_version);
        //jQuery('#generic_save_analysis_model_file').val();
        //jQuery('#generic_save_analysis_model_archived_model_file_type').val();
        jQuery('#generic_save_analysis_model_training_data_file').val(drone_imagery_stats_training_data_file);
        jQuery('#generic_save_analysis_model_archived_training_data_file_type').val(manage_drone_imagery_calculate_statistics_response.analysis_model_training_data_file_type);
        jQuery('#generic_save_analysis_model_auxiliary_files').val(JSON.stringify(drone_imagery_stats_auxiliary_files));

        return false;
    });

    jQuery('#drone_imagery_calculate_statistics_analysis_save_residuals').click(function(){
        jQuery('#generic_save_analysis_dialog').modal('show');

        var drone_imagery_stats_result_summary = {};

        jQuery('#generic_save_analysis_result_compose_trait_info').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.trait_composing_info));

        var drone_imagery_stats_tolparinv_param = jQuery('#drone_image_calculate_statistics_tolparinv_select').val();
        var drone_imagery_legendre_order = jQuery('#drone_image_calculate_statistics_legendre_order_number_select').val();
        var drone_imagery_permanent_env_structure = jQuery('#drone_image_calculate_statistics_permanent_env_structure_select').val();

        var drone_imagery_stats_protocol = '';
        var statistical_ontology_term;
        var drone_imagery_stats_auxiliary_files;
        var drone_imagery_stats_training_data_file;
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_dap_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_DAP, '+drone_imagery_legendre_order+', intercept=TRUE), id) +vs(leg(time_DAP, '+drone_imagery_legendre_order+', intercept=TRUE), plot_id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_permanent_environment_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_DAP_genetic_blups_residual_file'}
            ];

            statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using Sommer R|SGNSTAT:0000030";

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.stats_tempfile;
        }
        if (manage_drone_imagery_calculate_statistics_select == 'sommer_grm_temporal_random_regression_gdd_genetic_blups') {

            drone_imagery_stats_protocol = 'mmer(value~1+replicate, random=~vs(id, Gu=geno_mat) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), id) +vs(leg(time_GDD, '+drone_imagery_legendre_order+', intercept=TRUE), plot_id), rcov=~vs(units), data=mat_long_format, tolparinv='+drone_imagery_stats_tolparinv_param+');';

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.grm_file, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_permanent_environment_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'nicksmixedmodels_v1.01_sommer_grm_temporal_legendre_polynomial_GDD_genetic_blups_residual_file'}
            ];

            statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using Sommer R|SGNSTAT:0000031";

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.stats_tempfile;
        }
        if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_gdd_blups') {
            drone_imagery_stats_protocol = 'blupf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';

            statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using BLUPf90|SGNSTAT:0000029";

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_param_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_log_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_permanent_environment_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_residual_file'}
            ];
            if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
            }

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
        }
        else if (manage_drone_imagery_calculate_statistics_select == 'blupf90_grm_random_regression_dap_blups') {
            drone_imagery_stats_protocol = 'blupf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';

            statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using BLUPf90|SGNSTAT:0000028";

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_param_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_log_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_permanent_environment_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_residual_file'}
            ];
            if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'blupf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
            }

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
        }
        if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_gdd_blups') {
            drone_imagery_stats_protocol = 'airemlf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';

            statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on growing degree days computed using AIREMLf90|SGNSTAT:0000027";

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_param_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_log_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_permanent_environment_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_solutions_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_permanent_environment_blups_residual_file'}
            ];
            if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_GDD_blups_permanent_environment_structure_file'});
            }

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
        }
        else if (manage_drone_imagery_calculate_statistics_select == 'airemlf90_grm_random_regression_dap_blups') {
            drone_imagery_stats_protocol = 'airemlf90(random regression GRM and Permanent Environment '+drone_imagery_permanent_env_structure+', conv_crit='+drone_imagery_stats_tolparinv_param+');';

            statistical_ontology_term = "Multivariate linear mixed model residual using genetic relationship matrix and temporal Legendre polynomial random regression on days after planting computed using AIREMLf90|SGNSTAT:0000026";

            drone_imagery_stats_auxiliary_files = [
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_grm_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_grm_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_param_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_param_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.stats_out_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_log_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_genetic_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_genetic_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.rr_pe_coefficients, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_permanent_environment_coefficients_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_solutions, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_solutions_file'},
                {'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.yhat_residual_tempfile, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_permanent_environment_blups_residual_file'}
            ];
            if (drone_imagery_permanent_env_structure == 'euclidean_rows_and_columns') {
                drone_imagery_stats_auxiliary_files.push({'auxiliary_model_file':manage_drone_imagery_calculate_statistics_response.blupf90_permanent_environment_structure_file, auxiliary_model_file_archive_type:'airemlf90_grm_temporal_leg_random_regression_DAP_blups_permanent_environment_structure_file'});
            }

            drone_imagery_stats_training_data_file = manage_drone_imagery_calculate_statistics_response.blupf90_training_file;
        }

        var drone_imagery_stats_parameters = {
            'tolparinv':drone_imagery_stats_tolparinv_param,
            'genotyping_protocol_id':jQuery('#drone_image_calculate_statistics_genotyping_protocol_select').val(),
            'compute_genotypes_from_parents':jQuery('#drone_image_calculate_statistics_genotyping_protocol_compute_from_parents_select').val(),
            'legendre_polynomial_order':drone_imagery_legendre_order,
            'protocol':drone_imagery_stats_protocol,
            'permanent_environment_structure':drone_imagery_permanent_env_structure
        };

        jQuery('#generic_save_analysis_protocol').val(drone_imagery_stats_protocol);
        jQuery('#generic_save_analysis_model_properties').val(JSON.stringify(drone_imagery_stats_parameters));
        //jQuery('#generic_save_analysis_dataset_id').val();
        jQuery('#generic_save_analysis_accession_names').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_accessions));
        jQuery('#generic_save_analysis_trait_names').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.unique_residual_traits));
        jQuery('#generic_save_analysis_statistical_ontology_term').val(statistical_ontology_term);
        jQuery('#generic_save_analysis_design').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.field_trial_design));
        jQuery('#generic_save_analysis_result_values').val(JSON.stringify(manage_drone_imagery_calculate_statistics_response.result_residual_data));
        jQuery('#generic_save_analysis_result_values_type').val('analysis_result_values_match_precomputed_design');
        jQuery('#generic_save_analysis_result_summary_values').val(JSON.stringify(drone_imagery_stats_result_summary));
        jQuery('#generic_save_analysis_model_language').val(manage_drone_imagery_calculate_statistics_response.analysis_model_language);
        jQuery('#generic_save_analysis_model_type').val(manage_drone_imagery_calculate_statistics_response.analysis_model_type);
        jQuery('#generic_save_analysis_model_application_name').val(manage_drone_imagery_calculate_statistics_response.application_name);
        jQuery('#generic_save_analysis_model_application_version').val(manage_drone_imagery_calculate_statistics_response.application_version);
        //jQuery('#generic_save_analysis_model_file').val();
        //jQuery('#generic_save_analysis_model_archived_model_file_type').val();
        jQuery('#generic_save_analysis_model_training_data_file').val(manage_drone_imagery_calculate_statistics_response.stats_tempfile);
        jQuery('#generic_save_analysis_model_archived_training_data_file_type').val(manage_drone_imagery_calculate_statistics_response.analysis_model_training_data_file_type);
        jQuery('#generic_save_analysis_model_auxiliary_files').val(JSON.stringify(drone_imagery_stats_auxiliary_files));

        return false;
    });
});

</script>




<!--button class='btn btn-default' style='margin:3px' id='export_drone_imagery_events'>Export Imaging Events</button-->

<div class="modal fade" id="export_drone_imagery_dialog" name="export_drone_imagery_dialog" tabindex="-1" role="dialog" aria-labelledby="exportDroneImageryDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="exportDroneImageryDialog">Export Aerial Imaging Event(s)</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            









                
    
                
    
                
    
                
    

            
<div id="drone_imagery_export_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Field Trial</div></li>
      <li><div class="workflow-title">Drone Run</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">This workflow will guide you through exporting aerial imaging event(s) from the database</h3></div>

                    <ul>
                        <li>Exporting imaging events is important for transferring data across ImageBreed instances.</li>
                        <li>Exporting imaging events will return a spreadsheet file defining the imaging events, a zipfile containing the orthophoto imges, and a zipfile containing the GeoJSON plot-polygon definitions.</li>
                        <li>Phenotypic values will not be exported in this workflow, please use the Wizard of the "Download Image-Phenotype File" to retrieve phenotypic values.</li>
                    </ul>
                    <br/>
                    <center>
                    <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to export imaging event(s)</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select your field trial</h3></div>


                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="export_drone_image_trial_select_div"></div>
                            </div>
                        </div>
                    </div>

                    <br/>
                    <center>
                    <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Create a new drone run</h3></div>


                    <table class="table table-bordered table-hover" id="drone_image_export_drone_runs_table">
                        <thead>
                            <tr>
                                <th>Select</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Imaging Event Description</th>
                                <th>Imaging Event Date</th>
                                <th>Drone Run GDD</th>
                                <th>Sensor</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <center>
                    <button class="btn btn-primary" id="drone_image_export_drone_run_continue">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Export Imaging Event(s)</h3></div>


                    <div id="export_drone_imagery_submit_div">
                    </div>

                    <center>
                    <button type="button" class="btn btn-info" name="export_drone_imagery_submit" id="export_drone_imagery_submit">Submit</button>
                    </center>
                </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_export_workflow");
</script>


            <div id="upload_drone_imagery_verify_status"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script defer="defer">

jQuery(document).ready(function() {

    jQuery('#export_drone_imagery_events').on('click', function(){
        jQuery('#export_drone_imagery_dialog').modal('show');
    });

    get_select_box('trials', 'export_drone_image_trial_select_div', { 'name' : 'export_drone_run_field_trial_id', 'id' : 'export_drone_run_field_trial_id', 'empty':1, 'multiple':0 });

    var export_imaging_events_field_trial_id;
    jQuery(document).on('change', '#export_drone_run_field_trial_id', function() {
        export_imaging_events_field_trial_id = jQuery(this).val();
        jQuery('#drone_image_export_drone_runs_table').DataTable({
            destroy : true,
            ajax : '/api/drone_imagery/drone_runs?select_checkbox_name=export_drone_imagery_drone_run_select&field_trial_ids='+export_imaging_events_field_trial_id
        });
    });

    var export_imaging_events_drone_run_ids = [];
    jQuery('#drone_image_export_drone_run_continue').click(function(){
        export_imaging_events_drone_run_ids = [];
        jQuery('input[name="export_drone_imagery_drone_run_select"]:checked').each(function() {
            export_imaging_events_drone_run_ids.push(jQuery(this).val());
        });
        if (export_imaging_events_drone_run_ids.length < 1) {
            alert('Please select at least one imaging event.');
            return false;
        }
        else {
            Workflow.complete('#drone_image_export_drone_run_continue');
            Workflow.focus('#drone_imagery_export_workflow', 3);
        }
        return false;
    });


    jQuery('#export_drone_imagery_submit').click(function(){
        jQuery.ajax({
            url : '/api/drone_imagery/export_drone_runs?drone_run_project_ids='+JSON.stringify(export_imaging_events_drone_run_ids)+'&field_trial_id='+export_imaging_events_field_trial_id,
            beforeSend: function() {
                jQuery("#working_modal").modal("show");
            },
            success: function(response){
                console.log(response);
                jQuery("#working_modal").modal("hide");

                if (response.error) {
                    alert(response.error);
                    return false;
                }
                else {
                    var html = '<a href="'+response.imaging_events_spreadsheet+'">Download Imaging Event Spreadsheet</a><hr><a href="'+response.orthoimage_zipfile+'">Download Orthoimage Zipfile</a><hr><a href="'+response.geojson_zipfile+'">Download GeoJSON Pixels Zipfile</a><hr><a href="'+response.geojson_gps_zipfile+'">Download GeoJSON GPS Zipfile</a>';
                    jQuery('#export_drone_imagery_submit_div').html(html);
                    return false;
                }
            },
            error: function(response){
                alert('Error exporting imaging events!');
                jQuery("#working_modal").modal("hide");
            }
        });
    });

});
</script>

<!--
This Mason can be imported on any page for saving analyses, the results of analyses, and the model used in an analysis.

1) User input for saving analysis: analysis_name, analysis_description, year, breeding_program
2) User input for saving model trained weights: model_name, model_description, model_is_public

3) Developer input for saving analysis: protocol, dataset_id, accession_names, trait_names, analysis_statistical_ontology_term, analysis_design (if design computed already, otherwise the design will be computed using the accession_names provided), result_summary
4) Developer input for saving model trained weights: model_language, model_type, model_properties, application_name, application_version, model_file_to_archive, model_file_type, training_data_file_to_archive, training_data_file_type, auxiliary_files, analysis_result_values, analysis_result_values_type

Developer inputs can be set using javascript when the model is opened and then nothing else needs to be changed!

'protocol' is a string of the model formula like: 'lme(t1~rep + 1|germplasmName)'

'dataset_id' is optional and is used if a dataset was selected as data input.

'accession_names' is a JSON encoded array of the accession names involved like: ['accession1', 'accession2']

'trait_names' is a JSON encoded array of the trait names analyzed like: ['trait1', 'trait2']

'analysis_statistical_ontology_term' is the statistical term of the analysis results like: 'Multivariate linear mixed model genetic BLUPs using genetic relationship matrix and row and column spatial effects computed using Sommer R|SGNSTAT:0000001'. On submission, the trait_names will be post-composed with this term to save the analysis results.

The 'analysis_design' is optional and is a precomputed JSON encoded object of objects like:
{
               '1' => {
                        'stock_name' => 'test_accession1',
                        'plot_name' => 'analysisblup06112020_34_test_accession1',
                        'plot_number' => 1,
                        'col_number' => 1,
                        'row_number' => 1,
                        'rep_number' => 1,
                        'block_number' => 1,
                        'is_a_control' => 0
                      },
               '2' => {
                        'stock_name' => 'test_accession2',
                        'plot_name' => 'analysisblup06112020_34_test_accession2',
                        'plot_number' => 2,
                        'col_number' => 1,
                        'row_number' => 2,
                        'rep_number' => 2,
                        'block_number' => 1,
                        'is_a_control' => 0
                      }
             }
or analysis_design can be left blank and the design will be computed using accession_names once this workflow is submitted.

The 'result_summary' should be a JSON encoded object of arbitrary results like:
{
    'genetic_correlation' => {
        'grain yield to NDVI' => 0.8
    },
    'important_stat' => 100,
    'genetic_variance' => 9
}

'model_language' is a string like 'R' or 'Python'

'model_type' is a string describing the model type like 'sommer_grm_spatial_genetic_blups'. This is the only term which must be a cvterm under 'protocol_type' (added by db patch).

'model_properties' is a JSON encoded object with any key/value pairs like:
{
'param1':'val1',
'param2':'val2',
}

'application_name' is a string describing the web application producing the analysis e.g. 'solGS', 'NickMorales Mixed Models'
'application_version' is a string describing the version of the web application e.g. 'V1.01'

'model_file_to_archive' is optional. This is the file path of the temporary file where the trained model weights were stored. On submission this file will be archived using model_file_type.

'model_file_type' is optional and is a string describing the type of the model_file_to_archive like: 'trained_keras_cnn_model'

'training_data_file_to_archive' is the file path of the temporary file where the input training data (e.g. phenotype file) is stored. On submission this file will be archived using training_data_file_type.

'training_data_file_type' is a string describing the type of the training data file like: 'nicksmixedmodels_v1.01_sommer_grm_spatial_genetic_blups_phenotype_file'

'auxiliary_files' is a JSON encoded array of objects containing any additional temporary files used by the model analysis. The objects should have the keys 'auxiliary_model_file' and 'auxiliary_model_file_archive_type' e.g.:
[
{'auxiliary_model_file':'/tmp/grm.tsv', 'auxiliary_model_file_archive_type':'nicksmixedmodels_v1.01_sommer_grm_spatial_genetic_blups_grm_file'}
]

The 'analysis_result_values' can take a nested object of stock_name->trait_name->value, where stock_name is either the precomputed analysis_design "plots" or is accession names.
The 'analysis_result_values_type' is either analysis_result_values_match_precomputed_design or analysis_result_values_match_accession_names for these scenarios.

For example in the case of a precomputed analysis design and 'analysis_result_values_type'='analysis_result_values_match_precomputed_design':
{
               'analysisblup06112020_35_test_accession4' => {
                                                            'Mean Pixel Value|NIR (780-3000nm)|NIR Denoised Original Image|day 10|COMP:0000108' => [
                                                                                                                                                     '0.0128311926784451',
                                                                                                                                                     '2020-06-11_17:39:21',
                                                                                                                                                     'janedoe',
                                                                                                                                                     '',
                                                                                                                                                     ''
                                                                                                                                                   ],
                                                            'Mean Pixel Value|Red (600-690nm)|Red Denoised Original Image|day 10|COMP:0000078' => [
                                                                                                                                                    '-0.00288303972761372',
                                                                                                                                                    '2020-06-11_17:39:21',
                                                                                                                                                    'janedoe',
                                                                                                                                                    '',
                                                                                                                                                    ''
                                                                                                                                                  ]
                                                          },
               'analysisblup06112020_35_test_accession2' => {
                                                            'Mean Pixel Value|Red (600-690nm)|Red Denoised Original Image|day 10|COMP:0000078' => [
                                                                                                                                                    '0.000961013242537908',
                                                                                                                                                    '2020-06-11_17:39:21',
                                                                                                                                                    'janedoe',
                                                                                                                                                    '',
                                                                                                                                                    ''
                                                                                                                                                  ],
                                                            'Mean Pixel Value|NIR (780-3000nm)|NIR Denoised Original Image|day 10|COMP:0000108' => [
                                                                                                                                                     '-0.00427706422614838',
                                                                                                                                                     '2020-06-11_17:39:21',
                                                                                                                                                     'janedoe',
                                                                                                                                                     '',
                                                                                                                                                     ''
                                                                                                                                                   ]
                                                          },
             }

For example in the case of a design not computed, but which will be computed using accession names, and 'analysis_result_values_type'='analysis_result_values_match_accession_names':
{
               'test_accession4' => {
                                                            'Mean Pixel Value|NIR (780-3000nm)|NIR Denoised Original Image|day 10|COMP:0000108' => [
                                                                                                                                                     '0.0128311926784451',
                                                                                                                                                     '2020-06-11_17:39:21',
                                                                                                                                                     'janedoe',
                                                                                                                                                     '',
                                                                                                                                                     ''
                                                                                                                                                   ],
                                                            'Mean Pixel Value|Red (600-690nm)|Red Denoised Original Image|day 10|COMP:0000078' => [
                                                                                                                                                    '-0.00288303972761372',
                                                                                                                                                    '2020-06-11_17:39:21',
                                                                                                                                                    'janedoe',
                                                                                                                                                    '',
                                                                                                                                                    ''
                                                                                                                                                  ]
                                                          },
               'test_accession2' => {
                                                            'Mean Pixel Value|Red (600-690nm)|Red Denoised Original Image|day 10|COMP:0000078' => [
                                                                                                                                                    '0.000961013242537908',
                                                                                                                                                    '2020-06-11_17:39:21',
                                                                                                                                                    'janedoe',
                                                                                                                                                    '',
                                                                                                                                                    ''
                                                                                                                                                  ],
                                                            'Mean Pixel Value|NIR (780-3000nm)|NIR Denoised Original Image|day 10|COMP:0000108' => [
                                                                                                                                                     '-0.00427706422614838',
                                                                                                                                                     '2020-06-11_17:39:21',
                                                                                                                                                     'janedoe',
                                                                                                                                                     '',
                                                                                                                                                     ''
                                                                                                                                                   ]
                                                          },
             }

The trait names will be post-composed with the analysis_statistical_ontology_term on submission.

'trait_composing_info' is an optional JSON encoded object mapping additional term to post compose into the saved analysis trait, such as:
{
'Harvest index|CO_323:0000101' => ['day 10|TIME:0000102', 'additional info|ETC:0000202']
}

-->




<div class="modal fade" id="generic_save_analysis_dialog" name="generic_save_analysis_dialog" tabindex="-1" role="dialog" aria-labelledby="genericStoreAnalysisDialog" data-backdrop="static">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="genericStoreAnalysisDialog">Save Analysis Results</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    









                        
    
                        
    
                        
    
                        
    
                    
<div id="generic_save_analysis_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Analysis Info</div></li>
      <li><div class="workflow-title">Model Info</div></li>
      <li><div class="workflow-title">Saved</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                            <div id="pagetitle"><h3 id="pagetitle_h3">This workflow will guide you through storing a new analysis and the results, and saving model weights</h3></div>

                            <p>An analysis is stored independently; however, it maintains associations to the results for the accessions and traits involved. In the case where a model is being trained for predictions e.g. genomic selection or CNN image predictions, those trained model weights can be saved.</p>
                            <br/><br/>
                            <center>
                            <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
                            </center>
                        </li>
          <li>
                            <div id="pagetitle"><h3 id="pagetitle_h3">Save analysis results</h3></div>


                            <p>This is an optional step and is only available when there are actual results to save. Please move on to saving the model weights if there are no results to save.</p>

                            <form class="form-horizontal">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Do you want to save the analysis results?: </label>
                                    <div class="col-sm-9">
                                        <select class="form-control" id="generic_save_analysis_analysis_to_save" name="generic_save_analysis_analysis_to_save" >
                                            <option value="no">No</option>
                                            <option value="yes">Yes</option>
                                        </select>
                                    </div>
                                </div>
                            </form>
                            <hr>

                            <center>
                            <button class="btn btn-primary" id="generic_save_analysis_next">Go to Next Step</button>
                            </center>
                            <br/><br/>

                            <form class="form-horizontal" id="generic_save_analysis_analysis_form" style="display:none">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Analysis Name (must be unique): </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_analysis_name" name="generic_save_analysis_analysis_name" type="text" />
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Analysis Description: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_analysis_description" name="generic_save_analysis_analysis_description" type="text" />
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Breeding Program: </label>
                                    <div class="col-sm-9">
                                        <div id="generic_save_analysis_breeding_program_div"></div>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Year: </label>
                                    <div class="col-sm-9">
                                        <div id="generic_save_analysis_analysis_year_div"></div>
                                    </div>
                                </div>
                                <hr>

                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Protocol: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_protocol" name="generic_save_analysis_protocol" type="text" placeholder="e.g. lmer(grain_yield ~ replicate + 1|germplasmName)" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Dataset ID: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_dataset_id" name="generic_save_analysis_dataset_id" type="number" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Accession Names: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_accession_names" name="generic_save_analysis_accession_names" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Trait Names: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_trait_names" name="generic_save_analysis_trait_names" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Statistical Ontology Term: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_statistical_ontology_term" name="generic_save_analysis_statistical_ontology_term" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Analysis Design (If left blank, design will be created using above accession names): </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_design" name="generic_save_analysis_design" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Analysis Result Values: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_result_values" name="generic_save_analysis_result_values" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Analysis Result Values Type: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_result_values_type" name="generic_save_analysis_result_values_type" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Analysis Result Summary Values: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_result_summary_values" name="generic_save_analysis_result_summary_values" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Compose Trait Info With Time Term(optional): </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_result_compose_trait_info" name="generic_save_analysis_result_compose_trait_info" type="text" disabled/>
                                    </div>
                                </div>
                            </form>
                        </li>
          <li>
                            <div id="pagetitle"><h3 id="pagetitle_h3">Save model information</h3></div>


                            <p>This step may be pre-populated if you are using a model that is already saved in the database. If there is no input enabled, move to the next step.</p>

                            <div class="form-horizontal" id="generic_save_analysis_model_select_form">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Select a Model (If Not A New Model): </label>
                                    <div class="col-sm-9">
                                        <div id="save_new_analysis_model_select_div"></div>
                                    </div>
                                </div>
                            </div>

                            <hr>

                            <form class="form-horizontal" id="generic_save_analysis_model_form">
                                <div class="form-group form-group-sm" id="generic_save_analysis_model_name_div">
                                    <label class="col-sm-3 control-label">New Model Name (must be unique): </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_name" name="generic_save_analysis_model_name" type="text" />
                                    </div>
                                </div>
                                <div class="form-group form-group-sm" id="generic_save_analysis_model_description_div">
                                    <label class="col-sm-3 control-label">New Model Description: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_description" name="generic_save_analysis_model_description" type="text" />
                                    </div>
                                </div>
                                <div class="form-group form-group-sm" id="generic_save_analysis_model_is_public_div">
                                    <label class="col-sm-3 control-label">New Model Is Public: </label>
                                    <div class="col-sm-9">
                                        <select class="form-control" id="generic_save_analysis_model_is_public" name="generic_save_analysis_model_is_public" >
                                            <option value="yes">Yes</option>
                                            <option value="no">No</option>
                                        </select>
                                    </div>
                                </div>

                                <hr>
                                <center>
                                <button class="btn btn-primary" id="generic_save_analysis_submit_button" onclick="return false;">Save Analysis Results And/Or Model</button>
                                </center>
                                <br/><br/>

                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Model ID: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_id" name="generic_save_analysis_model_id" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Model Language: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_language" name="generic_save_analysis_model_language" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Model Type: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_type" name="generic_save_analysis_model_type" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Model Properties: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_properties" name="generic_save_analysis_model_properties" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Application Name: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_application_name" name="generic_save_analysis_model_application_name" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Application Version: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_application_version" name="generic_save_analysis_model_application_version" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Model File To Archive: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_file" name="generic_save_analysis_model_file" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Archive Model File Type: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_archived_model_file_type" name="generic_save_analysis_model_archive_model_file_type" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Training Data File To Archive: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_training_data_file" name="generic_save_analysis_model_training_data_file" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Archive Training Data File Type: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_archived_training_data_file_type" name="generic_save_analysis_model_archived_training_data_file_type" type="text" disabled/>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-3 control-label">Auxiliary Files to Archive: </label>
                                    <div class="col-sm-9">
                                        <input class="form-control" id="generic_save_analysis_model_auxiliary_files" name="generic_save_analysis_model_auxiliary_files" type="text" disabled/>
                                    </div>
                                </div>
                            </form>

                        </li>
          <li>
                            <div id="pagetitle"><h3 id="pagetitle_h3">Saved successfully</h3></div>


                            <div id="generic_save_analysis_response_div"></div>
                        </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#generic_save_analysis_workflow");
</script>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="generic_save_analysis_template_dialog" name="generic_save_analysis_template_dialog" tabindex="-1" role="dialog" aria-labelledby="genericStoreAnalysisTemplateDialog" data-backdrop="static">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="genericStoreAnalysisTemplateDialog">Save Analysis Results</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <form class="form-horizontal" id="generic_save_analysis_template_analysis_form">
                        <div class="form-group form-group-sm">
                            <label class="col-sm-3 control-label">Analysis Name Template (must be unique): </label>
                            <div class="col-sm-9">
                                <input class="form-control" id="generic_save_analysis_template_analysis_name" name="generic_save_analysis_template_analysis_name" type="text" />
                            </div>
                        </div>
                        <div class="form-group form-group-sm">
                            <label class="col-sm-3 control-label">Analysis Description: </label>
                            <div class="col-sm-9">
                                <input class="form-control" id="generic_save_analysis_template_analysis_description" name="generic_save_analysis_template_analysis_description" type="text" />
                            </div>
                        </div>
                        <div class="form-group form-group-sm">
                            <label class="col-sm-3 control-label">Breeding Program: </label>
                            <div class="col-sm-9">
                                <div id="generic_save_analysis_template_breeding_program_div"></div>
                            </div>
                        </div>
                        <div class="form-group form-group-sm">
                            <label class="col-sm-3 control-label">Year: </label>
                            <div class="col-sm-9">
                                <div id="generic_save_analysis_template_analysis_year_div"></div>
                            </div>
                        </div>
                    </form>

                    <div id="generic_save_analysis_template_response_div"></div>

                    <hr>
                    <center>
                    <button class="btn btn-primary" id="generic_save_analysis_template_submit_button" onclick="return false;">Save Analysis Results And Model</button>
                    </center>
                    <br/><br/>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>

jQuery(document).ready(function() {

    get_select_box('years', 'generic_save_analysis_analysis_year_div', {'auto_generate': 1, 'id':'generic_save_analysis_analysis_year', 'name':'generic_save_analysis_analysis_year'});
    get_select_box('breeding_programs', 'generic_save_analysis_breeding_program_div', { 'name' : 'generic_save_analysis_breeding_program_id', 'id' : 'generic_save_analysis_breeding_program_id' });
    get_select_box('models', 'save_new_analysis_model_select_div', { 'id':'save_new_analysis_model_id', 'name':'save_new_analysis_model_id', 'empty':1 });

    get_select_box('years', 'generic_save_analysis_template_analysis_year_div', {'auto_generate': 1, 'id':'generic_save_analysis_template_analysis_year', 'name':'generic_save_analysis_template_analysis_year'});
    get_select_box('breeding_programs', 'generic_save_analysis_template_breeding_program_div', { 'name' : 'generic_save_analysis_template_breeding_program_id', 'id' : 'generic_save_analysis_template_breeding_program_id' });

    jQuery('#generic_save_analysis_next').click(function(){
        Workflow.complete("#generic_save_analysis_next");
        Workflow.focus('#generic_save_analysis_workflow', 2);
        jQuery('#generic_save_analysis_dialog').scrollTop(0);
        return false;
    });

    jQuery('#generic_save_analysis_analysis_to_save').change(function(){
        if (jQuery(this).val() == 'yes') {
            jQuery('#generic_save_analysis_analysis_form').show();
        }
        if (jQuery(this).val() == 'no') {
            jQuery('#generic_save_analysis_analysis_form').hide();
            jQuery('#generic_save_analysis_analysis_name').val('');
        }
    });

    jQuery('#generic_save_analysis_submit_button').click(function(){
        var generic_save_analysis_analysis_to_save_boolean = jQuery('#generic_save_analysis_analysis_to_save').val();
        var generic_save_analysis_analysis_name = jQuery('#generic_save_analysis_analysis_name').val();
        var generic_save_analysis_analysis_description = jQuery('#generic_save_analysis_analysis_description').val();
        var generic_save_analysis_analysis_year = jQuery('#generic_save_analysis_analysis_year').val();
        var generic_save_analysis_breeding_program_id = jQuery('#generic_save_analysis_breeding_program_id').val();
        var generic_save_analysis_protocol = jQuery('#generic_save_analysis_protocol').val();
        var generic_save_analysis_dataset_id = jQuery('#generic_save_analysis_dataset_id').val();
        var generic_save_analysis_accession_names = jQuery('#generic_save_analysis_accession_names').val();
        var generic_save_analysis_trait_names = jQuery('#generic_save_analysis_trait_names').val();
        var generic_save_analysis_statistical_ontology_term = jQuery('#generic_save_analysis_statistical_ontology_term').val();
        var generic_save_analysis_precomputed_design_optional = jQuery('#generic_save_analysis_design').val();
        var generic_save_analysis_result_values = jQuery('#generic_save_analysis_result_values').val();
        var generic_save_analysis_result_values_type = jQuery('#generic_save_analysis_result_values_type').val();
        var generic_save_analysis_result_summary_values = jQuery('#generic_save_analysis_result_summary_values').val();
        var generic_save_analysis_result_compose_trait_info = jQuery('#generic_save_analysis_result_compose_trait_info').val();

        var generic_save_analysis_select_model_id = jQuery('#save_new_analysis_model_id').val();
        var generic_save_analysis_model_id = jQuery('#generic_save_analysis_model_id').val();
        var generic_save_analysis_model_name = jQuery('#generic_save_analysis_model_name').val();
        var generic_save_analysis_model_description = jQuery('#generic_save_analysis_model_description').val();
        var generic_save_analysis_model_is_public = jQuery('#generic_save_analysis_model_is_public').val();
        var generic_save_analysis_model_language = jQuery('#generic_save_analysis_model_language').val();
        var generic_save_analysis_model_type = jQuery('#generic_save_analysis_model_type').val();
        var generic_save_analysis_model_properties = jQuery('#generic_save_analysis_model_properties').val();
        var generic_save_analysis_model_application_name = jQuery('#generic_save_analysis_model_application_name').val();
        var generic_save_analysis_model_application_version = jQuery('#generic_save_analysis_model_application_version').val();
        var generic_save_analysis_model_file = jQuery('#generic_save_analysis_model_file').val();
        var generic_save_analysis_model_archived_model_file_type = jQuery('#generic_save_analysis_model_archived_model_file_type').val();
        var generic_save_analysis_model_training_data_file = jQuery('#generic_save_analysis_model_training_data_file').val();
        var generic_save_analysis_model_archived_training_data_file_type = jQuery('#generic_save_analysis_model_archived_training_data_file_type').val();
        var generic_save_analysis_model_auxiliary_files = jQuery('#generic_save_analysis_model_auxiliary_files').val();

        if (generic_save_analysis_analysis_to_save_boolean == 'yes') {
            if (generic_save_analysis_analysis_name == '') {
                alert('Please give an analysis name');
                return false;
            }
            if (generic_save_analysis_analysis_description == '') {
                alert('Please give an analysis description');
                return false;
            }
            if (generic_save_analysis_analysis_year == '') {
                alert('Please give an analysis year');
                return false;
            }
            if (generic_save_analysis_breeding_program_id == '') {
                alert('Please give a breeding program');
                return false;
            }
            if (generic_save_analysis_protocol == '') {
                alert('Please give an analysis protocol e.g. lmer(grain_yield ~ replicate + 1|germplasmName)');
                return false;
            }
            if (generic_save_analysis_accession_names == '') {
                alert('Please give analysis accession names');
                return false;
            }
            if (generic_save_analysis_trait_names == '') {
                alert('Please give analysis trait names');
                return false;
            }
            if (generic_save_analysis_statistical_ontology_term == '') {
                alert('Please give a statistical ontology term');
                return false;
            }
            if (generic_save_analysis_result_values == '') {
                alert('Please give analysis result values');
                return false;
            }
            if (generic_save_analysis_result_values_type == '') {
                alert('Please give analysis result values type');
                return false;
            }
            if (generic_save_analysis_result_summary_values == '') {
                alert('Please give analysis result summary info');
                return false;
            }
        }
        if ( (generic_save_analysis_model_id != '' || generic_save_analysis_select_model_id != '') && generic_save_analysis_model_name != '') {
            alert('If Model ID is given, then you should not give a new model name!');
            return false;
        }
        if ( (generic_save_analysis_model_id != '' || generic_save_analysis_select_model_id != '') && generic_save_analysis_model_description != '') {
            alert('If Model ID is given, then you should not give a new model description!');
            return false;
        }
        if ( (generic_save_analysis_model_id == '' && generic_save_analysis_select_model_id == '') && generic_save_analysis_model_name == '') {
            alert('Please give a model name');
            return false;
        }
        if ( (generic_save_analysis_model_id == '' && generic_save_analysis_select_model_id == '') && generic_save_analysis_model_description == '') {
            alert('Please give a model description');
            return false;
        }
        if ( (generic_save_analysis_model_id == '' && generic_save_analysis_select_model_id == '') && generic_save_analysis_model_is_public == '') {
            alert('Please tell if a model is public');
            return false;
        }
        if ( (generic_save_analysis_model_id == '' && generic_save_analysis_select_model_id == '') && generic_save_analysis_model_language == '') {
            alert('Please give a model language');
            return false;
        }
        if ( (generic_save_analysis_model_id == '' && generic_save_analysis_select_model_id == '') && generic_save_analysis_model_type == '') {
            alert('Please give a model type');
            return false;
        }
        if ( (generic_save_analysis_model_id == '' && generic_save_analysis_select_model_id == '') && generic_save_analysis_model_properties == '') {
            alert('Please give a model properties JSON object');
            return false;
        }
        if ( (generic_save_analysis_model_id == '' && generic_save_analysis_select_model_id == '') && generic_save_analysis_model_application_name == '') {
            alert('Please give a model application name');
            return false;
        }
        if ( (generic_save_analysis_model_id == '' && generic_save_analysis_select_model_id == '') && generic_save_analysis_model_application_version == '') {
            alert('Please give a model application version');
            return false;
        }

        var analysis_model_id = generic_save_analysis_model_id;
        if (analysis_model_id == '') {
            analysis_model_id = generic_save_analysis_select_model_id;
        }

        jQuery.ajax({
            type: 'POST',
            url : '/ajax/analysis/store/json',
            data : {
                'analysis_to_save_boolean':generic_save_analysis_analysis_to_save_boolean,
                'analysis_name':generic_save_analysis_analysis_name,
                'analysis_description':generic_save_analysis_analysis_description,
                'analysis_year':generic_save_analysis_analysis_year,
                'analysis_breeding_program_id':generic_save_analysis_breeding_program_id,
                'analysis_protocol':generic_save_analysis_protocol,
                'analysis_dataset_id':generic_save_analysis_dataset_id,
                'analysis_accession_names':generic_save_analysis_accession_names,
                'analysis_trait_names':generic_save_analysis_trait_names,
                'analysis_statistical_ontology_term':generic_save_analysis_statistical_ontology_term,
                'analysis_precomputed_design_optional':generic_save_analysis_precomputed_design_optional,
                'analysis_result_values':generic_save_analysis_result_values,
                'analysis_result_values_type':generic_save_analysis_result_values_type,
                'analysis_result_summary':generic_save_analysis_result_summary_values,
                'analysis_result_trait_compose_info':generic_save_analysis_result_compose_trait_info,
                'analysis_model_id':analysis_model_id,
                'analysis_model_name':generic_save_analysis_model_name,
                'analysis_model_description':generic_save_analysis_model_description,
                'analysis_model_is_public':generic_save_analysis_model_is_public,
                'analysis_model_language':generic_save_analysis_model_language,
                'analysis_model_type':generic_save_analysis_model_type,
                'analysis_model_properties':generic_save_analysis_model_properties,
                'analysis_model_application_name':generic_save_analysis_model_application_name,
                'analysis_model_application_version':generic_save_analysis_model_application_version,
                'analysis_model_file':generic_save_analysis_model_file,
                'analysis_model_file_type':generic_save_analysis_model_archived_model_file_type,
                'analysis_model_training_data_file':generic_save_analysis_model_training_data_file,
                'analysis_model_training_data_file_type':generic_save_analysis_model_archived_training_data_file_type,
                'analysis_model_auxiliary_files':generic_save_analysis_model_auxiliary_files
            },
            beforeSend: function() {
                jQuery('#working_modal').modal('show');
            },
            success: function(response){
                jQuery('#working_modal').modal('hide');
                console.log(response);
                if (response.error) {
                    alert(response.error);
                }
                if (response.success) {
                    alert('Analysis and/or model saved!');
                    var html = '<center>';
                    if (response.analysis_id) {
                        html = html + '<p>Go to saved <a href="/analyses/'+response.analysis_id+'" target=_blank >analysis</a></p>';
                    }
                    if (response.model_id) {
                        html = html + '<p>Go to saved <a href="/analyses_model/'+response.model_id+'" target=_blank >model</a></p>';
                    }
                    html = html + '</center>';
                    jQuery('#generic_save_analysis_response_div').html(html);

                    Workflow.complete("#generic_save_analysis_submit_button");
                    Workflow.focus('#generic_save_analysis_workflow', 3);
                }
            },
            error: function(response){
                jQuery('#working_modal').modal('hide');
                alert('Error saving analysis!');
            }
        });
    });

});

</script>


<div id="manage_drone_imagery_standard_process_div" style="display:none">

    <div id="pagetitle"><h3 id="pagetitle_h3">Manage Aerial Imagery: Run A Standard Process On Orthophotomosaics</h3></div>


    <div class="well well-sm">
        <center>
            <h4>Please use the Brave or Chrome web-browsers to view these image tools. In the future, other browsers may be supported.</h4>
            <h4><a href="https://www.youtube.com/channel/UC1FYqz6kz9pE72sSHhG7ocQ">Watch tutorial videos from processing aerial imaging events</a>.</h4>
        </center>
    </div>

    









        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
    
<div id="manage_drone_imagery_standard_process_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Imaging Event Band</div></li>
      <li><div class="workflow-title">Use GCPs</div></li>
      <li><div class="workflow-title">Rotate</div></li>
      <li><div class="workflow-title">Cropping</div></li>
      <li><div class="workflow-title">Thresholding</div></li>
      <li><div class="workflow-title">Plot Polygons</div></li>
      <li><div class="workflow-title">Apply</div></li>
      <li><div class="workflow-title">Indices</div></li>
      <li><div class="workflow-title">Phenotypes</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">This workflow will guide you through applying a standard process to your aerial imaging bands</h3></div>

            <p>Here you can take one of the imaging event bands you uploaded all the way through the process to plot image saving. This will require manual steps such as image rotation, cropping, and plot polygon templating. After you have completed this process for one imaging event band, you can apply it to all other imaging event bands and other calculated vegetative indices.</p>
            <br/><br/>
            <center>
            <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
            </center>
        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Select a imaging event band</h3></div>


            <div class="well well-sm">
                <p>Please select one imaging event band to take through the process. It is recommended to select a band that has high contrast, such as a NIR band. You can choose to brighten the image, only for purposes of the standard process, by selecting below.</p>
            </div>

            <div class="well well-sm">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <table class="table table-bordered table-hover" id="manage_drone_imagery_standard_process_drone_run_bands_table">
                            <thead>
                                <tr>
                                    <th>Select</th>
                                    <th>Imaging Event Band Name</th>
                                    <th>Band Description</th>
                                    <th>Band Type</th>
                                    <th>Imaging Event Name</th>
                                    <th>Imaging Event Description</th>
                                    <th>Imaging Event Date</th>
                                    <th>Field Trial Name</th>
                                    <th>Field Trial Description</th>
                                </tr>
                            </thead>
                        </table>

                        <hr>
                        <div class="form-horizontal">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Brighten the image? This is only to help complete the standard process when the image is very dark: </label>
                                <div class="col-sm-6">
                                    <select class="form-control" id="manage_drone_imagery_standard_process_brighten_image_option">
                                        <option value=0>No</option>
                                        <option value=1>Yes</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        </hr>

                        <br/>

                        <center>
                        <button class="btn btn-primary" id="manage_drone_imagery_standard_process_drone_run_band_step">Go to Next Step</button>
                        </center>
                    </div>
                </div>
            </div>

        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Use ground control points (GCPs) to automate the entire standard process</h3></div>


            <div class="well well-sm">
                <p>If a previous imaging event on this field experiment has already completed the standard process, then that imaging event can be used to automate the rest of the standard process on this new imaging event.</p>
                <p>If ground control points (GCPs) were defined for a previous imaging event, then GCPs can automate the standard process for this new imaging event.</p>
            </div>

            <div class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Has a previous imaging event on this field trial completed the standard process already?: </label>
                    <div class="col-sm-6">
                        <select class="form-control" id="manage_drone_imagery_standard_process_ground_control_points_option">
                            <option value="No">No</option>
                            <option value="Yes">Yes, and it has Ground Control Points (GCPs) defined.</option>
                            <option value="Yes_camera_rig">Yes, and the same fixed camera rig was used.</option>
                            <!--option value="Yes_GeoTIFF_params">Yes, and GeoTIFF coordinates are saved for both imaging events.</option-->
                        </select>
                    </div>
                </div>
            </div>

            <div id="manage_drone_imagery_standard_process_ground_control_points_select_div" style="display:none">
                <div class="well well-sm">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Select the aerial imaging event to use as a template: </label>
                                <div class="col-sm-6">
                                    <div id="manage_drone_imagery_standard_process_ground_control_points_select"></div>
                                </div>
                            </div>
                            <br/><br/>
                            <hr>

                            <div class="well well-sm">
                                <ul>
                                    <li>Click on the ground control points (GCPs) in the image below and save them.</li>
                                    <li>Please click and save at least three points. The names of the GCPs MUST be consistent across imaging events!</li>
                                    <li>For best results, use ground control points at the far four corners of the field.</li>
                                    <li>Once the computed polygon template is drawn, you can drag the <b>black dot</b> to reposition the template.</li>
                                    <li>You can zoom out on your browser (Cntrl + -).</li>
                                </ul>
                            </div>

                            <div class="well well-sm">
                                <div id="project_drone_imagery_standard_process_ground_control_points_saved_div"></div>

                                <br/><br/>
                                <center>
                                <button class="btn btn-primary" id="manage_drone_imagery_standard_process_ground_control_points_step">Draw Computed Plot Polygons</button>
                                <button class="btn btn-primary" id="manage_drone_imagery_standard_process_ground_control_points_step_confirm">Confirm and Save</button>
                                </center>
                            </div>

                            <div id="project_drone_imagery_standard_process_ground_control_points_info_div"></div>

                            <div id="project_drone_imagery_standard_process_ground_control_points_loading_div"><img src="/img/wheel.gif" /></div>

                            <div id="project_drone_imagery_standard_process_ground_control_points_svg_div"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="manage_drone_imagery_standard_process_previous_camera_rig_select_div" style="display:none">
                <div class="well well-sm">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Note: This is only for greenhouses or setups with fixed camera rigs that capture large sections of an experiment. Select the aerial imaging event to use as a template. The same rotation, cropping, and plot-polygon template will be applied: </label>
                                <div class="col-sm-6">
                                    <div id="manage_drone_imagery_standard_process_previous_camera_rig_select"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <center>
                    <button class="btn btn-primary" id="manage_drone_imagery_standard_process_previous_camera_rig_step_confirm">Confirm and Save</button>
                    </center>
                </div>
            </div>
            <div id="manage_drone_imagery_standard_process_previous_geotiff_params_div" style="display:none">
                <div class="well well-sm">
                    <div class="panel panel-default">
                        <div class="panel-body">

                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-sm-6 control-label">Select the aerial imaging event to use as a template. The same rotation and plot-polygon template will be applied: </label>
                                    <div class="col-sm-6">
                                        <div id="manage_drone_imagery_standard_process_geotiff_params_select"></div>
                                    </div>
                                </div>
                            </div>

                            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="manage_drone_imagery_standard_process_previous_geotiff_params_form" name="manage_drone_imagery_standard_process_previous_geotiff_params_form" action="/drone_imagery/standard_process_previous_geotiff" >
                                <div class="form-group">
                                    <label class="col-sm-6 control-label">WGS84/UTM GeoTIFF (.tif): (should be same dimensions as uploaded reflectance maps)</label>
                                    <div class="col-sm-6" >
                                        <input type="file" id="manage_drone_imagery_standard_process_geotiff_params_geotiff" name="manage_drone_imagery_standard_process_geotiff_params_geotiff" encoding="multipart/form-data" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-6 control-label">GeoTIFF Type:</label>
                                    <div class="col-sm-6" >
                                        <select class="form-control" id="manage_drone_imagery_standard_process_geotiff_params_type" name="manage_drone_imagery_standard_process_geotiff_params_type">
                                            <option value="single">Single Channel GeoTIFF</option>
                                            <option value="rgb">RGB GeoTIFF</option>
                                        </select>
                                    </div>
                                </div>
                                <input type="hidden" name="manage_drone_imagery_standard_process_geotiff_params_previous_drone_run_project_id" id="manage_drone_imagery_standard_process_geotiff_params_previous_drone_run_project_id" value="" />
                                <input type="hidden" name="manage_drone_imagery_standard_process_geotiff_params_drone_run_project_id" id="manage_drone_imagery_standard_process_geotiff_params_drone_run_project_id" value="" />
                                <input type="hidden" name="manage_drone_imagery_standard_process_geotiff_params_angle" id="manage_drone_imagery_standard_process_geotiff_params_angle" value="" />
                                <input type="hidden" name="manage_drone_imagery_standard_process_geotiff_params_time_cvterm_id" id="manage_drone_imagery_standard_process_geotiff_params_time_cvterm_id" value="" />
                            </form>

                            <center>
                            <button class="btn btn-primary" id="manage_drone_imagery_standard_process_geotiff_params_confirm">Confirm and Go to Next</button>
                            </center>
                        </div>
                    </div>
                </div>
            </div>
            <div id="manage_drone_imagery_standard_process_ground_control_points_skip_div" style="display:none">
                <center>
                <button class="btn btn-primary" id="manage_drone_imagery_standard_process_ground_control_points_skip_step">Skip and Go to Next Step</button>
                </center>
            </div>

        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Rotate your selected imaging event band</h3></div>


            <div class="well well-sm">
                <ul>
                    <li>Here you can do a rotation of your imaging event image.</li>
                    <li>You can zoom out on your browser (Cntrl + -).</li>
                    <li>Your image should have precise row-to-row parallel alignment.</li>
                    <li>Depending on your field experiment, it may be important that the first plot (e.g. plot number 1) is in the top left or top right corner of the image.</li>
                </ul>
            </div>

            <div class="well well-sm">

                <form class="form-horizontal">
                    <div class="form-group form-group-sm">
                        <label class="col-sm-6 control-label">Rotate Counter-Clockwise Degrees (Use Left and Right Arrows For Fine Tuning): </label>
                        <div class="col-sm-6">
                            <input type="range" min="-180" max="180" step="0.01" id="drone_imagery_standard_process_rotate_degrees_input" name="drone_imagery_standard_process_rotate_degrees_input" value="0.00"><div id="drone_imagery_standard_process_rotate_degrees_input_text"></div>
                        </div>
                    </div>
                </form>

                <!--button class="btn btn-primary" id="drone_imagery_standard_process_rotate_stitched_view">Rotate Image (Does Not Save)</button-->
                <button class="btn btn-default" id="drone_imagery_standard_process_rotate_stitched_crosshairs">Draw Crosshairs Assist</button>
                <!--button class="btn btn-default" id="drone_imagery_standard_process_rotate_stitched_restart">Restart</button-->

                <hr>
                <div id="manage_drone_imagery_standard_process_rotate_step_confirm_div" style="display:none">
                    <button class="btn btn-primary" id="manage_drone_imagery_standard_process_rotate_step">Save Rotated Image And Go To Next Step</button>
                </div>
                <div id="manage_drone_imagery_standard_process_rotate_step_finish_div" style="display:none">
                    <button class="btn btn-primary" id="manage_drone_imagery_standard_process_rotate_step_finish">Save Rotated Image And Go Complete Standard Process</button>
                </div>
            </div>

            <div id="manage_drone_imagery_standard_process_rotate_load_div">
                <img src="/img/wheel.gif" />
            </div>

            <div id="drone_imagery_standard_process_rotate_original_stitched_div"></div>

        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Crop your imaging event band to specific area of interest</h3></div>


            <div class="well well-sm">
                <ul>
                    <li>Here you can do a rough cropping of the stitched ortho image to focus only on the actual field experiment.</li>
                    <li>You can zoom out on your browser (Cntrl + -).</li>
                    <li>Click on four points in the image to make a four-sided polygon.</li>
                    <li>Only the last polygon that you draw will be used for the cropping.</li>
                </ul>
                <br/>
                <button class="btn btn-primary" id="manage_drone_imagery_standard_process_cropping_step">Save and Go to Next Step</button>
            </div>

            <div id="manage_drone_imagery_standard_process_crop_load_div">
                <img src="/img/wheel.gif" />
            </div>

            <canvas id="drone_imagery_standard_process_crop_original_stitched_div"></canvas>

            <hr>
            <div class="well well-sm">
                <form class="form-horizontal">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Previously Used Image Cropping For This Field Trial: </label>
                                <div class="col-sm-6">
                                    <div id="plot_polygons_standard_process_previously_saved_image_cropping_templates">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <button class="btn btn-primary" id="drone_imagery_standard_process_cropping_use_previous_cropping">Use Image Cropping</button>
            </div>

        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Threshold your imaging event band to remove background</h3></div>


            <div class="well">
                


<a class="info_section_anchor" name="remove_background_using_percentage_threshold"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc4561_offswitch', 'sgnc4561_onswitch');
		Effects.hideElement('sgnc4561_content');
		
		return false;"
		id="sgnc4561_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Remove Background Using Percentage Threshold</a>
	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc4561_onswitch', 'sgnc4561_offswitch');
		Effects.showElement('sgnc4561_content');
		
		return false;"
		id="sgnc4561_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Remove Background Using Percentage Threshold</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Remove the background by specifying percentage threshold value&nbsp;</td></tr></table>

<span id="sgnc4561_content" style=""><div class="infosectioncontent" >

                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="col-sm-6 control-label">Discard Lowest Percent of Pixel Values: </label>
                                        <div class="col-sm-6">
                                            <input class="form-control" id="drone_imagery_standard_process_remove_background_lower_threshold_percentage" name="drone_imagery_standard_process_remove_background_lower_threshold_percentage" type="number" max="99" min="0" placeholder="e.g. 10% of lowest pixel values (Min 0, Max 100)" value=25 disabled/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="col-sm-6 control-label">Discard Highest Percent of Pixel Values: </label>
                                        <div class="col-sm-6">
                                            <input class="form-control" id="drone_imagery_standard_process_remove_background_upper_threshold_percentage" name="drone_imagery_standard_process_remove_background_upper_threshold_percentage" type="number" max="99" min="0" placeholder="e.g. 10% of highest pixel values (Min 0, Max 100)" value=25 disabled/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>

                            <input type="checkbox" id="drone_imagery_standard_process_remove_background_upper_threshold_percentage_change_button">&nbsp;&nbsp;&nbsp;&nbsp; Change Threshold Values
                        </div>
                    </div>
                
</div>
</span>


            </div>

            <center>
                <button id="drone_imagery_standard_process_remove_background_defined_percentage_submit" class="btn btn-primary">Apply Threshold</button>
            </center>

            <hr>

            <div id="manage_drone_imagery_standard_process_remove_background_load_div">
                <img src="/img/wheel.gif" />
            </div>

            <div class="well well-sm">
                


<a class="info_section_anchor" name="histogram_of_pixel_values"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc5837_offswitch', 'sgnc5837_onswitch');
		Effects.hideElement('sgnc5837_content');
		
		return false;"
		id="sgnc5837_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Histogram of pixel values</a>
	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc5837_onswitch', 'sgnc5837_offswitch');
		Effects.showElement('sgnc5837_content');
		
		return false;"
		id="sgnc5837_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Histogram of pixel values</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Histogram of Pixel Values&nbsp;</td></tr></table>

<span id="sgnc5837_content" style=""><div class="infosectioncontent" >

                    <center>
                        <canvas id="drone_imagery_standard_process_remove_background_histogram_div"></canvas>
                    </center>
                
</div>
</span>


            </div>

            <div class="well well-sm">
                


<a class="info_section_anchor" name="denoised_original_image"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc1182_offswitch', 'sgnc1182_onswitch');
		Effects.hideElement('sgnc1182_content');
		
		return false;"
		id="sgnc1182_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Denoised Original Image</a>
	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc1182_onswitch', 'sgnc1182_offswitch');
		Effects.showElement('sgnc1182_content');
		
		return false;"
		id="sgnc1182_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Denoised Original Image</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Denoised Original Image&nbsp;</td></tr></table>

<span id="sgnc1182_content" style=""><div class="infosectioncontent" >

                    <center>
                        <canvas id="drone_imagery_standard_process_remove_background_original"></canvas>
                    </center>
                
</div>
</span>


            </div>

        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Define plot polygons relative to the field layout</h3></div>


            


<div class="row">
    <div class="col-sm-12">
        <div class="well">
            <div class="row">
                <div class="col-sm-1">
                    <span style="font-size:3.5em;" class="glyphicon glyphicon-th-large"></span>
                </div>
                <div class="col-sm-11">

                    


<a class="info_section_anchor" name="generate_polygon_template_tool"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('manage_drone_imagery_standard_process_generate_plot_polygons_section_offswitch', 'manage_drone_imagery_standard_process_generate_plot_polygons_section_onswitch');
		Effects.hideElement('manage_drone_imagery_standard_process_generate_plot_polygons_section_content');
		
		return false;"
		id="manage_drone_imagery_standard_process_generate_plot_polygons_section_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" /><h4 style='display:inline'>Generate Polygon Template Tool</h4></a>
	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('manage_drone_imagery_standard_process_generate_plot_polygons_section_onswitch', 'manage_drone_imagery_standard_process_generate_plot_polygons_section_offswitch');
		Effects.showElement('manage_drone_imagery_standard_process_generate_plot_polygons_section_content');
		
		return false;"
		id="manage_drone_imagery_standard_process_generate_plot_polygons_section_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" /><h4 style='display:inline'>Generate Polygon Template Tool</h4></a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Overlay a uniform grid over the image.&nbsp;</td></tr></table>

<span id="manage_drone_imagery_standard_process_generate_plot_polygons_section_content" style=""><div class="infosectioncontent" >



                        <div class="panel panel-default">
                            <div class="panel-body">
























                                
<!--
<div class="well well-sm">
    <div class="panel panel-default">
        <div class="panel-body">
-->
            <div class="well well-sm">
                <form class="form-horizontal">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Number of Rows: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_standard_process_plot_polygons_num_rows" name="drone_imagery_standard_process_plot_polygons_num_rows" type="number" placeholder="Number of rows in image section" />
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Number of Columns: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_standard_process_plot_polygons_num_cols" name="drone_imagery_standard_process_plot_polygons_num_cols" type="number" placeholder="Number of columns in image section"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Plot-polygon Margins Top/Bottom (%): </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_standard_process_plot_polygons_margin_top_bottom" name="drone_imagery_standard_process_plot_polygons_margin_top_bottom" type="number" value=0 />
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Plot-polygon Margins Left/Right (%): </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_standard_process_plot_polygons_margin_left_right" name="drone_imagery_standard_process_plot_polygons_margin_left_right" type="number" value=0 />
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <button class="btn btn btn-primary" id="drone_imagery_standard_process_plot_polygons_rectangles_start">Click Here To Start Templating. Create As Many Templates As Needed.</button>
            </div>
    <!--
        </div>
    </div>
    -->

    <!--
    <div class="panel panel-default">
        <div class="panel-body">
    -->
            <!--
            <div class="row">
                <div class="col-sm-12">
                    <h4> Either (A) click the four corners of the area of interest: </h4>

                    <button class="btn btn-sm btn-info" id="drone_imagery_standard_process_plot_polygons_top_left_click">Click Top Left Corner</button>
                    <button class="btn btn-sm btn-info" id="drone_imagery_standard_process_plot_polygons_top_right_click">Click Top Right Corner</button>
                    <button class="btn btn-sm btn-info" id="drone_imagery_standard_process_plot_polygons_bottom_left_click">Click Bottom Left Corner</button>
                    <button class="btn btn-sm btn-info" id="drone_imagery_standard_process_plot_polygons_bottom_right_click">Click Bottom Right Corner</button>
                </div>
            </div>
            -->

            <!--
            <hr>

            


<a class="info_section_anchor" name="template_parameters"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc3174_offswitch', 'sgnc3174_onswitch');
		Effects.hideElement('sgnc3174_content');
		
		return false;"
		id="sgnc3174_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Template Parameters</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc3174_onswitch', 'sgnc3174_offswitch');
		Effects.showElement('sgnc3174_content');
		
		return false;"
		id="sgnc3174_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Template Parameters</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">View and edit template parameters. These parameters can be filled using the above button clicks&nbsp;</td></tr></table>

<span id="sgnc3174_content" style="display:none;"><div class="infosectioncontent" >

                <div class="well well-sm">
                    <form class="form-horizontal">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Left-most Column Top Margin: </label>
                                    <div class="col-sm-6">
                                    -->
                                        <input class="form-control" id="drone_imagery_standard_process_plot_polygons_left_column_top_offset" name="drone_imagery_standard_process_plot_polygons_left_column_top_offset" type="hidden" value="0" placeholder="0"/>
                                    <!--
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Left-most Column Bottom Margin: </label>
                                    <div class="col-sm-6">
                                    -->
                                        <input class="form-control" id="drone_imagery_standard_process_plot_polygons_left_column_bottom_offset" name="drone_imagery_standard_process_plot_polygons_left_column_bottom_offset" type="hidden" value="0" placeholder="0"/>
                                    <!--
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Top-most Row Left Margin: </label>
                                    <div class="col-sm-6">
                                    -->
                                        <input class="form-control" id="drone_imagery_standard_process_plot_polygons_top_row_left_offset" name="drone_imagery_standard_process_plot_polygons_top_row_left_offset" type="hidden" placeholder="0" value="0" />
                                    <!--
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Top-most Row Right Margin: </label>
                                    <div class="col-sm-6">
                                    -->
                                        <input class="form-control" id="drone_imagery_standard_process_plot_polygons_top_row_right_offset" name="drone_imagery_standard_process_plot_polygons_top_row_right_offset" type="hidden" placeholder="0" value="0" />
                                    <!--
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Bottom-most Row Left Margin: </label>
                                    <div class="col-sm-6">
                                    -->
                                        <input class="form-control" id="drone_imagery_standard_process_plot_polygons_bottom_row_left_offset" name="drone_imagery_standard_process_plot_polygons_bottom_row_left_offset" type="hidden" placeholder="0" value="0" />
                                    <!--
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Right-most Column Bottom Margin: </label>
                                    <div class="col-sm-6">
                                    -->
                                        <input class="form-control" id="drone_imagery_standard_process_plot_polygons_right_col_bottom_offset" name="drone_imagery_standard_process_plot_polygons_right_col_bottom_offset" type="hidden" placeholder="0" value="0" />
                                    <!--
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            
</div>
</span>


            -->

            <!--
            <br/>
            <button class="btn btn-sm btn-primary" id="drone_imagery_standard_process_plot_polygons_rectangles_apply">(A) Draw Plot Polygon Template (Does not save. Apply multiple templates if needed.)</button>
            -->

    <!--
        </div>
    </div>
    -->

    <!--div class="panel panel-default">
        <div class="panel-body">

            <div class="row">
                <div class="col-sm-12">
                    <h4> Or (B) paste a previously used template: </h4>
                </div>
            </div>

            


<a class="info_section_anchor" name="previously_used_plot_polygon_templates"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc5052_offswitch', 'sgnc5052_onswitch');
		Effects.hideElement('sgnc5052_content');
		
		return false;"
		id="sgnc5052_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Previously Used Plot Polygon Templates</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc5052_onswitch', 'sgnc5052_offswitch');
		Effects.showElement('sgnc5052_content');
		
		return false;"
		id="sgnc5052_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Previously Used Plot Polygon Templates</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">View and use previous plot polygon templates used on this field trial&nbsp;</td></tr></table>

<span id="sgnc5052_content" style="display:none;"><div class="infosectioncontent" >

                <div class="well well-sm">
                    <form class="form-horizontal">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Previously Used Plot Polygon Templates For This Field Trial: </label>
                                    <div class="col-sm-6">
                                        <div id="plot_polygons_standard_process_previously_saved_plot_polygon_templates">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <button class="btn btn-primary" id="plot_polygons_standard_process_use_previously_saved_template">(B) Draw Plot Polygon Template (Does not save)</button>
                </div>
            
</div>
</span>


        </div>
    </div-->

    <div id="drone_imagery_standard_process_plot_polygons_active_templates"></div>

<!--
</div>
-->








                            </div>
                        </div>
                    
</div>
</span>


                </div>
            </div>
        </div>
    </div>
</div>


            <div class="well well-sm">
                <div id="drone_imagery_standard_process_plot_polygons_top_section"></div>

                <button id="drone_imagery_standard_process_plot_polygons_clear" class="btn btn-danger">Clear All Polygons and Start Over Templating</button>
                <br/><br/>
                <button id="drone_imagery_standard_process_plot_polygons_get_distance" class="btn btn-default">Find Distance Between Points</button>
                <button id="drone_imagery_standard_process_plot_polygons_switch_image_url" class="btn btn-default">Switch Between Original and Background Removed Image</button>
            </div>

            <div id="manage_drone_imagery_standard_process_plot_polygons_load_div">
                <img src="/img/wheel.gif" />
            </div>

            <div id="drone_imagery_standard_process_plot_polygons_original_stitched_div_svg"></div>

            <hr>
            <div class="well well-sm">

                <div id="drone_imagery_standard_process_generated_polygons_table_header_div"></div>

                <div class="panel panel-default"><div class="panel-body">
                    <h3>(Option 1)</h3>

                    


<a class="info_section_anchor" name="auto_assign_plot_numbers_to_polygon_numbers"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc865_offswitch', 'sgnc865_onswitch');
		Effects.hideElement('sgnc865_content');
		
		return false;"
		id="sgnc865_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Auto Assign Plot Numbers to Polygon Numbers</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc865_onswitch', 'sgnc865_offswitch');
		Effects.showElement('sgnc865_content');
		
		return false;"
		id="sgnc865_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Auto Assign Plot Numbers to Polygon Numbers</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Interface for automatically assigning plot numbers to polygon numbers.&nbsp;</td></tr></table>

<span id="sgnc865_content" style="display:none;"><div class="infosectioncontent" >

                        <div class="well well-sm">
                            <div id="drone_imagery_standard_process_generated_polygons_div">First Complete the Templating Above</div>
                        </div>
                    
</div>
</span>


                </div></div>

                <div class="panel panel-default"><div class="panel-body">
                    <h3>(Option 2)</h3>

                    


<a class="info_section_anchor" name="upload_spreadsheet_file_to_assign_plot_numbers_to_polygon_numbers"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc3501_offswitch', 'sgnc3501_onswitch');
		Effects.hideElement('sgnc3501_content');
		
		return false;"
		id="sgnc3501_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Upload Spreadsheet File to Assign Plot Numbers to Polygon Numbers</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc3501_onswitch', 'sgnc3501_offswitch');
		Effects.showElement('sgnc3501_content');
		
		return false;"
		id="sgnc3501_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Upload Spreadsheet File to Assign Plot Numbers to Polygon Numbers</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Upload a spreadsheet file assigning plot numbers to polygon numbers.&nbsp;</td></tr></table>

<span id="sgnc3501_content" style="display:none;"><div class="infosectioncontent" >

                        <div class="well well-sm">
                            <div id="drone_imagery_standard_process_generated_polygons_spreadsheet_div">
                                <div class="panel panel-default">
                                    <div class="panel-body">
                                        <ul>
                                            <li>If Option 1 is unable to fit your field experiments, Option 2 and 3 enable greater flexibility.</li>
                                            <li>Upload an <b>XLS</b> file with the following three columns: <b>polygon_number, plot_number, field_trial</b>
                                                <ul>
                                                    <li><b>polygon_number</b>: The polygon number generated in the templating process. The polygon numbers are visible in the templated image.</li>
                                                    <li><b>plot_number</b>: The plot number to assign to the polygon number. Field layouts are visible at the bottom of this page, where available plot numbers can be determined.</li>
                                                    <li><b>field_trial</b>: The field trial for the plot number being assigned. The same plot number (e.g. 101) can exist in different field trials, so this column differentiates plot numbers among field trials.</li>
                                                </ul>
                                            </li>
                                            <li>If you want to skip a generated polygon number, simply do not include it in the uploaded spreadsheet.</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="panel panel-default">
                                    <div class="panel-body">
                                        <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="drone_imagery_plot_polygons_spreadsheet_upload_form" name="drone_imagery_plot_polygons_spreadsheet_upload_form">
                                            <div class="form-group form-group-sm">
                                                <label class="col-sm-3 control-label">Spreadsheet Upload (.xls): </label>
                                                <div class="col-sm-9">
                                                    <input class="form-control" id="drone_imagery_plot_polygons_spreadsheet_upload" name="drone_imagery_plot_polygons_spreadsheet_upload" type="file" encoding="multipart/form-data" />
                                                    <input id="drone_imagery_plot_polygons_spreadsheet_upload_stock_polygons" name="drone_imagery_plot_polygons_spreadsheet_upload_stock_polygons" type="hidden" />
                                                </div>
                                            </div>
                                        </form>

                                        <div id="drone_imagery_plot_polygons_spreadsheet_upload_form_response_div"></div>

                                        <button class="btn btn-primary" id="drone_imagery_plot_polygons_spreadsheet_upload_button" name="drone_imagery_plot_polygons_spreadsheet_upload_button">Generate Assignments (Does Not Save)</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-primary" name="drone_imagery_standard_process_plot_polygons_submit_bottom">Finish and Save Polygons To Plots</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    
</div>
</span>


                </div></div>

                <div class="panel panel-default"><div class="panel-body">
                    <h3>(Option 3)</h3>

                    


<a class="info_section_anchor" name="manually_assign_plot_numbers_to_polygon_numbers"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc6001_offswitch', 'sgnc6001_onswitch');
		Effects.hideElement('sgnc6001_content');
		
		return false;"
		id="sgnc6001_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Manually Assign Plot Numbers to Polygon Numbers</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc6001_onswitch', 'sgnc6001_offswitch');
		Effects.showElement('sgnc6001_content');
		
		return false;"
		id="sgnc6001_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Manually Assign Plot Numbers to Polygon Numbers</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Table input for manually assigning plot numbers to polygon numbers.&nbsp;</td></tr></table>

<span id="sgnc6001_content" style="display:none;"><div class="infosectioncontent" >

                        <div class="well well-sm">
                            <div id="drone_imagery_standard_process_generated_polygons_table">First Complete the Templating Above</div>
                        </div>
                    
</div>
</span>


                </div></div>

            </div>

            <hr>
            <div class="well well-sm">
                <div id="drone_imagery_standard_process_trial_layout_div_0"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_1"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_2"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_3"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_4"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_5"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_6"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_7"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_8"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_9"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_10"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_11"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_12"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_13"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_14"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_15"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_16"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_17"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_18"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_19"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_20"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_21"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_22"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_23"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_24"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_25"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_26"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_27"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_28"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_29"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_30"></div>
            </div>

        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Apply these same steps to other imaging event bands in the current imaging event</h3></div>


            <div class="well well-sm">
                <ul>
                    <li>Here you can apply the same actions you did for the previous steps 1 to 6, to additional imaging event bands in this imaging event.</li>
                    <li>Thresholding will be done dynamically, by removing the top and bottom 20% of pixel values.</li>
                </ul>
            </div>

            <div class="well well-sm">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <table class="table table-bordered table-hover" id="manage_drone_imagery_standard_process_drone_run_bands_apply_table">
                            <thead>
                                <tr>
                                    <th>Select</th>
                                    <th>Imaging Event Band Name</th>
                                    <th>Band Description</th>
                                    <th>Band Type</th>
                                    <th>Imaging Event Name</th>
                                    <th>Imaging Event Description</th>
                                    <th>Imaging Event Date</th>
                                    <th>Field Trial Name</th>
                                    <th>Field Trial Description</th>
                                </tr>
                            </thead>
                        </table>

                        <br/>

                        <center>
                        <button class="btn btn-primary" id="manage_drone_imagery_standard_process_drone_run_band_apply_step">Go to Next Step</button>
                        </center>
                    </div>
                </div>
            </div>
        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Create and apply these same steps to vegetative indices</h3></div>


            <form class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Vegetative Indices To Apply: </label>
                    <div class="col-sm-6">
                        <input name="drone_imagery_standard_process_apply_indices_select" value="TGI" type="checkbox" checked> Triangular Greenness Index (TGI) <br/>
                        <input name="drone_imagery_standard_process_apply_indices_select" value="VARI" type="checkbox" checked> Visible Atmospheric Resistant Index (VARI) <br/>
                        <input name="drone_imagery_standard_process_apply_indices_select" value="NDVI" type="checkbox" checked> Normalized Difference Vegetative Index (NDVI) <br/>
                        <input name="drone_imagery_standard_process_apply_indices_select" value="NDRE" type="checkbox" checked> Normalized Difference Red Edge Vegetative Index (NDRE) <br/>
                        <input name="drone_imagery_standard_process_apply_indices_select" value="CCC" type="checkbox" checked> Canopy Cover Canopeo Algorithm (CC) <br/>
                    </div>
                </div>
            </form>

            <br/>

            <center>
            <button type="button" class="btn btn-primary" id="manage_drone_imagery_standard_process_indices_step">Go to Next Step</button>
            </center>
        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Calculate phenotypes for all plot polygon images</h3></div>


            <form class="form-horizontal">
                <div class="well well-sm">
                    <div class="form-group form-group-sm">
                        <label class="col-sm-4 control-label">Zonal Statistics to Calculate and Save in Database: </label>
                        <div class="col-sm-8">
                            <input name="drone_imagery_standard_process_phenotypes_select" value="zonal" type="checkbox" checked disabled> Zonal Statistics: nonzero_pixel_count, total_pixel_sum, mean_pixel_value, harmonic_mean_value, median_pixel_value, variance_pixel_value, stdev_pixel_value, pstdev_pixel_value, min_pixel_value, max_pixel_value, minority_pixel_value, minority_pixel_count, majority_pixel_value, majority_pixel_count, pixel_variety_count <br/>
                        </div>
                    </div>
                </div>
                <div class="well well-sm">
                    <input type="checkbox" id="drone_imagery_standard_process_phenotypes_margin_button">&nbsp;&nbsp;&nbsp;&nbsp; Change Margin Values
                    <hr>

                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-8 control-label">Buffer Margin When Calculating Phenotypes On Top/Bottom of Plot Polygons (%): </label>
                                <div class="col-sm-4">
                                    <input class="form-control" id="drone_imagery_standard_process_phenotypes_margin_top_bottom" name="drone_imagery_standard_process_phenotypes_margin_top_bottom" type="number" value=5 disabled/>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-8 control-label">Buffer Margin When Calculating Phenotypes On Left/Right of Plot Polygons (%): </label>
                                <div class="col-sm-4">
                                    <input class="form-control" id="drone_imagery_standard_process_phenotypes_margin_left_right" name="drone_imagery_standard_process_phenotypes_margin_left_right" type="number" value=5 disabled/>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div id="drone_imagery_standard_process_phenotypes_margin_visual_div_svg"><div class="well well-sm"><p>LOADING...Please wait...</p></div></div>
                </div>
                <div class="well well-sm">
                    <div class="form-group form-group-sm">
                        <label class="col-sm-9 control-label">Apply same standard process to all uploaded imaging events that use the same camera rig (Only applicable for static camera rigs, such as in a greenhouse or controlled environment): </label>
                        <div class="col-sm-3">
                            <select class="form-control" id="drone_imagery_standard_process_camera_rig_apply_select">
                                <option value="No">No</option>
                                <option value="Yes">Yes</option>
                            </select>
                        </div>
                    </div>
                </div>
            </form>
            <br/>

            <div id="drone_imagery_standard_process_week_term_div"></div>

            <center>
            <button type="button" class="btn btn-info" id="manage_drone_imagery_standard_process_phenotypes_step">Finish</button>
            </center>
        </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#manage_drone_imagery_standard_process_workflow");
</script>


</div>




<style>
.straightLine, .hrLine{
  position: absolute;
  background-color: red;
  transition: transform .05s ease-in-out;
}
</style>

<div id="manage_drone_imagery_standard_process_raw_images_interactive_div" style="display:none">

    <div id="pagetitle"><h3 id="pagetitle_h3">Manage Aerial Imagery: Run A Standard Process On Raw Images Interactively</h3></div>


    









        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
    
<div id="manage_drone_imagery_standard_process_raw_images_interactive_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Imaging Band Select</div></li>
      <li><div class="workflow-title">Passes</div></li>
      <li><div class="workflow-title">Rotate</div></li>
      <li><div class="workflow-title">Plot Polygons</div></li>
      <li><div class="workflow-title">Apply</div></li>
      <li><div class="workflow-title">Indices</div></li>
      <li><div class="workflow-title">Phenotypes</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">This workflow will guide you through applying a standard process to your aerial imaging bands interactively</h3></div>


            <div class="well well-sm">
                <center>
                <p>This process will allow you to assign plot-polygons to the raw images.</p>
                <p><b>Please finish uploading your raw images before proceeding!</b></p>
                </center>
            </div>

            <br/><br/>
            <center>
            <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
            </center>
        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Select a drone run band</h3></div>


            <div class="well well-sm">
                <p>Please select one drone run band to take through the process. The NIR band is currently implemented and provides best contrast.</p>
            </div>

            <div class="well well-sm">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <table class="table table-bordered table-hover" id="manage_drone_imagery_standard_process_interactive_drone_run_bands_table">
                            <thead>
                                <tr>
                                    <th>Select</th>
                                    <th>Drone Run Band Name</th>
                                    <th>Drone Run Band Description</th>
                                    <th>Drone Run Band Type</th>
                                    <th>Drone Run Name</th>
                                    <th>Drone Run Description</th>
                                    <th>Drone Run Date</th>
                                    <th>Field Trial Name</th>
                                    <th>Field Trial Description</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>

            <br/><br/>
            <center>
            <button class="btn btn-primary" id="manage_drone_imagery_standard_process_interactive_select_drone_run_band_step">Go to Next Step</button>
            </center>
        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Separated imaging passes</h3></div>


            <div class="well well-sm">
                <p>The process will be applied to each imaging pass at a time. An imaging pass corresponds to the camera moving in one direction over the field experiment, such as an aerial vehicle flying a pass over the field. The passes are automatically separated from the images you uploaded using GPS.</p>
            </div>

            <div id="manage_drone_imagery_standard_process_interactive_separated_passes_info"></div>

            <br/><br/>
            <center>
            <button class="btn btn-primary" id="manage_drone_imagery_standard_process_interactive_separated_passes_step">Go to Next Step</button>
            </center>
        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Rotate images to help with alignment</h3></div>


            <div class="well well-sm">
                <p>Please rotate the images so that they make sense as far as your field experiment</p>
                <p>The plots should be in a vertically straight orientation</p>
                <p>You should zoom out on your browser (Cntrl + -)</p>
                <p><b>This process will cycle over the different imaging event passes.</b></p>

                <div id="drone_imagery_standard_process_interactive_rotate_flight_pass"></div>

                <hr>

                <form class="form-horizontal">
                    <div class="form-group form-group-sm">
                        <label class="col-sm-6 control-label">Rotate Images (Use Left and Right Arrows For Fine Tuning): </label>
                        <div class="col-sm-6">
                            <input type="range" min="-180" max="180" step="0.01" id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_degrees_input" name="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_degrees_input" value="0.00"><div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_degrees_input_text"></div>
                        </div>
                    </div>
                </form>

                <button class="btn btn-default" id="drone_imagery_standard_process_interactive_rotate_crosshairs">Draw Crosshairs Assist</button>
                <button class="btn btn-primary" id="manage_drone_imagery_standard_process_interactive_rotate_step">Save Rotation And Go To Next</button>
                <button class="btn btn-default" id="drone_imagery_standard_process_raw_images_interactive_rotate_previous_pass">Go To Previous Imaging Pass</button>
                <button class="btn btn-default" id="drone_imagery_standard_process_raw_images_interactive_rotate_next_pass">Go To Next Imaging Pass</button>
                <button class="btn btn-default" id="drone_imagery_standard_process_raw_images_interactive_rotate_restart">Start Over Rotation</button>
                <button class="btn btn-default" id="drone_imagery_standard_process_raw_images_interactive_rotate_skip_forward">Go To Plot Polygons</button>
            </div>

            <hr>

            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_50"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_49"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_48"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_47"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_46"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_45"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_44"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_43"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_42"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_41"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_40"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_39"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_38"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_37"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_36"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_35"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_34"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_33"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_32"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_31"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_30"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_29"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_28"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_27"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_26"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_25"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_24"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_23"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_22"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_21"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_20"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_19"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_18"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_17"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_16"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_15"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_14"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_13"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_12"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_11"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_10"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_9"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_8"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_7"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_6"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_5"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_4"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_3"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_2"></div>
            <div id="drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_1"></div>

        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Assign plot-polygons to raw images</h3></div>


            <div class="well well-sm">
                <ul>
                    <li>(0) You should zoom out on your browser (Cntrl + -).</li>
                    <li>(0) Please be very careful with the mouse clicking.</li>
                    <li>(1) Give the number of rows and columns in the area of interest.</li>
                    <li>(2) Use the templating tools below to generate plot polygons. There are three templating tools to choose from:</li>
                    <ul>
                        <li>(A) Click the four light blue buttons and then click the four corners encompassing the area of interest.</li>
                        <li>(B) Or paste a previously used template onto the area of interest.</li>
                    </ul>
                    <li>(3) Assign plot numbers to the generated plot polygons, either automatically or manually. Click blue button to go to next.</li>
                    <li>(4)<b> This process will cycle over the different imaging event passes.</b></li>
                </ul>

                <hr>
                <div id="drone_imagery_standard_process_interactive_plot_polygons_flight_pass"></div>

                <hr>
                <!-- button class="btn btn-primary" id="drone_imagery_standard_process_raw_images_interactive_match">Match and Align Images</button -->
                <!-- button class="btn btn-default" id="drone_imagery_standard_process_raw_images_interactive_match_view">View Match</button -->
                <button class="btn btn-default" id="drone_imagery_standard_process_raw_images_interactive_match_previous_pass">Go To Previous Imaging Pass</button>
                <button class="btn btn-default" id="drone_imagery_standard_process_raw_images_interactive_match_next_pass">Go To Next Imaging Pass</button>
                <button class="btn btn-default" id="drone_imagery_standard_process_raw_images_interactive_match_restart">Start Over Alignment</button>
                <button class="btn btn-default" id="drone_imagery_standard_process_raw_images_interactive_drop_pin">Drop Pin Marker</button>
            </div>

            <form class="form-horizontal">
                <!--div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Fine-tuning Rotate Images: </label>
                    <div class="col-sm-6">
                        <input type="range" min="0" max="10" id="drone_imagery_standard_process_raw_images_interactive_rotate_degrees_input" name="drone_imagery_standard_process_raw_images_interactive_rotate_degrees_input" value="0.00">
                    </div>
                </div-->
                <!--div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Flip North and South: </label>
                    <div class="col-sm-6">
                        <select class="form-control" id="drone_imagery_standard_process_raw_images_interactive_north_south_input" name="drone_imagery_standard_process_raw_images_interactive_north_south_input" >
                            <option value="South">South</option>
                            <option value="North">North</option>
                        </select>
                    </div>
                </div-->
                <!--div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Flip East and West: </label>
                    <div class="col-sm-6">
                        <select class="form-control" id="drone_imagery_standard_process_raw_images_interactive_east_or_west" name="drone_imagery_standard_process_raw_images_interactive_east_or_west" >
                            <option value="East">East</option>
                            <option value="West">West</option>
                        </select>
                    </div>
                </div-->
                <!--div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Rotate Frame: </label>
                    <div class="col-sm-6">
                        <input type="range" min="0" max="360" id="drone_imagery_standard_process_raw_images_interactive_rotate_frame_degrees_input" name="drone_imagery_standard_process_raw_images_interactive_rotate_frame_degrees_input" value="0.00">
                    </div>
                </div-->
            </form>
            <!--<hr>-->

            


<div class="row">
    <div class="col-sm-12">
        <div class="well">
            <div class="row">
                <div class="col-sm-1">
                    <span style="font-size:3.5em;" class="glyphicon glyphicon-th-large"></span>
                </div>
                <div class="col-sm-11">

                    


<a class="info_section_anchor" name="1_generate_polygon_template_tool"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_offswitch', 'manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_onswitch');
		Effects.hideElement('manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_content');
		
		return false;"
		id="manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" /><h4 style='display:inline'>(1) Generate Polygon Template Tool</h4></a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_onswitch', 'manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_offswitch');
		Effects.showElement('manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_content');
		
		return false;"
		id="manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" /><h4 style='display:inline'>(1) Generate Polygon Template Tool</h4></a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Overlay a uniform grid over the image.&nbsp;</td></tr></table>

<span id="manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_content" style="display:none;"><div class="infosectioncontent" >



                        <div class="panel panel-default">
                            <div class="panel-body">
























                                
<div class="well well-sm">
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="well well-sm">
                <form class="form-horizontal">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Number of Rows: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_plot_polygons_num_rows_raw_images_interactive" name="drone_imagery_plot_polygons_num_rows_raw_images_interactive" type="number" placeholder="Number of rows in image section" />
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Number of Columns: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_plot_polygons_num_cols_raw_images_interactive" name="drone_imagery_plot_polygons_num_cols_raw_images_interactive" type="number" placeholder="Number of columns in image section"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-body">

            <div class="row">
                <div class="col-sm-12">
                    <h4> Either (A) Click the four corners of the area of interest: </h4>

                    <button class="btn btn-sm btn-info" id="drone_imagery_plot_polygons_top_left_click_raw_images_interactive">Click Top Left Corner</button>
                    <button class="btn btn-sm btn-info" id="drone_imagery_plot_polygons_top_right_click_raw_images_interactive">Click Top Right Corner</button>
                    <button class="btn btn-sm btn-info" id="drone_imagery_plot_polygons_bottom_left_click_raw_images_interactive">Click Bottom Left Corner</button>
                    <button class="btn btn-sm btn-info" id="drone_imagery_plot_polygons_bottom_right_click_raw_images_interactive">Click Bottom Right Corner</button>
                </div>
            </div>
            <hr>
        
            


<a class="info_section_anchor" name="template_parameters"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc8670_offswitch', 'sgnc8670_onswitch');
		Effects.hideElement('sgnc8670_content');
		
		return false;"
		id="sgnc8670_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Template Parameters</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc8670_onswitch', 'sgnc8670_offswitch');
		Effects.showElement('sgnc8670_content');
		
		return false;"
		id="sgnc8670_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Template Parameters</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">View and edit template parameters. These parameters can be filled using the above button clicks&nbsp;</td></tr></table>

<span id="sgnc8670_content" style="display:none;"><div class="infosectioncontent" >

                <div class="well well-sm">
                    <form class="form-horizontal">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Left-most Column Top Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_left_column_top_offset_raw_images_interactive" name="drone_imagery_plot_polygons_left_column_top_offset_raw_images_interactive" type="number" value="0"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Left-most Column Bottom Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_left_column_bottom_offset_raw_images_interactive" name="drone_imagery_plot_polygons_left_column_bottom_offset_raw_images_interactive" type="number" value="0"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Top-most Row Left Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_top_row_left_offset_raw_images_interactive" name="drone_imagery_plot_polygons_top_row_left_offset_raw_images_interactive" type="number" placeholder="Left offset of image section" value="0" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Top-most Row Right Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_top_row_right_offset_raw_images_interactive" name="drone_imagery_plot_polygons_top_row_right_offset_raw_images_interactive" type="number" placeholder="Left offset of image section" value="0" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Bottom-most Row Left Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_bottom_row_left_offset_raw_images_interactive" name="drone_imagery_plot_polygons_bottom_row_left_offset_raw_images_interactive" type="number" placeholder="Left offset of image section" value="0" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Right-most Column Bottom Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_right_col_bottom_offset_raw_images_interactive" name="drone_imagery_plot_polygons_right_col_bottom_offset_raw_images_interactive" type="number" placeholder="Right-most column bottom offset" value="0" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            
</div>
</span>



            <br/>
            <button class="btn btn-sm btn-primary" id="drone_imagery_plot_polygons_rectangles_apply_raw_images_interactive">(A) Draw Plot Polygon Template (Does not save. Apply multiple templates if needed.)</button>
            <br/><br/>
            <!--button class="btn btn-sm btn-default" id="drone_imagery_plot_polygons_rectangles_apply_square_average_raw_images_interactive">(B) Train Single Plot Dimensions</button-->
            <!--button class="btn btn-sm btn-primary" id="drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive">(B) Paste Plot Polygon Template Trained on Single Plot Dimensions (Does not save)</button-->

        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-body">

            <div class="row">
                <div class="col-sm-12">
                    <h4> Or (B), paste a previously used template: </h4>
                </div>
            </div>

            


<a class="info_section_anchor" name="previously_used_plot_polygon_templates"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc7823_offswitch', 'sgnc7823_onswitch');
		Effects.hideElement('sgnc7823_content');
		
		return false;"
		id="sgnc7823_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Previously Used Plot Polygon Templates</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc7823_onswitch', 'sgnc7823_offswitch');
		Effects.showElement('sgnc7823_content');
		
		return false;"
		id="sgnc7823_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Previously Used Plot Polygon Templates</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">View and use previous plot polygon templates used on this field trial&nbsp;</td></tr></table>

<span id="sgnc7823_content" style="display:none;"><div class="infosectioncontent" >

                <div class="well well-sm">
                    <form class="form-horizontal">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Previously Used Plot Polygon Templates For This Field Trial: </label>
                                    <div class="col-sm-6">
                                        <div id="plot_polygons_previously_saved_plot_polygon_templates_raw_images_interactive">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <button class="btn btn-primary" id="plot_polygons_use_previously_saved_template_raw_images_interactive">(B) Draw Plot Polygon Template (Does not save)</button>
                </div>
            
</div>
</span>


        </div>
    </div>

    <div id="drone_imagery_plot_polygons_active_templates_raw_images_interactive"></div>

</div>








                            </div>
                        </div>
                    
</div>
</span>


                </div>
            </div>
        </div>
    </div>
</div>


            


<div class="row">
    <div class="col-sm-12">
        <div class="well">
            <div class="row">
                <div class="col-sm-1">
                    <span style="font-size:3.5em;" class="glyphicon glyphicon-th-large"></span>
                </div>
                <div class="col-sm-11">

                    


<a class="info_section_anchor" name="2_or_use_ground_control_points"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_ground_control_points_offswitch', 'manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_ground_control_points_onswitch');
		Effects.hideElement('manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_ground_control_points_content');
		
		return false;"
		id="manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_ground_control_points_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" /><h4 style='display:inline'>(2) Or, Use Ground Control Points</h4></a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_ground_control_points_onswitch', 'manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_ground_control_points_offswitch');
		Effects.showElement('manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_ground_control_points_content');
		
		return false;"
		id="manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_ground_control_points_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" /><h4 style='display:inline'>(2) Or, Use Ground Control Points</h4></a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Overlay a uniform grid over the image.&nbsp;</td></tr></table>

<span id="manage_drone_imagery_generate_plot_polygons_standard_process_raw_images_section_ground_control_points_content" style="display:none;"><div class="infosectioncontent" >



                        <div class="panel panel-default">
                            <div class="panel-body">
























                                
<div class="well well-sm">
    <div class="panel panel-default">
        <div class="panel-body">

            <div class="well well-sm">
                <p>If a previous imaging event on this field experiment has already completed the standard process and has ground control points (GCPs) defined, then that imaging event can be used to automate the rest of the standard process on this new imaging event.</p>
            </div>

            <div class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Has a previous imaging event on this field trial completed the standard process and also has GCPs defined already?: </label>
                    <div class="col-sm-6">
                        <select class="form-control" id="manage_drone_imagery_standard_process_interative_ground_control_points_option">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="manage_drone_imagery_standard_process_interactive_ground_control_points_select_div" style="display:none">
                <div class="well well-sm">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Select the aerial imaging event to use as a template: </label>
                                <div class="col-sm-6">
                                    <div id="manage_drone_imagery_standard_process_interactive_ground_control_points_select"></div>
                                </div>
                            </div>
                            <br/><br/>
                            <hr>

                            <div class="well well-sm">
                                <ul>
                                    <li>Click on the ground control points (GCPs) in the image below and save them.</li>
                                    <li>Please click and save at least three points. The names of the GCPs MUST be consistent across imaging events!</li>
                                    <li>For best results, use ground control points at the far four corners of the field.</li>
                                    <li>You can zoom out on your browser (Cntrl + -).</li>
                                </ul>
                            </div>

                            <div class="well well-sm">
                                <div id="project_drone_imagery_standard_process_interactive_ground_control_points_saved_div"></div>

                                <br/><br/>
                                <center>
                                <button class="btn btn-primary" id="manage_drone_imagery_standard_process_interactive_ground_control_points_step">Draw Computed Plot Polygons</button>
                                <button class="btn btn-primary" id="manage_drone_imagery_standard_process_interactive_ground_control_points_step_confirm">Confirm and Save</button>
                                </center>
                            </div>

                            <div id="project_drone_imagery_standard_process_interactive_ground_control_points_info_div"></div>

                            <div id="project_drone_imagery_standard_process_interactive_ground_control_points_loading_div"><img src="/img/wheel.gif" /></div>

                            <canvas id="project_drone_imagery_standard_process_interactive_ground_control_points_canvas_div"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>








                            </div>
                        </div>
                    
</div>
</span>


                </div>
            </div>
        </div>
    </div>
</div>


            <div class="well well-sm">
                <button id="drone_imagery_interactive_plot_polygons_clear" class="btn btn-danger">Clear All Polygons</button>
                <button id="drone_imagery_interactive_plot_polygons_clear_one" class="btn btn-danger">Remove One Polygon</button>
            </div>

            <div id="drone_imagery_standard_process_interactive_generated_polygons_input_div" style="display:none">

                <div class="well well-sm">
                    <h2>Either, Manually Assign Plot Numbers to Generated Polygons</h2>

                    


<a class="info_section_anchor" name="manually_assign_plot_numbers_to_polygon_numbers"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc8690_offswitch', 'sgnc8690_onswitch');
		Effects.hideElement('sgnc8690_content');
		
		return false;"
		id="sgnc8690_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Manually Assign Plot Numbers to Polygon Numbers</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc8690_onswitch', 'sgnc8690_offswitch');
		Effects.showElement('sgnc8690_content');
		
		return false;"
		id="sgnc8690_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Manually Assign Plot Numbers to Polygon Numbers</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Table for manually assigning plot numbers to polygon numbers.&nbsp;</td></tr></table>

<span id="sgnc8690_content" style="display:none;"><div class="infosectioncontent" >

                        <div id="drone_imagery_standard_process_interactive_generated_polygons_table"></div>
                    
</div>
</span>


                </div>

                <div id="drone_imagery_interactive_generated_polygons_div"></div>

                <hr>

                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_50"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_49"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_48"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_47"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_46"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_45"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_44"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_43"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_42"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_41"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_40"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_39"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_38"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_37"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_36"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_35"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_34"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_33"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_32"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_31"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_30"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_29"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_28"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_27"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_26"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_25"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_24"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_23"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_22"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_21"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_20"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_19"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_18"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_17"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_16"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_15"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_14"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_13"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_12"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_11"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_10"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_9"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_8"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_7"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_6"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_5"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_4"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_3"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_2"></div>
                <div id="drone_imagery_standard_process_raw_images_image_id_interactive_select_div_1"></div>

            </div>

            <hr>

            <div class="well well-sm">
                <div id="drone_imagery_interactive_trial_layout_div"></div>
            </div>
        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Apply these same steps to other drone run bands in the current drone run</h3></div>


            <div class="well well-sm">
                <ul>
                    <li>Here you can apply the same actions you did for the previous steps 1 to 6, to additional drone run bands in this drone run.</li>
                    <li>Thresholding will be done dynamically, by removing the top and bottom 20% of pixel values.</li>
                </ul>
            </div>

            <div class="well well-sm">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <table class="table table-bordered table-hover" id="manage_drone_imagery_standard_process_interactive_drone_run_bands_apply_table">
                            <thead>
                                <tr>
                                    <th>Select</th>
                                    <th>Drone Run Band Name</th>
                                    <th>Drone Run Band Description</th>
                                    <th>Drone Run Band Type</th>
                                    <th>Drone Run Name</th>
                                    <th>Drone Run Description</th>
                                    <th>Drone Run Date</th>
                                    <th>Field Trial Name</th>
                                    <th>Field Trial Description</th>
                                </tr>
                            </thead>
                        </table>

                        <br/>

                        <center>
                        <button class="btn btn-primary" id="manage_drone_imagery_standard_process_interactive_drone_run_band_apply_step">Go to Next Step</button>
                        </center>
                    </div>
                </div>
            </div>
        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Create and apply these same steps to vegetative indices</h3></div>


            <form class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Vegetative Indices To Apply: </label>
                    <div class="col-sm-6">
                        <input name="drone_imagery_standard_process_interactive_apply_indices_select" value="TGI" type="checkbox" checked disabled> Triangular Greenness Index (TGI) <br/>
                        <input name="drone_imagery_standard_process_interactive_apply_indices_select" value="VARI" type="checkbox" checked disabled> Visible Atmospheric Resistant Index (VARI) <br/>
                        <input name="drone_imagery_standard_process_interactive_apply_indices_select" value="NDVI" type="checkbox" checked disabled> Normalized Difference Vegetative Index (NDVI) <br/>
                        <input name="drone_imagery_standard_process_interactive_apply_indices_select" value="NDRE" type="checkbox" checked disabled> Normalized Difference Red Edge Vegetative Index (NDRE) <br/>
                    </div>
                </div>
            </form>

            <br/>

            <center>
            <button type="button" class="btn btn-primary" id="manage_drone_imagery_standard_interactive_process_indices_step">Go to Next Step</button>
            </center>
        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Calculate phenotypes for all plot polygon images</h3></div>


            <form class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Zonal Statistics to Calculate and Save in Database: </label>
                    <div class="col-sm-6">
                        <input name="drone_imagery_standard_process_interactive_phenotypes_select" value="zonal" type="checkbox" checked disabled> Zonal Statistics: nonzero_pixel_count, total_pixel_sum, mean_pixel_value, harmonic_mean_value, median_pixel_value, variance_pixel_value, stdev_pixel_value, pstdev_pixel_value, min_pixel_value, max_pixel_value, minority_pixel_value, minority_pixel_count, majority_pixel_value, majority_pixel_count, pixel_variety_count <br/>
                    </div>
                </div>
            </form>
            <br/>

            <div id="drone_imagery_standard_process_interactive_week_term_div"></div>

            <center>
            <button type="button" class="btn btn-info" id="manage_drone_imagery_standard_process_interactive_phenotypes_step">Finish</button>
            </center>
        </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#manage_drone_imagery_standard_process_raw_images_interactive_workflow");
</script>


</div>

<div class="modal fade" id="drone_imagery_interactive_plot_polygon_template_options_dialog" name="drone_imagery_interactive_plot_polygon_template_options_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryInteractivePlotPolygonTemplateDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryInteractivePlotPolygonTemplateDialog">Plot Template Options</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            


<a class="info_section_anchor" name="copypaste_template"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc1903_offswitch', 'sgnc1903_onswitch');
		Effects.hideElement('sgnc1903_content');
		
		return false;"
		id="sgnc1903_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Copy/Paste Template</a>
	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc1903_onswitch', 'sgnc1903_offswitch');
		Effects.showElement('sgnc1903_content');
		
		return false;"
		id="sgnc1903_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Copy/Paste Template</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Copy/Paste this template onto the image.&nbsp;</td></tr></table>

<span id="sgnc1903_content" style=""><div class="infosectioncontent" >

                <button class="btn btn-primary" id="drone_imagery_interactive_plot_polygon_template_options_paste_click">Click To Paste</button>
            
</div>
</span>


        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_interactive_plot_polygon_remove_polygon" name="drone_imagery_interactive_plot_polygon_remove_polygon" tabindex="-1" role="dialog" aria-labelledby="droneImageryInteractiveRemovePlotPolygonDialog" data-backdrop="static">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryInteractiveRemovePlotPolygonDialog">Remove Plot Polygon</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-5 control-label">Polygon Identifier:</label>
                    <div class="col-sm-7">
                        <input class="form-control" id="drone_imagery_interactive_plot_polygon_remove_polygon_number" name="drone_imagery_interactive_plot_polygon_remove_polygon_number" type="number" placeholder="e.g. 3" />
                    </div>
                </div>
            </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_interactive_plot_polygon_remove_polygon_submit">Remove Plot Polygon</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_standard_process_raw_images_interactive_match_modal" name="drone_imagery_standard_process_raw_images_interactive_match_modal" tabindex="-1" role="dialog" aria-labelledby="droneImageryInteractiveMatchViewDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryInteractiveMatchViewDialog">View Match From Alignment</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid" id="drone_imagery_standard_process_raw_images_interactive_match_modal_div">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_standard_process_interactive_complete_dialog" name="drone_imagery_standard_process_interactive_complete_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryStandardProcessInteractiveCompleteDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryStandardProcessInteractiveCompleteDialog">Standard Process Complete</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <p>
                <span class="ui-icon ui-icon-circle-check" style="float: left; margin: 0 7px 50px 0;"></span>
                It will take time to finish processing your drone run and calculating phenotypes for all plot polygon images, vegetative indices, and processing combinations. Once it is complete, the "Processing Icon" on the Manage->Drone Imagery page will disappear from the drone run.
            </p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Finish</button>
      </div>
    </div>
  </div>
</div>

<script>
jQuery(document).ready(function(){

    var manage_drone_imagery_standard_process_raw_images_interactive_current_pass = 1;
    var manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass;
    var manage_drone_imagery_standard_process_raw_images_interactive_is_rotating = 1;
    var manage_drone_imagery_standard_process_raw_images_interactive_field_trial_id;
    var manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id;
    var manage_drone_imagery_standard_process_raw_images_interactive_north_or_south = 'South';
    var manage_drone_imagery_standard_process_raw_images_interactive_east_or_west = 'East';
    var manage_drone_imagery_standard_process_interactive_drone_run_band_project_id;
    var manage_drone_imagery_standard_process_raw_images_interactive_bulk_rotate_angle = 0;
    var manage_drone_imagery_standard_process_raw_images_interactive_rotate_angle = 0;
    var manage_drone_imagery_standard_process_raw_images_interactive_rotate_frame_angle = 0;
    var manage_drone_imagery_standard_process_raw_images_interactive_x_factor = 10000000;
    var manage_drone_imagery_standard_process_raw_images_interactive_y_factor = 16000000;
    var manage_drone_imagery_standard_process_raw_images_interactive_svg;
    var manage_drone_imagery_standard_process_raw_images_interactive_image;
    var manage_drone_imagery_standard_process_raw_images_nir_image_counter = 0;
    var manage_drone_imagery_standard_process_raw_images_nir_images = [];
    var drone_imagery_interactive_total_width;
    var drone_imagery_interactive_total_length;
    var manage_drone_imagery_standard_process_interactive_gps_images;
    var manage_drone_imagery_standard_process_interactive_saved_gps_positions;
    var manage_drone_imagery_standard_process_interactive_latitudes;
    var manage_drone_imagery_standard_process_interactive_latitudes_rounded;
    var manage_drone_imagery_standard_process_interactive_longitudes;
    var manage_drone_imagery_standard_process_interactive_longitudes_rounded;
    var manage_drone_imagery_standard_process_interactive_min_longitude;
    var manage_drone_imagery_standard_process_interactive_min_latitude;
    var manage_drone_imagery_standard_process_interactive_latitude_counter = 0;
    var manage_drone_imagery_standard_process_interactive_longitude_counter = 0;
    var drone_imagery_interactive_plot_polygons_removed_numbers = [];
    var drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions = [];
    var plot_polygons_interactive_num_rows_generated;
    var plot_polygons_interactive_num_cols_generated;
    var plot_polygons_interactive_generated_polygons = [];
    var drone_imagery_interactive_plot_polygons_display = [];
    var drone_imagery_interactive_plot_polygons = {};
    var drone_imagery_interactive_plot_generated_polygons = [];
    var plot_polygons_interactive_number_generated;
    var plot_polygons_interactive_ind_4_points = [];
    var plot_polygons_interactive_display_points = [];
    var drone_imagery_interactive_plot_polygons_available_stock_names = [];
    var drone_imagery_interactive_field_trial_layout_response;
    var drone_imagery_interactive_plot_polygons_removed_numbers = [];
    var plot_polygons_interactive_total_height_generated;
    var manage_drone_imagery_standard_process_interactive_apply_drone_run_band_project_ids = [];
    var manage_drone_imagery_standard_process_interactive_phenotype_time;
    var manage_drone_imagery_standard_process_interactive_apply_drone_run_band_vegetative_indices = [];
    var manage_drone_imagery_standard_process_interactive_latitude_rounded_map = {};
    var manage_drone_imagery_standard_process_interactive_longitude_rounded_map = {};
    var manage_drone_imagery_standard_process_interactive_latitude_ordinal_max;
    var manage_drone_imagery_standard_process_interactive_longitude_ordinal_max;
    var manage_drone_imagery_standard_process_interactive_current_ordinal_latitude_raw;
    var manage_drone_imagery_standard_process_interactive_current_ordinal_latitude_current;
    var manage_drone_imagery_standard_process_interactive_current_ordinal_longitude_raw;
    var manage_drone_imagery_standard_process_interactive_current_ordinal_longitude_current;
    var project_drone_imagery_interactive_ground_control_points_saved_div_table;
    var project_drone_imagery_interactive_ground_control_points_saved;
    var project_drone_imagery_interactive_ground_control_points_saved_array;

    d3.selection.prototype.moveToFront = function() {
        return this.each(function(){
            this.parentNode.appendChild(this);
        });
    };

    var droneImageryInteractiveSaveGPStimeout = null;
    function saveGPSPixelPositions() {
        if (droneImageryInteractiveSaveGPStimeout !== null) {
            clearTimeout(droneImageryInteractiveSaveGPStimeout);
        }
        droneImageryInteractiveSaveGPStimeout = setTimeout(function () {

            jQuery.ajax({
                url : '/api/drone_imagery/save_gps_images',
                type: 'POST',
                data : {
                    'gps_images': JSON.stringify(manage_drone_imagery_standard_process_interactive_gps_images),
                    'drone_run_project_id':manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id,
                    'flight_pass_counter':manage_drone_imagery_standard_process_raw_images_interactive_current_pass
                },
                success: function(response){
                    console.log(response);
                },
                error: function(response){
                    alert('Error saving GPS images positions!');
                }
            });

        }, 100);
    }

    function appendDraggableImage(url, x_pos, y_pos, latitude, longitude, nir_image_id, stack_image_ids, rotate_angle, enable_drag, rotated_bound, match_problem) {

        var color = "orange";
        if (match_problem == 1) {
            color = "red";
        }
        else if (match_problem == 0) {
            color = "green";
        }

        var imageGroup = manage_drone_imagery_standard_process_raw_images_interactive_svg.append("g")
            .datum({position: x_pos,y_pos})
            .attr("x_pos", x_pos)
            .attr("y_pos", y_pos)
            .attr("latitude", latitude)
            .attr("longitude", longitude)
            .attr("rotate_angle", rotate_angle)
            .attr("nir_image_id", nir_image_id )
            .attr("stack_image_ids", stack_image_ids )
            .attr("id", "nir_image_"+nir_image_id )
            .attr("match_problem", match_problem )
            .attr("transform", d => "translate("+x_pos+","+y_pos+") rotate("+rotate_angle+","+manage_drone_imagery_standard_process_raw_images_interactive_image.width/2+","+manage_drone_imagery_standard_process_raw_images_interactive_image.length/2+")");

        if (enable_drag == 1) {
            imageGroup.call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
        }

        var imageElem = imageGroup.append("image")
            .attr("xlink:href", url)
            //.style("stroke", color)
            //.style("stroke-width", 2)
            .attr("height", manage_drone_imagery_standard_process_raw_images_interactive_image.length)
            .attr("width", manage_drone_imagery_standard_process_raw_images_interactive_image.width);

        var squareFill = imageGroup.append("square")
            .attr("class", "square-fill")
            //.style("stroke", color)
            //.style("stroke-width", 2)
            .attr("cx", manage_drone_imagery_standard_process_raw_images_interactive_image.width)
            .attr("cy", manage_drone_imagery_standard_process_raw_images_interactive_image.length);

        var imageborder = imageGroup.append('rect')
            .attr('class', 'image-border')
            .style("fill", "none")
            //.style("stroke", color)
            //.style("stroke-width", 2)
            .attr('width', manage_drone_imagery_standard_process_raw_images_interactive_image.width)
            .attr('height', manage_drone_imagery_standard_process_raw_images_interactive_image.length);

        if (rotated_bound && rotated_bound.length>0) {
            var bound_x1 = parseFloat(rotated_bound[0][0]) + parseFloat(x_pos);
            var bound_y1 = parseFloat(rotated_bound[0][1]) + parseFloat(y_pos);
            var bound_x2 = parseFloat(rotated_bound[1][0]) + parseFloat(x_pos);
            var bound_y2 = parseFloat(rotated_bound[1][1]) + parseFloat(y_pos);
            var bound_x3 = parseFloat(rotated_bound[2][0]) + parseFloat(x_pos);
            var bound_y3 = parseFloat(rotated_bound[2][1]) + parseFloat(y_pos);
            var bound_x4 = parseFloat(rotated_bound[3][0]) + parseFloat(x_pos);
            var bound_y4 = parseFloat(rotated_bound[3][1]) + parseFloat(y_pos);

            var rotatedBoundGroup = manage_drone_imagery_standard_process_raw_images_interactive_svg.append("g")
                .datum({position: x_pos,y_pos})
                .attr("x_pos", x_pos)
                .attr("y_pos", y_pos)
                .attr("nir_image_id", nir_image_id )
                .attr("match_problem", match_problem )
                .attr("is_rotated_bound", 1);
            var line1 = rotatedBoundGroup.append('line')
                .style("stroke", color)
                .style("stroke-width", 2)
                .attr("x1", bound_x1)
                .attr("y1", bound_y1)
                .attr("x2", bound_x2)
                .attr("y2", bound_y2)
                .attr("latitude", latitude)
                .attr("longitude", longitude)
                .attr("bnum", 0)
                .attr("nir_image_id", nir_image_id )
                .attr("match_problem", match_problem )
                .attr("is_rotated_bound", 1);
            var line2 = rotatedBoundGroup.append('line')
                .style("stroke", color)
                .style("stroke-width", 2)
                .attr("x1", bound_x2)
                .attr("y1", bound_y2)
                .attr("x2", bound_x3)
                .attr("y2", bound_y3)
                .attr("latitude", latitude)
                .attr("longitude", longitude)
                .attr("bnum", 1)
                .attr("nir_image_id", nir_image_id )
                .attr("match_problem", match_problem )
                .attr("is_rotated_bound", 1);
            var line3 = rotatedBoundGroup.append('line')
                .style("stroke", color)
                .style("stroke-width", 2)
                .attr("x1", bound_x3)
                .attr("y1", bound_y3)
                .attr("x2", bound_x4)
                .attr("y2", bound_y4)
                .attr("latitude", latitude)
                .attr("longitude", longitude)
                .attr("bnum", 2)
                .attr("nir_image_id", nir_image_id )
                .attr("match_problem", match_problem )
                .attr("is_rotated_bound", 1);
            var line4 = rotatedBoundGroup.append('line')
                .style("stroke", color)
                .style("stroke-width", 2)
                .attr("x1", bound_x4)
                .attr("y1", bound_y4)
                .attr("x2", bound_x1)
                .attr("y2", bound_y1)
                .attr("latitude", latitude)
                .attr("longitude", longitude)
                .attr("bnum", 3)
                .attr("nir_image_id", nir_image_id )
                .attr("match_problem", match_problem )
                .attr("is_rotated_bound", 1);

            manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['rotated_bound_translated'] = [[bound_x1, bound_y1], [bound_x2, bound_y2], [bound_x3, bound_y3], [bound_x4, bound_y4]];
            saveGPSPixelPositions();
        }
    }

    function dragstarted(d) {
        d3.select(this).style("opacity", 0.6);
        d3.select(this).moveToFront();
    }

    function dragged(d) {
        var newX = d3.event.x - manage_drone_imagery_standard_process_raw_images_interactive_image.width / 2;
        var newY = d3.event.y - manage_drone_imagery_standard_process_raw_images_interactive_image.length / 2;
        d.x_pos = newX;
        d.y_pos = newY;
        var rotate_angle = d3.select(this).attr("rotate_angle");

        d3.select(this)
            .attr("transform", "translate("+newX+","+newY+") rotate("+rotate_angle+","+manage_drone_imagery_standard_process_raw_images_interactive_image.width/2+","+manage_drone_imagery_standard_process_raw_images_interactive_image.length/2+")");
    }

    function dragended(d) {
        d3.select(this).lower();
        d3.select(this).style("opacity", 1.0);
        d3.select(this).moveToFront();

        var newX = d3.event.x - manage_drone_imagery_standard_process_raw_images_interactive_image.width / 2;
        var newY = d3.event.y - manage_drone_imagery_standard_process_raw_images_interactive_image.length / 2;
        d3.select(this).datum({position: newX,newY});
        d3.select(this).attr("x_pos", newX);
        d3.select(this).attr("y_pos", newY);

        var latitude = d3.select(this).attr("latitude");
        var longitude = d3.select(this).attr("longitude");
        manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['manual_match'] = 1;
        manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['x_pos'] = newX;
        manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['y_pos'] = newY;
        manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['rotate_angle'] = manage_drone_imagery_standard_process_raw_images_interactive_rotate_angle;

        d3.selectAll("text").moveToFront();
        d3.selectAll("line").moveToFront();
        d3.selectAll("circle").moveToFront();
        saveGPSPixelPositions();
    }

    jQuery('#drone_imagery_standard_process_raw_images_interactive_rotate_previous_pass').click(function(){
        if (manage_drone_imagery_standard_process_raw_images_interactive_current_pass > 1) {
            manage_drone_imagery_standard_process_raw_images_interactive_current_pass = manage_drone_imagery_standard_process_raw_images_interactive_current_pass - 1;

            initializeInteractiveSvg('#drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div', 'drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_area', 1, 0);

            jQuery('#drone_imagery_standard_process_interactive_rotate_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1>");
        }
        else {
            alert('No previous imaging pass to go to!');
            return false;
        }
    });

    jQuery('#drone_imagery_standard_process_raw_images_interactive_rotate_next_pass').click(function(){
        if (manage_drone_imagery_standard_process_raw_images_interactive_current_pass < manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass) {
            manage_drone_imagery_standard_process_raw_images_interactive_current_pass = manage_drone_imagery_standard_process_raw_images_interactive_current_pass + 1;

            initializeInteractiveSvg('#drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div', 'drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_area', 1, 0);

            jQuery('#drone_imagery_standard_process_interactive_rotate_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1>");
        }
        else {
            alert('No next imaging pass to go to!');
            return false;
        }
    });

    jQuery('#manage_drone_imagery_standard_process_interactive_rotate_step').click(function(){

        jQuery.ajax({
            url : '/api/drone_imagery/update_gps_images_rotation',
            type: 'POST',
            //beforeSend: function(){
            //    jQuery('#working_modal').show();
            //},
            data : {
                'drone_run_project_id':manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id,
                'rotate_angle':manage_drone_imagery_standard_process_raw_images_interactive_bulk_rotate_angle,
                'flight_pass_counter':manage_drone_imagery_standard_process_raw_images_interactive_current_pass,
                'nir_image_ids':JSON.stringify(manage_drone_imagery_standard_process_raw_images_nir_images)
            },
            success: function(response){
                console.log(response);
                //jQuery('#working_modal').hide();
            },
            error: function(response){
                //jQuery('#working_modal').hide();
                alert('Error rotating GPS images!');
            }
        });

        if (manage_drone_imagery_standard_process_raw_images_interactive_current_pass < manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass) {
            manage_drone_imagery_standard_process_raw_images_interactive_current_pass = manage_drone_imagery_standard_process_raw_images_interactive_current_pass + 1;

            console.log("PASS ROTATION COMPLETE");

            initializeInteractiveSvg('#drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div', 'drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_area', 1, 0);

            jQuery('#drone_imagery_standard_process_interactive_rotate_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1>");

            window.scrollTo(0,0);
        }
        else {

            jQuery('#drone_imagery_standard_process_interactive_rotate_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1><br/><center><h3>Working <img src='/img/wheel.gif' /></h3></center>");

            (function checkRawImageRotateProcess (manage_drone_imagery_standard_process_raw_images_interactive_is_rotating) {
                setTimeout(function () {
                    jQuery.ajax({
                        url : '/api/drone_imagery/check_gps_images_rotation',
                        type: 'POST',
                        data : {
                            'drone_run_project_id':manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id,
                        },
                        success: function(response){
                            console.log(response);
                            manage_drone_imagery_standard_process_raw_images_interactive_is_rotating = response.is_rotating;
                            if (manage_drone_imagery_standard_process_raw_images_interactive_is_rotating == 1) {
                                checkRawImageRotateProcess(manage_drone_imagery_standard_process_raw_images_interactive_is_rotating);
                            }
                            else {
                                jQuery('#drone_imagery_standard_process_interactive_rotate_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1>");

                                console.log("ROTATION AND MATCHING COMPLETE");

                                manage_drone_imagery_standard_process_raw_images_interactive_current_pass = 1;

                                jQuery('#drone_imagery_standard_process_interactive_plot_polygons_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1>");

                                initializeInteractiveSvg('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div', 'drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area', 1, 1);

                                Workflow.complete("#manage_drone_imagery_standard_process_interactive_rotate_step");
                                Workflow.focus('#manage_drone_imagery_standard_process_raw_images_interactive_workflow', 4);

                                window.scrollTo(0,0);
                            }
                        },
                        error: function(response){
                            alert('Error checking GPS image rotation and matching!');
                        }
                    });
                }, 10000);
            })(manage_drone_imagery_standard_process_raw_images_interactive_is_rotating);
        }
    });

    jQuery('#drone_imagery_standard_process_raw_images_interactive_rotate_skip_forward').click(function(){
        manage_drone_imagery_standard_process_raw_images_interactive_current_pass = 1;

        jQuery('#drone_imagery_standard_process_interactive_plot_polygons_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1>");

        initializeInteractiveSvg('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div', 'drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area', 1, 1);

        Workflow.complete("#manage_drone_imagery_standard_process_interactive_rotate_step");
        Workflow.focus('#manage_drone_imagery_standard_process_raw_images_interactive_workflow', 4);

        window.scrollTo(0,0);
    });

    d3.select("#drone_imagery_standard_process_raw_images_interactive_bulk_rotate_degrees_input").on("input", function() {
        manage_drone_imagery_standard_process_raw_images_interactive_bulk_rotate_angle = this.value;
        droneImageryInteractiveRotateImages(manage_drone_imagery_standard_process_raw_images_interactive_bulk_rotate_angle, 1, '#drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass);
        jQuery('#drone_imagery_standard_process_raw_images_interactive_bulk_rotate_degrees_input_text').html(manage_drone_imagery_standard_process_raw_images_interactive_bulk_rotate_angle);
    });

    function getRandomColorInteractive() {
        var letters = '0123456789ABCDEF';
        var color = '#';
        for (var i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    }

    function drawRotateCrosshairsInteractive(color) {
        var row_line_width = 250;
        var col_line_width = 250;
        var number_col_lines = drone_imagery_interactive_total_width/col_line_width;
        var number_row_lines = drone_imagery_interactive_total_length/row_line_width;
        var current_row_val = row_line_width;
        var current_col_val = col_line_width;
        for (var i=0; i<number_col_lines; i++) {
            manage_drone_imagery_standard_process_raw_images_interactive_svg.append('line')
                .style("stroke", color)
                .style("stroke-width", 5)
                .attr("x1", current_col_val)
                .attr("y1", 0)
                .attr("x2", current_col_val)
                .attr("y2", drone_imagery_interactive_total_length);
            current_col_val = current_col_val + col_line_width;
        }
        for (var i=0; i<number_col_lines; i++) {
            manage_drone_imagery_standard_process_raw_images_interactive_svg.append('line')
                .style("stroke", color)
                .style("stroke-width", 5)
                .attr("x1", 0)
                .attr("y1", current_row_val)
                .attr("x2", drone_imagery_interactive_total_width)
                .attr("y2", current_row_val);
            current_row_val = current_row_val + row_line_width;
        }
    }

    jQuery('#drone_imagery_standard_process_interactive_rotate_crosshairs').click(function(){
        drawRotateCrosshairsInteractive(getRandomColorInteractive());
    });

    jQuery('#drone_imagery_standard_process_raw_images_interactive_match_restart').click(function(){
        jQuery.ajax({
            url : '/api/drone_imagery/delete_gps_images',
            type: 'POST',
            data : {
                'drone_run_project_id':manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id
            },
            success: function(response){
                console.log(response);
                location.reload();
            },
            error: function(response){
                alert('Error deleting GPS images template from match step!')
            }
        });
    });

    jQuery('#drone_imagery_standard_process_raw_images_interactive_rotate_restart').click(function(){
        jQuery.ajax({
            url : '/api/drone_imagery/delete_gps_images',
            type: 'POST',
            data : {
                'drone_run_project_id':manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id
            },
            success: function(response){
                console.log(response);
                location.reload();
            },
            error: function(response){
                alert('Error deleting GPS images template from rotate step!')
            }
        });
    });

    jQuery('#drone_imagery_standard_process_raw_images_interactive_match_view').click(function(){
        jQuery('#drone_imagery_standard_process_raw_images_interactive_match_modal').modal('show');
    });

    function droneImageryInteractiveDrawImages(enable_drag, div_id){
        d3.selectAll(div_id+' > g').remove();
        d3.selectAll(div_id+' > square').remove();
        d3.selectAll(div_id+' > image').remove();
        d3.selectAll(div_id+' > line').remove();
        //d3.selectAll(div_id+' > circle').remove();
        d3.selectAll(div_id+' > text').remove();
        d3.selectAll(div_id+' > rect').remove();
        manage_drone_imagery_standard_process_raw_images_nir_images = [];

        for (var i=0; i<manage_drone_imagery_standard_process_interactive_latitudes.length; i++) {
            var latitude = manage_drone_imagery_standard_process_interactive_latitudes[i];
            for (var j=0; j<manage_drone_imagery_standard_process_interactive_longitudes.length; j++) {
                var longitude = manage_drone_imagery_standard_process_interactive_longitudes[j];
                if (manage_drone_imagery_standard_process_interactive_saved_gps_positions && manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude] && manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude][longitude] && manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude][longitude]['x_pos'] !== undefined) {

                    var image_url = manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude][longitude]['image_url'];
                    var nir_image_id = manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude][longitude]['nir_image_id'];
                    var rotated_image_ids = manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude][longitude]['rotated_image_ids'];
                    var x_pos = manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude][longitude]['x_pos'];
                    var y_pos = manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude][longitude]['y_pos'];
                    manage_drone_imagery_standard_process_raw_images_nir_images.push(nir_image_id);
                    var rotate_angle = manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude][longitude]['d3_rotate_angle'] ? manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude][longitude]['d3_rotate_angle'] : 0;
                    var rotated_bound = manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude][longitude]['rotated_bound'];
                    var match_problem = manage_drone_imagery_standard_process_interactive_saved_gps_positions[latitude][longitude]['match_problem'];
                    appendDraggableImage(image_url, x_pos, y_pos, latitude, longitude, nir_image_id, JSON.stringify(rotated_image_ids), rotate_angle, enable_drag, rotated_bound, match_problem);
                }
                else if (manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]) {

                    var image_url = manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['image_url'];
                    var nir_image_id = manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['nir_image_id'];
                    var rotated_image_ids = manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['rotated_image_ids'];

                    var x_pos;
                    var y_pos;
                    if (manage_drone_imagery_standard_process_raw_images_interactive_north_or_south == 'North') {
                        y_pos = Math.round((latitude - manage_drone_imagery_standard_process_interactive_min_latitude)*manage_drone_imagery_standard_process_raw_images_interactive_y_factor);
                    }
                    else if (manage_drone_imagery_standard_process_raw_images_interactive_north_or_south == 'South') {
                        y_pos = drone_imagery_interactive_total_length - Math.round((latitude - manage_drone_imagery_standard_process_interactive_min_latitude)*manage_drone_imagery_standard_process_raw_images_interactive_y_factor) - manage_drone_imagery_standard_process_interactive_image_length;
                    }
                    if (manage_drone_imagery_standard_process_raw_images_interactive_east_or_west == 'East') {
                        x_pos = Math.round((longitude - manage_drone_imagery_standard_process_interactive_min_longitude)*manage_drone_imagery_standard_process_raw_images_interactive_x_factor);
                    }
                    else if (manage_drone_imagery_standard_process_raw_images_interactive_east_or_west == 'West') {
                        x_pos = drone_imagery_interactive_total_width - Math.round((longitude - manage_drone_imagery_standard_process_interactive_min_longitude)*manage_drone_imagery_standard_process_raw_images_interactive_x_factor) - manage_drone_imagery_standard_process_interactive_image_width;
                    }
                    manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['x_pos'] = x_pos;
                    manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['y_pos'] = y_pos;
                    var rotate_angle = manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['d3_rotate_angle'] ? manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['d3_rotate_angle'] : 0;
                    manage_drone_imagery_standard_process_raw_images_nir_images.push(nir_image_id);
                    var rotated_bound = manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['rotated_bound'];
                    var match_problem = manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['match_problem'];
                    appendDraggableImage(image_url, x_pos, y_pos, latitude, longitude, nir_image_id, JSON.stringify(rotated_image_ids), rotate_angle, enable_drag, rotated_bound, match_problem);
                }
            }
        }
        if (!manage_drone_imagery_standard_process_interactive_saved_gps_positions) {
            manage_drone_imagery_standard_process_interactive_saved_gps_positions = manage_drone_imagery_standard_process_interactive_gps_images;
        }
        manage_drone_imagery_standard_process_raw_images_nir_images = manage_drone_imagery_standard_process_raw_images_nir_images.sort();
        //console.log(manage_drone_imagery_standard_process_raw_images_nir_images);
        //console.log(manage_drone_imagery_standard_process_interactive_saved_gps_positions);
        //console.log(manage_drone_imagery_standard_process_interactive_gps_images);

        d3.selectAll('g').each(function(d) {
            var match_problem = d3.select(this).attr('match_problem');
            if (match_problem == 1) {
                d3.select(this).moveToFront();
            }
        });
        d3.selectAll('line').each(function(d) {
            var match_problem = d3.select(this).attr('match_problem');
            if (match_problem == 1) {
                d3.select(this).moveToFront();
            }
        });

        saveGPSPixelPositions();
    }

    var droneImageryRotateSavetimeout = null;
    function droneImageryInteractiveRotateImages(angle, centered, div_id){
        d3.selectAll(div_id+'>g').each(function(d) {
            var x_pos = d3.select(this).attr('x_pos');
            var y_pos = d3.select(this).attr('y_pos');
            if (centered == 1) {
                var rotate_x_pos = manage_drone_imagery_standard_process_interactive_image_width/2;
                var rotate_y_pos = manage_drone_imagery_standard_process_interactive_image_length/2;
                d3.select(this).attr("transform", "translate("+x_pos+","+y_pos+") rotate("+angle+","+rotate_x_pos+","+rotate_y_pos+")");
            }
            else {
                d3.select(this).attr("transform", "translate("+x_pos+","+y_pos+") rotate("+angle+")");
                d3.select(this).attr("rotate_angle", angle);
                var latitude = d3.select(this).attr('latitude');
                var longitude = d3.select(this).attr('longitude');
                manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['rotate_angle'] = manage_drone_imagery_standard_process_raw_images_interactive_rotate_angle;
            }
        });
        if (droneImageryRotateSavetimeout !== null) {
            clearTimeout(droneImageryRotateSavetimeout);
        }
        droneImageryRotateSavetimeout = setTimeout(function () {
            saveGPSPixelPositions();
        }, 900);
    }

    function manage_drone_imagery_interactive_match_two_images(image_id1, image_id2){
        jQuery.ajax({
            url : '/api/drone_imagery/match_and_align_two_images',
            type: 'POST',
            data : {
                'image_id1':image_id1,
                'image_id2':image_id2,
                'drone_run_project_id':manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id,
            },
            success: function(response){
                console.log(response);

                var angle_radians = parseInt(manage_drone_imagery_standard_process_raw_images_interactive_rotate_angle) * 0.0174533;
                console.log(manage_drone_imagery_standard_process_raw_images_interactive_rotate_angle);
                var x_pos_dst;
                var x_pos_src;
                var y_pos_dst;
                var y_pos_src;
                var src_latitude;
                var src_longitude;
                d3.selectAll('g').each(function(d) {
                    var nir_image_id = d3.select(this).attr('nir_image_id');
                    var is_rotated_bound = d3.select(this).attr('is_rotated_bound');
                    if (!is_rotated_bound) {
                        if (nir_image_id == response.image_id_dst) {
                            x_pos_dst = d3.select(this).attr('x_pos');
                            y_pos_dst = d3.select(this).attr('y_pos');
                        }
                        if (nir_image_id == response.image_id_src) {
                            x_pos_src = d3.select(this).attr('x_pos');
                            y_pos_src = d3.select(this).attr('y_pos');
                            src_latitude = d3.select(this).attr('latitude');
                            src_longitude = d3.select(this).attr('longitude');
                        }
                    }
                });

                manage_drone_imagery_standard_process_interactive_current_ordinal_latitude_raw = src_latitude;
                manage_drone_imagery_standard_process_interactive_current_ordinal_longitude_raw = src_longitude;
                manage_drone_imagery_standard_process_interactive_current_ordinal_latitude_current = manage_drone_imagery_standard_process_interactive_latitude_rounded_map[src_latitude];
                manage_drone_imagery_standard_process_interactive_current_ordinal_longitude_current = manage_drone_imagery_standard_process_interactive_longitude_rounded_map[src_longitude];

                var src_match = response.match_points_src[0];
                var src_match_x = src_match[0];
                var src_match_y = src_match[1];
                var src_match_x_rotated = src_match_x*Math.cos(angle_radians) - src_match_y*Math.sin(angle_radians);
                var src_match_y_rotated = src_match_x*Math.sin(angle_radians) + src_match_y*Math.cos(angle_radians);
                var x_pos_match_src = parseFloat(x_pos_src) + parseFloat(src_match_x_rotated);
                var y_pos_match_src = parseFloat(y_pos_src) + parseFloat(src_match_y_rotated);

                var dst_match = response.match_points_dst[0];
                var dst_match_x = dst_match[0];
                var dst_match_y = dst_match[1];
                var dst_match_x_rotated = dst_match_x*Math.cos(angle_radians) - dst_match_y*Math.sin(angle_radians);
                var dst_match_y_rotated = dst_match_x*Math.sin(angle_radians) + dst_match_y*Math.cos(angle_radians);
                var x_pos_match_dst = x_pos_match_src - dst_match_x_rotated;
                var y_pos_match_dst = y_pos_match_src - dst_match_y_rotated;

                var x_pos_translation = parseFloat(x_pos_dst) - parseFloat(x_pos_match_dst);
                var y_pos_translation = parseFloat(y_pos_dst) - parseFloat(y_pos_match_dst);

                d3.selectAll('g').each(function(d) {
                    var nir_image_id = d3.select(this).attr('nir_image_id');
                    if (nir_image_id == response.image_id_dst) {

                        var is_rotated_bound = d3.select(this).attr('is_rotated_bound');
                        if (is_rotated_bound == 1) {
                        } else {
                            d3.select(this).attr('x_pos', x_pos_match_dst);
                            d3.select(this).attr('y_pos', y_pos_match_dst);

                            var rotate_angle = d3.select(this).attr('rotate_angle');
                            d3.select(this).attr("transform", "translate("+x_pos_match_dst+","+y_pos_match_dst+") rotate("+rotate_angle+","+manage_drone_imagery_standard_process_raw_images_interactive_image.width/2+","+manage_drone_imagery_standard_process_raw_images_interactive_image.length/2+")");

                            var latitude = d3.select(this).attr('latitude');
                            var longitude = d3.select(this).attr('longitude');
                            manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['x_pos'] = x_pos_match_dst;
                            manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['y_pos'] = y_pos_match_dst;
                            manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['rotate_angle'] = rotate_angle;
                        }
                        d3.select(this).moveToFront();
                    }
                });

                d3.selectAll('line').each(function(d) {
                    var nir_image_id = d3.select(this).attr('nir_image_id');
                    if (nir_image_id == response.image_id_dst) {

                        var is_rotated_bound = d3.select(this).attr('is_rotated_bound');
                        if (is_rotated_bound == 1) {
                            var x_pos_1 = parseInt(d3.select(this).attr('x1')) - x_pos_translation;
                            var y_pos_1 = parseInt(d3.select(this).attr('y1')) - y_pos_translation;
                            var x_pos_2 = parseInt(d3.select(this).attr('x2')) - x_pos_translation;
                            var y_pos_2 = parseInt(d3.select(this).attr('y2')) - y_pos_translation;
                            d3.select(this).attr('x1', parseInt(x_pos_1));
                            d3.select(this).attr('y1', parseInt(y_pos_1));
                            d3.select(this).attr('x2', parseInt(x_pos_2));
                            d3.select(this).attr('y2', parseInt(y_pos_2));
                            var latitude = d3.select(this).attr('latitude');
                            var longitude = d3.select(this).attr('longitude');
                            var rotated_bound = manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['rotated_bound'];
                            var bnum = parseInt(d3.select(this).attr('bnum'));
                            rotated_bound[bnum] = [x_pos_1, y_pos_1];
                            manage_drone_imagery_standard_process_interactive_gps_images[latitude][longitude]['rotated_bound'] = rotated_bound;
                        }
                        d3.select(this).moveToFront();
                    }
                });

                var ordinal_latitude = manage_drone_imagery_standard_process_interactive_latitude_rounded_map[src_latitude];
                var ordinal_longitude = manage_drone_imagery_standard_process_interactive_longitude_rounded_map[src_longitude];

                jQuery('#drone_imagery_standard_process_raw_images_interactive_match_modal_div').html("<img src='"+response.match_image_url+"' >");

                manage_drone_imagery_standard_process_raw_images_nir_image_counter = manage_drone_imagery_standard_process_raw_images_nir_image_counter + 1;
                console.log(manage_drone_imagery_standard_process_interactive_gps_images);
                saveGPSPixelPositions();

                image_id1 = manage_drone_imagery_standard_process_raw_images_nir_images[manage_drone_imagery_standard_process_raw_images_nir_image_counter];
                image_id2 = manage_drone_imagery_standard_process_raw_images_nir_images[manage_drone_imagery_standard_process_raw_images_nir_image_counter+1];

                if (image_id1 != undefined && image_id2 != undefined) {
                    manage_drone_imagery_interactive_match_two_images(image_id1, image_id2);
                }
                else {
                    alert('No more images to match!');
                    return false;
                }
            },
            error: function(response){
                alert('Error matching and aligning two images!')
            }
        });
    }

    jQuery('#drone_imagery_standard_process_raw_images_interactive_match_previous_pass').click(function(){
        if (manage_drone_imagery_standard_process_raw_images_interactive_current_pass > 1) {
            manage_drone_imagery_standard_process_raw_images_interactive_current_pass = manage_drone_imagery_standard_process_raw_images_interactive_current_pass - 1;

            initializeInteractiveSvg('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div', 'drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area', 1, 1);

            jQuery('#drone_imagery_standard_process_interactive_plot_polygons_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1>");

            plot_polygons_interactive_display_points = [];
            plot_polygons_interactive_ind_4_points = [];
            plot_polygons_interactive_generated_polygons = {};
            drone_imagery_interactive_plot_polygons_display = {};
            plot_polygons_interactive_generated_polygons = [];
            drone_imagery_interactive_plot_generated_polygons = [];
            drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions = [];
            drone_imagery_interactive_plot_polygons_removed_numbers = [];
            jQuery('#drone_imagery_interactive_generated_polygons_div').html('');

            droneImageryDrawLayoutTableInteractive(drone_imagery_interactive_field_trial_layout_response, {}, 'drone_imagery_interactive_trial_layout_div', 'drone_imagery_interactive_trial_layout_table');
            droneImageryDrawPlotPolygonActiveTemplatesTableInteractive('drone_imagery_plot_polygons_active_templates_raw_images_interactive', drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions);
            plotPolygonManualAssignPlotNumberTable('drone_imagery_standard_process_interactive_generated_polygons_table', 'drone_imagery_standard_process_interactive_generated_polygons_table_id', 'drone_imagery_standard_process_interactive_generated_polygons_table_input', 'drone_imagery_standard_process_interactive_generated_polygons_table_input_generate_button', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');

            window.scrollTo(0,0);
        }
        else {
            alert('No previous imaging pass to go to!');
            return false;
        }
    });

    jQuery('#drone_imagery_standard_process_raw_images_interactive_match_next_pass').click(function(){
        if (manage_drone_imagery_standard_process_raw_images_interactive_current_pass < manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass) {
            manage_drone_imagery_standard_process_raw_images_interactive_current_pass = manage_drone_imagery_standard_process_raw_images_interactive_current_pass + 1;

            initializeInteractiveSvg('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div', 'drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area', 1, 1);

            jQuery('#drone_imagery_standard_process_interactive_plot_polygons_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1>");

            plot_polygons_interactive_display_points = [];
            plot_polygons_interactive_ind_4_points = [];
            plot_polygons_interactive_generated_polygons = {};
            drone_imagery_interactive_plot_polygons_display = {};
            plot_polygons_interactive_generated_polygons = [];
            drone_imagery_interactive_plot_generated_polygons = [];
            drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions = [];
            drone_imagery_interactive_plot_polygons_removed_numbers = [];
            jQuery('#drone_imagery_interactive_generated_polygons_div').html('');

            droneImageryDrawLayoutTableInteractive(drone_imagery_interactive_field_trial_layout_response, {}, 'drone_imagery_interactive_trial_layout_div', 'drone_imagery_interactive_trial_layout_table');
            droneImageryDrawPlotPolygonActiveTemplatesTableInteractive('drone_imagery_plot_polygons_active_templates_raw_images_interactive', drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions);
            plotPolygonManualAssignPlotNumberTable('drone_imagery_standard_process_interactive_generated_polygons_table', 'drone_imagery_standard_process_interactive_generated_polygons_table_id', 'drone_imagery_standard_process_interactive_generated_polygons_table_input', 'drone_imagery_standard_process_interactive_generated_polygons_table_input_generate_button', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');

            window.scrollTo(0,0);
        }
        else {
            alert('No next imaging pass to go to!');
            return false;
        }
    });

    function matchAndAlignSequential() {
        jQuery.ajax({
            url : '/api/drone_imagery/match_and_align_images_sequential',
            type: 'POST',
            //beforeSend: function(){
            //    jQuery('#working_modal').modal('show');
            //},
            data : {
                'nir_image_ids':JSON.stringify(manage_drone_imagery_standard_process_raw_images_nir_images),
                'drone_run_project_id':manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id,
                'flight_pass_counter':manage_drone_imagery_standard_process_raw_images_interactive_current_pass
            },
            success: function(response){
                console.log(response);
            //    jQuery('#working_modal').modal('hide');
                alert(response.message);

                console.log("Match Seq Complete");
                initializeInteractiveSvg('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div', 'drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area', 1, 1);
            },
            error: function(response){
            //    jQuery('#working_modal').modal('hide');
                alert('Error matching and aligning images sequential!')
            }
        });
    }

    jQuery('#drone_imagery_standard_process_raw_images_interactive_match').click(function(){
        matchAndAlignSequential();
    });

    jQuery('#drone_imagery_standard_process_raw_images_interactive_drop_pin').click(function(){
        alert('Click on a place in the current imaging event pass to drop a pin');

        d3.selectAll("g").on('mousedown.drag', null);

        manage_drone_imagery_standard_process_raw_images_interactive_svg.on("click", function(){
            var current_pos = d3.mouse(this);

            manage_drone_imagery_standard_process_raw_images_interactive_svg.append("circle")
                   .attr("cx", current_pos[0])
                   .attr("cy", current_pos[1])
                   .attr("r", 8)
                   .attr("fill", "yellow");

            d3.selectAll("g").call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
        });
    });

    function initializeInteractiveSvg(svg_div, svg_div_id, init, enable_drag){
        jQuery.ajax({
            url : '/api/drone_imagery/get_drone_imagery_gps?drone_run_project_id='+manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id+'&flight_pass_counter='+manage_drone_imagery_standard_process_raw_images_interactive_current_pass,
            success: function(response){
                console.log(response);

                svg_div = svg_div+"_"+manage_drone_imagery_standard_process_raw_images_interactive_current_pass;
                svg_div_id = svg_div_id+"_"+manage_drone_imagery_standard_process_raw_images_interactive_current_pass;

                manage_drone_imagery_standard_process_interactive_image_width = response.image_width;
                manage_drone_imagery_standard_process_interactive_image_length = response.image_length;

                drone_imagery_interactive_total_width = response.x_range;
                drone_imagery_interactive_total_length = response.y_range;

                manage_drone_imagery_standard_process_raw_images_interactive_image = {
                  width: manage_drone_imagery_standard_process_interactive_image_width,
                  length: manage_drone_imagery_standard_process_interactive_image_length
                }

                d3.select(svg_div).html("<h1>Imaging Pass Number: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"</h1>");

                manage_drone_imagery_standard_process_raw_images_interactive_svg = d3.select(svg_div).append("svg")
                    .attr("width", drone_imagery_interactive_total_width)
                    .attr("height", drone_imagery_interactive_total_length)
                    .attr("id", svg_div_id)
                    .on("click", function(){
                        console.log(d3.mouse(this));
                    })

                if (init) {
                    initializeImagesInteractive(enable_drag, svg_div_id);
                }
            },
            error: function(response){
                alert('Error init svg!')
            }
        });
    }

    function initializeImagesInteractive(enable_drag, svg_div_area){
        jQuery.ajax({
            url : '/api/drone_imagery/get_drone_imagery_gps?drone_run_project_id='+manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id+'&flight_pass_counter='+manage_drone_imagery_standard_process_raw_images_interactive_current_pass,
            beforeSend: function() {
                jQuery("#working_modal").modal("show");
            },
            success: function(response){
                console.log(response);
                jQuery("#working_modal").modal("hide");

                manage_drone_imagery_standard_process_interactive_gps_images = response.gps_images;
                manage_drone_imagery_standard_process_interactive_saved_gps_positions = response.saved_gps_positions;
                if (manage_drone_imagery_standard_process_interactive_saved_gps_positions) {
                    manage_drone_imagery_standard_process_interactive_gps_images = manage_drone_imagery_standard_process_interactive_saved_gps_positions;
                }
                manage_drone_imagery_standard_process_interactive_latitudes = response.latitudes;
                manage_drone_imagery_standard_process_interactive_latitudes_rounded = response.latitudes_rounded;
                manage_drone_imagery_standard_process_interactive_longitudes = response.longitudes;
                manage_drone_imagery_standard_process_interactive_longitudes_rounded = response.longitudes_rounded;
                manage_drone_imagery_standard_process_interactive_min_longitude = response.min_longitude;
                manage_drone_imagery_standard_process_interactive_min_latitude = response.min_latitude;
                manage_drone_imagery_standard_process_interactive_latitude_rounded_map = response.latitude_rounded_map;
                manage_drone_imagery_standard_process_interactive_longitude_rounded_map = response.longitude_rounded_map;
                manage_drone_imagery_standard_process_interactive_latitude_ordinal_max = manage_drone_imagery_standard_process_interactive_latitudes_rounded.length;
                manage_drone_imagery_standard_process_interactive_longitude_ordinal_max = manage_drone_imagery_standard_process_interactive_longitudes_rounded.length;
                manage_drone_imagery_standard_process_interactive_image_width = response.image_width;
                manage_drone_imagery_standard_process_interactive_image_length = response.image_length;

                drone_imagery_interactive_total_width = response.x_range;
                drone_imagery_interactive_total_length = response.y_range;

                manage_drone_imagery_standard_process_raw_images_interactive_image = {
                  width: manage_drone_imagery_standard_process_interactive_image_width,
                  length: manage_drone_imagery_standard_process_interactive_image_length
                };

                droneImageryInteractiveDrawImages(enable_drag, svg_div_area);
                showPlotPolygonTableStartInteractive(manage_drone_imagery_standard_process_raw_images_interactive_field_trial_id);
            },
            error: function(response){
                jQuery("#working_modal").modal("hide");
                alert('Error retrieving images and gps info!')
            }
        });
    }

    jQuery(document).on('click', 'button[name="project_drone_imagery_standard_process_raw_images_interactive"]', function() {
        showManageDroneImagerySection('manage_drone_imagery_standard_process_raw_images_interactive_div');

        manage_drone_imagery_standard_process_raw_images_interactive_field_trial_id = jQuery(this).data('field_trial_id');
        manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id = jQuery(this).data('drone_run_project_id');

        get_select_box('drone_imagery_parameter_select','plot_polygons_previously_saved_plot_polygon_templates_raw_images_interactive', {'empty':1, 'field_trial_id':manage_drone_imagery_standard_process_raw_images_interactive_field_trial_id, 'parameter':'plot_polygons_separated', 'id':'manage_drone_imagery_standard_process_interactive_previous_templates', 'name':'manage_drone_imagery_standard_process_interactive_previous_templates' });

        jQuery('#manage_drone_imagery_standard_process_interactive_drone_run_bands_table').DataTable({
            destroy : true,
            ajax : '/api/drone_imagery/drone_run_bands?select_checkbox_name=drone_run_standard_process_interactive_band_select&drone_run_project_id='+manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id
        });

    });

    jQuery('#manage_drone_imagery_standard_process_interactive_select_drone_run_band_step').click(function(){
        var selected = [];
        jQuery('input[name="drone_run_standard_process_interactive_band_select"]:checked').each(function() {
            selected.push(jQuery(this).val());
        });
        if (selected.length > 1 || selected.length == 0) {
            alert('Please select one band!');
            return false;
        }
        manage_drone_imagery_standard_process_interactive_drone_run_band_project_id = selected[0];

        jQuery.ajax({
            url : '/api/drone_imagery/separate_drone_imagery_gps?drone_run_project_id='+manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id,
            success: function(response){
                console.log(response);

                var html = '<table class="table table-hover table-bordered"><thead><tr><th>Imaging Pass Number</th><th>Number of Captures</th></tr></thead><tbody>';
                for (var i=0; i<response.results.length; i++) {
                    html = html + '<tr><td>'+response.results[i][0]+'</td><td>'+response.results[i][1]+'</td></tr>';
                }
                html = html + '</tbody></table>'
                jQuery('#manage_drone_imagery_standard_process_interactive_separated_passes_info').html(html);

                Workflow.complete("#manage_drone_imagery_standard_process_interactive_select_drone_run_band_step");
                Workflow.focus('#manage_drone_imagery_standard_process_raw_images_interactive_workflow', 2);

                window.scrollTo(0,0);
            },
            error: function(response){
                alert('Error separate micasense stacks!');
            }
        });
    });

    jQuery('#manage_drone_imagery_standard_process_interactive_separated_passes_step').click(function(){
        project_drone_imagery_interactive_ground_control_points_saved_div_table = 'project_drone_imagery_standard_process_interactive_ground_control_points_saved_div';

        jQuery.ajax({
            url : '/api/drone_imagery/get_drone_imagery_gps?drone_run_project_id='+manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id+'&flight_pass_counter='+manage_drone_imagery_standard_process_raw_images_interactive_current_pass,
            success: function(response){
                console.log(response);

                get_select_box('drone_runs_with_gcps', 'manage_drone_imagery_standard_process_interactive_ground_control_points_select', {'id':'manage_drone_imagery_standard_process_interactive_ground_control_points_select_id', 'name':'manage_drone_imagery_standard_process_interactive_ground_control_points_select_id', 'field_trial_id':manage_drone_imagery_standard_process_raw_images_interactive_field_trial_id, 'empty':1});

                jQuery.ajax({
                    url : '/api/drone_imagery/get_image_for_saving_gcp?drone_run_project_id='+manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id,
                    success: function(response){
                        console.log(response);

                        project_drone_imagery_interactive_ground_control_points_saved = response.saved_gcps_full;
                        project_drone_imagery_interactive_ground_control_points_saved_array = response.gcps_array;
                        _redraw_ground_control_points_table_interactive();
                    },
                    error: function(response){
                        alert('Error getting standard process interactive gcps!');
                    }
                });

                manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass = response.max_flight_pass_counter;

                if (response.all_passes_rotated == 1) {
                    console.log("ROTATION COMPLETE SEPARATED STEP");

                    manage_drone_imagery_standard_process_raw_images_interactive_current_pass = 1;

                    jQuery('#drone_imagery_standard_process_interactive_plot_polygons_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1>");

                    initializeInteractiveSvg('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div', 'drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area', 1, 1);

                    Workflow.complete("#manage_drone_imagery_standard_process_interactive_separated_passes_step");
                    Workflow.complete("#manage_drone_imagery_standard_process_interactive_rotate_step");
                    Workflow.focus('#manage_drone_imagery_standard_process_raw_images_interactive_workflow', 4);
                }
                else {
                    console.log("Initial");
                    initializeInteractiveSvg('#drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div', 'drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_area', 1, 0);

                    manage_drone_imagery_standard_process_raw_images_interactive_current_pass = 1;

                    jQuery('#drone_imagery_standard_process_interactive_rotate_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1>");

                    Workflow.complete("#manage_drone_imagery_standard_process_interactive_separated_passes_step");
                    Workflow.focus('#manage_drone_imagery_standard_process_raw_images_interactive_workflow', 3);
                }
                window.scrollTo(0,0);
            },
            error: function(response){
                alert('Error check rotation!');
            }
        });
    });

    jQuery('#manage_drone_imagery_standard_process_interactive_ground_control_points_option').change(function(){
        if (jQuery(this).val() == 'Yes') {
            jQuery('#manage_drone_imagery_standard_process_interactive_ground_control_points_select_div').show();

            //Change click type to save ground control points
        }
        else {
            jQuery('#manage_drone_imagery_standard_process_interactive_ground_control_points_select_div').hide();
        }
    });

    function _redraw_ground_control_points_table_interactive() {
        var html = "<table class='table table-bordered table-hover'><thead><tr><th>Saved GCP Name</th><th>X Pos</th><th>Y Pos</th><th>Latitude</th><th>Longitude</th><th>Remove</th></thead><tbody>";
        for (var i=0; i<project_drone_imagery_interactive_ground_control_points_saved_array.length; i++) {
            html = html + "<tr><td>"+project_drone_imagery_interactive_ground_control_points_saved_array[i]['name']+"</td><td>"+project_drone_imagery_interactive_ground_control_points_saved_array[i]['x_pos']+"</td><td>"+project_drone_imagery_interactive_ground_control_points_saved_array[i]['y_pos']+"</td><td>"+project_drone_imagery_interactive_ground_control_points_saved_array[i]['latitude']+"</td><td>"+project_drone_imagery_interactive_ground_control_points_saved_array[i]['longitude']+"</td><td><p style='color:red' name='project_drone_imagery_interactive_ground_control_points_delete_one' data-name='"+project_drone_imagery_interactive_ground_control_points_saved_array[i]['name']+"' data-drone_run_project_id="+manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id+" >X</p></td></tr>";
        }
        html = html + "</tbody></table>";
        html = html + "<button class='btn btn-default' name='project_drone_imagery_interactive_ground_control_points_draw_points'>Draw Saved GCPs</button>";
        jQuery('#'+project_drone_imagery_interactive_ground_control_points_saved_div_table).html(html);
    }

    jQuery(document).on('click', 'p[name="project_drone_imagery_interactive_ground_control_points_delete_one"]', function(){
        var drone_run_project_id = jQuery(this).data('drone_run_project_id');
        var name = jQuery(this).data('name');

        if (confirm("Remove this GCP?")) {
            jQuery.ajax({
                type: 'POST',
                url: '/api/drone_imagery/remove_one_gcp',
                data: {
                    'drone_run_project_id' : drone_run_project_id,
                    'name' : name,
                },
                success: function(response){
                    console.log(response);
                    if (response.error) {
                        alert(response.error);
                    }
                    project_drone_imagery_interactive_ground_control_points_saved = response.saved_gcps_full;
                    project_drone_imagery_interactive_ground_control_points_saved_array = response.gcps_array;
                    _redraw_ground_control_points_table_interactive();
                },
                error: function(response){
                    alert('Error deleting GCP name!');
                }
            });
        }
    });

    d3.select("#drone_imagery_standard_process_raw_images_interactive_rotate_degrees_input").on("input", function() {
        manage_drone_imagery_standard_process_raw_images_interactive_rotate_angle = this.value;
        droneImageryInteractiveRotateImages(manage_drone_imagery_standard_process_raw_images_interactive_rotate_angle, 0, '#drone_imagery_standard_process_raw_images_interactive_bulk_rotate_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass);
    });

    jQuery('#drone_imagery_standard_process_raw_images_interactive_north_south_input').change(function(){
        manage_drone_imagery_standard_process_raw_images_interactive_north_or_south = jQuery(this).val();
        jQuery.ajax({
            url : '/api/drone_imagery/delete_gps_images',
            type: 'POST',
            data : {
                'drone_run_project_id':manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id
            },
            success: function(response){
                console.log(response);
                manage_drone_imagery_standard_process_raw_images_nir_image_counter = 0;
                initializeImagesInteractive(1, '#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass);
            },
            error: function(response){
                alert('Error deleting GPS images template from NS step!')
            }
        });
    });

    jQuery('#drone_imagery_standard_process_raw_images_interactive_east_or_west').change(function(){
        manage_drone_imagery_standard_process_raw_images_interactive_east_or_west = jQuery(this).val();
        jQuery.ajax({
            url : '/api/drone_imagery/delete_gps_images',
            type: 'POST',
            data : {
                'drone_run_project_id':manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id
            },
            success: function(response){
                console.log(response);
                manage_drone_imagery_standard_process_raw_images_nir_image_counter = 0;
                initializeImagesInteractive(1, '#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass);
            },
            error: function(response){
                alert('Error deleting GPS images template from EW step!')
            }
        });
    });

    d3.select("#drone_imagery_standard_process_raw_images_interactive_rotate_frame_degrees_input").on("input", function() {
        manage_drone_imagery_standard_process_raw_images_interactive_rotate_frame_angle = this.value;
        d3.select("svg").attr('transform',function(){
                var x1 = d3.select("svg").attr("width")/2;
                var y1 = d3.select("svg").attr("height")/2;
                return `rotate(${manage_drone_imagery_standard_process_raw_images_interactive_rotate_frame_angle}, ${x1}, ${y1})`;
            });
    });

    jQuery('#drone_imagery_plot_polygons_top_left_click_raw_images_interactive').click(function(){
        alert('Now click the top left corner of your field on the image below.');

        d3.selectAll("g").on('mousedown.drag', null);

        manage_drone_imagery_standard_process_raw_images_interactive_svg.on("click", function(){
            var current_pos = d3.mouse(this);
            jQuery('#drone_imagery_plot_polygons_left_column_top_offset_raw_images_interactive').val(current_pos[1]);
            jQuery('#drone_imagery_plot_polygons_top_row_left_offset_raw_images_interactive').val(current_pos[0]);
            console.log(current_pos);

            d3.selectAll("g").call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
        });
    });
    jQuery('#drone_imagery_plot_polygons_top_right_click_raw_images_interactive').click(function(){
        alert('Now click the top right corner of your field on the image below.');

        d3.selectAll("g").on('mousedown.drag', null);

        manage_drone_imagery_standard_process_raw_images_interactive_svg.on("click", function(){
            var current_pos = d3.mouse(this);
            jQuery('#drone_imagery_plot_polygons_top_row_right_offset_raw_images_interactive').val(drone_imagery_interactive_total_width-current_pos[0]);
            console.log(current_pos);

            d3.selectAll("g").call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
        });
    });
    jQuery('#drone_imagery_plot_polygons_bottom_left_click_raw_images_interactive').click(function(){
        alert('Now click the bottom left corner of your field on the image below.');

        d3.selectAll("g").on('mousedown.drag', null);

        manage_drone_imagery_standard_process_raw_images_interactive_svg.on("click", function(){
            var current_pos = d3.mouse(this);
            jQuery('#drone_imagery_plot_polygons_bottom_row_left_offset_raw_images_interactive').val(current_pos[0]);
            jQuery('#drone_imagery_plot_polygons_left_column_bottom_offset_raw_images_interactive').val(drone_imagery_interactive_total_length-current_pos[1]);
            console.log(current_pos);

            d3.selectAll("g").call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
        });
    });
    jQuery('#drone_imagery_plot_polygons_bottom_right_click_raw_images_interactive').click(function(){
        alert('Now click the bottom right corner of your field on the image below.');

        d3.selectAll("g").on('mousedown.drag', null);

        manage_drone_imagery_standard_process_raw_images_interactive_svg.on("click", function(){
            var current_pos = d3.mouse(this);
            jQuery('#drone_imagery_plot_polygons_right_col_bottom_offset_raw_images_interactive').val(drone_imagery_interactive_total_length-current_pos[1]);
            console.log(current_pos);

            d3.selectAll("g").call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
        });
    });

    jQuery('#drone_imagery_plot_polygons_rectangles_apply_raw_images_interactive').click(function() {
        plot_polygons_interactive_display_points = [];
        plot_polygons_interactive_ind_4_points = [];

        var num_rows_val = jQuery('#drone_imagery_plot_polygons_num_rows_raw_images_interactive').val();
        var num_cols_val = jQuery('#drone_imagery_plot_polygons_num_cols_raw_images_interactive').val();
        var section_top_row_left_offset_val = jQuery('#drone_imagery_plot_polygons_top_row_left_offset_raw_images_interactive').val();
        var section_bottom_row_left_offset_val = jQuery('#drone_imagery_plot_polygons_bottom_row_left_offset_raw_images_interactive').val();
        var section_left_column_top_offset_val = jQuery('#drone_imagery_plot_polygons_left_column_top_offset_raw_images_interactive').val();
        var section_left_column_bottom_offset_val = jQuery('#drone_imagery_plot_polygons_left_column_bottom_offset_raw_images_interactive').val();
        var section_top_row_right_offset_val = jQuery('#drone_imagery_plot_polygons_top_row_right_offset_raw_images_interactive').val();
        var section_right_column_bottom_offset_val = jQuery('#drone_imagery_plot_polygons_right_col_bottom_offset_raw_images_interactive').val();

        plotPolygonsRectanglesApplyInteractive(num_rows_val, num_cols_val, section_top_row_left_offset_val, section_bottom_row_left_offset_val, section_left_column_top_offset_val, section_left_column_bottom_offset_val, section_top_row_right_offset_val, section_right_column_bottom_offset_val, drone_imagery_interactive_total_width, drone_imagery_interactive_total_length, 'drone_imagery_interactive_generated_polygons_div');

        plotPolygonManualAssignPlotNumberTable('drone_imagery_standard_process_interactive_generated_polygons_table', 'drone_imagery_standard_process_interactive_generated_polygons_table_id', 'drone_imagery_standard_process_interactive_generated_polygons_table_input', 'drone_imagery_standard_process_interactive_generated_polygons_table_input_generate_button', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');

        jQuery('#drone_imagery_standard_process_interactive_generated_polygons_input_div').show();
    });

    var drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_counter = 0;
    var drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_top_row_left_offset_val = 0;
    var drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_bottom_row_left_offset_val = 0;
    var drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_left_column_top_offset_val = 0;
    var drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_left_column_bottom_offset_val = 0;
    var drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_top_row_right_offset_val = 0;
    var drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_right_column_bottom_offset_val = 0;

    jQuery('#drone_imagery_plot_polygons_rectangles_apply_square_average_raw_images_interactive').click(function() {
        alert('Click the four corners of 10 single plots at random in the current imaging pass. For each single plot click the top left, then the top right, then the bottom right, then the bottom left.');

    });

    jQuery('#drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive').click(function() {
        plot_polygons_interactive_display_points = [];
        plot_polygons_interactive_ind_4_points = [];

        var num_rows_val = jQuery('#drone_imagery_plot_polygons_num_rows_raw_images_interactive').val();
        var num_cols_val = jQuery('#drone_imagery_plot_polygons_num_cols_raw_images_interactive').val();
        var section_top_row_left_offset_val = jQuery('#drone_imagery_plot_polygons_top_row_left_offset_raw_images_interactive').val();
        var section_bottom_row_left_offset_val = jQuery('#drone_imagery_plot_polygons_bottom_row_left_offset_raw_images_interactive').val();
        var section_left_column_top_offset_val = jQuery('#drone_imagery_plot_polygons_left_column_top_offset_raw_images_interactive').val();
        var section_left_column_bottom_offset_val = jQuery('#drone_imagery_plot_polygons_left_column_bottom_offset_raw_images_interactive').val();
        var section_top_row_right_offset_val = jQuery('#drone_imagery_plot_polygons_top_row_right_offset_raw_images_interactive').val();
        var section_right_column_bottom_offset_val = jQuery('#drone_imagery_plot_polygons_right_col_bottom_offset_raw_images_interactive').val();

        if (num_rows_val == ''){
            alert('Please give the number of rows!');
            return;
        }
        if (num_cols_val == ''){
            alert('Please give the number of columns!');
            return;
        }
        if (section_top_row_left_offset_val == ''){
            alert('Please give the top-most rows left margin! This can be 0 if there is no offset.');
            return;
        }
        if (section_bottom_row_left_offset_val == ''){
            alert('Please give the bottom-most rows left margin! This can be 0 if there is no offset.');
            return;
        }
        if (section_left_column_top_offset_val == ''){
            alert('Please give the left-most columns top margin! This can be 0 if there is no offset.');
            return;
        }
        if (section_left_column_bottom_offset_val == ''){
            alert('Please give the left-most columns bottom margin! This can be 0 if there is no offset.');
            return;
        }
        if (section_top_row_right_offset_val == ''){
            alert('Please give the top-most rows right margin! This can be 0 if there is no offset.');
            return;
        }
        if (section_right_column_bottom_offset_val == ''){
            alert('Please give the right-most columns bottom margin! This can be 0 if there is no offset.');
            return;
        }

        if (drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_counter > 0) {
            drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_top_row_left_offset_val = (drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_top_row_left_offset_val + parseInt(section_top_row_left_offset_val))/2;
            drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_bottom_row_left_offset_val = (drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_bottom_row_left_offset_val + parseInt(section_bottom_row_left_offset_val))/2;
            drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_left_column_top_offset_val = (drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_left_column_top_offset_val + parseInt(section_left_column_top_offset_val))/2;
            drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_left_column_bottom_offset_val = (drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_left_column_bottom_offset_val + parseInt(section_left_column_bottom_offset_val))/2;
            drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_top_row_right_offset_val = (drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_top_row_right_offset_val + parseInt(section_top_row_right_offset_val))/2;
            drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_right_column_bottom_offset_val = (drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_right_column_bottom_offset_val + parseInt(section_right_column_bottom_offset_val))/2;
        }
        drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_counter = drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_counter + 1;

        if (drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_counter < 10) {
            alert('Click the boundaries of another plot. You need to click atleast 10 to get a good average. Completed: '+drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_counter);
            return false;
        }

        plotPolygonsRectanglesApplySquareInteractive(num_rows_val, num_cols_val, drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_top_row_left_offset_val, drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_bottom_row_left_offset_val, drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_left_column_top_offset_val, drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_left_column_bottom_offset_val, drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_top_row_right_offset_val, drone_imagery_plot_polygons_rectangles_apply_square_raw_images_interactive_section_right_column_bottom_offset_val, drone_imagery_interactive_total_width, drone_imagery_interactive_total_length, 'drone_imagery_interactive_generated_polygons_div');
    });

    function plotPolygonManualAssignPlotNumberTable(div_id, table_id, input_name, generate_assign_button, save_button) {
        var html = '<div class="panel panel-default"><div class="panel-body">';
        html = html + '<table class="table table-bordered table-hover" id="'+table_id+'"><thead><tr><th>Polygon Number</th><th>Plot Number</th></tr></thead><tbody>';
        for(var i=0; i<drone_imagery_interactive_plot_generated_polygons.length; i++) {
            html = html + '<tr><td>'+i+'</td><td><input type="number" class="form-control" data-polygon_number="'+i+'" name="'+input_name+'" /></td></tr>';
        }
        html = html + '</tbody></table><hr>';
        html = html + '<button class="btn btn-primary" id="'+generate_assign_button+'">Generate Assignments From Manual Input (Does Not Save)</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-primary" name="'+save_button+'">Finish and Save Polygons To Plots. Go to Next Imaging Pass.</button></div></div>';

        jQuery('#'+div_id).html(html);
        jQuery('#'+table_id).DataTable({'paging':false});
    }

    function drawPolylineInteractive(points){
        if (points.length == 4) {
            points.push(points[0]);
        }
        for(var i=0;i<points.length-1;i++){
            manage_drone_imagery_standard_process_raw_images_interactive_svg.append('line')
                .style("stroke", "blue")
                .style("stroke-width", 5)
                .attr("x1", points[i].x)
                .attr("y1", points[i].y)
                .attr("x2", points[i+1].x)
                .attr("y2", points[i+1].y);
        }
    }

    function drawWaypointsInteractive(points, label, random_factor){
        var plot_polygon_random_number = Math.random() * random_factor;
        if (points.length > 0 && label != undefined) {
            if (drone_imagery_interactive_plot_polygons_removed_numbers.includes(label)) {
                manage_drone_imagery_standard_process_raw_images_interactive_svg.append("text")
                    .attr("x", points[0].x + 3)
                    .attr("y", points[0].y + 14 + plot_polygon_random_number)
                    .text('NA')
                    .attr("font-family", "Arial")
                    .attr("font-size", "18px")
                    .attr("fill", "blue");
            } else {
                manage_drone_imagery_standard_process_raw_images_interactive_svg.append("text")
                    .attr("x", points[0].x + 3)
                    .attr("y", points[0].y + 14 + plot_polygon_random_number)
                    .text(label)
                    .attr("font-family", "Arial")
                    .attr("font-size", "18px")
                    .attr("fill", "red");
            }
        }
        //for(var i=0;i<points.length;i++){
        //    manage_drone_imagery_standard_process_raw_images_interactive_svg.append("circle")
        //        .attr("cx", points[i].x)
        //        .attr("cy", points[i].y)
        //        .attr("r", 4)
        //        .attr("fill", "blue");
        //}
    }

    function droneImageryDrawPlotPolygonActiveTemplatesTableInteractive(div_id, plot_polygons_template_dimensions){
        var html = '<table class="table table-bordered table-hover"><thead><tr><th>Template Number</th><th>Rows</th><th>Columns</th><th>Total Polygons</th><th>Options</th></tr></thead><tbody>';
        for (var i=0; i<plot_polygons_template_dimensions.length; i++) {
            html = html + '<tr><td>'+i+'</td><td>'+plot_polygons_template_dimensions[i]['num_rows']+'</td><td>'+plot_polygons_template_dimensions[i]['num_cols']+'</td><td>'+plot_polygons_template_dimensions[i]['total_plot_polygons']+'</td><td><button class="btn btn-sm btn-primary" name="drone_imagery_plot_polygon_template_options_interactive" data-plot_polygon_template_id="'+i+'" >Options</button></td></tr>';
        }
        html = html + '</tbody></table>';
        jQuery('#'+div_id).html(html);
    }

    function plotPolygonsRectanglesApplyInteractive(num_rows_val, num_cols_val, section_top_row_left_offset_val, section_bottom_row_left_offset_val, section_left_column_top_offset_val, section_left_column_bottom_offset_val, section_top_row_right_offset_val, section_right_column_bottom_offset_val, section_width, section_height, plot_polygons_assignment_info) {
        if (num_rows_val == ''){
            alert('Please give the number of rows!');
            return;
        }
        if (num_cols_val == ''){
            alert('Please give the number of columns!');
            return;
        }
        if (section_top_row_left_offset_val == ''){
            alert('Please give the top-most rows left margin! This can be 0 if there is no offset.');
            return;
        }
        if (section_bottom_row_left_offset_val == ''){
            alert('Please give the bottom-most rows left margin! This can be 0 if there is no offset.');
            return;
        }
        if (section_left_column_top_offset_val == ''){
            alert('Please give the left-most columns top margin! This can be 0 if there is no offset.');
            return;
        }
        if (section_left_column_bottom_offset_val == ''){
            alert('Please give the left-most columns bottom margin! This can be 0 if there is no offset.');
            return;
        }
        if (section_top_row_right_offset_val == ''){
            alert('Please give the top-most rows right margin! This can be 0 if there is no offset.');
            return;
        }
        if (section_right_column_bottom_offset_val == ''){
            alert('Please give the right-most columns bottom margin! This can be 0 if there is no offset.');
            return;
        }

        plot_polygons_interactive_num_rows_generated = parseInt(num_rows_val);
        plot_polygons_interactive_num_cols_generated = parseInt(num_cols_val);

        var section_top_row_left_offset = parseInt(section_top_row_left_offset_val);
        var section_bottom_row_left_offset = parseInt(section_bottom_row_left_offset_val);
        var section_left_column_top_offset = parseInt(section_left_column_top_offset_val);
        var section_left_column_bottom_offset = parseInt(section_left_column_bottom_offset_val);
        var section_top_row_right_offset = parseInt(section_top_row_right_offset_val);
        var section_right_column_bottom_offset = parseInt(section_right_column_bottom_offset_val);

        var total_gradual_left_shift = section_bottom_row_left_offset - section_top_row_left_offset;
        var col_left_shift_increment = total_gradual_left_shift / plot_polygons_interactive_num_rows_generated;

        var total_gradual_vertical_shift = section_right_column_bottom_offset - section_left_column_bottom_offset;
        var col_vertical_shift_increment = total_gradual_vertical_shift / plot_polygons_interactive_num_cols_generated;

        var col_width = (section_width - section_top_row_left_offset - section_top_row_right_offset) / plot_polygons_interactive_num_cols_generated;
        var row_height = (section_height - section_left_column_top_offset - section_left_column_bottom_offset) / plot_polygons_interactive_num_rows_generated;

        var x_pos = section_top_row_left_offset;
        var y_pos = section_left_column_top_offset;

        manage_drone_imagery_standard_process_raw_images_interactive_svg = d3.select('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass);

        var row_num = 1;
        for (var i=0; i<plot_polygons_interactive_num_rows_generated; i++) {
            for (var j=0; j<plot_polygons_interactive_num_cols_generated; j++) {
                var x_pos_val = x_pos;
                var y_pos_val = y_pos;
                plot_polygons_interactive_generated_polygons.push([
                    {x:x_pos_val, y:y_pos_val},
                    {x:x_pos_val + col_width, y:y_pos_val},
                    {x:x_pos_val + col_width, y:y_pos_val + row_height},
                    {x:x_pos_val, y:y_pos_val + row_height}
                ]);
                x_pos = x_pos + col_width;
                y_pos = y_pos - col_vertical_shift_increment;
            }
            x_pos = section_top_row_left_offset + (row_num * col_left_shift_increment);
            y_pos = y_pos + row_height + total_gradual_vertical_shift;
            row_num = row_num + 1;
        }
        console.log(plot_polygons_interactive_generated_polygons);

        plot_polygons_interactive_total_height_generated = row_height * plot_polygons_interactive_num_rows_generated;
        plot_polygons_interactive_number_generated = plot_polygons_interactive_generated_polygons.length;

        var drone_imagery_plot_polygons_new = [];
        var drone_imagery_plot_polygons_display_new = [];

        for (var i=0; i<plot_polygons_interactive_generated_polygons.length; i++) {
            plot_polygons_interactive_ind_4_points = plot_polygons_interactive_generated_polygons[i];
            plot_polygons_interactive_display_points = plot_polygons_interactive_ind_4_points;
            if (plot_polygons_interactive_display_points.length == 4) {
                plot_polygons_interactive_display_points.push(plot_polygons_interactive_ind_4_points[0]);
            }
            drawPolylineInteractive(plot_polygons_interactive_display_points);
            drawWaypointsInteractive(plot_polygons_interactive_display_points, i, 0);
            drone_imagery_interactive_plot_generated_polygons[i] = plot_polygons_interactive_ind_4_points;
            drone_imagery_plot_polygons_new[i] = plot_polygons_interactive_ind_4_points;
            drone_imagery_interactive_plot_polygons_display[i] = plot_polygons_interactive_display_points;
            drone_imagery_plot_polygons_display_new[i] = plot_polygons_interactive_display_points;
        }

        drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions.push({
            'num_rows':plot_polygons_interactive_num_rows_generated,
            'num_cols':plot_polygons_interactive_num_cols_generated,
            'total_plot_polygons':plot_polygons_interactive_num_rows_generated*plot_polygons_interactive_num_cols_generated,
            'plot_polygons':drone_imagery_plot_polygons_new,
            'plot_polygons_display':drone_imagery_plot_polygons_display_new
        });

        droneImageryDrawPlotPolygonActiveTemplatesTableInteractive('drone_imagery_plot_polygons_active_templates_raw_images_interactive', drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions);

        droneImageryDrawRectangleTableInteractive('drone_imagery_interactive_generated_polygons_div', 'drone_imagery_standard_process_interactive_plot_polygons_generated_assign', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');
    }

    function plotPolygonsRectanglesApplySquareInteractive(num_rows_val, num_cols_val, section_top_row_left_offset_val, section_bottom_row_left_offset_val, section_left_column_top_offset_val, section_left_column_bottom_offset_val, section_top_row_right_offset_val, section_right_column_bottom_offset_val, section_width, section_height, plot_polygons_assignment_info) {
        plot_polygons_interactive_num_rows_generated = parseInt(num_rows_val);
        plot_polygons_interactive_num_cols_generated = parseInt(num_cols_val);

        var section_top_row_left_offset = parseInt(section_top_row_left_offset_val);
        var section_bottom_row_left_offset = parseInt(section_bottom_row_left_offset_val);
        var section_left_column_top_offset = parseInt(section_left_column_top_offset_val);
        var section_left_column_bottom_offset = parseInt(section_left_column_bottom_offset_val);
        var section_top_row_right_offset = parseInt(section_top_row_right_offset_val);
        var section_right_column_bottom_offset = parseInt(section_right_column_bottom_offset_val);

        var total_gradual_left_shift = section_bottom_row_left_offset - section_top_row_left_offset;
        var col_left_shift_increment = total_gradual_left_shift / plot_polygons_interactive_num_rows_generated;

        var total_gradual_vertical_shift = section_right_column_bottom_offset - section_left_column_bottom_offset;
        var col_vertical_shift_increment = total_gradual_vertical_shift / plot_polygons_interactive_num_cols_generated;

        var col_width = (section_width - section_top_row_left_offset - section_top_row_right_offset);
        var row_height = (section_height - section_left_column_top_offset - section_left_column_bottom_offset);

        var x_pos = section_top_row_left_offset;
        var y_pos = section_left_column_top_offset;

        manage_drone_imagery_standard_process_raw_images_interactive_svg = d3.select('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass);

        var row_num = 1;
        var plot_polygons_interactive_generated_polygons_intermediate = [];
        for (var i=0; i<plot_polygons_interactive_num_rows_generated; i++) {
            for (var j=0; j<plot_polygons_interactive_num_cols_generated; j++) {
                var x_pos_val = x_pos;
                var y_pos_val = y_pos;
                plot_polygons_interactive_generated_polygons_intermediate.push([
                    {x:x_pos_val, y:y_pos_val},
                    {x:x_pos_val + col_width, y:y_pos_val},
                    {x:x_pos_val + col_width, y:y_pos_val + row_height},
                    {x:x_pos_val, y:y_pos_val + row_height}
                ]);
                x_pos = x_pos + col_width;
                y_pos = y_pos - col_vertical_shift_increment;
            }
            x_pos = section_top_row_left_offset + (row_num * col_left_shift_increment);
            y_pos = y_pos + row_height + total_gradual_vertical_shift;
            row_num = row_num + 1;
        }
        console.log(plot_polygons_interactive_generated_polygons_intermediate);

        alert('Click on where the top left corner of the template will be pasted in the current imaging event pass.');

        d3.selectAll("g").on('mousedown.drag', null);

        d3.select("#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_"+manage_drone_imagery_standard_process_raw_images_interactive_current_pass).on("click", function(){
            var current_pos = d3.mouse(this);

            d3.selectAll("g").call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

            var plot_polygon_top_left_position = plot_polygons_interactive_generated_polygons_intermediate[0][0];
            var plot_polygon_template_paste_x_diff = plot_polygon_top_left_position['x'] - current_pos[0];
            var plot_polygon_template_paste_y_diff = plot_polygon_top_left_position['y'] - current_pos[1];

            for (var i in plot_polygons_interactive_generated_polygons_intermediate) {
                plot_polygons_interactive_generated_polygons.push([
                    {x:plot_polygons_interactive_generated_polygons_intermediate[i][0]['x'] - plot_polygon_template_paste_x_diff, y:plot_polygons_interactive_generated_polygons_intermediate[i][0]['y']- plot_polygon_template_paste_y_diff},
                    {x:plot_polygons_interactive_generated_polygons_intermediate[i][1]['x'] - plot_polygon_template_paste_x_diff, y:plot_polygons_interactive_generated_polygons_intermediate[i][1]['y'] - plot_polygon_template_paste_y_diff},
                    {x:plot_polygons_interactive_generated_polygons_intermediate[i][2]['x'] - plot_polygon_template_paste_x_diff, y:plot_polygons_interactive_generated_polygons_intermediate[i][2]['y'] - plot_polygon_template_paste_y_diff},
                    {x:plot_polygons_interactive_generated_polygons_intermediate[i][3]['x'] - plot_polygon_template_paste_x_diff, y:plot_polygons_interactive_generated_polygons_intermediate[i][3]['y'] - plot_polygon_template_paste_y_diff}
                ]);
            }
            console.log(plot_polygons_interactive_generated_polygons);

            plot_polygons_interactive_total_height_generated = row_height * plot_polygons_interactive_num_rows_generated;
            plot_polygons_interactive_number_generated = plot_polygons_interactive_generated_polygons.length;

            var drone_imagery_plot_polygons_new = [];
            var drone_imagery_plot_polygons_display_new = [];

            for (var i=0; i<plot_polygons_interactive_generated_polygons.length; i++) {
                plot_polygons_interactive_ind_4_points = plot_polygons_interactive_generated_polygons[i];
                plot_polygons_interactive_display_points = plot_polygons_interactive_ind_4_points;
                if (plot_polygons_interactive_display_points.length == 4) {
                    plot_polygons_interactive_display_points.push(plot_polygons_interactive_ind_4_points[0]);
                }
                drawPolylineInteractive(plot_polygons_interactive_display_points);
                drawWaypointsInteractive(plot_polygons_interactive_display_points, i, 0);
                drone_imagery_interactive_plot_generated_polygons[i] = plot_polygons_interactive_ind_4_points;
                drone_imagery_plot_polygons_new[i] = plot_polygons_interactive_ind_4_points;
                drone_imagery_interactive_plot_polygons_display[i] = plot_polygons_interactive_display_points;
                drone_imagery_plot_polygons_display_new[i] = plot_polygons_interactive_display_points;
            }

            drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions.push({
                'num_rows':plot_polygons_interactive_num_rows_generated,
                'num_cols':plot_polygons_interactive_num_cols_generated,
                'total_plot_polygons':plot_polygons_interactive_num_rows_generated*plot_polygons_interactive_num_cols_generated,
                'plot_polygons':drone_imagery_plot_polygons_new,
                'plot_polygons_display':drone_imagery_plot_polygons_display_new
            });

            droneImageryDrawPlotPolygonActiveTemplatesTableInteractive('drone_imagery_plot_polygons_active_templates_raw_images_interactive', drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions);

            droneImageryDrawRectangleTableInteractive('drone_imagery_interactive_generated_polygons_div', 'drone_imagery_standard_process_interactive_plot_polygons_generated_assign', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');

            plotPolygonManualAssignPlotNumberTable('drone_imagery_standard_process_interactive_generated_polygons_table', 'drone_imagery_standard_process_interactive_generated_polygons_table_id', 'drone_imagery_standard_process_interactive_generated_polygons_table_input', 'drone_imagery_standard_process_interactive_generated_polygons_table_input_generate_button', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');
        });
    }

    function showPlotPolygonTableStartInteractive(trial_id){
        jQuery.ajax({
            url : '/ajax/breeders/trial/'+trial_id+'/layout_table',
            success: function(response){
                console.log(response);
                drone_imagery_interactive_field_trial_layout_response = response;
                var layout = drone_imagery_interactive_field_trial_layout_response.output;
                for (var i=1; i<layout.length; i++) {
                    drone_imagery_interactive_plot_polygons_available_stock_names.push(layout[i][0]);
                }

                droneImageryDrawRectangleTableInteractive('drone_imagery_interactive_generated_polygons_div', 'drone_imagery_standard_process_interactive_plot_polygons_generated_assign', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');

                droneImageryDrawLayoutTableInteractive(response, {}, 'drone_imagery_interactive_trial_layout_div', 'drone_imagery_interactive_trial_layout_table');
            },
            error: function(response){
                alert('Error retrieving trial layout and design!')
            }
        });
    }

    function droneImageryDrawLayoutTableInteractive(response, plot_polygons, layout_div_id, layout_table_div_id) {
        var output = response.output;
        var header = output[0];
        var html = '<table class="table table-borders table-hover" id="'+layout_table_div_id+'"><thead><tr>';
        for (var i=0; i<header.length; i++){
            html = html + '<td>'+header[i]+'</td>';
        }
        html = html + '<td>Polygon Assigned</td>';
        html = html + '</tr></thead><tbody>';
        for (var i=1; i<output.length; i++){
            html = html + '<tr>';
            for (var j=0; j<output[i].length; j++){
                html = html + '<td>'+output[i][j]+'</td>';
            }
            if (output[i][0] in plot_polygons && plot_polygons[output[i][0]] != undefined){
                html = html + '<td>Yes</td>';
            } else {
                html = html + '<td></td>';
            }
            html = html + '</tr>';
        }
        html = html + '</tbody></table>';
        jQuery('#'+layout_div_id).html(html);
        jQuery('#'+layout_table_div_id).DataTable();
    }

    function droneImageryDrawRectangleTableInteractive(plot_polygons_layout_assignment_info, plot_polygons_generate_assignment_button, plot_polygon_assignment_submit_button) {
        var html = '<hr><div class="well well-sm"><h2>Or Auto Assign Plot Polygons to Plot Numbers</h2>';
        html = html + '<div class="panel panel-default"><div class="panel-body"><div class="form form-horizontal">';
        html = html + '<div class="row"><div class="col-sm-6"><div class="form-group form-group-sm"><label class="col-sm-6 control-label">Location of First Plot (e.g. plot number 1): </label><div class="col-sm-6"><select class="form-control" id="drone_imagery_interactive_plot_polygons_first_plot_start" name="drone_imagery_interactive_plot_polygons_first_plot_start"><option value="top_left">Top Left</option><option value="top_right">Top Right</option><option value="bottom_left" disabled>Bottom Left</option><option value="bottom_right" disabled>Bottom Right</option></select></div></div></div><div class="col-sm-6"><div class="form-group form-group-sm"><label class="col-sm-6 control-label">Second Plot Follows First Plot Going: </label><div class="col-sm-6"><select class="form-control" id="drone_imagery_interactive_plot_polygons_second_plot_follows" name="drone_imagery_interactive_plot_polygons_second_plot_follows"><option value="right">Right</option><option value="up">Up</option><option value="down">Down</option><option value="left">Left</option></select></div></div></div></div>';
        html = html + '<div class="row"><div class="col-sm-6"><div class="form-group form-group-sm"><label class="col-sm-6 control-label">Plot Number Orientation: </label><div class="col-sm-6"><select class="form-control" id="drone_imagery_interactive_plot_polygons_plot_orientation" name="drone_imagery_interactive_plot_polygons_plot_orientation"><option value="serpentine">Serpentine</option><option value="zigzag">Zigzag (Not Serpentine)</option></select></div></div></div><div class="col-sm-6"><div class="form-group form-group-sm"><label class="col-sm-6 control-label">Plot Number Start (optional): </label><div class="col-sm-6"><input type="number" class="form-control" id="drone_imagery_interactive_plot_polygons_plot_number_start" name="drone_imagery_interactive_plot_polygons_plot_number_start" placeholder="OPTIONAL" /></div></div></div></div>';
        html = html + '<button class="btn btn-primary" id="'+plot_polygons_generate_assignment_button+'">Generate Assignments (Does Not Save)</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-primary" name="'+plot_polygon_assignment_submit_button+'">Finish and Save Polygons To Plots. Go to Next Imaging Pass.</button></div>';
        html = html + '</div></div></div></div>';

        jQuery('#'+plot_polygons_layout_assignment_info).html(html);
    }

    var drone_imagery_interactive_current_plot_polygon_index_options_id = '';
    jQuery(document).on('click', 'button[name="drone_imagery_plot_polygon_template_options_interactive"]', function(){
        jQuery('#drone_imagery_interactive_plot_polygon_template_options_dialog').modal('show');
        drone_imagery_interactive_current_plot_polygon_index_options_id = jQuery(this).data('plot_polygon_template_id');
    });

    jQuery('#drone_imagery_interactive_plot_polygon_template_options_paste_click').click(function(){
        jQuery('#drone_imagery_interactive_plot_polygon_template_options_dialog').modal('hide');
        alert('Click on where the top left corner of the template will be pasted.');

        d3.selectAll("g").on('mousedown.drag', null);

        d3.select("#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_"+manage_drone_imagery_standard_process_raw_images_interactive_current_pass).on("click", function(){
            var current_pos = d3.mouse(this);

            d3.selectAll("g").call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

            plotPolygonsTemplatePasteInteractive(current_pos[0], current_pos[1], drone_imagery_interactive_total_width, drone_imagery_interactive_total_length, parseInt(drone_imagery_interactive_current_plot_polygon_index_options_id), 'drone_imagery_interactive_generated_polygons_div');

            plotPolygonManualAssignPlotNumberTable('drone_imagery_standard_process_interactive_generated_polygons_table', 'drone_imagery_standard_process_interactive_generated_polygons_table_id', 'drone_imagery_standard_process_interactive_generated_polygons_table_input', 'drone_imagery_standard_process_interactive_generated_polygons_table_input_generate_button', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');
        });
    });

    function plotPolygonsTemplatePasteInteractive(posx, posy, section_width, section_height, plot_polygon_template_id, plot_polygons_assignment_info) {
        var plot_polygon_template_to_paste = drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions[plot_polygon_template_id];

        var plot_polygons_previous_plot_polygons = plot_polygon_template_to_paste['plot_polygons'];
        plot_polygons_interactive_num_rows_generated = plot_polygon_template_to_paste['num_rows'];
        plot_polygons_interactive_num_cols_generated = plot_polygon_template_to_paste['num_cols'];

        var plot_polygon_top_left_position = plot_polygons_previous_plot_polygons[0][0];
        var plot_polygon_template_paste_x_diff = plot_polygon_top_left_position['x'] - posx;
        var plot_polygon_template_paste_y_diff = plot_polygon_top_left_position['y'] - posy;

        for (var i in plot_polygons_previous_plot_polygons) {
            plot_polygons_interactive_generated_polygons.push([
                {x:plot_polygons_previous_plot_polygons[i][0]['x'] - plot_polygon_template_paste_x_diff, y:plot_polygons_previous_plot_polygons[i][0]['y']- plot_polygon_template_paste_y_diff},
                {x:plot_polygons_previous_plot_polygons[i][1]['x'] - plot_polygon_template_paste_x_diff, y:plot_polygons_previous_plot_polygons[i][1]['y'] - plot_polygon_template_paste_y_diff},
                {x:plot_polygons_previous_plot_polygons[i][2]['x'] - plot_polygon_template_paste_x_diff, y:plot_polygons_previous_plot_polygons[i][2]['y'] - plot_polygon_template_paste_y_diff},
                {x:plot_polygons_previous_plot_polygons[i][3]['x'] - plot_polygon_template_paste_x_diff, y:plot_polygons_previous_plot_polygons[i][3]['y'] - plot_polygon_template_paste_y_diff}
            ]);
        }

        plot_polygons_interactive_number_generated = plot_polygons_interactive_generated_polygons.length;
        console.log(plot_polygons_interactive_generated_polygons);

        var drone_imagery_plot_polygons_new = {};
        var drone_imagery_plot_polygons_display_new = {};

        for (var i=0; i<plot_polygons_interactive_generated_polygons.length; i++) {
            plot_polygons_interactive_ind_4_points = plot_polygons_interactive_generated_polygons[i];
            plot_polygons_interactive_display_points = plot_polygons_interactive_ind_4_points;
            if (plot_polygons_interactive_display_points.length == 4) {
                plot_polygons_interactive_display_points.push(plot_polygons_interactive_ind_4_points[0]);
            }
            drawPolylineInteractive(plot_polygons_interactive_display_points);
            drawWaypointsInteractive(plot_polygons_interactive_display_points, i, 0);
            drone_imagery_interactive_plot_generated_polygons[i] = plot_polygons_interactive_ind_4_points;
            drone_imagery_plot_polygons_new[i] = plot_polygons_interactive_ind_4_points;
            drone_imagery_interactive_plot_polygons_display[i] = plot_polygons_interactive_display_points;
            drone_imagery_plot_polygons_display_new[i] = plot_polygons_interactive_display_points;
        }

        drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions.push({
            'num_rows':plot_polygons_interactive_num_rows_generated,
            'num_cols':plot_polygons_interactive_num_cols_generated,
            'total_plot_polygons':plot_polygons_interactive_num_rows_generated*plot_polygons_interactive_num_cols_generated,
            'plot_polygons':drone_imagery_plot_polygons_new,
            'plot_polygons_display':drone_imagery_plot_polygons_display_new
        });

        droneImageryDrawPlotPolygonActiveTemplatesTableInteractive('drone_imagery_plot_polygons_active_templates_raw_images_interactive', drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions);

        droneImageryDrawRectangleTableInteractive('drone_imagery_interactive_generated_polygons_div', 'drone_imagery_standard_process_interactive_plot_polygons_generated_assign', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');
    }

    jQuery(document).on('click', '#drone_imagery_standard_process_interactive_generated_polygons_table_input_generate_button', function(){
        generatePlotPolygonAssignmentsInteractiveManual('drone_imagery_standard_process_trial_layout_div_0', 'drone_imagery_standard_process_layout_table_0');
    });

    function generatePlotPolygonAssignmentsInteractiveManual(trial_layout_div, trial_layout_table) {
        var plot_polygons_layout = drone_imagery_interactive_field_trial_layout_response.output;
        var plot_polygons_plot_numbers = [];
        var plot_polygons_plot_numbers_plot_names = {};
        for (var i=1; i<plot_polygons_layout.length; i++) {
            var plot_polygons_plot_number = parseInt(plot_polygons_layout[i][2]);
            plot_polygons_plot_numbers.push(plot_polygons_plot_number);
            plot_polygons_plot_numbers_plot_names[plot_polygons_plot_number] = plot_polygons_layout[i][0];
        }

        var plot_polygon_new_display = {};
        jQuery('input[name="drone_imagery_standard_process_interactive_generated_polygons_table_input"]').each(function() {
            var plot_number = jQuery(this).val();
            var polygon_number = jQuery(this).data('polygon_number');

            if (drone_imagery_interactive_plot_polygons_removed_numbers.includes(polygon_number.toString())) {
                console.log("Skipping "+polygon_number);
                plot_polygon_new_display[polygon_number] = drone_imagery_interactive_plot_polygons_display[polygon_number];
            } else {
                plot_polygon_new_display[plot_polygons_plot_numbers_plot_names[plot_number]] = drone_imagery_interactive_plot_polygons_display[polygon_number];
                drone_imagery_interactive_plot_polygons[plot_polygons_plot_numbers_plot_names[plot_number]] = drone_imagery_interactive_plot_generated_polygons[polygon_number];
            }
        });

        droneImageryDrawLayoutTableInteractive(drone_imagery_interactive_field_trial_layout_response, drone_imagery_interactive_plot_polygons, 'drone_imagery_interactive_trial_layout_div', 'drone_imagery_interactive_trial_layout_table');

        drone_imagery_interactive_plot_polygons_display = plot_polygon_new_display;
        draw_canvas_image_interactive(plot_polygons_interactive_total_height_generated/plot_polygons_interactive_num_rows_generated);
    }

    jQuery(document).on('click', '#drone_imagery_standard_process_interactive_plot_polygons_generated_assign', function(){
        generatePlotPolygonAssignmentsInteractive('drone_imagery_standard_process_trial_layout_div_0', 'drone_imagery_standard_process_layout_table_0');
    });

    function generatePlotPolygonAssignmentsInteractive(trial_layout_div, trial_layout_table) {
        var plot_polygons_first_plot_start = jQuery('#drone_imagery_interactive_plot_polygons_first_plot_start').val();
        var plot_polygons_second_plot_follows = jQuery('#drone_imagery_interactive_plot_polygons_second_plot_follows').val();
        var plot_polygons_plot_orientation = jQuery('#drone_imagery_interactive_plot_polygons_plot_orientation').val();
        var plot_polygons_plot_number_start = jQuery('#drone_imagery_interactive_plot_polygons_plot_number_start').val();
        var plot_polygons_plot_number_start_int = 0;
        if (plot_polygons_plot_number_start != '') {
            plot_polygons_plot_number_start_int = parseInt(jQuery('#drone_imagery_interactive_plot_polygons_plot_number_start').val());
        }

        var plot_polygons_layout = drone_imagery_interactive_field_trial_layout_response.output;
        var plot_polygons_plot_numbers = [];
        var plot_polygons_plot_numbers_plot_names = {};
        for (var i=1; i<plot_polygons_layout.length; i++) {
            var plot_polygons_plot_number = parseInt(plot_polygons_layout[i][2]);
            if (plot_polygons_plot_number >= plot_polygons_plot_number_start_int) {
                plot_polygons_plot_numbers.push(plot_polygons_plot_number);
                plot_polygons_plot_numbers_plot_names[plot_polygons_plot_number] = plot_polygons_layout[i][0];
            }
        }
        plot_polygons_plot_numbers = plot_polygons_plot_numbers.sort(function (a, b) {  return a - b;  });
        var plot_polygons_current_plot_number_index = 0;

        var plot_polygons_template_index = 0;
        var plot_polygons_template_current = drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions[plot_polygons_template_index];
        var plot_polygons_template_current_num_cols = plot_polygons_template_current.num_cols;
        var plot_polygons_template_current_num_rows = plot_polygons_template_current.num_rows;
        var plot_polygons_template_current_total_plot_polygons = plot_polygons_template_current.total_plot_polygons;
        var plot_polygons_template_current_plot_polygon_index = 0;

        var plot_polygon_new_display = {};
        if (plot_polygons_first_plot_start == 'top_left') {
            var generated_polygon_key_first_plot_number = 0;
            if (plot_polygons_second_plot_follows == 'left' || plot_polygons_second_plot_follows == 'up') {
                alert('Second plot cannot follow left or up from first plot if the first plot starts at the top left, because that is physically impossible.');
                return;
            }
            if (plot_polygons_second_plot_follows == 'right') {
                if (plot_polygons_plot_orientation == 'zigzag') {
                    var plot_polygon_current_polygon_index = generated_polygon_key_first_plot_number;
                    for (var j=generated_polygon_key_first_plot_number; j<plot_polygons_plot_numbers.length + drone_imagery_interactive_plot_polygons_removed_numbers.length; j++){
                        if (drone_imagery_interactive_plot_polygons_removed_numbers.includes(plot_polygon_current_polygon_index.toString())) {
                            console.log("Skipping "+plot_polygon_current_polygon_index);
                            plot_polygon_new_display[plot_polygon_current_polygon_index] = drone_imagery_interactive_plot_polygons_display[plot_polygon_current_polygon_index];
                        } else {
                            plot_polygon_new_display[plot_polygons_plot_numbers_plot_names[plot_polygons_plot_numbers[plot_polygons_current_plot_number_index]]] = drone_imagery_interactive_plot_polygons_display[plot_polygon_current_polygon_index];
                            drone_imagery_interactive_plot_polygons[plot_polygons_plot_numbers_plot_names[plot_polygons_plot_numbers[plot_polygons_current_plot_number_index]]] = drone_imagery_interactive_plot_generated_polygons[plot_polygon_current_polygon_index];
                            plot_polygons_current_plot_number_index = plot_polygons_current_plot_number_index + 1;
                            plot_polygons_template_current_plot_polygon_index = plot_polygons_template_current_plot_polygon_index + 1;
                        }
                        plot_polygon_current_polygon_index = plot_polygon_current_polygon_index + 1;

                        if (plot_polygons_template_current_plot_polygon_index == plot_polygons_template_current_total_plot_polygons) {
                            plot_polygons_template_index = plot_polygons_template_index + 1;
                            plot_polygons_template_current = drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions[plot_polygons_template_index];
                            if (plot_polygons_template_current != undefined) {
                                plot_polygons_template_current_num_cols = plot_polygons_template_current.num_cols;
                                plot_polygons_template_current_num_rows = plot_polygons_template_current.num_rows;
                                plot_polygons_template_current_total_plot_polygons = plot_polygons_template_current.total_plot_polygons;
                                plot_polygons_template_current_plot_polygon_index = 0;
                            }
                        }
                    }
                }
                if (plot_polygons_plot_orientation == 'serpentine') {
                    var plot_polygon_current_polygon_index = generated_polygon_key_first_plot_number;
                    var plot_polygon_column_count = 0;
                    var plot_polygon_zigzig_polygon_index = generated_polygon_key_first_plot_number;
                    var going_right = 1;
                    var plot_polygon_previous_template_plot_count = 0;
                    for (var j=generated_polygon_key_first_plot_number; j<plot_polygons_plot_numbers.length + drone_imagery_interactive_plot_polygons_removed_numbers.length; j++){

                        if (going_right == 1) {
                            plot_polygon_current_polygon_index = plot_polygon_zigzig_polygon_index;
                        }
                        if (going_right == 0) {
                            plot_polygon_current_polygon_index = plot_polygon_previous_template_plot_count + plot_polygons_template_current_num_cols - plot_polygon_column_count - 1;
                        }

                        if (drone_imagery_interactive_plot_polygons_removed_numbers.includes(plot_polygon_current_polygon_index.toString())) {
                            console.log("Skipping "+plot_polygon_current_polygon_index);
                            plot_polygon_new_display[plot_polygon_current_polygon_index] = drone_imagery_interactive_plot_polygons_display[plot_polygon_current_polygon_index];
                        } else {
                            plot_polygon_new_display[plot_polygons_plot_numbers_plot_names[plot_polygons_plot_numbers[plot_polygons_current_plot_number_index]]] =  drone_imagery_interactive_plot_polygons_display[plot_polygon_current_polygon_index];
                            drone_imagery_interactive_plot_polygons[plot_polygons_plot_numbers_plot_names[plot_polygons_plot_numbers[plot_polygons_current_plot_number_index]]] = drone_imagery_interactive_plot_generated_polygons[plot_polygon_current_polygon_index];
                            plot_polygons_current_plot_number_index = plot_polygons_current_plot_number_index + 1;
                            plot_polygons_template_current_plot_polygon_index = plot_polygons_template_current_plot_polygon_index + 1;
                        }

                        plot_polygon_zigzig_polygon_index = plot_polygon_zigzig_polygon_index + 1;
                        plot_polygon_column_count = plot_polygon_column_count + 1;

                        if (plot_polygon_column_count == plot_polygons_template_current_num_cols) {
                            plot_polygon_column_count = 0;
                            if (going_right == 1) {
                                going_right = 0;
                            } else {
                                going_right = 1;
                            }
                            plot_polygon_previous_template_plot_count = plot_polygon_previous_template_plot_count + plot_polygons_template_current_num_cols;
                        }

                        if (plot_polygons_template_current_plot_polygon_index == plot_polygons_template_current_total_plot_polygons) {
                            plot_polygons_template_index = plot_polygons_template_index + 1;
                            plot_polygons_template_current = drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions[plot_polygons_template_index];
                            if (plot_polygons_template_current != undefined) {
                                plot_polygons_template_current_num_cols = plot_polygons_template_current.num_cols;
                                plot_polygons_template_current_num_rows = plot_polygons_template_current.num_rows;
                                plot_polygons_template_current_total_plot_polygons = plot_polygons_template_current.total_plot_polygons;
                                plot_polygons_template_current_plot_polygon_index = 0;
                            }
                        }
                    }
                }
            }
            if (plot_polygons_second_plot_follows == 'down') {
                alert('Down not implemented if first plot starts in top left. Please contact us or try rotating your image differently before assigning plot polygons (e.g. rotate image 90 degrees clock-wise, then first plot starts in top right and you can go left for plot assignment).');
                return;
            }
        }
        if (plot_polygons_first_plot_start == 'top_right') {
            var generated_polygon_key_first_plot_number = plot_polygons_template_current_num_cols - 1;
            if (plot_polygons_second_plot_follows == 'right' || plot_polygons_second_plot_follows == 'up') {
                alert('Second plot cannot follow right or up from first plot if the first plot starts at the top right, because that is physically impossible.');
                return;
            }
            if (plot_polygons_second_plot_follows == 'left') {
                if (plot_polygons_plot_orientation == 'zigzag') {
                    console.log(generated_polygon_key_first_plot_number);
                    var plot_polygon_current_polygon_index = generated_polygon_key_first_plot_number;
                    var plot_polygon_column_count = 0;
                    var plot_polygon_previous_template_plot_count = 0;
                    for (var j=generated_polygon_key_first_plot_number; j<generated_polygon_key_first_plot_number + plot_polygons_plot_numbers.length + drone_imagery_interactive_plot_polygons_removed_numbers.length; j++){

                        plot_polygon_current_polygon_index = plot_polygon_previous_template_plot_count + plot_polygons_template_current_num_cols - plot_polygon_column_count - 1;

                        if (drone_imagery_interactive_plot_polygons_removed_numbers.includes(plot_polygon_current_polygon_index.toString())) {
                            console.log("Skipping "+plot_polygon_current_polygon_index);
                            plot_polygon_new_display[plot_polygon_current_polygon_index] =  drone_imagery_interactive_plot_polygons_display[plot_polygon_current_polygon_index];
                        } else {
                            plot_polygon_new_display[plot_polygons_plot_numbers_plot_names[plot_polygons_plot_numbers[plot_polygons_current_plot_number_index]]] =  drone_imagery_interactive_plot_polygons_display[plot_polygon_current_polygon_index];
                            drone_imagery_interactive_plot_polygons[plot_polygons_plot_numbers_plot_names[plot_polygons_plot_numbers[plot_polygons_current_plot_number_index]]] = drone_imagery_interactive_plot_generated_polygons[plot_polygon_current_polygon_index];
                            plot_polygons_current_plot_number_index = plot_polygons_current_plot_number_index + 1;
                            plot_polygons_template_current_plot_polygon_index = plot_polygons_template_current_plot_polygon_index + 1;
                        }

                        plot_polygon_column_count = plot_polygon_column_count + 1;

                        if (plot_polygon_column_count == plot_polygons_template_current_num_cols) {
                            plot_polygon_column_count = 0;
                            plot_polygon_previous_template_plot_count = plot_polygon_previous_template_plot_count + plot_polygons_template_current_num_cols;
                        }

                        if (plot_polygons_template_current_plot_polygon_index == plot_polygons_template_current_total_plot_polygons) {
                            plot_polygons_template_index = plot_polygons_template_index + 1;
                            plot_polygons_template_current = drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions[plot_polygons_template_index];
                            if (plot_polygons_template_current != undefined) {
                                plot_polygons_template_current_num_cols = plot_polygons_template_current.num_cols;
                                plot_polygons_template_current_num_rows = plot_polygons_template_current.num_rows;
                                plot_polygons_template_current_total_plot_polygons = plot_polygons_template_current.total_plot_polygons;
                                plot_polygons_template_current_plot_polygon_index = 0;
                            }
                        }
                    }
                }
                if (plot_polygons_plot_orientation == 'serpentine') {
                    var plot_polygon_current_polygon_index = generated_polygon_key_first_plot_number;
                    var plot_polygon_column_count = 0;
                    var plot_polygon_zigzig_polygon_index = generated_polygon_key_first_plot_number;
                    var going_left = 1;
                    var plot_polygon_previous_template_plot_count = 0;
                    for (var j=generated_polygon_key_first_plot_number; j<generated_polygon_key_first_plot_number + plot_polygons_plot_numbers.length + drone_imagery_interactive_plot_polygons_removed_numbers.length; j++){

                        if (going_left == 0) {
                            plot_polygon_current_polygon_index = plot_polygon_previous_template_plot_count + plot_polygon_column_count;
                        }
                        if (going_left == 1) {
                            plot_polygon_current_polygon_index = plot_polygon_previous_template_plot_count + plot_polygons_template_current_num_cols - plot_polygon_column_count - 1;
                        }

                        if (drone_imagery_interactive_plot_polygons_removed_numbers.includes(plot_polygon_current_polygon_index.toString())) {
                            console.log("Skipping "+plot_polygon_current_polygon_index);
                            plot_polygon_new_display[plot_polygon_current_polygon_index] = drone_imagery_interactive_plot_polygons_display[plot_polygon_current_polygon_index];
                        } else {
                            plot_polygon_new_display[plot_polygons_plot_numbers_plot_names[plot_polygons_plot_numbers[plot_polygons_current_plot_number_index]]] =  drone_imagery_interactive_plot_polygons_display[plot_polygon_current_polygon_index];
                            drone_imagery_interactive_plot_polygons[plot_polygons_plot_numbers_plot_names[plot_polygons_plot_numbers[plot_polygons_current_plot_number_index]]] = drone_imagery_interactive_plot_generated_polygons[plot_polygon_current_polygon_index];
                            plot_polygons_current_plot_number_index = plot_polygons_current_plot_number_index + 1;
                            plot_polygons_template_current_plot_polygon_index = plot_polygons_template_current_plot_polygon_index + 1;
                        }

                        plot_polygon_zigzig_polygon_index = plot_polygon_zigzig_polygon_index + 1;
                        plot_polygon_column_count = plot_polygon_column_count + 1;

                        if (plot_polygon_column_count == plot_polygons_template_current_num_cols) {
                            plot_polygon_column_count = 0;
                            if (going_left == 1) {
                                going_left = 0;
                            } else {
                                going_left = 1;
                            }
                            plot_polygon_previous_template_plot_count = plot_polygon_previous_template_plot_count + plot_polygons_template_current_num_cols;
                        }

                        if (plot_polygons_template_current_plot_polygon_index == plot_polygons_template_current_total_plot_polygons) {
                            plot_polygons_template_index = plot_polygons_template_index + 1;
                            plot_polygons_template_current = drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions[plot_polygons_template_index];
                            if (plot_polygons_template_current != undefined) {
                                plot_polygons_template_current_num_cols = plot_polygons_template_current.num_cols;
                                plot_polygons_template_current_num_rows = plot_polygons_template_current.num_rows;
                                plot_polygons_template_current_total_plot_polygons = plot_polygons_template_current.total_plot_polygons;
                                plot_polygons_template_current_plot_polygon_index = 0;
                            }
                        }
                    }
                }
            }
            if (plot_polygons_second_plot_follows == 'down') {
                alert('Down not implemented if your first plot starts in top right. Please contact us or try rotating your image differently before assigning plot polygons (e.g. rotate image 90 degrees clockwise, then first plot starts in bottom right corner and plot assignment can follow going left).');
                return;
            }
        }
        if (plot_polygons_first_plot_start == 'bottom_left') {
            alert('Not implemented');
            return;
        }
        if (plot_polygons_first_plot_start == 'bottom_right') {
            alert('Not implemented');
            return;
        }

        droneImageryDrawLayoutTableInteractive(drone_imagery_interactive_field_trial_layout_response, drone_imagery_interactive_plot_polygons, 'drone_imagery_interactive_trial_layout_div', 'drone_imagery_interactive_trial_layout_table');

        drone_imagery_interactive_plot_polygons_display = plot_polygon_new_display;
        draw_canvas_image_interactive(plot_polygons_interactive_total_height_generated/plot_polygons_interactive_num_rows_generated);
    }

    jQuery(document).on('click', '#drone_imagery_interactive_plot_polygons_clear', function(){
        plot_polygons_interactive_display_points = [];
        plot_polygons_interactive_ind_4_points = [];
        plot_polygons_interactive_generated_polygons = {};
        drone_imagery_interactive_plot_polygons_display = {};
        plot_polygons_interactive_generated_polygons = [];
        drone_imagery_interactive_plot_generated_polygons = [];
        drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions = [];
        drone_imagery_interactive_plot_polygons_removed_numbers = [];
        d3.selectAll('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+' > text').remove();
        d3.selectAll('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+' > line').remove();
        //d3.selectAll('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+' > circle').remove();
        jQuery('#drone_imagery_interactive_generated_polygons_div').html('');

        droneImageryDrawLayoutTableInteractive(drone_imagery_interactive_field_trial_layout_response, {}, 'drone_imagery_interactive_trial_layout_div', 'drone_imagery_interactive_trial_layout_table');
        droneImageryDrawPlotPolygonActiveTemplatesTableInteractive('drone_imagery_plot_polygons_active_templates_raw_images_interactive', drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions);
        plotPolygonManualAssignPlotNumberTable('drone_imagery_standard_process_interactive_generated_polygons_table', 'drone_imagery_standard_process_interactive_generated_polygons_table_id', 'drone_imagery_standard_process_interactive_generated_polygons_table_input', 'drone_imagery_standard_process_interactive_generated_polygons_table_input_generate_button', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');
    });

    jQuery(document).on('click', '#drone_imagery_interactive_plot_polygons_clear_one', function(){
        jQuery('#drone_imagery_interactive_plot_polygon_remove_polygon').modal('show');
        return false;
    });

    jQuery('#drone_imagery_interactive_plot_polygon_remove_polygon_submit').click(function(){
        var polygon_number = jQuery('#drone_imagery_interactive_plot_polygon_remove_polygon_number').val();
        drone_imagery_interactive_plot_polygons_removed_numbers.push(polygon_number);
        draw_canvas_image_interactive(plot_polygons_interactive_total_height_generated/plot_polygons_interactive_num_rows_generated);
        plotPolygonManualAssignPlotNumberTable('drone_imagery_standard_process_interactive_generated_polygons_table', 'drone_imagery_standard_process_interactive_generated_polygons_table_id', 'drone_imagery_standard_process_interactive_generated_polygons_table_input', 'drone_imagery_standard_process_interactive_generated_polygons_table_input_generate_button', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');
        return false;
    });

    function draw_canvas_image_interactive(random_scaling) {
        d3.selectAll('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+' > text').remove();
        d3.selectAll('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+' > line').remove();
        //d3.selectAll('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area_'+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+' > circle').remove();
        console.log("draw_canvas_image_interactive");
        console.log(drone_imagery_interactive_plot_polygons_display);

        for (key in drone_imagery_interactive_plot_polygons_display) {
            var plot_polygons_display_points_again = drone_imagery_interactive_plot_polygons_display[key];
            drawPolylineInteractive(plot_polygons_display_points_again);
            drawWaypointsInteractive(plot_polygons_display_points_again, key, random_scaling);
        }
        return false;
    }

    jQuery(document).on('click', 'button[name="drone_imagery_standard_process_interactive_plot_polygons_submit_bottom"]', function(){
        console.log(manage_drone_imagery_standard_process_interactive_saved_gps_positions);

        console.log(drone_imagery_interactive_plot_polygons);
        console.log(drone_imagery_interactive_plot_polygons_display);

        jQuery.ajax({
            type: 'POST',
            url: '/api/drone_imagery/save_plot_polygons_template_separated',
            dataType: "json",
            data: {
                'drone_run_band_project_id': manage_drone_imagery_standard_process_interactive_drone_run_band_project_id,
                'stock_polygons': JSON.stringify(drone_imagery_interactive_plot_polygons),
                'flight_pass_counter':manage_drone_imagery_standard_process_raw_images_interactive_current_pass
            },
            success: function(response){
                console.log(response);
                if(response.error) {
                    alert(response.error);
                }
                console.log(manage_drone_imagery_standard_process_raw_images_interactive_current_pass);
                if (manage_drone_imagery_standard_process_raw_images_interactive_current_pass < manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass) {
                    manage_drone_imagery_standard_process_raw_images_interactive_current_pass = manage_drone_imagery_standard_process_raw_images_interactive_current_pass + 1;

                    console.log("Plot Polygon pass COMPLETE");

                    initializeInteractiveSvg('#drone_imagery_standard_process_raw_images_image_id_interactive_select_div', 'drone_imagery_standard_process_raw_images_image_id_interactive_select_div_area', 1, 1);

                    jQuery('#drone_imagery_standard_process_interactive_plot_polygons_flight_pass').html("<h1><b>Current Imaging Event Pass: "+manage_drone_imagery_standard_process_raw_images_interactive_current_pass+"/"+manage_drone_imagery_standard_process_raw_images_interactive_maximum_pass+"</b></h1>");

                    plot_polygons_interactive_display_points = [];
                    plot_polygons_interactive_ind_4_points = [];
                    plot_polygons_interactive_generated_polygons = {};
                    drone_imagery_interactive_plot_polygons_display = {};
                    plot_polygons_interactive_generated_polygons = [];
                    drone_imagery_interactive_plot_generated_polygons = [];
                    drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions = [];
                    drone_imagery_interactive_plot_polygons_removed_numbers = [];
                    jQuery('#drone_imagery_interactive_generated_polygons_div').html('');

                    droneImageryDrawLayoutTableInteractive(drone_imagery_interactive_field_trial_layout_response, {}, 'drone_imagery_interactive_trial_layout_div', 'drone_imagery_interactive_trial_layout_table');
                    droneImageryDrawPlotPolygonActiveTemplatesTableInteractive('drone_imagery_plot_polygons_active_templates_raw_images_interactive', drone_imagery_standard_process_raw_images_interactive_plot_polygons_template_dimensions);
                    plotPolygonManualAssignPlotNumberTable('drone_imagery_standard_process_interactive_generated_polygons_table', 'drone_imagery_standard_process_interactive_generated_polygons_table_id', 'drone_imagery_standard_process_interactive_generated_polygons_table_input', 'drone_imagery_standard_process_interactive_generated_polygons_table_input_generate_button', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');

                    window.scrollTo(0,0);
                }
                else {
                    console.log("Plot polygon COMPLETE");

                    manage_drone_imagery_standard_process_raw_images_interactive_current_pass = 1;

                    jQuery('#manage_drone_imagery_standard_process_interactive_drone_run_bands_apply_table').DataTable({
                        destroy : true,
                        ajax : '/api/drone_imagery/drone_run_bands?select_checkbox_name=drone_run_standard_process_interactive_band_apply_select&drone_run_project_id='+manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id+'&select_all=1&disable=1'
                    });

                    Workflow.complete("#drone_imagery_standard_process_raw_images_interactive_match_previous_pass");
                    Workflow.focus('#manage_drone_imagery_standard_process_raw_images_interactive_workflow', 5);
                }
            },
            error: function(response){
                //alert('Error saving standard process assigned plot polygons!')
            }
        });
    });

    jQuery('#manage_drone_imagery_standard_process_interactive_drone_run_band_apply_step').click(function(){
        manage_drone_imagery_standard_process_interactive_apply_drone_run_band_project_ids = [];
        jQuery('input[name="drone_run_standard_process_interactive_band_apply_select"]:checked').each(function() {
            manage_drone_imagery_standard_process_interactive_apply_drone_run_band_project_ids.push(jQuery(this).val());
        });
        if (manage_drone_imagery_standard_process_interactive_apply_drone_run_band_project_ids.length < 1){
            alert('Please select at least one other drone run band!');
            return false;
        } else {
            Workflow.complete("#manage_drone_imagery_standard_process_interactive_drone_run_band_apply_step");
            Workflow.focus('#manage_drone_imagery_standard_process_raw_images_interactive_workflow', 6);
        }
    });

    jQuery('#manage_drone_imagery_standard_interactive_process_indices_step').click(function(){
        manage_drone_imagery_standard_process_interactive_apply_drone_run_band_vegetative_indices = [];
        jQuery('input[name="drone_imagery_standard_process_interactive_apply_indices_select"]:checked').each(function() {
            manage_drone_imagery_standard_process_interactive_apply_drone_run_band_vegetative_indices.push(jQuery(this).val());
        });
        if (manage_drone_imagery_standard_process_interactive_apply_drone_run_band_vegetative_indices.length < 1){
            alert('Please select at least one vegetative index!');
            return false;
        } else {
            jQuery.ajax({
                type: 'GET',
                url: '/api/drone_imagery/get_weeks_after_planting_date?drone_run_project_id='+manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id,
                dataType: "json",
                beforeSend: function (){
                    jQuery('#working_modal').modal('show');
                },
                success: function(response){
                    jQuery('#working_modal').modal('hide');
                    console.log(response);
                    if (response.error) {
                        alert(response.error);
                    }

                    var html = "<center><b>Field Trial Planting Date</b>: "+response.planting_date+"<br/><b>Drone Run Date</b>: "+response.drone_run_date+"<br/><b>Number of Weeks</b>: "+response.rounded_time_difference_weeks+"<br/><b>Number of Weeks Ontology Term</b>: "+response.time_ontology_week_term+"<br/><b>Number of Days</b>:"+response.time_difference_days+"<br/><b>Number of Days Ontology Term</b>: "+response.time_ontology_day_term+"<br/><br/></center>";
                    jQuery('#drone_imagery_standard_process_interactive_week_term_div').html(html);

                    manage_drone_imagery_standard_process_interactive_phenotype_time = response.time_ontology_day_cvterm_id;
                },
                error: function(response){
                    alert('Error getting time terms!');
                    jQuery('#working_modal').modal('hide');
                }
            });

            Workflow.complete("#manage_drone_imagery_standard_interactive_process_indices_step");
            Workflow.focus('#manage_drone_imagery_standard_process_raw_images_interactive_workflow', 7);
        }
    });

    jQuery('#manage_drone_imagery_standard_process_interactive_phenotypes_step').click(function(){
        var selected = [];

        if (manage_drone_imagery_standard_process_interactive_phenotype_time == '') {
            alert('Time of phenotype not set! This should not happen! Please contact us.');
            return false;
        }

        jQuery('input[name="drone_imagery_standard_process_interactive_phenotypes_select"]:checked').each(function() {
            selected.push(jQuery(this).val());
        });
        if (selected.length < 1){
            alert('Please select at least one phenotype!');
            return false;
        } else {
            jQuery.ajax({
                type: 'POST',
                url: '/api/drone_imagery/standard_process_apply_raw_images_interactive',
                dataType: "json",
                data: {
                    'drone_run_project_id': manage_drone_imagery_standard_process_raw_images_interactive_drone_run_id,
                    'drone_run_band_project_id': manage_drone_imagery_standard_process_interactive_drone_run_band_project_id,
                    'apply_drone_run_band_project_ids': JSON.stringify(manage_drone_imagery_standard_process_interactive_apply_drone_run_band_project_ids),
                    'vegetative_indices': JSON.stringify(manage_drone_imagery_standard_process_interactive_apply_drone_run_band_vegetative_indices),
                    'phenotype_types': JSON.stringify(selected),
                    'time_cvterm_id': manage_drone_imagery_standard_process_interactive_phenotype_time,
                    'standard_process_type': 'minimal'
                },
                success: function(response){
                    console.log(response);
                    if(response.error) {
                        alert(response.error);
                    }
                },
                error: function(response){
                    //alert('Error saving standard process assigned plot polygons!')
                }
            });

            Workflow.complete("#manage_drone_imagery_standard_process_interactive_phenotypes_step");
            //jQuery('#drone_imagery_standard_process_interactive_complete_dialog').modal('show');
        }
    });

    jQuery('#drone_imagery_standard_process_interactive_complete_dialog').on('hidden.bs.modal', function () {
        location.reload();
    })

    jQuery('#plot_polygons_use_previously_saved_template_raw_images_interactive').click(function(){
        var plot_polygons_use_previously_saved_template = jQuery('#manage_drone_imagery_standard_process_interactive_previous_templates').val();
        if (plot_polygons_use_previously_saved_template == '') {
            alert('Please select a previously saved template before trying to apply it. If there is not a template listed, then you can create one using the templating tool above.');
            return;
        }

        jQuery.ajax({
            url : '/api/drone_imagery/retrieve_parameter_template?plot_polygons_template_projectprop_id='+plot_polygons_use_previously_saved_template,
            success: function(response){
                console.log(response);
                var p = response.parameter;
                drone_imagery_interactive_plot_polygons_display = p[manage_drone_imagery_standard_process_raw_images_interactive_current_pass];
                drone_imagery_interactive_plot_polygons = p[manage_drone_imagery_standard_process_raw_images_interactive_current_pass];

                droneImageryDrawLayoutTableInteractive(drone_imagery_interactive_field_trial_layout_response, drone_imagery_interactive_plot_polygons, 'drone_imagery_interactive_trial_layout_div', 'drone_imagery_interactive_trial_layout_table');
                droneImageryDrawRectangleTableInteractive('drone_imagery_interactive_generated_polygons_div', 'drone_imagery_standard_process_interactive_plot_polygons_generated_assign', 'drone_imagery_standard_process_interactive_plot_polygons_submit_bottom');

                draw_canvas_image_interactive(0);
            },
            error: function(response){
                alert('Error retrieving plot polygons template!');
            }
        });
        return;
    });

    function showManageDroneImagerySection(section_div_id) {
        console.log(section_div_id);
        if (section_div_id == 'manage_drone_imagery_crop_div') {
            jQuery('#manage_drone_imagery_crop_div').show();
            jQuery('#manage_drone_imagery_top_div').hide();
            jQuery('#manage_drone_imagery_plot_polygons_div').hide();
            jQuery('#manage_drone_imagery_calculate_phenotypes_div').hide();
            jQuery('#manage_drone_imagery_remove_background_div').hide();
            jQuery('#manage_drone_imagery_rotate_div').hide();
            jQuery('#manage_drone_imagery_vegetative_index_div').hide();
            jQuery('#manage_drone_imagery_standard_process_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_interactive_div').hide();
            jQuery('#manage_drone_imagery_loading_div').hide();
        } else if (section_div_id == 'manage_drone_imagery_top_div'){
            jQuery('#manage_drone_imagery_crop_div').hide();
            jQuery('#manage_drone_imagery_top_div').show();
            jQuery('#manage_drone_imagery_plot_polygons_div').hide();
            jQuery('#manage_drone_imagery_calculate_phenotypes_div').hide();
            jQuery('#manage_drone_imagery_remove_background_div').hide();
            jQuery('#manage_drone_imagery_rotate_div').hide();
            jQuery('#manage_drone_imagery_vegetative_index_div').hide();
            jQuery('#manage_drone_imagery_standard_process_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_interactive_div').hide();
            jQuery('#manage_drone_imagery_loading_div').hide();
        } else if (section_div_id == 'manage_drone_imagery_plot_polygons_div'){
            jQuery('#manage_drone_imagery_crop_div').hide();
            jQuery('#manage_drone_imagery_top_div').hide();
            jQuery('#manage_drone_imagery_plot_polygons_div').show();
            jQuery('#manage_drone_imagery_calculate_phenotypes_div').hide();
            jQuery('#manage_drone_imagery_remove_background_div').hide();
            jQuery('#manage_drone_imagery_rotate_div').hide();
            jQuery('#manage_drone_imagery_vegetative_index_div').hide();
            jQuery('#manage_drone_imagery_standard_process_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_interactive_div').hide();
            jQuery('#manage_drone_imagery_loading_div').hide();
        } else if (section_div_id == 'manage_drone_imagery_calculate_phenotypes_div'){
            jQuery('#manage_drone_imagery_crop_div').hide();
            jQuery('#manage_drone_imagery_top_div').hide();
            jQuery('#manage_drone_imagery_plot_polygons_div').hide();
            jQuery('#manage_drone_imagery_calculate_phenotypes_div').show();
            jQuery('#manage_drone_imagery_remove_background_div').hide();
            jQuery('#manage_drone_imagery_rotate_div').hide();
            jQuery('#manage_drone_imagery_vegetative_index_div').hide();
            jQuery('#manage_drone_imagery_standard_process_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_interactive_div').hide();
            jQuery('#manage_drone_imagery_loading_div').hide();
        } else if (section_div_id == 'manage_drone_imagery_remove_background_div'){
            jQuery('#manage_drone_imagery_crop_div').hide();
            jQuery('#manage_drone_imagery_top_div').hide();
            jQuery('#manage_drone_imagery_plot_polygons_div').hide();
            jQuery('#manage_drone_imagery_calculate_phenotypes_div').hide();
            jQuery('#manage_drone_imagery_remove_background_div').show();
            jQuery('#manage_drone_imagery_rotate_div').hide();
            jQuery('#manage_drone_imagery_vegetative_index_div').hide();
            jQuery('#manage_drone_imagery_standard_process_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_interactive_div').hide();
            jQuery('#manage_drone_imagery_loading_div').hide();
        } else if (section_div_id == 'manage_drone_imagery_rotate_div'){
            jQuery('#manage_drone_imagery_crop_div').hide();
            jQuery('#manage_drone_imagery_top_div').hide();
            jQuery('#manage_drone_imagery_plot_polygons_div').hide();
            jQuery('#manage_drone_imagery_calculate_phenotypes_div').hide();
            jQuery('#manage_drone_imagery_remove_background_div').hide();
            jQuery('#manage_drone_imagery_rotate_div').show();
            jQuery('#manage_drone_imagery_vegetative_index_div').hide();
            jQuery('#manage_drone_imagery_standard_process_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_interactive_div').hide();
            jQuery('#manage_drone_imagery_loading_div').hide();
        } else if (section_div_id == 'manage_drone_imagery_vegetative_index_div'){
            jQuery('#manage_drone_imagery_crop_div').hide();
            jQuery('#manage_drone_imagery_top_div').hide();
            jQuery('#manage_drone_imagery_plot_polygons_div').hide();
            jQuery('#manage_drone_imagery_calculate_phenotypes_div').hide();
            jQuery('#manage_drone_imagery_remove_background_div').hide();
            jQuery('#manage_drone_imagery_rotate_div').hide();
            jQuery('#manage_drone_imagery_vegetative_index_div').show();
            jQuery('#manage_drone_imagery_standard_process_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_interactive_div').hide();
            jQuery('#manage_drone_imagery_loading_div').hide();
        } else if (section_div_id == 'manage_drone_imagery_standard_process_div'){
            jQuery('#manage_drone_imagery_crop_div').hide();
            jQuery('#manage_drone_imagery_top_div').hide();
            jQuery('#manage_drone_imagery_plot_polygons_div').hide();
            jQuery('#manage_drone_imagery_calculate_phenotypes_div').hide();
            jQuery('#manage_drone_imagery_remove_background_div').hide();
            jQuery('#manage_drone_imagery_rotate_div').hide();
            jQuery('#manage_drone_imagery_vegetative_index_div').hide();
            jQuery('#manage_drone_imagery_standard_process_div').show();
            jQuery('#manage_drone_imagery_standard_process_raw_images_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_interactive_div').hide();
            jQuery('#manage_drone_imagery_loading_div').hide();
        } else if (section_div_id == 'manage_drone_imagery_standard_process_raw_images_div'){
            jQuery('#manage_drone_imagery_crop_div').hide();
            jQuery('#manage_drone_imagery_top_div').hide();
            jQuery('#manage_drone_imagery_plot_polygons_div').hide();
            jQuery('#manage_drone_imagery_calculate_phenotypes_div').hide();
            jQuery('#manage_drone_imagery_remove_background_div').hide();
            jQuery('#manage_drone_imagery_rotate_div').hide();
            jQuery('#manage_drone_imagery_vegetative_index_div').hide();
            jQuery('#manage_drone_imagery_standard_process_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_div').show();
            jQuery('#manage_drone_imagery_standard_process_raw_images_interactive_div').hide();
            jQuery('#manage_drone_imagery_loading_div').hide();
        } else if (section_div_id == 'manage_drone_imagery_standard_process_raw_images_interactive_div'){
            jQuery('#manage_drone_imagery_crop_div').hide();
            jQuery('#manage_drone_imagery_top_div').hide();
            jQuery('#manage_drone_imagery_plot_polygons_div').hide();
            jQuery('#manage_drone_imagery_calculate_phenotypes_div').hide();
            jQuery('#manage_drone_imagery_remove_background_div').hide();
            jQuery('#manage_drone_imagery_rotate_div').hide();
            jQuery('#manage_drone_imagery_vegetative_index_div').hide();
            jQuery('#manage_drone_imagery_standard_process_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_interactive_div').show();
            jQuery('#manage_drone_imagery_loading_div').hide();
        } else if (section_div_id == 'manage_drone_imagery_loading_div'){
            jQuery('#manage_drone_imagery_crop_div').hide();
            jQuery('#manage_drone_imagery_top_div').hide();
            jQuery('#manage_drone_imagery_plot_polygons_div').hide();
            jQuery('#manage_drone_imagery_calculate_phenotypes_div').hide();
            jQuery('#manage_drone_imagery_remove_background_div').hide();
            jQuery('#manage_drone_imagery_rotate_div').hide();
            jQuery('#manage_drone_imagery_vegetative_index_div').hide();
            jQuery('#manage_drone_imagery_standard_process_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_div').hide();
            jQuery('#manage_drone_imagery_standard_process_raw_images_interactive_div').hide();
            jQuery('#manage_drone_imagery_loading_div').show();
        }
        window.scrollTo(0,0);
    }
});
</script>


<div id="project_drone_imagery_ground_control_points_div" style="display:none">

    <div id="pagetitle"><h3 id="pagetitle_h3">Manage Aerial Imagery: Save Ground Control Points</h3></div>


    <div id="project_drone_imagery_ground_control_points_title_div"></div>

    <div class="well well-sm">
        <ul>
            <li>Click on the ground control points (GCPs) in the image below and save them.</li>
            <li>Please click and save at least three points. The names of the GCPs MUST be consistent across imaging events!.</li>
            <li>You can move to different images (e.g. blue, green, red, NIR, BGR) which are available after the standard process has been completed.</li>
            <li>You can zoom out on your browser (Cntrl + -).</li>
        </ul>
    </div>

    <div id="project_drone_imagery_ground_control_points_next_buttons" style="display:none">
        <button class="btn btn-default" id="project_drone_imagery_ground_control_points_previous_image">View Previous Image Type</button>
        <button class="btn btn-default" id="project_drone_imagery_ground_control_points_next_image">View Next Image Type</button>
        <br/><br/>
    </div>

    <div class="well well-sm">
        <div id="project_drone_imagery_ground_control_points_saved_div"></div>
    </div>

    <div id="project_drone_imagery_ground_control_points_image_type_div"></div>
    <div id="project_drone_imagery_ground_control_points_info_div"></div>

    <div id="project_drone_imagery_ground_control_points_loading_div"><img src="/img/wheel.gif" /></div>

    <div id="project_drone_imagery_ground_control_points_svg_div"></div>

</div>

<div class="modal fade" id="project_drone_imagery_ground_control_points_form_dialog" name="project_drone_imagery_ground_control_points_form_dialog" tabindex="-1" role="dialog" aria-labelledby="saveGroundControlPointsDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="saveGroundControlPointsDialog">Save Ground Control Points</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Ground Control Point Name (Can overwrite if same name is used. Names MUST be consistent across imaging events!): </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="project_drone_imagery_ground_control_points_form_input_name" name="project_drone_imagery_ground_control_points_form_input_name" type="text" placeholder="e.g. NorthWest Corner, or Point 1" />
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Latitude (optional): </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="project_drone_imagery_ground_control_points_form_input_latitude" name="project_drone_imagery_ground_control_points_form_input_latitude" type="text" />
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Longitude (optional): </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="project_drone_imagery_ground_control_points_form_input_longitude" name="project_drone_imagery_ground_control_points_form_input_longitude" type="text" />
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">X Pos: </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="project_drone_imagery_ground_control_points_form_input_x_pos" name="project_drone_imagery_ground_control_points_form_input_x_pos" type="text" />
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Y Pos: </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="project_drone_imagery_ground_control_points_form_input_y_pos" name="project_drone_imagery_ground_control_points_form_input_y_pos" type="text" />
                    </div>
                </div>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="project_drone_imagery_ground_control_points_form_save">Save GCP</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div id="manage_drone_imagery_standard_process_raw_images_div" style="display:none">

    <div id="pagetitle"><h3 id="pagetitle_h3">Manage Aerial Imagery: Run A Standard Process On Raw Images</h3></div>


    









        
    
        
    
    
<div id="manage_drone_imagery_standard_process_raw_images_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Plot Polygons</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">This workflow will guide you through applying a standard process to your aerial imaging bands</h3></div>


            <div class="well well-sm">
                <p>This process will allow you to manually assign plot-polygons to the raw images.</p>
            </div>

            <br/><br/>
            <center>
            <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
            </center>
        </li>
          <li>
            <div id="pagetitle"><h3 id="pagetitle_h3">Manually assign plot-polygons to raw images</h3></div>


            <div class="well well-sm">
                <ul>
                    <li>(1) Select an image from the grid below and adjust the rotation.</li>
                    <li>(2) Click the four corners encompassing a group of plots of interest. Alternatively, paste a previously used template.</li>
                    <li>(3) Type the plot numbers corresponding to the drawn plot-polygons in the drawn table.</li>
                    <li>(4) Click assign plot-polygons to save. Repeat steps 1 to 4 until all plots have been assigned an image.</li>
                </ul>
            </div>

            <div class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-2 control-label">Click Raw Image Stack: </label>
                    <div class="col-sm-10">
                        <div id="drone_imagery_standard_process_raw_images_image_id_select_div"></div>
                    </div>
                </div>
            </div>
            <hr>

            <canvas id="drone_imagery_standard_process_raw_images_show"></canvas>
            <canvas id="drone_imagery_standard_process_raw_images_show_another_image"></canvas>
            <canvas id="drone_imagery_standard_process_raw_images_show_another_image_second"></canvas>

            <hr>
            <button class="btn btn-default btn-sm" id="drone_imagery_standard_process_raw_images_paste_previous_polygon_in_place" onclick="return false;">Paste Previously Used Plot-Polygon</button>
            <button class="btn btn-default btn-sm" id="drone_imagery_standard_process_raw_images_paste_previous_polygon_view_image" onclick="return false;">View Another Image Also</button>
            <button class="btn btn-default btn-sm" id="drone_imagery_standard_process_raw_images_paste_previous_polygon_view_image_second" onclick="return false;">View Another Image Also</button>

            <hr>
            <form class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Rotate Counter-Clockwise Degrees: </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="drone_imagery_standard_process_raw_images_rotate_degrees_input" name="drone_imagery_standard_process_raw_images_rotate_degrees_input" type="text" placeholder="Number of degrees to rotate" value="0.00"/>
                    </div>
                </div>
            </form>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_rotate_image" onclick="return false;">Rotate Image</button>
            <hr>

            <form class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Trained Mask R-CNN Models: </label>
                    <div class="col-sm-6">
                        <div id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_models_div"></div>
                    </div>
                </div>
            </form>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_predict_button" onclick="return false;">Predict Mask</button>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_modal_button" onclick="return false;">Retrain Mask R-CNN</button>
            <hr>

            <hr>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_save_polygon" onclick="return false;">Save Plot-Polygon</button>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_paste_polygon" onclick="return false;">Paste Plot-Polygon</button>
            <button class="btn btn-danger btn-sm" id="drone_imagery_standard_process_raw_images_clear_polygon" onclick="return false;">Start Over</button>
            <hr>

            <hr>
            <form class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Previously used plot-polygons: </label>
                    <div class="col-sm-6">
                        <div id="drone_imagery_standard_process_raw_images_previous_polygons_div"></div>
                    </div>
                </div>
            </form>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_paste_previous_polygon" onclick="return false;">Paste Previously Used Plot-Polygon To A New Point</button>
            <hr>

            <div class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-3 control-label">Number of Rows: </label>
                    <div class="col-sm-9">
                        <input type="number" class="form-control" id="drone_imagery_standard_process_raw_images_number_rows" name="drone_imagery_standard_process_raw_images_number_rows" placeholder="0"/>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-3 control-label">Number of Columns: </label>
                    <div class="col-sm-9">
                        <input type="number" class="form-control" id="drone_imagery_standard_process_raw_images_number_columns" name="drone_imagery_standard_process_raw_images_number_columns" placeholder="0"/>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-3 control-label">Template Name: </label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="drone_imagery_standard_process_raw_images_partial_template_name" name="drone_imagery_standard_process_raw_images_partial_template_name" placeholder="e.g. 3rd Range 2x4"/>
                    </div>
                </div>
            </div>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_draw_polygons" onclick="return false;">Draw Plot-Polygon (Does Not Save)</button>
            <hr>

            <div id="drone_imagery_standard_process_raw_images_polygon_assign_table" name="drone_imagery_standard_process_raw_images_polygon_assign_table"></div>

            <br/><br/>
            <center>
            <button class="btn btn-primary" id="drone_imagery_standard_process_raw_images_assign_plot" onclick="return false;">Assign Plot Images (Saves)</button>
            </center>

            <hr>
            <div id="drone_imagery_standard_process_raw_images_assigned_plot_images" name="drone_imagery_standard_process_raw_images_assigned_plot_images"></div>
        </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#manage_drone_imagery_standard_process_raw_images_workflow");
</script>


</div>


<div id="manage_drone_imagery_vegetative_index_div" style="display:none">

    <div id="pagetitle"><h3 id="pagetitle_h3">Manage Aerial Imagery: Convert to Vegetative Index</h3></div>


    <div class="well well-sm">
        <ul>
            <li>Here you can convert to a vegetative index.</li>
            <li>If you have a NIR band, you can calculate "Normalized difference vegetative index", NDVI.</li>
            <li>If you have an RGB image, you can calculate "Visible atmospheric resistant index", VARI, or "Triangular greenness index", TGI.</li>
            <li>If you have red or blue or green, or images from any spectral band, you can calculate ratios to use as your vegetative index.</li>
        </ul>
    </div>

    <hr>
    <div id="manage_drone_imagery_vegetative_index_tgi_bgr_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_TGI_bgr">Calculate "Triangular Greenness Index" TGI. TGI = {Green band2} - 0.39*{Red band3} - 0.61*{Blue band1}</button>
        <hr>
    </div>
    <div id="manage_drone_imagery_vegetative_index_vari_bgr_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_VARI_bgr">Calculate "Visible Atmospheric Resistant Index" VARI. VARI = ({Green band2} - {Red band3}) / ({Green band2} + {Red band3} - {Blue band1})</button>
        <hr>
    </div>
    <div id="manage_drone_imagery_vegetative_index_tgi_rgb_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_TGI_rgb">Calculate "Triangular Greenness Index" TGI. TGI = {Green band2} - 0.39*{Red band1} - 0.61*{Blue band3}</button>
        <hr>
    </div>
    <div id="manage_drone_imagery_vegetative_index_vari_rgb_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_VARI_rgb">Calculate "Visible Atmospheric Resistant Index" VARI. VARI = ({Green band2} - {Red band1}) / ({Green band2} + {Red band1} - {Blue band3})</button>
        <hr>
    </div>
    <div id="manage_drone_imagery_vegetative_index_ndvi_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_NDVI">Calculate "Normalized Difference Vegetative Index" NDVI. NDVI = ({NIR band1} - {Red band2}) / ({NIR band1} + {Red band2})</button>
        <hr>
    </div>
    <div id="manage_drone_imagery_vegetative_index_ndre_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_NDRE">Calculate "Normalized Difference Red Edge" NDRE. NDRE = ({NIR band1} - {Red Edge band2}) / ({NIR band1} + {Red Edge band2})</button>
        <hr>
    </div>

    <button class="btn btn-success" id="drone_imagery_rgb_vegetative_index_submit">Finish and Save Vegetative Index</button>
    <hr>

    <canvas id="drone_imagery_vegetative_index_original_stitched_div"></canvas>
</div>

<div id="manage_drone_imagery_remove_background_div" style="display:none">

    <div id="pagetitle"><h3 id="pagetitle_h3">Manage Aerial Imagery: Remove Background</h3></div>


    <div class="well">
        


<a class="info_section_anchor" name="remove_background_using_graphical_threshold"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc4091_offswitch', 'sgnc4091_onswitch');
		Effects.hideElement('sgnc4091_content');
		
		return false;"
		id="sgnc4091_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Remove Background Using Graphical Threshold</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc4091_onswitch', 'sgnc4091_offswitch');
		Effects.showElement('sgnc4091_content');
		
		return false;"
		id="sgnc4091_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Remove Background Using Graphical Threshold</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Remove the background using a simple threshold value&nbsp;</td></tr></table>

<span id="sgnc4091_content" style="display:none;"><div class="infosectioncontent" >


            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="well well-sm">
                        <h5>The background can be removed by placing a threshold on pixel values</h5>
                        <ul>
                            <li><b>1.</b> Click on the two right-most, highest peaks in the histogram. The right most peak represents the pixels we are interested in, while the peak immediately to the left of that peak represents the soil background.</li>
                            <li><b>2.</b> Click on the "Find Minimum" button.</li>
                            <li><b>3.</b> If the image looks good with the applied threshold, click Save. Otherwise, you can start over.</li>
                        </ul>
                    </div>

                    <div class="well well-sm">
                        <div name="drone_imagery_remove_background_threshold_current"></div>
                        <div name="drone_imagery_remove_background_threshold"></div>
                    </div>

                    <canvas id="drone_imagery_remove_background_histogram_div"></canvas>
                    <hr>
                    <button class="btn btn-primary" id="drone_imagery_remove_background_find_minimum">Find Minimum (Does Not Save)</button>
                    <button class="btn btn-default" id="drone_imagery_remove_background_start_over">Start Over</button>
                    <button class="btn btn-primary" id="drone_imagery_remove_background_submit">Save</button>
                    <hr>
                </div>
            </div>
        
</div>
</span>


    </div>
    <div class="well">
        


<a class="info_section_anchor" name="remove_background_using_user_defined_threshold"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc4874_offswitch', 'sgnc4874_onswitch');
		Effects.hideElement('sgnc4874_content');
		
		return false;"
		id="sgnc4874_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Remove Background Using User Defined Threshold</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc4874_onswitch', 'sgnc4874_offswitch');
		Effects.showElement('sgnc4874_content');
		
		return false;"
		id="sgnc4874_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Remove Background Using User Defined Threshold</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Remove the background using a simple threshold value&nbsp;</td></tr></table>

<span id="sgnc4874_content" style="display:none;"><div class="infosectioncontent" >

            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Discard Pixels with Value Lower Than: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_remove_background_lower_threshold" name="drone_imagery_remove_background_lower_threshold" type="number" max="255" min="0" placeholder="e.g. 10 (Min 0)" />
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Discard Pixels with Value Higher Than: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_remove_background_upper_threshold" name="drone_imagery_remove_background_upper_threshold" type="number" max="255" min="0" placeholder="e.g. 200 (Max 255)"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="drone_imagery_remove_background_defined_submit" class="btn btn-primary">Apply Threshold</button>
                </div>
            </div>
        
</div>
</span>


    </div>
    <div class="well">
        


<a class="info_section_anchor" name="remove_background_using_percentage_threshold"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc2922_offswitch', 'sgnc2922_onswitch');
		Effects.hideElement('sgnc2922_content');
		
		return false;"
		id="sgnc2922_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Remove Background Using Percentage Threshold</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc2922_onswitch', 'sgnc2922_offswitch');
		Effects.showElement('sgnc2922_content');
		
		return false;"
		id="sgnc2922_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Remove Background Using Percentage Threshold</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Remove the background by specifying percentage threshold value&nbsp;</td></tr></table>

<span id="sgnc2922_content" style="display:none;"><div class="infosectioncontent" >

            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Discard Lowest Percent of Pixel Values: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_remove_background_lower_threshold_percentage" name="drone_imagery_remove_background_lower_threshold_percentage" type="number" max="99" min="0" placeholder="e.g. 10% of lowest pixel values (Min 0, Max 100)" />
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Discard Highest Percent of Pixel Values: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_remove_background_upper_threshold_percentage" name="drone_imagery_remove_background_upper_threshold_percentage" type="number" max="99" min="0" placeholder="e.g. 10% of highest pixel values (Min 0, Max 100)"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="drone_imagery_remove_background_defined_percentage_submit" class="btn btn-primary">Apply Threshold</button>
                </div>
            </div>
        
</div>
</span>


    </div>

    <hr>

    <div id="manage_drone_imagery_remove_background_load_div">
        <img src="/img/wheel.gif" />
    </div>

    <canvas id="drone_imagery_remove_background_original"></canvas>
</div>

<div id="manage_drone_imagery_plot_polygons_div" style="display:none">

    <div id="pagetitle"><h3 id="pagetitle_h3">Manage Aerial Imagery: Define Plot Polygons</h3></div>


    <div id="manage_drone_imagery_plot_polygons_div_title"></div>

    


<div class="row">
    <div class="col-sm-12">
        <div class="well">
            <div class="row">
                <div class="col-sm-1">
                    <span style="font-size:3.5em;" class="glyphicon glyphicon-th-large"></span>
                </div>
                <div class="col-sm-11">

                    


<a class="info_section_anchor" name="generate_polygon_template_tool"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('manage_drone_imagery_generate_plot_polygons_section_offswitch', 'manage_drone_imagery_generate_plot_polygons_section_onswitch');
		Effects.hideElement('manage_drone_imagery_generate_plot_polygons_section_content');
		
		return false;"
		id="manage_drone_imagery_generate_plot_polygons_section_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" /><h4 style='display:inline'>Generate Polygon Template Tool</h4></a>
	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('manage_drone_imagery_generate_plot_polygons_section_onswitch', 'manage_drone_imagery_generate_plot_polygons_section_offswitch');
		Effects.showElement('manage_drone_imagery_generate_plot_polygons_section_content');
		
		return false;"
		id="manage_drone_imagery_generate_plot_polygons_section_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" /><h4 style='display:inline'>Generate Polygon Template Tool</h4></a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Overlay a uniform grid over the image.&nbsp;</td></tr></table>

<span id="manage_drone_imagery_generate_plot_polygons_section_content" style=""><div class="infosectioncontent" >



                        <div class="panel panel-default">
                            <div class="panel-body">
























                                
<div class="well well-sm">
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="well well-sm">
                <form class="form-horizontal">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Number of Rows: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_plot_polygons_num_rows" name="drone_imagery_plot_polygons_num_rows" type="number" placeholder="Number of rows in image section" />
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Number of Columns: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_plot_polygons_num_cols" name="drone_imagery_plot_polygons_num_cols" type="number" placeholder="Number of columns in image section"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-body">

            <div class="row">
                <div class="col-sm-12">
                    <h4> Either click the four corners of the area of interest: </h4>

                    <button class="btn btn-sm btn-info" id="drone_imagery_plot_polygons_top_left_click">Click Top Left Corner</button>
                    <button class="btn btn-sm btn-info" id="drone_imagery_plot_polygons_top_right_click">Click Top Right Corner</button>
                    <button class="btn btn-sm btn-info" id="drone_imagery_plot_polygons_bottom_left_click">Click Bottom Left Corner</button>
                    <button class="btn btn-sm btn-info" id="drone_imagery_plot_polygons_bottom_right_click">Click Bottom Right Corner</button>
                </div>
            </div>
            <hr>
        
            


<a class="info_section_anchor" name="template_parameters"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc8682_offswitch', 'sgnc8682_onswitch');
		Effects.hideElement('sgnc8682_content');
		
		return false;"
		id="sgnc8682_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Template Parameters</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc8682_onswitch', 'sgnc8682_offswitch');
		Effects.showElement('sgnc8682_content');
		
		return false;"
		id="sgnc8682_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Template Parameters</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">View and edit template parameters. These parameters can be filled using the above button clicks&nbsp;</td></tr></table>

<span id="sgnc8682_content" style="display:none;"><div class="infosectioncontent" >

                <div class="well well-sm">
                    <form class="form-horizontal">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Left-most Column Top Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_left_column_top_offset" name="drone_imagery_plot_polygons_left_column_top_offset" type="number" value="0"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Left-most Column Bottom Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_left_column_bottom_offset" name="drone_imagery_plot_polygons_left_column_bottom_offset" type="number" value="0"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Top-most Row Left Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_top_row_left_offset" name="drone_imagery_plot_polygons_top_row_left_offset" type="number" placeholder="Left offset of image section" value="0" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Top-most Row Right Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_top_row_right_offset" name="drone_imagery_plot_polygons_top_row_right_offset" type="number" placeholder="Left offset of image section" value="0" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Bottom-most Row Left Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_bottom_row_left_offset" name="drone_imagery_plot_polygons_bottom_row_left_offset" type="number" placeholder="Left offset of image section" value="0" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Right-most Column Bottom Margin: </label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="drone_imagery_plot_polygons_right_col_bottom_offset" name="drone_imagery_plot_polygons_right_col_bottom_offset" type="number" placeholder="Right-most column bottom offset" value="0" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            
</div>
</span>



            <br/>
            <button class="btn btn-sm btn-primary" id="drone_imagery_plot_polygons_rectangles_apply">Draw Plot Polygon Template (Does not save. Apply multiple templates if needed.)</button>

        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-body">

            <div class="row">
                <div class="col-sm-12">
                    <h4> Or paste a previously used template: </h4>
                </div>
            </div>

            


<a class="info_section_anchor" name="previously_used_plot_polygon_templates"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc3311_offswitch', 'sgnc3311_onswitch');
		Effects.hideElement('sgnc3311_content');
		
		return false;"
		id="sgnc3311_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Previously Used Plot Polygon Templates</a>
	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc3311_onswitch', 'sgnc3311_offswitch');
		Effects.showElement('sgnc3311_content');
		
		return false;"
		id="sgnc3311_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Previously Used Plot Polygon Templates</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">View and use previous plot polygon templates used on this field trial&nbsp;</td></tr></table>

<span id="sgnc3311_content" style="display:none;"><div class="infosectioncontent" >

                <div class="well well-sm">
                    <form class="form-horizontal">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group form-group-sm">
                                    <label class="col-sm-6 control-label">Previously Used Plot Polygon Templates For This Field Trial: </label>
                                    <div class="col-sm-6">
                                        <div id="plot_polygons_previously_saved_plot_polygon_templates">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <button class="btn btn-primary" id="plot_polygons_use_previously_saved_template">Draw Plot Polygon Template (Does not save)</button>
                </div>
            
</div>
</span>


        </div>
    </div>

    <div id="drone_imagery_plot_polygons_active_templates"></div>

</div>








                            </div>
                        </div>
                    
</div>
</span>


                </div>
            </div>
        </div>
    </div>
</div>


    <div class="well well-sm">
        <div id="drone_imagery_plot_polygons_top_section"></div>

        <button id="drone_imagery_plot_polygons_clear" class="btn btn-danger">Clear All Polygons And Start Over Templating</button>
        <button id="drone_imagery_plot_polygons_clear_one" class="btn btn-danger">Remove One Polygon</button>
        <button id="drone_imagery_plot_polygons_get_distance" class="btn btn-default">Find Distance Between Points</button>
    </div>

    <div id="manage_drone_imagery_plot_polygons_load_div">
        <img src="/img/wheel.gif" />
    </div>

    <canvas id="drone_imagery_plot_polygons_original_stitched_div"></canvas>

    <div id="drone_imagery_generated_polygons_div"></div>

    <hr>
    <div class="well well-sm">
        <div id="drone_imagery_trial_layout_div"></div>
    </div>
</div>

<div id="manage_drone_imagery_calculate_phenotypes_div" style="display:none">

    <div id="pagetitle"><h3 id="pagetitle_h3">Manage Aerial Imagery: Calculate Phenotypes</h3></div>


    <div class="well well-sm">
        <ul>
            <li>Here you can calculate phenotypes for all plot polygons at once.</li>
        </ul>
    </div>

    <hr>
    <button class="btn btn-primary" id="drone_imagery_calculate_phenotypes_zonal_stats">Zonal Statistics</button>
    <button class="btn btn-primary" id="drone_imagery_calculate_phenotypes_sift">Calculate SIFT Features</button>
    <button class="btn btn-primary" id="drone_imagery_calculate_phenotypes_surf">Calculate SURF Features</button>
    <button class="btn btn-primary" id="drone_imagery_calculate_phenotypes_orb">Calculate ORB Features</button>
    <hr>

    <div id="manage_drone_imagery_calculate_phenotypes_show_zonal_stats" style="overflow:scroll"></div>
    <div id="manage_drone_imagery_calculate_phenotypes_show_fourier_transform" style="overflow:scroll"></div>
    <div id="manage_drone_imagery_calculate_phenotypes_show_sift"></div>
    <div id="manage_drone_imagery_calculate_phenotypes_show_surf"></div>
    <div id="manage_drone_imagery_calculate_phenotypes_show_orb"></div>

</div>

<div id="manage_drone_imagery_quality_control_div" style="display:none">

    <div id="pagetitle"><h3 id="pagetitle_h3">Manage Aerial Imagery: Quality Control Plot Images</h3></div>


    <div class="well well-sm">
        <ul>
            <li>Here you can obsolete plot images that are not correct.</li>
            <li>This is useful when using raw images because the process is more noisy.</li>
            <li>Clicking a checkbox will automatically obsolete the image!</li>
        </ul>
    </div>

    <div id="drone_imagery_quality_control_div"></div>
</div>

<div id="manage_drone_imagery_field_trial_time_series_div" style="display:none">

    <div id="pagetitle"><h3 id="pagetitle_h3">Manage Aerial Imagery: Field Trial Image TimeSeries</h3></div>


    <div id="manage_drone_imagery_field_trial_time_series_div_title"></div>

    <div class="well well-sm">
        <ul>
            <li>Here you can view the plot polygon templates on the imagery over the course of the field trial. All of the image bands are visible here (e.g. blue, green, RGB, etc).</li>
            <li>Click on a plot polygon to go to the plot detail page.</li>
            <li>You can zoom out on your browser (Cntrl + -).</li>
        </ul>
    </div>

    <div class="well well-sm">
        <div class="panel panel-default">
            <div class="panel-body">
                <div id="manage_drone_imagery_field_trial_time_series_times_div"></div>
                <div id="manage_drone_imagery_field_trial_time_series_image_type_div"></div>
            </div>
        </div>
    </div>

    <div id="manage_drone_imagery_field_trial_time_series_info_div"></div>
    <div id="manage_drone_imagery_field_trial_time_series_loading_div">
        <img src="/img/wheel.gif" />
    </div>
    <canvas id="manage_drone_imagery_field_trial_time_series_canvas_div"></canvas>

</div>

<div class="modal fade" id="manage_drone_imagery_field_trial_time_series_popup" name="manage_drone_imagery_field_trial_time_series_popup" tabindex="-1" role="dialog" aria-labelledby="droneImageryTImeSeriesHoverDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryTImeSeriesHoverDialog">Plot Information</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="manage_drone_imagery_field_trial_time_series_popup_content"></div>
            <div id="manage_drone_imagery_field_trial_time_series_popup_content_figure1"></div>
            <div id="manage_drone_imagery_field_trial_time_series_popup_content_figure2"></div>
            <div id="manage_drone_imagery_field_trial_time_series_popup_content_figure3"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div id="manage_drone_imagery_loading_div" style="display:none">
    <div id="pagetitle"><h3 id="pagetitle_h3">Loading...</h3></div>

    <div class="well well-sm">
        <center>
        <h3>Please wait...</h3>
        <hr>
        <img src="/img/wheel.gif" />
        </center>
    </div>
</div>

<div class="modal fade" id="drone_imagery_assign_plot_dialog" name="drone_imagery_assign_plot_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryAssignPlotDialog" data-backdrop="static">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryAssignPlotDialog">Assign Plot</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <form class="form-horizontal" id="drone_imagery_assign_plot_form">
                <div class="form-group">
                    <label class="col-sm-5 control-label">Plot Name:</label>
                    <div class="col-sm-7">
                        <input class="form-control" id="drone_imagery_plot_polygon_assign_plot_name" name="drone_imagery_plot_polygons_autocomplete" type="text" placeholder="Auto-completes plot name..." />
                    </div>
                </div>
            </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_plot_polygon_assign_add">Assign Plot</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_plot_polygon_remove_polygon" name="drone_imagery_plot_polygon_remove_polygon" tabindex="-1" role="dialog" aria-labelledby="droneImageryRemovePlotPolygonDialog" data-backdrop="static">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryRemovePlotPolygonDialog">Remove Plot Polygon</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <form class="form-horizontal" id="drone_imagery_plot_polygon_remove_polygon_form">
                <div class="form-group">
                    <label class="col-sm-5 control-label">Polygon Identifier:</label>
                    <div class="col-sm-7">
                        <input class="form-control" id="drone_imagery_plot_polygon_remove_polygon_number" name="drone_imagery_plot_polygon_remove_polygon_number" type="number" placeholder="e.g. 3" />
                    </div>
                </div>
            </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_plot_polygon_remove_polygon_submit">Remove Plot Polygon</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_merge_channels_dialog" name="drone_imagery_merge_channels_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryMergeChannelsDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryMergeChannelsDialog">Merge Imaging Event Bands Into Single 3-channel image</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <form class="form-horizontal" id="drone_imagery_merge_bands_form">
                <div class="form-group">
                    <label class="col-sm-5 control-label">First Band:</label>
                    <div class="col-sm-7">
                        <div id="drone_imagery_merge_bands_band1_select"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Second Band:</label>
                    <div class="col-sm-7">
                        <div id="drone_imagery_merge_bands_band2_select"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Third Band:</label>
                    <div class="col-sm-7">
                        <div id="drone_imagery_merge_bands_band3_select"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Merge Image Type:</label>
                    <div class="col-sm-7">
                        <select class="form-control" id="drone_run_merge_image_type" name="drone_run_merge_image_type">
                            <option value="">Select One</option>
                            <option value="BGR">BGR (Band 1 = Blue, Band 2 = Green, Band 3 = Red)</option>
                            <option value="NRN">NRN (Band 1 = NIR, Band 2 = Red, Band 3 = NIR)</option>
                            <option value="NReN">NReN (Band 1 = NIR, Band 2 = Red Edge, Band 3 = NIR)</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>

        <ul>
            <li>TGI = {GREEN band2} - 0.39*{RED band3} - 0.61*{BLUE band1}</li>
            <li>VARI = ( {GREEN band2} - {RED band3} ) / ( {GREEN band2} + {RED band3} - {BLUE band1} )</li>
            <li>NDVI = ( {NIR band1} - {RED band 2} ) / ( {NIR band1} + {RED band2} )</li>
            <li>NDRE = ( {NIR band1} - {RED EDGE band 2} ) / ( {NIR band1} + {RED EDGE band2} )</li>
        </ul>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_merge_bands_submit">Merge Bands</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_calc_phenotypes_zonal_channel_dialog" name="drone_imagery_calc_phenotypes_zonal_channel_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCalcPhenotypesZonalChannelDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCalcPhenotypesZonalChannelDialog">Select the Channel to Calculate Zonal Statistics On</h4>
      </div>
      <div class="modal-body">
          <div class="container-fluid">
              <div id="drone_imagery_calculate_phenotypes_zonal_stats_week_term_div"></div>
          </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_calculate_phenotypes_zonal_stats_channel_select">Calculate Zonal Statistics</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_change_date_drone_run_dialog" name="drone_imagery_change_date_drone_run_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryChangeDateDroneRunDialog" data-backdrop="static">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryChangeDateDroneRunDialog">Change Date of Imaging Event</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div>
                <div id="change_date_drone_image_field_trial_info">
                </div>

                <div class="form-group">
                    <label class="col-sm-6 control-label">Imaging Event Date and Hour (Must be after the planting date):</label>
                    <div class="col-sm-6" >
                        <input class="form-control" id="drone_run_change_date" name="drone_run_change_date" title="drone_run_change_date" type="text" />
                    </div>
                </div>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_change_date_drone_run_confirm">Change Date of Imaging Event</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_delete_drone_run_dialog" name="drone_imagery_delete_drone_run_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryDeleteDroneRunDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryDeleteDroneRunDialog">Delete a Imaging Event</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div class="well">
                <ul>
                    <li>Deleting an imaging event will remove the imaging event and all image bands permanently.</li>
                    <li>All images in the imaging event will be deleted (obsoleted).</li>
                    <li>Phenotypes that were generated for plots in this imaging event will be deleted permanently.</li>
                </ul>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_delete_drone_run_confirm">Delete Imaging Event</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_calc_phenotypes_trial_dialog" name="drone_imagery_calc_phenotypes_trial_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCalcPhenotypesZonalChannelTrialDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCalcPhenotypesZonalChannelTrialDialog">Calculate Zonal Statistics Again</h4>
      </div>
      <div class="modal-body">
        <div class="well well-sm">
            <div class="container-fluid">
                <div id="drone_imagery_week_term_div"></div>
            </div>
        </div>

        <div class="well well-sm">
            <div class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-5 control-label">Phenotype Process:</label>
                    <div class="col-sm-7">
                        <select class="form-control" id="drone_imagery_generate_phenotypes_process_type" name="drone_imagery_generate_phenotypes_process_type">
                            <option value="minimal,minimal_vi">Minimal</option>
                            <!-option value="extended">Extended</option-->
                        </select>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-5 control-label">Phenotype Plot-Polygon Margin on Top and Bottom:</label>
                    <div class="col-sm-7">
                        <input class="form-control" type="number" id="drone_imagery_generate_phenotypes_process_margin_top_bottom" name="drone_imagery_generate_phenotypes_process_margin_top_bottom" value=5 />
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-5 control-label">Phenotype Plot-Polygon Margin on Left and Right:</label>
                    <div class="col-sm-7">
                        <input class="form-control" type="number" id="drone_imagery_generate_phenotypes_process_margin_left_right" name="drone_imagery_generate_phenotypes_process_margin_left_right" value=5 />
                    </div>
                </div>
            </div>
        </div>

        <div id="drone_imagery_generate_phenotypes_process_preview_svg_div"><div class="well well-sm"><p>LOADING... Please wait...</p></div></div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_calculate_phenotypes_zonal_stats_trial_select">Calculate Zonal Statistics</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_minimal_vi_standard_process_dialog" name="drone_imagery_minimal_vi_standard_process_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryMinimalVIStandardProcessDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryMinimalVIStandardProcessDialog">Run Minimal Vegetative Index Standard Process</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="drone_imagery_minimal_vi_standard_process_week_term_div"></div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_minimal_vi_standard_process_select">Run Minimal Vegetative Index Standard Process</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_extended_standard_process_dialog" name="drone_imagery_extended_standard_process_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryExtenededStandardProcessDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryExtenededStandardProcessDialog">Run Extended Standard Process</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="drone_imagery_extended_standard_process_week_term_div"></div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_extended_standard_process_select">Run Extended Standard Process</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_apply_other_vi_dialog" name="drone_imagery_apply_other_vi_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryApplyOtherVIDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryApplyOtherVIDialog">Apply Other Available Vegetation Indices</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="drone_imagery_apply_other_vi_div"></div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_apply_other_vi_select">Run Selected Vegetation Indices</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_associated_field_trials_dialog" name="drone_imagery_associated_field_trials_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryAssociatedFieldTrialsDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryAssociatedFieldTrialsDialog">Associated Field Trials</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="drone_imagery_associated_field_trials_div"></div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_associated_field_trials_select_submit">Save Associated Field Trials</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_download_phenotypes_dialog" name="drone_imagery_download_phenotypes_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryDownloadPhenotypesDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryDownloadPhenotypesDialog">Download drone image phenotypes and plot images</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            









                
    
                
    
                
    
                
    
            
<div id="drone_imagery_download_phenotypes_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Field Trial</div></li>
      <li><div class="workflow-title">Trait Selection</div></li>
      <li><div class="workflow-title">Image Types</div></li>
      <li><div class="workflow-title">Download</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the field trial you are interested in</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_download_phenotypes_trial_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_download_phenotypes_field_trial_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the observation variable(s) you are interested in downloading</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Observation Variables Phenotyped in the Selected Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_download_phenotypes_trait_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_download_phenotypes_trait_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the image type(s) you are interested in downloading</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Plot Image Types in the Selected Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_download_phenotypes_image_type_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_download_phenotypes_image_type_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Download!</h3></div>


                    <div id ="drone_imagery_download_phenotypes_file_div">
                    </div>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_download_phenotypes_confirm_step">Submit</button>
                    </center>
                </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_download_phenotypes_workflow");
</script>


        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_keras_cnn_dialog" name="drone_imagery_keras_cnn_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryKerasCNNDialog" data-backdrop="static">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryKerasCNNDialog">Train and Predict Using Keras CNN Model</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <button class="btn btn-primary" id="drone_imagery_keras_cnn_train_link">Train Keras CNN Model Using Images and Phenotypes In Database</button>
            <br/><br/>
            <button class="btn btn-primary" id="drone_imagery_keras_cnn_predict_link">Predict Phenotypes Using Images and Trained Keras Model CNN</button>
            <br/><br/>
            <button class="btn btn-primary" id="drone_imagery_keras_cnn_autoencoder_vegetation_indices_link">Calculate NDVI and NDRE from Keras CNN Autoencoder Model</button>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_train_keras_cnn_dialog" name="drone_imagery_train_keras_cnn_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryTrainKerasCNNDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryTrainKerasCNNDialog">Train Keras CNN Model</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            









                
    
                
    
                
    
                
    
                
    
                
    
                
    
            
<div id="drone_imagery_train_keras_model_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Field Trial(s)</div></li>
      <li><div class="workflow-title">Trait Selection</div></li>
      <li><div class="workflow-title">Population Selection</div></li>
      <li><div class="workflow-title">Imaging Event Selection</div></li>
      <li><div class="workflow-title">Images Selection</div></li>
      <li><div class="workflow-title">Confirm</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">This workflow will guide you through training a keras model using images and phenotypes in the database.</h3></div>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the field trial(s) you are interested in</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial(s): </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_train_keras_cnn_trial_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_field_trial_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the trait you are interested in predicting</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Trait Phenotyped in the Selected Field Trial(s) To Predict: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_train_keras_cnn_trait_select_div"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Traits Phenotyped in the Selected Field Trial(s) As Auxiliary Trait(s): </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_train_keras_cnn_aux_trait_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_trait_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the population(s) you are specifically interested in predicting. Leave blank if you want to train on images from all germplasm in the selected field trial(s).</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-5 control-label">Population(s) to include in training (Leave blank to include images from all germplasm in the selected field trials): </label>
                            <div class="col-sm-7" >
                                <div id="drone_imagery_train_keras_cnn_population_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_population_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the imaging event(s) you are interested in using in the model</h3></div>


                    <table class="table table-bordered table-hover" id="drone_image_train_keras_drone_runs_table">
                        <thead>
                            <tr>
                                <th>Select <br/><input type="checkbox" id="drone_image_train_keras_drone_runs_table_select_all" checked>Select All</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_drone_run_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the types of images you are interested in using in the model</h3></div>


                    <table class="table table-bordered table-hover" id="drone_image_train_keras_plot_polygon_image_type_table">
                        <thead>
                            <tr>
                                <!--th>Select <br/><input type="checkbox" id="drone_image_train_keras_plot_polygon_image_type_table_select_all" checked>Select All</th-->
                                <th>Select</th>
                                <th>Field Trial</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Band Name</th>
                                <th>Imaging Event Band Type</th>
                                <th>Plot Polygon Type</th>
                                <th>Number of Images</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_plot_polygon_type_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Train the model!</h3></div>


                    <br/><br/>
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Model Type: </label>
                            <div class="col-sm-8" >
                                <select class="form-control" id="drone_image_train_keras_model_type" name="drone_image_train_keras_model_type" >
                                    <option value="KerasCNNSequentialSoftmaxCategorical">Keras CNN Sequential 16-32-64-128-512 Linear Regression</option>
                                    <option value="KerasCNNMLPExample">Keras CNN and MLP Example</option>
                                    <option value="SimpleKerasTunerCNNSequentialSoftmaxCategorical">Simple Keras Tuner CNN Sequential 16-32-64-128-512 Linear Regression</option>
                                    <option value="KerasTunerCNNSequentialSoftmaxCategorical">Keras Tuner CNN Sequential 16-32-64-128-512 Linear Regression</option>
                                    <option value="KerasCNNInceptionResNetV2">Keras CNN InceptionResNetV2 Linear Regression</option>
                                    <option value="KerasCNNLSTMDenseNet121ImageNetWeights">Keras LSTM DenseNet121 ImageNet Weights Linear Regression</option>
                                    <option value="KerasCNNInceptionResNetV2ImageNetWeights">Keras CNN Pre-Trained InceptionResNetV2 ImageNet Weights Linear Regression</option>
                                    <option value="KerasCNNDenseNet121ImageNetWeights">Keras DenseNet121 ImageNet Weights Linear Regression</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Model Name: </label>
                            <div class="col-sm-8" >
                                <input class="form-control" type="text" id="drone_image_train_keras_model_name" name="drone_image_train_keras_model_name" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Model Description: </label>
                            <div class="col-sm-8" >
                                <input class="form-control" type="text" id="drone_image_train_keras_model_desc" name="drone_image_train_keras_model_desc" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Genotyping Protocol for GRM: </label>
                            <div class="col-sm-8" >
                                <div id="drone_image_train_keras_model_genotyping_protocol_div"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Use Parents of Accessions For In-silico Hybrid: </label>
                            <div class="col-sm-8" >
                                <select class="form-control" id="drone_image_train_keras_model_use_parents_grm" name="drone_image_train_keras_model_use_parents_grm" >
                                    <option value="yes">Yes, GRM for parents of accessions if genotyped</option>
                                    <option value="no">No, GRM for accessions if genotyped</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_confirm_step">Train and Save Keras CNN Model</button>
                    </center>

                    <div id="drone_imagery_train_keras_model_results_div">
                    </div>
                </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_train_keras_model_workflow");
</script>


        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_predict_keras_cnn_dialog" name="drone_imagery_predict_keras_cnn_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryPredictKerasCNNDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryPredictKerasCNNDialog">Predict Phenotypes Using Trained Keras CNN Model</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            









                
    
                
    
                
    
                
    
                
    
                
    
                
    
            
<div id="drone_imagery_predict_keras_model_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Field Trial</div></li>
      <li><div class="workflow-title">Keras CNN Model Selection</div></li>
      <li><div class="workflow-title">Population Selection</div></li>
      <li><div class="workflow-title">Imaging Event Selection</div></li>
      <li><div class="workflow-title">Images Selection</div></li>
      <li><div class="workflow-title">Confirm</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">This workflow will guide you through predicting phenotypes from trained Kera CNN Models and images in the database.</h3></div>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the field trial(s) you are interested in sourcing images from for prediction</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_predict_keras_cnn_trial_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_field_trial_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the Keras CNN Model for prediction</h3></div>


                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Trained Keras CNN Model: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_predict_keras_cnn_model_select_div"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Traits Phenotyped in the Selected Field Trial(s) As Auxiliary Trait(s) (Currently Only For Mixed MLP/CNN Model): </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_predict_keras_cnn_aux_trait_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the population(s) you are specifically interested in predicting. Leave blank if you want to train on images from all germplasm in the selected field trial(s).</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-5 control-label">Population(s) to include in training (Leave blank to include images from all germplasm in the selected field trials): </label>
                            <div class="col-sm-7" >
                                <div id="drone_imagery_predict_keras_cnn_population_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_population_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the imaging event(s) you are interested in sourcing images from for prediction</h3></div>


                    <table class="table table-bordered table-hover" id="drone_image_predict_keras_drone_runs_table">
                        <thead>
                            <tr>
                                <th>Select <br/><input type="checkbox" id="drone_image_predict_keras_drone_runs_table_select_all" checked>Select All</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_drone_run_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the types of images you are interested sourcing images from for prediction</h3></div>


                    <table class="table table-bordered table-hover" id="drone_image_predict_keras_plot_polygon_image_type_table">
                        <thead>
                            <tr>
                                <!--th>Select <br/><input type="checkbox" id="drone_image_predict_keras_plot_polygon_image_type_table_select_all" checked>Select All</th-->
                                <th>Select</th>
                                <th>Field Trial</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Band Name</th>
                                <th>Imaging Event Band Type</th>
                                <th>Plot Polygon Type</th>
                                <th>Number of Images</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_plot_polygon_type_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Predict Phenotypes!</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Prediction Model: </label>
                            <div class="col-sm-9" >
                                <select class="form-control" id="drone_imagery_keras_model_prediction_select">
                                    <option value="standard_cnn">Standard CNN Prediction</option>
                                    <option value="cnn_prediction_mixed_model">CNN Prediction For Mixed Model Prediction</option>
                                </select>
                            </div>
                        </div>
                    </form>

                    <div id="drone_imagery_keras_model_prediction_cnn_prediction_mixed_model_div" style="display:none">
                        $$y_t = \beta_{CNN,pred} + rep + 1|\mbox{GermplasmName}$$
                    </div>
                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_confirm_step">Submit</button>
                    </center>

                    <div id="drone_imagery_predict_keras_model_results_div">
                    </div>
                </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_predict_keras_model_workflow");
</script>


        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_keras_cnn_autoencoder_vi_dialog" name="drone_imagery_keras_cnn_autoencoder_vi_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryAutoencoderKerasCNNVIDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryAutoencoderKerasCNNVIDialog">NDVI and NDRE from autoencoder Keras CNN</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            









                
    
                
    
                
    
                
    
                
    
                
    
                
    
                
    
            
<div id="drone_imagery_autoencoder_keras_model_vi_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Field Trial Training</div></li>
      <li><div class="workflow-title">Training</div></li>
      <li><div class="workflow-title">Images Training</div></li>
      <li><div class="workflow-title">Field Trial Prediction</div></li>
      <li><div class="workflow-title">Prediction</div></li>
      <li><div class="workflow-title">Images Prediction</div></li>
      <li><div class="workflow-title">Confirm</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">This workflow will guide you through extracted NDVI and NDRE values for autoencoder Keras CNN.</h3></div>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the field trial(s) you are interested in sourcing images from for training</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_autoencoder_keras_cnn_vi_trial_training_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_field_trial_training_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the imaging event(s) you are interested in sourcing images from for training</h3></div>


                    <table class="table table-bordered table-hover" id="drone_image_autoencoder_keras_vi_drone_runs_training_table">
                        <thead>
                            <tr>
                                <th>Select <br/><input type="checkbox" id="drone_image_autoencoder_keras_vi_drone_runs_training_table_select_all" checked>Select All</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_drone_run_training_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the types of images you are interested sourcing images from for training</h3></div>


                    <table class="table table-bordered table-hover" id="drone_image_autoencoder_keras_vi_plot_polygon_image_type_training_table">
                        <thead>
                            <tr>
                                <!--th>Select <br/><input type="checkbox" id="drone_image_autoencoder_keras_vi_plot_polygon_image_type_training_table_select_all" checked>Select All</th-->
                                <th>Select</th>
                                <th>Field Trial</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Band Name</th>
                                <th>Imaging Event Band Type</th>
                                <th>Plot Polygon Type</th>
                                <th>Number of Images</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_plot_polygon_type_training_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the field trial(s) you are interested in sourcing images from for prediction</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_autoencoder_keras_cnn_vi_trial_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_field_trial_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the imaging event(s) you are interested in sourcing images from for prediction</h3></div>


                    <table class="table table-bordered table-hover" id="drone_image_autoencoder_keras_vi_drone_runs_table">
                        <thead>
                            <tr>
                                <th>Select <br/><input type="checkbox" id="drone_image_autoencoder_keras_vi_drone_runs_table_select_all" checked>Select All</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_drone_run_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the types of images you are interested sourcing images from for prediction</h3></div>


                    <table class="table table-bordered table-hover" id="drone_image_autoencoder_keras_vi_plot_polygon_image_type_table">
                        <thead>
                            <tr>
                                <!--th>Select <br/><input type="checkbox" id="drone_image_autoencoder_keras_vi_plot_polygon_image_type_table_select_all" checked>Select All</th-->
                                <th>Select</th>
                                <th>Field Trial</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Band Name</th>
                                <th>Imaging Event Band Type</th>
                                <th>Plot Polygon Type</th>
                                <th>Number of Images</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_plot_polygon_type_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Calculate NDVI and NDRE Autoencoder Phenotypes</h3></div>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Autoencoder Model: </label>
                            <div class="col-sm-9" >
                                <select class="form-control" id="drone_imagery_keras_model_autoencoder_vi_select">
                                    <option value="keras_autoencoder_64_32_filters_16_latent">Keras Autoencoder</option>
                                </select>
                            </div>
                        </div>
                    </form>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_confirm_step">Submit</button>
                    </center>

                    <div id="drone_imagery_autoencoder_keras_vi_model_results_div">
                    </div>
                </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_autoencoder_keras_model_vi_workflow");
</script>


        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_standard_process_complete_dialog" name="drone_imagery_standard_process_complete_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryStandardProcessCompleteDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryStandardProcessCompleteDialog">Standard Process Complete</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <p>
                <span class="ui-icon ui-icon-circle-check" style="float: left; margin: 0 7px 50px 0;"></span>
                It will take time to finish processing your imaging event and calculating phenotypes for all plot polygon images, vegetative indices, and processing combinations. Once it is complete, the "Processing Icon" on the Manage->Aerial Imagery page will disappear for the imaging event.
            </p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Finish</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_plot_polygon_template_options_dialog" name="drone_imagery_plot_polygon_template_options_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryPlotPolygonTemplateDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryPlotPolygonTemplateDialog">Plot Template Options</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            


<a class="info_section_anchor" name="copypaste_template"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc39_offswitch', 'sgnc39_onswitch');
		Effects.hideElement('sgnc39_content');
		
		return false;"
		id="sgnc39_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Copy/Paste Template</a>
	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc39_onswitch', 'sgnc39_offswitch');
		Effects.showElement('sgnc39_content');
		
		return false;"
		id="sgnc39_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Copy/Paste Template</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Copy/Paste this template onto the image.&nbsp;</td></tr></table>

<span id="sgnc39_content" style=""><div class="infosectioncontent" >

                <button class="btn btn-primary" id="drone_imagery_plot_polygon_template_options_paste_click">Click To Paste</button>
            
</div>
</span>


            


<a class="info_section_anchor" name="delete_template"></a>

<table cellspacing="0" cellpadding="0" class="infosectionhead" summary=""><tr><td class="infosectiontitle">	<a class="collapser collapser_show" target="" href="" style=";;" onclick="
		Effects.swapElements('sgnc47_offswitch', 'sgnc47_onswitch');
		Effects.hideElement('sgnc47_content');
		
		return false;"
		id="sgnc47_offswitch"><img class="collapser_img" src="/documents/img/collapser_minus.png" />Delete Template</a>
	<a class="collapser collapser_show" target="" href="" style=";;display:none;" onclick="
		Effects.swapElements('sgnc47_onswitch', 'sgnc47_offswitch');
		Effects.showElement('sgnc47_content');
		
		return false;"
		id="sgnc47_onswitch"><img class="collapser_img" src="/documents/img/collapser_plus.png" />Delete Template</a>
</td><td class="infosectionsubtitle" role="button" tabindex="0">Remove this template.&nbsp;</td></tr></table>

<span id="sgnc47_content" style=""><div class="infosectioncontent" >

                <button class="btn btn-danger" id="drone_imagery_plot_polygon_template_options_remove_click">Click To Remove</button>
            
</div>
</span>


        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="drone_imagery_calculate_gdd_dialog" name="drone_imagery_calculate_gdd_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCalculateGDDDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCalculateGDDDialog">Calculate Growing Degree Days</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div class="well well-sm">
                Growing Degree Days (GDD) are calculated using the average high and low temperature for each day from planting date to the date of the imaging event. <a href="https://www.canr.msu.edu/news/understanding_growing_degree_days" target=_blank >More Information on GDD</a>. The average daily high and low temperature is fetched from the <a href="https://www.ncdc.noaa.gov/cdo-web/webservices/v2" target=_blank>NOAA NCDC</a>.
            </div>

            <div id="drone_imagery_calculate_gdd_time_div"></div>

            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-3 control-label">Base Temperature:</label>
                    <div class="col-sm-9" >
                        <select class="form-control" id="drone_imagery_calculate_gdd_base_temperature_input">
                            <option value="">Select One</option>
                            <option value="10">10F</option>
                            <option value="11">11F</option>
                            <option value="12">12F</option>
                            <option value="13">13F</option>
                            <option value="14">14F</option>
                            <option value="15">15F</option>
                            <option value="16">16F</option>
                            <option value="17">17F</option>
                            <option value="18">18F</option>
                            <option value="19">19F</option>
                            <option value="20">20F</option>
                            <option value="21">21F</option>
                            <option value="22">22F</option>
                            <option value="23">23F</option>
                            <option value="24">24F</option>
                            <option value="25">25F</option>
                            <option value="26">26F</option>
                            <option value="27">27F</option>
                            <option value="28">28F</option>
                            <option value="29">29F</option>
                            <option value="30">30F</option>
                            <option value="31">31F</option>
                            <option value="32">32F</option>
                            <option value="33">33F</option>
                            <option value="34">34F</option>
                            <option value="35">35F</option>
                            <option value="36">36F</option>
                            <option value="37">37F</option>
                            <option value="38">38F</option>
                            <option value="39">39F</option>
                            <option value="40">40F</option>
                            <option value="41">41F</option>
                            <option value="42">42F</option>
                            <option value="43">43F</option>
                            <option value="44">44F</option>
                            <option value="45">45F</option>
                            <option value="46">46F</option>
                            <option value="47">47F</option>
                            <option value="48">48F</option>
                            <option value="49">49F</option>
                            <option value="50">50F</option>
                            <option value="51">51F</option>
                            <option value="52">52F</option>
                            <option value="53">53F</option>
                            <option value="54">54F</option>
                            <option value="55">55F</option>
                            <option value="56">56F</option>
                            <option value="57">57F</option>
                            <option value="58">58F</option>
                            <option value="59">59F</option>
                            <option value="60">60F</option>
                            <option value="61">61F</option>
                            <option value="62">62F</option>
                            <option value="63">63F</option>
                            <option value="64">64F</option>
                            <option value="65">65F</option>
                            <option value="66">66F</option>
                            <option value="67">67F</option>
                            <option value="68">68F</option>
                            <option value="69">69F</option>
                            <option value="70">70F</option>
                            <option value="71">71F</option>
                            <option value="72">72F</option>
                            <option value="73">73F</option>
                            <option value="74">74F</option>
                            <option value="75">75F</option>
                            <option value="76">76F</option>
                            <option value="77">77F</option>
                            <option value="78">78F</option>
                            <option value="79">79F</option>
                            <option value="80">80F</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Formula:</label>
                    <div class="col-sm-9" >
                        <select class="form-control" id="drone_imagery_calculate_gdd_formula_input">
                            <option value="average_daily_temp_sum">GDD = sum_over_days ( ( (Max Temp + Min Temp)/2 ) - Base Temp)</option>
                        </select>
                    </div>
                </div>
            </div>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_upload_gdd_submit">Calculate</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_calculate_precipitation_dialog" name="drone_imagery_calculate_precipitation_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCalculatePrecipitationDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCalculatePrecipitationDialog">Calculate Precipitation Sum</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div class="well well-sm">
                The average daily precipitation is fetched from the <a href="https://www.ncdc.noaa.gov/cdo-web/webservices/v2" target=_blank>NOAA NCDC</a>.
            </div>

            <div id="drone_imagery_calculate_precipitation_time_div"></div>

            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-3 control-label">Formula:</label>
                    <div class="col-sm-9" >
                        <select class="form-control" id="drone_imagery_calculate_precipitation_sum_formula_input">
                            <option value="average_daily_precipitation_sum">Precipitation Sum = sum_over_days ( Average Daily Precipitation )</option>
                        </select>
                    </div>
                </div>
            </div>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_upload_precipitation_sum_submit">Calculate</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="drone_imagery_compare_images_dialog" name="drone_imagery_compare_images_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCompareImagesDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCompareImagesDialog">Compare Images</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            









                
    
                
    
                
    
                
    
                
    
                
    
            
<div id="drone_imagery_compare_images_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Comparison</div></li>
      <li><div class="workflow-title">Field Trial(s)</div></li>
      <li><div class="workflow-title">Imaging Event(s)</div></li>
      <li><div class="workflow-title">Imaging Event Band(s)</div></li>
      <li><div class="workflow-title">Image Selection</div></li>
      <li><div class="workflow-title">Result</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the comparison you are interested in</h3></div>

                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Comparison: </label>
                            <div class="col-sm-9" >
                                <select id="drone_imagery_compare_images_comparison_select" class="form-control">
                                    <option value="compare_pixel_values_two_images">Compare pixel values for two different aerial field images</option>
                                </select>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_compare_images_comparison_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the field trials you are interested in comparing</h3></div>


                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial(s): </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_compare_images_trial_select_div"></div>
                            </div>
                        </div>
                    </form>

                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_compare_images_field_trial_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the imaging events you are interested in comparing</h3></div>


                    <table class="table table-bordered table-hover" id="drone_image_compare_images_drone_runs_table">
                        <thead>
                            <tr>
                                <th>Select</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_compare_images_drone_runs_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the imaging event bands you are interested in comparing</h3></div>


                    <table class="table table-bordered table-hover" id="drone_image_compare_images_drone_run_bands_table">
                        <thead>
                            <tr>
                                <th>Select</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_compare_images_drone_run_bands_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Select the images you are interested in comparing</h3></div>


                    <table class="table table-bordered table-hover" id="drone_imagery_compare_images_images_type_table">
                        <thead>
                            <tr>
                                <th>Select</th>
                                <th>Field Trial</th>
                                <th>Imaging Event Name</th>
                                <th>Band Name</th>
                                <th>Band Type</th>
                                <th>Plot Polygon Type</th>
                                <th>Number of Images</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_compare_images_images_select_step">Go to Next Step</button>
                    </center>
                </li>
          <li>
                    <div id="pagetitle"><h3 id="pagetitle_h3">Image comparison results</h3></div>


                    <div id="drone_imagery_compare_images_result_div"></div>
                </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_compare_images_workflow");
</script>


        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_standard_process_additional_raw_images_dialog" name="upload_drone_imagery_standard_process_additional_raw_images_dialog" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryStandardProcessAdditionalRawImagesDialog">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="uploadDroneImageryStandardProcessAdditionalRawImagesDialog">Upload Raw Image Captures</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">

                    









                        
    
                        
    
                    
<div id="drone_imagery_additional_raw_images_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Uploaded Raw Aerial Image Captures</div></li>
      <li><div class="workflow-title">Upload New Aerial Image Captures</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                            <div id="pagetitle"><h3 id="pagetitle_h3">Already Uploaded Raw Aerial Image Captures</h3></div>


                            <div class="well well-sm">
                                <center>
                                <h4>Raw aerial image captures can be shared in a ZipFile.</h4>
                                </center>

                                <ul>
                                    <li>These ZipFiles are only for reference purposes and for distribution of the raw image captures.</li>
                                    <li>Raw image captures from any camera (e.g. MicaSense or color cameras) can be saved in a zipfile and shared here.</li>
                                    <li>The raw image captures are not stitched orthophotomosaic images.</li>
                                    <li>The ZipFile is not extracted or parsed by ImageBreed, it is only stored for distribution.</li>
                                </ul>
                            </div>

                            <div class="well well-sm">
                                <div id="upload_drone_imagery_additional_raw_images_div"></div>
                            </div>

                            <center>
                            <button class="btn btn-default" onclick="Workflow.complete(this); return false;" >Upload New Raw Image Captures</button>
                            </center>
                        </li>
          <li>
                            <div id="pagetitle"><h3 id="pagetitle_h3">Upload New Raw Aerial Image Captures</h3></div>


                            <div class="well well-sm">
                                <center>
                                <h4>Raw aerial image captures can be shared in a ZipFile.</h4>
                                </center>

                                <ul>
                                    <li>These ZipFiles are only for reference purposes and for distribution of the raw image captures.</li>
                                    <li>Raw image captures from any camera (e.g. MicaSense or color cameras) can be saved in a zipfile and shared here.</li>
                                    <li>The raw image captures are not stitched orthophotomosaic images.</li>
                                    <li>The ZipFile is not extracted or parsed by ImageBreed, it is only stored for distribution.</li>
                                </ul>
                            </div>

                            <div class="well well-sm">
                                <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_additional_raw_images_form" name="upload_drone_imagery_additional_raw_images_form" action="/drone_imagery/upload_drone_imagery_additional_raw_images" >
                                    <div class="form-group">
                                        <label class="col-sm-6 control-label">Aerial Image Captures ZipFile (.zip): </label>
                                        <div class="col-sm-6" >
                                            <input type="file" id="upload_drone_imagery_additional_raw_images_zipfile" name="upload_drone_imagery_additional_raw_images_zipfile" encoding="multipart/form-data" />
                                        </div>
                                    </div>

                                    <input type="hidden" id="upload_drone_imagery_additional_raw_images_private_company_id" name="upload_drone_imagery_additional_raw_images_private_company_id" value="" />
                                    <input type="hidden" id="upload_drone_imagery_additional_raw_images_private_company_is_private" name="upload_drone_imagery_additional_raw_images_private_company_is_private" value="" />
                                    <input type="hidden" id="upload_drone_imagery_additional_raw_images_drone_run_id" name="upload_drone_imagery_additional_raw_images_drone_run_id" value="" />
                                    <input type="hidden" id="upload_drone_imagery_additional_raw_images_field_trial_id" name="upload_drone_imagery_additional_raw_images_field_trial_id" value="" />

                                    <center>
                                        <button type="submit" class="btn btn-primary" name="upload_drone_imagery_additional_raw_images_submit" id="upload_drone_imagery_additional_raw_images_submit">Submit</button>
                                    </center>

                                </form>
                            </div>

                        </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_additional_raw_images_workflow");
</script>


                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_modal" name="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_modal" tabindex="-1" role="dialog" aria-labelledby="droneImageryRetrainMaskRCNNDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryRetrainMaskRCNNDialog">Retrain Mask R-CNN Model</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-3 control-label">Model Name (Must be unique):</label>
                    <div class="col-sm-9" >
                        <input class="form-control" type="text" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_model_name" name="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_model_name" >
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Model Description:</label>
                    <div class="col-sm-9" >
                        <input class="form-control" type="text" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_model_desc" name="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_model_desc" >
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Model Type:</label>
                    <div class="col-sm-9" >
                        <select class="form-control" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_model_type">
                            <option value="Mask R-CNN">Mask R-CNN</option>
                        </select>
                    </div>
                </div>
            </div>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn">Submit</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_view_imaging_vehicles_modal" name="drone_imagery_view_imaging_vehicles_modal" tabindex="-1" role="dialog" aria-labelledby="droneImageryImagingVehiclesDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryImagingVehiclesDialog">Available Imaging Vehicles</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <table class="table table-bordered table-hover" id="drone_imagery_view_imaging_vehicles_table">
                <thead>
                    <tr>
                        <th>Vehicles Name</th>
                        <th>Description</th>
                        <th>Company</th>
                        <th>Battery Usage</th>
                    </tr>
                </thead>
            </table>

            <button class="btn btn-primary" name="drone_run_imaging_vehicle_add_new">Add New Imaging Vehicle</button>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_geocoordinate_param_dialog" name="upload_drone_imagery_geocoordinate_param_dialog" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryGeocoordinateParamDialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="uploadDroneImageryGeocoordinateParamDialog">Add GeoCoordinate Params</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">

                    <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_geocoordinate_param_form" name="upload_drone_imagery_geocoordinate_param_form" action="/drone_imagery/upload_drone_imagery_geocoordinate_param">
                        <div class="form-group">
                            <label class="col-sm-6 control-label">WGS84/UTM GeoTIFF (.tif): (should be same dimensions as the originally uploaded reflectance maps)</label>
                            <div class="col-sm-6" >
                                <input type="file" id="upload_drone_imagery_geocoordinate_param_geotiff" name="upload_drone_imagery_geocoordinate_param_geotiff" encoding="multipart/form-data" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-6 control-label">GeoTIFF Type:</label>
                            <div class="col-sm-6" >
                                <select class="form-control" id="upload_drone_imagery_geocoordinate_param_type" name="upload_drone_imagery_geocoordinate_param_type">
                                    <option value="single">Single Channel GeoTIFF</option>
                                    <option value="rgb">RGB GeoTIFF</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-6 control-label">Save As Official Plot GeoJSON:</label>
                            <div class="col-sm-6" >
                                <select class="form-control" id="upload_drone_imagery_geocoordinate_param_overwrite_geojson" name="upload_drone_imagery_geocoordinate_param_overwrite_geojson">
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                        </div>
                        <input type="hidden" id="upload_drone_imagery_geocoordinate_param_field_trial_id" name="upload_drone_imagery_geocoordinate_param_field_trial_id" value="" />
                        <input type="hidden" id="upload_drone_imagery_geocoordinate_param_drone_run_id" name="upload_drone_imagery_geocoordinate_param_drone_run_id" value="" />

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_geocoordinate_param_submit" id="upload_drone_imagery_geocoordinate_param_submit">Submit</button>
                        </center>
                    </form><br/>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>




<div class="modal fade" id="upload_drone_imagery_dialog" name="upload_drone_imagery_dialog" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_form" name="upload_drone_imagery_form" action="/api/drone_imagery/upload_drone_imagery" >

                









                    
    
                    
    
                    
    
                    
    

                
<div id="drone_imagery_upload_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Field Trial</div></li>
      <li><div class="workflow-title">Imaging Event</div></li>
      <li><div class="workflow-title">Image Info</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">This workflow will guide you through uploading aerial images to the database</h3></div>

                        <ul>
                            <li>Your field trial must already be in the database before you can upload images for it. Please go to <a href="/breeders/trials">Manage->Field Trials</a> if it is not.</li>
                            <li><b>For Raw Image Captures</b>: If you have raw aerial images (.TIFF, .JPG, .PNG) that have not been stitched into an orthophotomosaic image of the whole field, your raw images should be uploaded using a zipfile (.zip). Include at least 25 images in the zipfile. OpenDroneMap will be used to stitch the orthophotos and digital surface maps (DSM). OpenDroneMap works for color RGB images and for MicaSense 5-channel multi-spectral images.</li>
                            <li><b>For Orthophotomosaics</b>: If you already have orthophotomosaic image(s) of your entire field from external software, you can upload those images. Upload orthomosaics as .TIFF, .PNG, or .JPG images. Orthophotomosaic images for multi-spectral cameras are expected to be perfectly super-imposable for all spectra.</li>
                        </ul>
                        <hr>
                        <p><b>Example Data:</b> <a href="https://imagebreed.org/static_content/imagebreed/AlfalfaExample35MeterMicasenseAerialDroneFlightRawCaptures.zip" download>MicaSense 5 Band Raw Captures (Unstitched TIFF image-captures) (Upload zipfile to ImageBreed and let OpenDroneMap stitch orthophotos and DSM.)</a></p>
                        <p><b>Example Data:</b> <a href="https://imagebreed.org/static_content/imagebreed/ExampleAerialDroneFlightMicasensePanel.zip" download>MicaSense 5 Band Panel Images (MicaSense calibration panel images.) (Upload zipfile for ImageBreed to calibrate Micasense raw-captures.)</a></p>
                        <p><b>Example Data:</b> <a href="https://imagebreed.org/static_content/imagebreed/AlfalfaExample35MeterMicasenseAerialDroneFlightOrthomosaics.zip" download>MicaSense 5 Band Previously Stitched Orthophotomosaic Images (PNG Files in provided zipfile. Can upload each band separately into ImageBreed.)</a></p>
                        <p><b>Example Data:</b> <a href="https://imagebreed.org/static_content/imagebreed/ExampleColorAerialDroneFlightRawCaptures.zip" download>Color Camera Raw Captures (Unstitched JPG image-captures) (Upload zipfile to ImageBreed and let OpenDroneMap stitch orthophotos and DSM.)</a></p>
                        <br/>
                        <center>
                        <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to upload a single imaging event</button>
                        <br/><br/>
                        <button class="btn btn-default" id="upload_drone_imagery_bulk_button" >Go to bulk upload of imaging events</button>
                        <br/><br/>
                        <button class="btn btn-default" id="upload_drone_imagery_bulk_previous_button" >Go to bulk upload of previously processed imaging events (GeoJSON defitions included)</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select your field trial</h3></div>


                        <div class="form-group">
                            <label class="col-sm-3 control-label">Company: </label>
                            <div class="col-sm-9" >
                                <div id="upload_drone_image_company_select_div"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="upload_drone_image_trial_select_div"></div>
                            </div>
                        </div>

                        <div id="upload_drone_image_field_trial_info">
                        </div>

                        <div id="upload_drone_image_field_trial_select_date_continue_div" style="display:none">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Date and Hour (Must be after the planting date):</label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_date" name="drone_run_date" title="drone_run_date" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Is this from a greenhouse, growth chamber, or fixed camera rig?:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_is_fixed_rig" name="drone_run_is_fixed_rig">
                                        <option value="No">No</option>
                                        <option value="Yes">Yes</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <center>
                        <button class="btn btn-primary" id="upload_drone_image_field_trial_select_date_continue">Go to Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Create a new imaging event</h3></div>


                        <table class="table table-bordered table-hover" id="drone_image_upload_drone_runs_table">
                            <thead>
                                <tr>
                                    <th>Select</th>
                                    <th>Imaging Event Name</th>
                                    <th>Imaging Event Type</th>
                                    <th>Imaging Event Description</th>
                                    <th>Imaging Event Date</th>
                                    <th>Drone Run GDD</th>
                                    <th>Sensor</th>
                                    <th>Field Trial Name</th>
                                    <th>Field Trial Description</th>
                                </tr>
                            </thead>
                        </table>

                        <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                        <input id="drone_run_id" name="drone_run_id" type="hidden" value=""/>
                        <input id="drone_image_upload_drone_run_band_stitching_odm_image_count" name="drone_image_upload_drone_run_band_stitching_odm_image_count" type="hidden" value=""/>

                        <br/>
                        <div id="drone_image_upload_create_drone_inputs">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Name(s) (Uniquely Generated): </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_name" name="drone_run_name" type="text" placeholder="e.g. Field Trial Name + Date of Flight" disabled/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_type" name="drone_run_type">
                                        <option value="">Select One</option>
                                        <option value="Aerial Medium to High Res">Medium to High Resolution Aerial Drone Image(s)</option>
                                        <option value="Aerial Low Res">Low Resolution Aerial Drone Image(s)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Sensor Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_image_upload_camera_info" name="drone_image_upload_camera_info">
                                        <option value="">Select One</option>
                                        <option value="micasense_5">Micasense 5-Channel Camera</option>
                                        <option value="micasense_10">Micasense 10-Channel Camera</option>
                                        <option value="ccd_color">RGB Color Camera</option>
                                        <!--option value="cmos_color">CMOS Sensor Color Image</option-->
                                        <option value="interpolated_elevation">Interpolated Elevation Image</option>
                                        <option value="em38_interpolated_ch1.0m">EM38 Interpolated CH1.0m Image</option>
                                        <option value="em38_interpolated_ch0.5m">EM38 Interpolated CH0.5m Image</option>
                                        <option value="em38_interpolated_ih1.0m">EM38 Interpolated IH1.0m Image</option>
                                        <option value="em38_interpolated_ih0.5m">EM38 Interpolated IH0.5m Image</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Vehicle: <button class="btn btn-sm btn-default" name="drone_run_imaging_vehicle_add_new" type="button">Add New Vehicle</button></label>
                                <div class="col-sm-9" >
                                    <div id="drone_run_imaging_vehicle_div"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Vehicle Battery Set:</label>
                                <div class="col-sm-9" >
                                    <div id="drone_run_imaging_vehicle_battery_div"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Description (e.g. flight altitude, flight plan name, overall weather conditions): </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_description" name="drone_run_description" type="text" />
                                </div>
                            </div>
                        </div>
                        <div id="drone_image_upload_create_drone_inputs_fixed_camera" style="display:none">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Fixed Camera Rig Name (For Fixed Camera Rigs e.g. Greenhouse or Growth Chambers) (Leave empty if not applicable):</label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_camera_rig_description" name="drone_run_camera_rig_description" title="drone_run_camera_rig_description" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Base Date and Hour (For Fixed Camera Rigs e.g. Greenhouse or Growth Chambers) (Useful for fixed camera rigs capturing different pieces of a field experiment, and the capture time is not synchronized across camera rigs, but the rigs are on identical intervals. Can be the time of the first image for the rig.) (Leave empty if not applicable):</label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_base_date" name="drone_run_base_date" title="drone_run_base_date" type="text" />
                                </div>
                            </div>
                        </div>
                        <br/>

                        <center>
                        <button class="btn btn-primary" id="drone_image_upload_drone_run_continue">Go to Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Type of Image to Upload</h3></div>


                        <div class="well">
                            <center><h4>Uploading already stitched orthophotomosaics or complete images of experimental field</h4></center>
                            <ul>
                                <li>You can choose to upload orthophotomosaic images (PNG, TIFF) created using external software (Pix4d, Agisoft, ODM, etc).</li>
                                <li>You can upload any image (PNG, TIFF, JPEG) which covers the entire experimental field, for example, interpolated soil data for altitude or electrical conductance EC measurements. Another example is for images from a phenotyping facility, greenhouse, or growth chamber.</li>
                                <li>Up to seven distinct spectral band images can be uploaded.</li>
                                <li>Images should be perfectly super-imposable for all spectra in an imaging event.</li>
                            </ul>
                        </div>
                        <div class="well">
                            <center><h4>Uploading raw images to stitch using OpenDroneMap</h4></center>
                            <ul>
                                <li>You can upload raw images (PNG, TIFF, JPEG) from a MicaSense 5-channel camera or a color image camera, for instance collected from an aerial drone, and then orthophotomosaics will be created using OpenDroneMap and saved in ImageBreed.</li>
                                <li>Raw images are uploaded using a zipfile (.zip). Place all images relevant to the imaging event into one zipfile. Include atleast 25 images in the zipfile.</li>
                                <li>Make sure there is >75% overlap in the images, so that the images can be properly assembled.</li>
                                <li>A digital surface map (DSM) will also be generated and saved as a black and white image. The DSM is a representation of height of objects.</li>
                            </ul>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label">Are you uploading orthophotomosaic(s) or complete image(s) of the experimental field?:</label>
                            <div class="col-sm-9" >
                                <select class="form-control" id="drone_image_upload_drone_run_band_stitching" name="drone_image_upload_drone_run_band_stitching">
                                    <option value="">Select One</option>
                                    <option value="no">Yes, I am uploading stitched orthomosaic(s) or complete image(s)</option>
                                    <option value="yes_open_data_map_stitch">No, I am uploading a zipfile of raw images to stitch using OpenDroneMap within ImageBreed</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group" id="drone_run_upload_drone_run_band_number_div">
                            <label class="col-sm-3 control-label">Number of Spectral Bands (Image Sets) To Upload:</label>
                            <div class="col-sm-9" >
                                <select class="form-control" id="drone_run_band_number" name="drone_run_band_number">
                                    <option value="">Select One</option>
                                    <option value="one_bw">One Black and White Image</option>
                                    <option value="one_rgb">One RGB Color Image</option>
                                    <option value="1">One Spectral Band or DSM raster</option>
                                    <option value="2">Two Separate Spectral Bands and/or DSM raster</option>
                                    <option value="3">Three Separate Spectral Bands and/or DSM raster</option>
                                    <option value="4">Four Separate Spectral Bands and/or DSM raster</option>
                                    <option value="5">Five Separate Spectral Bands</option>
                                    <option value="6">Six Separate Spectral Bands and/or DSM raster</option>
                                    <option value="7">Seven Separate Spectral Bands and/or DSM raster</option>
                                    <option value="8">Eight Separate Spectral Bands and/or DSM raster</option>
                                    <option value="9">Nine Separate Spectral Bands and/or DSM raster</option>
                                    <option value="10">Ten Separate Spectral Bands and/or DSM raster</option>
                                    <option value="11">Eleven Separate Spectral Bands and/or DSM raster</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group" id="drone_run_upload_drone_run_band_image_type_div">
                            <label class="col-sm-3 control-label">Orthophotomosaic Product From:</label>
                            <div class="col-sm-9" >
                                <select class="form-control" id="drone_run_upload_drone_run_band_image_type" name="drone_run_upload_drone_run_band_image_type">
                                    <option value="">Select One</option>
                                    <option value="None">None</option>
                                    <option value="Pix4D">Pix4D (Individual Band Images)</option>
                                    <option value="Agisoft">Agisoft (MultiBand Stack Image)</option>
                                    <option value="ODM">OpenDroneMap (MultiBand Stack Image)</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>

                        <center>
                        <button class="btn btn-primary" id="drone_image_upload_drone_run_band_continue">Go to Next Step</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow");
</script>


                <div id="upload_drone_imagery_verify_status"></div>
            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_odm" name="upload_drone_imagery_dialog_odm" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryODMDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryODMDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_odm_form" name="upload_drone_imagery_odm_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_odm" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Raw Image ZipFile</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Imaging Event Images ZipFile (.zip) (At least 25 images): </label>
                                <div class="col-sm-6" >
                                    <input type="file" id="upload_drone_images_zipfile_odm" name="upload_drone_images_zipfile" encoding="multipart/form-data" />
                                </div>
                            </div>

                            <!--div class="form-group"><label class="col-sm-6 control-label">Upload another zipfile after submit this one? Select Yes if all the images did not fit within the 2GB of the first zip file.: </label><div class="col-sm-6" ><select class="form-control" id="drone_image_upload_drone_run_band_stitching_odm_more_images" name="drone_image_upload_drone_run_band_stitching_odm_more_images"><option value="No">No</option><option value="Yes">Yes</option></select></div></div-->

                        </div>
                        <center>
                            <button class="btn btn-primary" id="upload_drone_imagery_select_images_odm" name="upload_drone_imagery_select_images_odm">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event to Process With OpenDroneMap</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_odm_submit" id="upload_drone_imagery_odm_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_odm");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_odm_micasense" name="upload_drone_imagery_dialog_odm_micasense" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryODMMicaSenseDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryODMMicaSenseDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_odm_micasense_form" name="upload_drone_imagery_odm_micasense_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_odm_micasense" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Raw Image ZipFile of MicaSense Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Imaging Event Images ZipFile (.zip) (At least 25 images): </label>
                                <div class="col-sm-6" >
                                    <input type="file" id="upload_drone_images_zipfile_odm_micasense" name="upload_drone_images_zipfile" encoding="multipart/form-data" />
                                </div>
                            </div>

                            <!--div class="form-group"><label class="col-sm-6 control-label">Upload another zipfile after submit this one? Select Yes if all the images did not fit within the 2GB of the first zip file.: </label><div class="col-sm-6" ><select class="form-control" id="drone_image_upload_drone_run_band_stitching_odm_more_images" name="drone_image_upload_drone_run_band_stitching_odm_more_images"><option value="No">No</option><option value="Yes">Yes</option></select></div></div-->

                            <div class="form-group">
                                <label class="col-sm-6 control-label">MicaSense Radiometric Calibration Images ZipFile (.zip): </label>
                                <div class="col-sm-6" >
                                    <input type="file" id="upload_drone_images_panel_zipfile_odm_micasense" name="upload_drone_images_panel_zipfile" encoding="multipart/form-data" />
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-6 control-label">Perform Radiometric Calibration: </label>
                                <div class="col-sm-6" >
                                    <select class="form-control" name="drone_image_upload_drone_run_band_stitching_odm_radiocalibration">
                                        <option value="Yes">Yes</option>
                                        <option value="No">No</option>
                                    </select>
                                </div>
                            </div>

                        </div>
                        <center>
                            <button class="btn btn-primary" id="upload_drone_imagery_select_images_odm_micasense" name="upload_drone_imagery_select_images_odm_micasense">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event to Process With OpenDroneMap</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_odm_micasense_submit" id="upload_drone_imagery_odm_micasense_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_odm_micasense");
</script>


            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_one_band" name="upload_drone_imagery_dialog_one_band" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryOneBandDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryOneBandDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_one_band_form" name="upload_drone_imagery_one_band_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_one_band" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto Raster Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_one_1" name="drone_run_band_coordinate_system_1">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_one_1" name="drone_run_band_description_1" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_one_1" name="drone_run_band_type_1">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_one_1" name="drone_run_band_stitched_ortho_image_1" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>If you used Pix4d, look into "/1_initial/report/report.pdf".<br/>If you used ODM, look into "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_one" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_one" id="upload_drone_imagery_select_images_one">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_one_band_submit" id="upload_drone_imagery_one_band_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_one_band");
</script>


            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_two_band" name="upload_drone_imagery_dialog_two_band" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryTwoBandDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryTwoBandDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_two_band_form" name="upload_drone_imagery_two_band_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_two_band" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto Raster Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_two_1" name="drone_run_band_coordinate_system_1">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_two_1" name="drone_run_band_description_1" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_two_1" name="drone_run_band_type_1">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_two_1" name="drone_run_band_stitched_ortho_image_1" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_two_2" name="drone_run_band_coordinate_system_2">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_two_2" name="drone_run_band_description_2" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_two_2" name="drone_run_band_type_2">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_two_2" name="drone_run_band_stitched_ortho_image_2" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>If you used Pix4d, look into "/1_initial/report/report.pdf".<br/>If you used ODM, look into "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_two" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_two" id="upload_drone_imagery_select_images_two">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_two_band_submit" id="upload_drone_imagery_two_band_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_two_band");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_three_band" name="upload_drone_imagery_dialog_three_band" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryThreeBandDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryThreeBandDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_three_band_form" name="upload_drone_imagery_three_band_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_three_band" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto Raster Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_three_1" name="drone_run_band_coordinate_system_1">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_three_1" name="drone_run_band_description_1" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_three_1" name="drone_run_band_type_1">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_three_1" name="drone_run_band_stitched_ortho_image_1" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_three_2" name="drone_run_band_coordinate_system_2">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_three_2" name="drone_run_band_description_2" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_three_2" name="drone_run_band_type_2">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_three_2" name="drone_run_band_stitched_ortho_image_2" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_three_3" name="drone_run_band_coordinate_system_3">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_three_3" name="drone_run_band_description_3" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_three_3" name="drone_run_band_type_3">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_three_3" name="drone_run_band_stitched_ortho_image_3" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>If you used Pix4d, look into "/1_initial/report/report.pdf".<br/>If you used ODM, look into "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_three" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_three" id="upload_drone_imagery_select_images_three">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_three_band_submit" id="upload_drone_imagery_three_band_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_three_band");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_four_band" name="upload_drone_imagery_dialog_four_band" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryFourBandDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryFourBandDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_four_band_form" name="upload_drone_imagery_four_band_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_four_band" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto Raster Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_four_1" name="drone_run_band_coordinate_system_1">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_four_1" name="drone_run_band_description_1" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_four_1" name="drone_run_band_type_1">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_four_1" name="drone_run_band_stitched_ortho_image_1" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_four_2" name="drone_run_band_coordinate_system_2">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_four_2" name="drone_run_band_description_2" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_four_2" name="drone_run_band_type_2">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_four_2" name="drone_run_band_stitched_ortho_image_2" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_four_3" name="drone_run_band_coordinate_system_3">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_four_3" name="drone_run_band_description_3" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_four_3" name="drone_run_band_type_3">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_four_3" name="drone_run_band_stitched_ortho_image_3" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_four_4" name="drone_run_band_coordinate_system_4">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_four_4" name="drone_run_band_description_4" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_four_4" name="drone_run_band_type_4">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_four_4" name="drone_run_band_stitched_ortho_image_4" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>If you used Pix4d, look into "/1_initial/report/report.pdf".<br/>If you used ODM, look into "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_four" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_four" id="upload_drone_imagery_select_images_four">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_four_submit" id="upload_drone_imagery_four_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_four_band");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_five_band" name="upload_drone_imagery_dialog_five_band" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryFiveBandDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryFiveBandDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_five_band_form" name="upload_drone_imagery_five_band_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_five_band" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto Raster Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_five_1" name="drone_run_band_coordinate_system_1">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_five_1" name="drone_run_band_description_1" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_five_1" name="drone_run_band_type_1">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_five_1" name="drone_run_band_stitched_ortho_image_1" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_five_2" name="drone_run_band_coordinate_system_2">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_five_2" name="drone_run_band_description_2" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_five_2" name="drone_run_band_type_2">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_five_2" name="drone_run_band_stitched_ortho_image_2" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_five_3" name="drone_run_band_coordinate_system_3">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_five_3" name="drone_run_band_description_3" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_five_3" name="drone_run_band_type_3">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_five_3" name="drone_run_band_stitched_ortho_image_3" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_five_4" name="drone_run_band_coordinate_system_4">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_five_4" name="drone_run_band_description_4" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_five_4" name="drone_run_band_type_4">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_five_4" name="drone_run_band_stitched_ortho_image_4" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_five_5" name="drone_run_band_coordinate_system_5">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_five_5" name="drone_run_band_description_5" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_five_5" name="drone_run_band_type_5">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_five_5" name="drone_run_band_stitched_ortho_image_5" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>If you used Pix4d, look into "/1_initial/report/report.pdf".<br/>If you used ODM, look into "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_five" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_five" id="upload_drone_imagery_select_images_five">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_five_submit" id="upload_drone_imagery_five_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_five_band");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_five_band_ODM" name="upload_drone_imagery_dialog_five_band_ODM" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryFiveBandODMDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryFiveBandODMDialog">Upload ODM Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_five_band_odm_form" name="upload_drone_imagery_five_band_odm_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_five_band_odm" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto ODM Raster Image</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">ODM Orthophotomosaic: (.tif) <br/><small>Since you used ODM, upload "/odm_orthophoto/odm_orthophoto.tif"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_five_odm" name="drone_run_band_stitched_ortho_image_odm" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>Since you used ODM, upload "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_five_odm" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_five_odm" id="upload_drone_imagery_select_images_five_odm">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_five_odm_submit" id="upload_drone_imagery_five_odm_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_five_band_odm");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_five_or_ten_band_agisoft" name="upload_drone_imagery_dialog_five_or_ten_band_agisoft" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryFiveOrTenBandAgisoftDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryFiveOrTenBandAgisoftDialog">Upload Agisoft Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_five_or_ten_band_agisoft_form" name="upload_drone_imagery_five_or_ten_band_agisoft_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_five_or_ten_band_agisoft" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto ODM Raster Image</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Agisoft Orthophotomosaic: (.tif) <br/><small>Since you used Agisoft, upload a MultiBand image stack</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_five_or_ten_agisoft" name="drone_run_band_stitched_ortho_image_agisoft" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional</label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_five_or_ten_agisoft" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_five_or_ten_agisoft" id="upload_drone_imagery_select_images_five_or_ten_agisoft">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_five_or_ten_agisoft_submit" id="upload_drone_imagery_five_or_ten_agisoft_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_five_or_ten_band_agisoft");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_six_band" name="upload_drone_imagery_dialog_six_band" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImagerySixBandDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImagerySixBandDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_six_band_form" name="upload_drone_imagery_six_band_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_six_band" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto Raster Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_six_1" name="drone_run_band_coordinate_system_1">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_six_1" name="drone_run_band_description_1" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_six_1" name="drone_run_band_type_1">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_six_1" name="drone_run_band_stitched_ortho_image_1" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_six_2" name="drone_run_band_coordinate_system_2">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_six_2" name="drone_run_band_description_2" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_six_2" name="drone_run_band_type_2">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_six_2" name="drone_run_band_stitched_ortho_image_2" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_six_3" name="drone_run_band_coordinate_system_3">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_six_3" name="drone_run_band_description_3" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_six_3" name="drone_run_band_type_3">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_six_3" name="drone_run_band_stitched_ortho_image_3" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_six_4" name="drone_run_band_coordinate_system_4">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_six_4" name="drone_run_band_description_4" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_six_4" name="drone_run_band_type_4">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_six_4" name="drone_run_band_stitched_ortho_image_4" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_six_5" name="drone_run_band_coordinate_system_5">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_six_5" name="drone_run_band_description_5" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_six_5" name="drone_run_band_type_5">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_six_5" name="drone_run_band_stitched_ortho_image_5" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_six_6" name="drone_run_band_coordinate_system_6">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_six_6" name="drone_run_band_description_6" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_six_6" name="drone_run_band_type_6">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_six_6" name="drone_run_band_stitched_ortho_image_6" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>If you used Pix4d, look into "/1_initial/report/report.pdf".<br/>If you used ODM, look into "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_six" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_six" id="upload_drone_imagery_select_images_six">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_six_submit" id="upload_drone_imagery_six_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_six_band");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_seven_band" name="upload_drone_imagery_dialog_seven_band" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImagerySevenBandDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImagerySevenBandDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_seven_band_form" name="upload_drone_imagery_seven_band_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_seven_band" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto Raster Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_seven_1" name="drone_run_band_coordinate_system_1">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_seven_1" name="drone_run_band_description_1" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_seven_1" name="drone_run_band_type_1">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_seven_1" name="drone_run_band_stitched_ortho_image_1" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_seven_2" name="drone_run_band_coordinate_system_2">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_seven_2" name="drone_run_band_description_2" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_seven_2" name="drone_run_band_type_2">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_seven_2" name="drone_run_band_stitched_ortho_image_2" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_seven_3" name="drone_run_band_coordinate_system_3">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_seven_3" name="drone_run_band_description_3" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_seven_3" name="drone_run_band_type_3">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_seven_3" name="drone_run_band_stitched_ortho_image_3" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_seven_4" name="drone_run_band_coordinate_system_4">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_seven_4" name="drone_run_band_description_4" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_seven_4" name="drone_run_band_type_4">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_seven_4" name="drone_run_band_stitched_ortho_image_4" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_seven_5" name="drone_run_band_coordinate_system_5">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_seven_5" name="drone_run_band_description_5" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_seven_5" name="drone_run_band_type_5">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_seven_5" name="drone_run_band_stitched_ortho_image_5" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_seven_6" name="drone_run_band_coordinate_system_6">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_seven_6" name="drone_run_band_description_6" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_seven_6" name="drone_run_band_type_6">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_seven_6" name="drone_run_band_stitched_ortho_image_6" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_seven_7" name="drone_run_band_coordinate_system_7">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_seven_7" name="drone_run_band_description_7" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_seven_7" name="drone_run_band_type_7">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_seven_7" name="drone_run_band_stitched_ortho_image_7" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>If you used Pix4d, look into "/1_initial/report/report.pdf".<br/>If you used ODM, look into "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_seven" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_seven" id="upload_drone_imagery_select_images_seven">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_seven_submit" id="upload_drone_imagery_seven_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_seven_band");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_eight_band" name="upload_drone_imagery_dialog_eight_band" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryEightBandDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryEightBandDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_eight_band_form" name="upload_drone_imagery_eight_band_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_eight_band" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto Raster Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eight_1" name="drone_run_band_coordinate_system_1">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eight_1" name="drone_run_band_description_1" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eight_1" name="drone_run_band_type_1">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eight_1" name="drone_run_band_stitched_ortho_image_1" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eight_2" name="drone_run_band_coordinate_system_2">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eight_2" name="drone_run_band_description_2" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eight_2" name="drone_run_band_type_2">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eight_2" name="drone_run_band_stitched_ortho_image_2" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eight_3" name="drone_run_band_coordinate_system_3">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eight_3" name="drone_run_band_description_3" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eight_3" name="drone_run_band_type_3">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eight_3" name="drone_run_band_stitched_ortho_image_3" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eight_4" name="drone_run_band_coordinate_system_4">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eight_4" name="drone_run_band_description_4" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eight_4" name="drone_run_band_type_4">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eight_4" name="drone_run_band_stitched_ortho_image_4" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eight_5" name="drone_run_band_coordinate_system_5">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eight_5" name="drone_run_band_description_5" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eight_5" name="drone_run_band_type_5">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eight_5" name="drone_run_band_stitched_ortho_image_5" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eight_6" name="drone_run_band_coordinate_system_6">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eight_6" name="drone_run_band_description_6" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eight_6" name="drone_run_band_type_6">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eight_6" name="drone_run_band_stitched_ortho_image_6" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eight_7" name="drone_run_band_coordinate_system_7">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eight_7" name="drone_run_band_description_7" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eight_7" name="drone_run_band_type_7">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eight_7" name="drone_run_band_stitched_ortho_image_7" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eight_8" name="drone_run_band_coordinate_system_8">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eight_8" name="drone_run_band_description_8" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eight_8" name="drone_run_band_type_8">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eight_8" name="drone_run_band_stitched_ortho_image_8" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>If you used Pix4d, look into "/1_initial/report/report.pdf".<br/>If you used ODM, look into "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_eight" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_eight" id="upload_drone_imagery_select_images_eight">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_eight_submit" id="upload_drone_imagery_eight_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_eight_band");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_nine_band" name="upload_drone_imagery_dialog_nine_band" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryNineBandDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryNineBandDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_nine_band_form" name="upload_drone_imagery_nine_band_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_nine_band" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto Raster Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_nine_1" name="drone_run_band_coordinate_system_1">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_nine_1" name="drone_run_band_description_1" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_nine_1" name="drone_run_band_type_1">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_nine_1" name="drone_run_band_stitched_ortho_image_1" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_nine_2" name="drone_run_band_coordinate_system_2">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_nine_2" name="drone_run_band_description_2" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_nine_2" name="drone_run_band_type_2">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_nine_2" name="drone_run_band_stitched_ortho_image_2" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_nine_3" name="drone_run_band_coordinate_system_3">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_nine_3" name="drone_run_band_description_3" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_nine_3" name="drone_run_band_type_3">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_nine_3" name="drone_run_band_stitched_ortho_image_3" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_nine_4" name="drone_run_band_coordinate_system_4">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_nine_4" name="drone_run_band_description_4" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_nine_4" name="drone_run_band_type_4">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_nine_4" name="drone_run_band_stitched_ortho_image_4" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_nine_5" name="drone_run_band_coordinate_system_5">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_nine_5" name="drone_run_band_description_5" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_nine_5" name="drone_run_band_type_5">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_nine_5" name="drone_run_band_stitched_ortho_image_5" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_nine_6" name="drone_run_band_coordinate_system_6">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_nine_6" name="drone_run_band_description_6" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_nine_6" name="drone_run_band_type_6">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_nine_6" name="drone_run_band_stitched_ortho_image_6" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_nine_7" name="drone_run_band_coordinate_system_7">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_nine_7" name="drone_run_band_description_7" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_nine_7" name="drone_run_band_type_7">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_nine_7" name="drone_run_band_stitched_ortho_image_7" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_nine_8" name="drone_run_band_coordinate_system_8">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_nine_8" name="drone_run_band_description_8" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_nine_8" name="drone_run_band_type_8">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_nine_8" name="drone_run_band_stitched_ortho_image_8" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_nine_9" name="drone_run_band_coordinate_system_9">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_nine_9" name="drone_run_band_description_9" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_nine_9" name="drone_run_band_type_9">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_nine_9" name="drone_run_band_stitched_ortho_image_9" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>If you used Pix4d, look into "/1_initial/report/report.pdf".<br/>If you used ODM, look into "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_nine" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_nine" id="upload_drone_imagery_select_images_nine">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_nine_submit" id="upload_drone_imagery_nine_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_nine_band");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_ten_band" name="upload_drone_imagery_dialog_ten_band" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryTenBandDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryTenBandDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_ten_band_form" name="upload_drone_imagery_ten_band_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_ten_band" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto Raster Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_ten_1" name="drone_run_band_coordinate_system_1">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_ten_1" name="drone_run_band_description_1" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_ten_1" name="drone_run_band_type_1">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_ten_1" name="drone_run_band_stitched_ortho_image_1" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_ten_2" name="drone_run_band_coordinate_system_2">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_ten_2" name="drone_run_band_description_2" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_ten_2" name="drone_run_band_type_2">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_ten_2" name="drone_run_band_stitched_ortho_image_2" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_ten_3" name="drone_run_band_coordinate_system_3">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_ten_3" name="drone_run_band_description_3" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_ten_3" name="drone_run_band_type_3">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_ten_3" name="drone_run_band_stitched_ortho_image_3" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_ten_4" name="drone_run_band_coordinate_system_4">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_ten_4" name="drone_run_band_description_4" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_ten_4" name="drone_run_band_type_4">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_ten_4" name="drone_run_band_stitched_ortho_image_4" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_ten_5" name="drone_run_band_coordinate_system_5">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_ten_5" name="drone_run_band_description_5" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_ten_5" name="drone_run_band_type_5">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_ten_5" name="drone_run_band_stitched_ortho_image_5" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_ten_6" name="drone_run_band_coordinate_system_6">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_ten_6" name="drone_run_band_description_6" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_ten_6" name="drone_run_band_type_6">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_ten_6" name="drone_run_band_stitched_ortho_image_6" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_ten_7" name="drone_run_band_coordinate_system_7">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_ten_7" name="drone_run_band_description_7" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_ten_7" name="drone_run_band_type_7">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_ten_7" name="drone_run_band_stitched_ortho_image_7" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_ten_8" name="drone_run_band_coordinate_system_8">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_ten_8" name="drone_run_band_description_8" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_ten_8" name="drone_run_band_type_8">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_ten_8" name="drone_run_band_stitched_ortho_image_8" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_ten_9" name="drone_run_band_coordinate_system_9">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_ten_9" name="drone_run_band_description_9" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_ten_9" name="drone_run_band_type_9">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_ten_9" name="drone_run_band_stitched_ortho_image_9" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_ten_10" name="drone_run_band_coordinate_system_10">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_ten_10" name="drone_run_band_description_10" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_ten_10" name="drone_run_band_type_10">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_ten_10" name="drone_run_band_stitched_ortho_image_10" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>If you used Pix4d, look into "/1_initial/report/report.pdf".<br/>If you used ODM, look into "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_ten" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_ten" id="upload_drone_imagery_select_images_ten">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_ten_submit" id="upload_drone_imagery_ten_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_ten_band");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_dialog_eleven_band" name="upload_drone_imagery_dialog_eleven_band" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryElevenBandDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryElevenBandDialog">Upload Aerial Imagery</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="pagetitle"><h3 id="pagetitle_h3">Select Image(s) to Upload</h3></div>


            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_eleven_band_form" name="upload_drone_imagery_eleven_band_form" action="/api/drone_imagery/upload_drone_imagery" >
                <input type="hidden" name="drone_run_field_trial_id" value="" >

                <!-- If drone run is selected above, the drone_run_project_id is passed to controller, negating need to create new drone run -->
                <input type="hidden" name="drone_run_id" value=""/>
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching_odm_image_count" value=""/>

                <input type="hidden" name="private_company_id" value="" />
                <input type="hidden" name="drone_run_name" value="" />
                <input type="hidden" name="drone_run_type" value="" />
                <input type="hidden" name="drone_image_upload_camera_info" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_id" value="" />
                <input type="hidden" name="drone_run_imaging_vehicle_battery_name" value="" />
                <input type="hidden" name="drone_run_description" value="" />
                <input type="hidden" name="drone_run_date" value="" />
                <input type="hidden" name="drone_run_camera_rig_description" value="" />
                <input type="hidden" name="drone_run_base_date" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_stitching" value="" />
                <input type="hidden" name="drone_image_upload_drone_run_band_type" value="" />
                <input type="hidden" name="drone_run_band_number" value="" />

                









                    
    
                    
    
                
<div id="drone_imagery_upload_workflow_eleven_band" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Select Images</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Select Orthophoto Raster Images</h3></div>


                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eleven_1" name="drone_run_band_coordinate_system_1">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eleven_1" name="drone_run_band_description_1" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eleven_1" name="drone_run_band_type_1">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eleven_1" name="drone_run_band_stitched_ortho_image_1" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eleven_2" name="drone_run_band_coordinate_system_2">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eleven_2" name="drone_run_band_description_2" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eleven_2" name="drone_run_band_type_2">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eleven_2" name="drone_run_band_stitched_ortho_image_2" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eleven_3" name="drone_run_band_coordinate_system_3">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eleven_3" name="drone_run_band_description_3" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eleven_3" name="drone_run_band_type_3">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eleven_3" name="drone_run_band_stitched_ortho_image_3" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eleven_4" name="drone_run_band_coordinate_system_4">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eleven_4" name="drone_run_band_description_4" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eleven_4" name="drone_run_band_type_4">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eleven_4" name="drone_run_band_stitched_ortho_image_4" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eleven_5" name="drone_run_band_coordinate_system_5">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eleven_5" name="drone_run_band_description_5" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eleven_5" name="drone_run_band_type_5">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eleven_5" name="drone_run_band_stitched_ortho_image_5" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eleven_6" name="drone_run_band_coordinate_system_6">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eleven_6" name="drone_run_band_description_6" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eleven_6" name="drone_run_band_type_6">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eleven_6" name="drone_run_band_stitched_ortho_image_6" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eleven_7" name="drone_run_band_coordinate_system_7">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eleven_7" name="drone_run_band_description_7" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eleven_7" name="drone_run_band_type_7">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eleven_7" name="drone_run_band_stitched_ortho_image_7" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eleven_8" name="drone_run_band_coordinate_system_8">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eleven_8" name="drone_run_band_description_8" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eleven_8" name="drone_run_band_type_8">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eleven_8" name="drone_run_band_stitched_ortho_image_8" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eleven_9" name="drone_run_band_coordinate_system_9">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eleven_9" name="drone_run_band_description_9" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eleven_9" name="drone_run_band_type_9">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eleven_9" name="drone_run_band_stitched_ortho_image_9" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eleven_10" name="drone_run_band_coordinate_system_10">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eleven_10" name="drone_run_band_description_10" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eleven_10" name="drone_run_band_type_10">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eleven_10" name="drone_run_band_stitched_ortho_image_10" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Coordinate System:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_coordinate_system_eleven_11" name="drone_run_band_coordinate_system_11">
                                        <option value="Pixels">Pixels (Raster Image .PNG, .JPG, .TIFF)</option>
                                        <option value="WGS84/UTM">WGS84/UTM (GeoTIFF Image .tif)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Description: </label>
                                <div class="col-sm-9" >
                                    <input class="form-control" id="drone_run_band_description_eleven_11" name="drone_run_band_description_11" type="text" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Imaging Event Band Type:</label>
                                <div class="col-sm-9" >
                                    <select class="form-control" id="drone_run_band_type_eleven_11" name="drone_run_band_type_11">
                                        <option value="Black and White Image">Black and White Image</option>
                                        <option value="RGB Color Image">RGB Color Image</option>
                                        <option value="Coastal Blue (410-480nm)">Coastal Blue (410-480nm)</option>
                                        <option value="Blue (450-520nm)">Blue (450-520nm)</option>
                                        <option value="Green (510-550nm)">Green (510-550nm)</option>
                                        <option value="Green (515-600nm)">Green (515-600nm)</option>
                                        <option value="Red (590-670nm)">Red (590-670nm)</option>
                                        <option value="Red (600-690nm)">Red (600-690nm)</option>
                                        <option value="Red Edge (680-720nm)">Red Edge (680-720nm)</option>
                                        <option value="Red Edge (690-750nm)">Red Edge (690-750nm)</option>
                                        <option value="Red Edge (720-760nm)">Red Edge (720-760nm)</option>
                                        <option value="NIR (780-3000nm)">NIR (780-3000nm)</option>
                                        <option value="MIR (3000-50000nm)">MIR (3000-50000nm)</option>
                                        <option value="FIR (50000-1000000nm)">FIR (50000-1000000nm)</option>
                                        <option value="Thermal IR (9000-14000nm)">Thermal IR (9000-14000nm)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Image: (.jpeg, .png, .tif)</label>
                                <div class="col-sm-9" >
                                    <input type="file" id="drone_run_band_stitched_ortho_image_eleven_11" name="drone_run_band_stitched_ortho_image_11" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthomosaic Report: (.pdf) Optional <br/><small>If you used Pix4d, look into "/1_initial/report/report.pdf".<br/>If you used ODM, look into "/odm_report/report.pdf"</small></label>
                                <div class="col-sm-6" >
                                    <input type="file" id="drone_run_band_stitched_ortho_report_eleven" name="drone_run_band_stitched_ortho_report" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                            <button class="btn btn-primary" name="upload_drone_imagery_select_images_eleven" id="upload_drone_imagery_select_images_eleven">Go To Next Step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit Imaging Event</h3></div>

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_eleven_submit" id="upload_drone_imagery_eleven_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_workflow_eleven_band");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_bulk_previous_dialog" name="upload_drone_imagery_bulk_previous_dialog" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryBulkPreviousDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryBulkPreviousDialog">Upload Aerial Imagery in Bulk For Previously Processed Imaging Events</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_bulk_previous_form" name="upload_drone_imagery_bulk_previous_form" action="/drone_imagery/upload_drone_imagery_bulk_previous">

                









                    
    
                    
    
                    
    
                    
    
                    
    

                
<div id="drone_imagery_upload_bulk_previous_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Define Imaging Events</div></li>
      <li><div class="workflow-title">Upload Orthophoto Images</div></li>
      <li><div class="workflow-title">Define Plot Polygons GeoJSON</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">This workflow will guide you through uploading aerial images to the database for previously processed imaging events</h3></div>

                        <p>Your field trial(s) must already be in the database before you can upload images for it. Please go to <a href="/breeders/trials">Manage->Field Trials</a> if it is not. Make sure the planting date is also set!</p>
                        <p>In this process first upload a spreadsheet detailing the individual imaging events, then upload a zipfile containing the orthophotomosaic images for the imaging events, and finally upload a zipfile containing GeoJSON files detailing the positions of the plot-polygons for the imaging events.</p>

                        <hr>
                        <p><b>Example Data:</b> <a href="https://imagebreed.org/static_content/imagebreed/RiceExampleRGBandDSMGeoJSONImagingEvent.xls" download>Imaging Event(s) Spreadsheet</a></p>
                        <p><b>Example Data:</b> <a href="https://imagebreed.org/static_content/imagebreed/RiceExampleRGBandDSMOrthophotosGeoTIFFs.zip" download>Imaging Event(s) Orthophoto GeoTIFFs (Includes an RGB and DSM GeoTIFF)</a></p>
                        <p><b>Example Data:</b> <a href="https://imagebreed.org/static_content/imagebreed/RiceExampleGeoJSONs.zip" download>Imaging Event(s) GeoJSON</a></p>

                        <br/>
                        <center>
                        <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to next step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Define Imaging Events in Bulk</h3></div>


                        <h4>The uploaded Excel file (.xls) must have the following header:</h4>

                        <table class="table table-bordered table-hover">
                            <tbody>
                                <tr>
                                    <th>Imaging Event Name</th>
                                    <th>Company</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                    <th>Date</th>
                                    <th>Vehicle Name</th>
                                    <th>Vehicle Battery Set</th>
                                    <th>Sensor</th>
                                    <th>Field Trial Name</th>
                                    <th>GeoJSON Filename</th>
                                    <th>Image Filenames</th>
                                    <th>Coordinate System</th>
                                    <th>Orthophoto Product Type</th>
                                    <th>Rotation Angle</th>
                                    <th>Base Date</th>
                                    <th>Camera Rig</th>
                                </tr>
                            </tbody>
                        </table>

                        <ul>
                            <li><b>Imaging Event Name</b>: (required) The globally unique name of the imaging event name (e.g. Field1Ortho01012020)</li>
                            <li><b>Company</b>: (required) The company name. This must already exist in the database.</li>
                            <li><b>Type</b>: (required) Either "Aerial Medium to High Res" or "Aerial Low Res" to indicate high or low resolution imagery.</li>
                            <li><b>Description</b>: (required) Free-text description of the imaging event and how it was flown and/or processed.</li>
                            <li><b>Date</b>: (required) The date and time of the imaging event in YYYY/MM/DD hh:mm:ss format (e.g. 2021/03/02 12:00:00)</li>
                            <li><b>Vehicle Name</b>: (required) The name of the aerial vehicle which was used. This must already exist in the database.</li>
                            <li><b>Vehicle Battery Set</b>: (optional) The name of the aerial vehicle battery set which was used.</li>
                            <li><b>Sensor</b>: (required) The type of camera sensor used. Must be either "MicaSense 5 Channel Camera", "CCD Color Camera", or "CMOS Color Camera".</li>
                            <li><b>Field Trial Name</b>: (required) The name of the field trial which was imaged. This must already exist in the database.</li>
                            <li><b>GeoJSON Filename</b>: (required) The name of the GeoJSON plot-polygon file that corresponds to this imaging event. This filename must exist in the uploaded GeoJSON zipfile. The same GeoJSON file can be used for multiple imaging events.</li>
                            <li><b>Image Filenames</b>: (required) Comma-separated list of image filenames that corresponds to this imaging event (e.g. Field1Ortho01012020__nir.tiff,Field1Ortho01012020__rgb.tiff,Field1Ortho01012020__bw.tiff). The image filenames must exist in the uploaded images zipfile. The same image file can be used for multiple imaging events.</li>
                            <li><b>Coordinate System</b>: (required) The coordinate system for the supplied images and GeoJSON files of this imaging event. Must be either "Pixels", "UTM", or "WGS84". If "UTM" or "WGS84" are used, then the uploaded orthophoto images must be GeoTIFFs containing the coordinate system AND the GeoJSON files must be of the same coordinate system. If "Pixels" is used, then the uploaded orthophoto images must be simple raster images (.tiff, .png., .jpeg) and not GeoTIFFs, AND the GeoJSON files must describe the pixel positions of the plot-polygons relative to the provided images. If "UTM" is used, the provided GeoJSON is in Northing/Easting (e.g. [312295.7451,1567250.9971]). If "WGS84" is used, the provided GeoJSON is in Longitude/Latitude (e.g. [121.260723987719, 14.1701625191025]). Currently only UTM is supported.</li>
                            <li><b>Orthophoto Product Type</b>: (required) The type of orthophotomosaic image type, described by the software that produced it. Must be either "None", "Pix4D", "Agisoft", "Other", or "ODM". If Pix4D, Other, or None then the images are assumed to be separated single band images. If Agisoft or ODM then the image is assumed to be a single MultiBand stack image.</li>
                            <li><b>Rotation Angle</b>: (optional) The clock-wise angle of rotation to apply to the uploaded imagery in degrees (0-360). Default is a 0 degree rotation. If a value is provided, the plot-polygon images are expected to be straight after rotation. If no value is provided or 0 is provided, then the plot-polgyon images will include only pixels that lie within the polygons; however, this is more computationally intensive.</li>
                            <li><b>Base Date</b>: (optional) The date and time to reference the imaging event in YYYY/MM/DD hh:mm:ss format (e.g. 2021/03/02 12:00:00). This is useful when separate, fixed, camera rigs are capturing different sections of the field experiment, and they are not capturing images at precisely the same time.</li>
                            <li><b>Camera Rig</b>: (optional) Free-text description of the camera rig. This is useful when separate, fixed, camera rigs are capturing different sections of the field experiment.</li>
                        </ul>

                        <br/>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Bulk Imaging Events (.xls): </label>
                                <div class="col-sm-6" >
                                    <input type="file" id="upload_drone_imagery_bulk_imaging_events_previous" name="upload_drone_imagery_bulk_imaging_events_previous" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                        <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to next step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Upload Orthophoto Images For Imaging Events in Bulk</h3></div>


                        <h4>Upload a zipfile (.zip) which contains orthophotos images (.tiff, .png, .jpeg) named in accordance with the "Image Filenames" defined in the previous step.</h4>
                        <h4>The images must be named as a concatenation with the spectral type of the image, with a double-underscore (__) in between (e.g. Field1Ortho01012020__blue).</h4>

                        <p>The allowed spectral types are: blue, green, red, rededge, nir, mir, fir, thir, rgb, and bw, corresponding to Blue (450-520nm), Green (515-600nm), Red (600-690nm), Red Edge (690-750nm), NIR (780-3000nm), MIR (3000-50000nm), FIR (50000-1000000nm), Thermal IR (9000-14000nm), RGB Color Image, and Black and White Image, respectively.</p>
                        <p>For an imaging event using a MicaSense 5-channel camera, the 5 separate orthophotos should be included in the zipfile and should be named as a concatenation with the spectral type (e.g. Field1Ortho01012020__blue, Field1Ortho01012020__green, Field1Ortho01012020__red, Field1Ortho01012020__rededge, and Field1Ortho01012020__nir).</p>
                        <p>Digital surface map (DSM) raster images can be uploaded as black and white images (e.g. Field1Ortho01012020__bw.png)</p>
                        <p>Do not upload duplicate spectral types for the same imaging event.</p>
                        <p>Images should be perfectly super-imposable for different spectra in the same imaging event.</p>
                        <p>The same image can be used for several imaging events.</p>
                        <p>If the coordinate system of the imaging event is "WGS84" or "UTM", then the orthophoto images must be GeoTIFFs (.tiff) containing the coordinate system. If the coordinate system is "Pixels", then the orthophoto images are simple raster images (.tiff, .jpeg, .png).</p>

                        <br/>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthophoto Images ZipFile (.zip): </label>
                                <div class="col-sm-6" >
                                    <input type="file" id="upload_drone_imagery_bulk_images_zipfile_previous" name="upload_drone_imagery_bulk_images_zipfile_previous" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                        <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to next step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Define Plot Polygons in Bulk</h3></div>


                        <h4>Upload a zipfile (.zip) which contains GeoJSON (.geojson) files detailing the coordinate positions of the plot-polygons.</h4>

                        <p>The spreadsheets should be named in accordance with the "GeoJSON Filenames" defined in the previous step.</p>
                        <p>The coordinate system (e.g. WGS84, UTM) of the orthophotos should be the same as the coordinate system defining the GeoJSON files. If the coordinate system is "Pixels", then the GeoJSON files should define the pixel positions of the plot-polygons relative to the uploaded images.</p>
                        <p>The same GeoJSON file can be used for several imaging events.</p>
                        <p>The GeoJSON UTM coordinates should be <b>Northing</b> followed by <b>Easting</b> (e.g. [312295.7451,1567250.9971]).</p>
                        <p>Only UTM and Pixel GeoJSON coordinate systems are currently suppoerted. In the future, WGS84 will be supported (e.g. [121.260723987719, 14.1701625191025]) as Longitude followed by Latitude</p>

                        <p>The GeoJSON should be the following format:
                        <br/>
                        <div class="well well-sm">
                        {<br/>
                            &nbsp;&nbsp;"type":"FeatureCollection",<br/>
                            &nbsp;&nbsp;"features":[<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;{<br/>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":"Feature",<br/>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"properties":{<br/>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ID":1<br/>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br/>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"geometry":{<br/>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":"Polygon",<br/>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"coordinates":[<br/>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br/>
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[312295.7451,1567250.9971],<br/>
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[312295.3147,1567250.5791],<br/>
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[312294.0605,1567251.8701],<br/>
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[312294.4909,1567252.2881],<br/>
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[312295.7451,1567250.9971]<br/>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;},<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;...## ALL PLOT-POLYGONS ##<br/>
                            &nbsp;&nbsp;]<br/>
                        }
                        </div>
                        </p>
                        <p>The ID field should give the unique plot number for the plot polygon. The plot number is defined in the field design as a unique number e.g. (1 to 100).</p>
                        <p>The coordinates should match the coordinate system of "WGS84/UTM" or "Pixels".</p>

                        <br/>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Plot-polygon GeoJSON ZipFile (.zip): </label>
                                <div class="col-sm-6" >
                                    <input type="file" id="upload_drone_imagery_bulk_geojson_zipfile_previous" name="upload_drone_imagery_bulk_geojson_zipfile_previous" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <hr>
                        <center>
                        <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to next step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit to database</h3></div>


                        <div id="upload_drone_imagery_bulk_previous_verify_status"></div>

                        <center>
                        <button type="submit" class="btn btn-info" name="upload_drone_imagery_bulk_previous_submit" id="upload_drone_imagery_bulk_previous_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_bulk_previous_workflow");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_bulk_dialog" name="upload_drone_imagery_bulk_dialog" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryBulkDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryBulkDialog">Upload Aerial Imagery in Bulk For Imaging Events</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_bulk_form" name="upload_drone_imagery_bulk_form" action="/drone_imagery/upload_drone_imagery_bulk">

                









                    
    
                    
    
                    
    
                    
    

                
<div id="drone_imagery_upload_bulk_workflow" class="workflow">
  <ol class="workflow-prog">
      <li><div class="workflow-title">Intro</div></li>
      <li><div class="workflow-title">Define Imaging Events</div></li>
      <li><div class="workflow-title">Upload Orthophoto Rasters</div></li>
      <li><div class="workflow-title">Submit</div></li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <ol class="workflow-content">
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">This workflow will guide you through uploading aerial images to the database</h3></div>

                        <p>Your field trial(s) must already be in the database before you can upload images for it. Please go to <a href="/breeders/trials">Manage->Field Trials</a> if it is not. Make sure the planting date is also set!</p>
                        <p>In this process first upload a spreadsheet detailing the individual imaging events, then upload a zipfile containing the orthophotomosaic images for the imaging events.</p>
                        <p>This workflow is only for uploading orthophotomosaic raster images, not for uploading raw captures to be stitched in orthophotomosaics.</p>

                        <hr>
                        <p><b>Example Data:</b> <a href="https://imagebreed.org/static_content/imagebreed/BulkUploadRGBRastersImagingEvents.xls" download>Imaging Event(s) Spreadsheet</a></p>
                        <p><b>Example Data:</b> <a href="https://imagebreed.org/static_content/imagebreed/BulkUploadRGBRastersOrthophotos.zip" download>Imaging Event(s) Orthophoto Raster Images (Includes .JPG and .PNG)</a></p>

                        <br/>
                        <center>
                        <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to next step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Define Imaging Events in Bulk</h3></div>


                        <h4>The uploaded Excel file (.xls) must have the following header:</h4>

                        <table class="table table-bordered table-hover">
                            <tbody>
                                <tr>
                                    <th>Imaging Event Name</th>
                                    <th>Company</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                    <th>Date</th>
                                    <th>Vehicle Name</th>
                                    <th>Vehicle Battery Set</th>
                                    <th>Sensor</th>
                                    <th>Field Trial Name</th>
                                    <th>Image Filenames</th>
                                    <th>Coordinate System</th>
                                    <th>Orthophoto Product Type</th>
                                    <th>Base Date</th>
                                    <th>Camera Rig</th>
                                </tr>
                            </tbody>
                        </table>

                        <ul>
                            <li><b>Imaging Event Name</b>: (required) The globally unique name of the imaging event name (e.g. Field1Ortho01012020)</li>
                            <li><b>Company</b>: (required) The company name. This must already exist in the database.</li>
                            <li><b>Type</b>: (required) Either "Aerial Medium to High Res" or "Aerial Low Res" to indicate high or low resolution imagery.</li>
                            <li><b>Description</b>: (required) Free-text description of the imaging event and how it was flown and/or processed.</li>
                            <li><b>Date</b>: (required) The date and time of the imaging event in YYYY/MM/DD hh:mm:ss format (e.g. 2021/03/02 12:00:00)</li>
                            <li><b>Vehicle Name</b>: (required) The name of the aerial vehicle which was used. This must already exist in the database.</li>
                            <li><b>Vehicle Battery Set</b>: (optional) The name of the aerial vehicle battery set which was used.</li>
                            <li><b>Sensor</b>: (required) The type of camera sensor used. Must be either "MicaSense 5 Channel Camera", "CCD Color Camera", or "CMOS Color Camera".</li>
                            <li><b>Field Trial Name</b>: (required) The name of the field trial which was imaged. This must already exist in the database.</li>
                            <li><b>Image Filenames</b>: (required) Comma-separated list of image filenames that corresponds to this imaging event (e.g. Field1Ortho01012020__nir.tiff,Field1Ortho01012020__rgb.tiff,Field1Ortho01012020__bw.tiff). The image filenames must exist in the uploaded images zipfile. The same image file can be used for multiple imaging events.</li>
                            <li><b>Coordinate System</b>: (required) The coordinate system for the supplied images of this imaging event. Must be either "WGS84", "UTM", or "Pixels". If "WGS84" or "UTM" is used, then the uploaded orthophoto images must be GeoTIFFs containing the coordinate system. If "WGS84" or "UTM" are used then the images have either Longitude/Latitude (e.g. [121.260723987719, 14.1701625191025]) or Northing/Easting (e.g. [312295.7451,1567250.9971]) encoded in the GeoTIFF. If "Pixels" is used, then the uploaded orthophoto images must be simple raster images (.tiff, .png., .jpeg) and not GeoTIFFs.</li>
                            <li><b>Orthophoto Product Type</b>: (required) The type of orthophotomosaic image type, described by the software that produced it. Must be either "None", "Pix4D", "Agisoft", "Other", or "ODM". If Pix4D, Other, or None then the images are assumed to be separated single band images. If Agisoft or ODM then the image is assumed to be a single MultiBand stack image.</li>
                            <li><b>Base Date</b>: (optional) The date and time to reference the imaging event in YYYY/MM/DD hh:mm:ss format (e.g. 2021/03/02 12:00:00). This is useful when separate, fixed, camera rigs are capturing different sections of the field experiment, and they are not capturing images at precisely the same time.</li>
                            <li><b>Camera Rig</b>: (optional) Free-text description of the camera rig. This is useful when separate, fixed, camera rigs are capturing different sections of the field experiment.</li>
                        </ul>

                        <br/>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Bulk Imaging Events (.xls): </label>
                                <div class="col-sm-6" >
                                    <input type="file" id="upload_drone_imagery_bulk_imaging_events" name="upload_drone_imagery_bulk_imaging_events" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                        <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to next step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Upload Orthophoto Rasters For Imaging Events in Bulk</h3></div>


                        <h4>Upload a zipfile (.zip) which contains orthophotos images (.tiff, .png, .jpeg) named in accordance with the "Image Filenames" defined in the previous step.</h4>
                        <h4>The images must be named as a concatenation with the spectral type of the image, with a double-underscore (__) in between (e.g. Field1Ortho01012020__blue).</h4>

                        <p>The allowed spectral types are: blue, green, red, rededge, nir, mir, fir, thir, rgb, and bw, corresponding to Blue (450-520nm), Green (515-600nm), Red (600-690nm), Red Edge (690-750nm), NIR (780-3000nm), MIR (3000-50000nm), FIR (50000-1000000nm), Thermal IR (9000-14000nm), RGB Color Image, and Black and White Image, respectively.</p>
                        <p>For an imaging event using a MicaSense 5-channel camera, the 5 separate orthophotos should be included in the zipfile and should be named as a concatenation with the spectral type (e.g. Field1Ortho01012020__blue, Field1Ortho01012020__green, Field1Ortho01012020__red, Field1Ortho01012020__rededge, and Field1Ortho01012020__nir).</p>
                        <p>Digital surface map (DSM) raster images can be uploaded as black and white images (e.g. Field1Ortho01012020__bw.png)</p>
                        <p>Do not upload duplicate spectral types for the same imaging event.</p>
                        <p>Images should be perfectly super-imposable for different spectra in the same imaging event.</p>
                        <p>The same image can be used for several imaging events.</p>
                        <p>If the coordinate system of the imaging event is "WGS84/UTM", then the orthophoto images must be GeoTIFFs (.tiff) containing the coordinate system. If the coordinate system is "Pixels", then the orthophoto images are simple raster images (.tiff, .jpeg, .png).</p>

                        <br/>
                        <div class="well well-sm">
                            <div class="form-group">
                                <label class="col-sm-6 control-label">Orthophoto Images ZipFile (.zip): </label>
                                <div class="col-sm-6" >
                                    <input type="file" id="upload_drone_imagery_bulk_images_zipfile" name="upload_drone_imagery_bulk_images_zipfile" encoding="multipart/form-data" />
                                </div>
                            </div>
                        </div>

                        <center>
                        <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to next step</button>
                        </center>
                    </li>
          <li>
                        <div id="pagetitle"><h3 id="pagetitle_h3">Submit to database</h3></div>


                        <div id="upload_drone_imagery_bulk_verify_status"></div>

                        <center>
                        <button type="submit" class="btn btn-primary" name="upload_drone_imagery_bulk_submit" id="upload_drone_imagery_bulk_submit">Submit. Click Once and Be Patient As This Can Take A Long Time.</button>
                        </center>
                    </li>
      </ol>
      <div class="workflow-pending-message">Complete!</div>
      <div class="workflow-complete-message">Complete!</div>
    </div>
  </div>
</div>
<script type="text/javascript">
  Workflow.init("#drone_imagery_upload_bulk_workflow");
</script>

            </form><br/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_run_imaging_vehicle_add_new_modal" name="drone_run_imaging_vehicle_add_new_modal" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryAddNewVehicleDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadDroneImageryAddNewVehicleDialog">Add New Imaging Vehicle</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-3 control-label">Imaging Vehicle Name (Must be unique): </label>
                    <div class="col-sm-9" >
                        <input class="form-control" id="drone_run_new_imaging_vehicle_name" name="drone_run_new_imaging_vehicle_name" type="text" placeholder="e.g. MyLabDrone1" />
                    </div>
                </div>
                <div id="new_imaging_vehicle_company_hide_div" style="display:none">
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Company: </label>
                        <div class="col-sm-9" >
                            <div id="drone_run_new_imaging_vehicle_company_div"></div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Imaging Vehicle Description: </label>
                    <div class="col-sm-9" >
                        <input class="form-control" id="drone_run_new_imaging_vehicle_desc" name="drone_run_new_imaging_vehicle_desc" type="text" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Battery Set Names (optional) (comma separated string of names e.g. blue,green,red,black): </label>
                    <div class="col-sm-9" >
                        <input class="form-control" id="drone_run_new_imaging_vehicle_battery_names" name="drone_run_new_imaging_vehicle_battery_names" type="text" placeholder="default_battery" value="default_battery"/>
                    </div>
                </div>
            </div>
            <br/><br/>
            <center>
                <button class="btn btn-primary" type="button" id="drone_run_new_imaging_vehicle_submit" name="drone_run_new_imaging_vehicle_submit">Submit</button>
            </center>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script defer="defer">

jQuery(document).ready(function() {

    get_select_box('private_companies', 'drone_run_new_imaging_vehicle_company_div', { 'name' : 'drone_run_new_imaging_vehicle_company_id', 'id' : 'drone_run_new_imaging_vehicle_company_id' });

    get_select_box('private_companies', 'upload_drone_image_company_select_div', { 'name' : 'drone_run_company_id', 'id' : 'drone_run_company_id' });
    get_select_box('trials', 'upload_drone_image_trial_select_div', { 'name' : 'drone_run_field_trial_id', 'id' : 'drone_run_field_trial_id', 'empty':1, 'multiple':1, 'private_company_id':1 });

    get_select_box('imaging_event_vehicles', 'drone_run_imaging_vehicle_div', {'id':'drone_run_imaging_vehicle_id', 'name':'drone_run_imaging_vehicle_id', 'private_company_id':1});

    var private_company_id;
    var upload_drone_imagery_vehicle_id;
    jQuery(document).on('change', '#drone_run_company_id', function(){
        private_company_id = jQuery(this).val();

        get_select_box('imaging_event_vehicles', 'drone_run_imaging_vehicle_div', {'id':'drone_run_imaging_vehicle_id', 'name':'drone_run_imaging_vehicle_id', 'private_company_id':private_company_id});

        get_select_box('trials', 'upload_drone_image_trial_select_div', { 'name' : 'drone_run_field_trial_id', 'id' : 'drone_run_field_trial_id', 'empty':1, 'multiple':1, 'private_company_id':private_company_id });
    });

    jQuery('#upload_drone_imagery_link').click( function() {
        jQuery('#upload_drone_imagery_dialog').modal("show");

        upload_drone_imagery_vehicle_id = jQuery('#drone_run_imaging_vehicle_id').val();
        if (upload_drone_imagery_vehicle_id) {
            _show_vehicle_battery_select();
        }
    });

    var upload_drone_imagery_field_trial_ids_string = '';
    var upload_drone_imagery_field_trial_names = [];
    jQuery(document).on('change', '#drone_run_field_trial_id', function() {
        var upload_drone_imagery_field_trial_ids = jQuery(this).val();
        upload_drone_imagery_field_trial_ids_string = upload_drone_imagery_field_trial_ids.join();

        if (upload_drone_imagery_field_trial_ids.length > 31) {
            alert('The maximum number of field trials you can select here is currently 31. Please contact us to change this, by increasing the trial layout table rendering number.');
            return false;
        }

        jQuery('#drone_image_upload_drone_runs_table').DataTable({
            destroy : true,
            ajax : '/api/drone_imagery/drone_runs?select_checkbox_name=upload_drone_imagery_drone_run_select&field_trial_ids='+upload_drone_imagery_field_trial_ids_string+'&disable=1'
        });

        jQuery.ajax({
            url : '/api/drone_imagery/check_field_trial_ids?field_trial_ids='+upload_drone_imagery_field_trial_ids_string,
            success: function(response){
                console.log(response);
                if (response.html) {
                    jQuery('#upload_drone_image_field_trial_info').html(response.html);
                }
                if (response.can_proceed == 1) {
                    jQuery('#upload_drone_image_field_trial_select_date_continue_div').show();
                    upload_drone_imagery_field_trial_names = response.field_trial_names;
                }
                else {
                    upload_drone_imagery_field_trial_ids_string = '';
                    upload_drone_imagery_field_trial_names = [];
                    jQuery('#upload_drone_image_field_trial_select_date_continue_div').hide();
                }
            },
            error: function(response){
                alert('Error checking field trial details!');
            }
        });
    });

    jQuery(document).on('change', '#drone_run_is_fixed_rig', function() {
        if(jQuery(this).val() == 'Yes') {
            jQuery('#drone_image_upload_create_drone_inputs_fixed_camera').show();
        }
        else {
            jQuery('#drone_image_upload_create_drone_inputs_fixed_camera').hide();
        }
        return false;
    });

    jQuery('#upload_drone_imagery_bulk_previous_button').click(function(e){
        e.preventDefault();
        jQuery('#upload_drone_imagery_bulk_previous_dialog').modal("show");
        return;
    });

    jQuery('#upload_drone_imagery_bulk_button').click(function(e){
        e.preventDefault();
        jQuery('#upload_drone_imagery_bulk_dialog').modal("show");
        return;
    });

    jQuery('#upload_drone_image_field_trial_select_date_continue').click(function(){
        if (upload_drone_imagery_field_trial_ids_string == '') {
            alert('Please select atleast one field trial first!');
            return false;
        }
        else {
            if (jQuery('#drone_run_date').val() == ''){
                alert('Please give an imaging event date!');
            }
            else {
                jQuery('#new_imaging_vehicle_company_hide_div').hide();
                upload_drone_imagery_vehicle_id = jQuery('#drone_run_imaging_vehicle_id').val();
                if (upload_drone_imagery_vehicle_id) {
                    _show_vehicle_battery_select();
                }

                var field_trial_names_generated = [];
                var drone_run_date = jQuery('#drone_run_date').val();
                var drone_run_date_gen = drone_run_date.replace(/\//g, '');
                for (var i=0; i<upload_drone_imagery_field_trial_names.length; i++) {
                    var drone_run_name_gen = upload_drone_imagery_field_trial_names[i]+"_"+drone_run_date_gen;
                    drone_run_name_gen = drone_run_name_gen.replace(/ /g, '_');
                    drone_run_name_gen = drone_run_name_gen.replace(/\,/g, '_');

                    jQuery.ajax({
                        url : '/api/drone_imagery/upload_drone_imagery_check_drone_name?drone_run_name='+drone_run_name_gen,
                        success: function(response){
                            console.log(response);

                            if (response.success) {
                                console.log("Checked "+drone_run_name_gen);
                            }
                            else if (response.error) {
                                alert("Error: " + response.error);

                                Workflow.focus('#drone_imagery_upload_workflow', 1);
                            }
                        },
                        error: function(response) {
                            alert('Error checking drone run name!');
                        }
                    });

                    field_trial_names_generated.push(drone_run_name_gen);
                }
                var field_trial_names_generated_string = field_trial_names_generated.join();
                jQuery('#drone_run_name').val(field_trial_names_generated_string);

                Workflow.complete('#upload_drone_image_field_trial_select_date_continue');
                Workflow.focus('#drone_imagery_upload_workflow', 2);
            }
        }
        return false;
    });

    var drone_run_date_element = jQuery("#drone_run_date");
    set_daterangepicker_default (drone_run_date_element);
    jQuery('input[title="drone_run_date"]').daterangepicker(
        {
            "singleDatePicker": true,
            "showDropdowns": true,
            "autoUpdateInput": false,
            "timePicker": true,
            "timePicker24Hour": true,
        },
        function(start){
            drone_run_date_element.val(start.format('YYYY/MM/DD HH:mm:ss'));
        }
    );

    //var drone_run_base_date_element = jQuery("#drone_run_base_date");
    //jQuery('input[title="drone_run_base_date"]').daterangepicker(
    //    {
    //        "singleDatePicker": true,
    //        "showDropdowns": true,
    //        "autoUpdateInput": false,
    //        "timePicker": true,
    //        "timePicker24Hour": true,
    //    },
    //    function(start){
    //        drone_run_base_date_element.val(start.format('YYYY/MM/DD HH:mm:ss'));
    //    }
    //);

    function _show_vehicle_battery_select() {
        jQuery.ajax({
            url : '/api/drone_imagery/get_vehicle?vehicle_id='+upload_drone_imagery_vehicle_id,
            success: function(response){
                console.log(response);
                if (response.success) {
                    var html = "<select class='form-control' name='drone_run_imaging_vehicle_battery_name' id='drone_run_imaging_vehicle_battery_name'>";
                    for (var name in response.vehicles[0].properties.batteries) {
                        if (response.vehicles[0].properties.batteries.hasOwnProperty(name)) {
                            if (response.vehicles[0].properties.batteries[name]['obsolete'] == 0) {
                                html = html + "<option value='"+name+"'>"+name+"</option>";
                            }
                        }
                    }
                    html = html + "</select>";
                    jQuery('#drone_run_imaging_vehicle_battery_div').html(html);
                }
                else if (response.error) {
                    alert(response.error);
                }
                return false;
            },
            error: function(response){
                alert('Error getting vehicle!');
            }
        });
    }

    jQuery('button[name="drone_run_imaging_vehicle_add_new"]').click(function(e){
        e.preventDefault();
        if (!private_company_id) {
            jQuery('#new_imaging_vehicle_company_hide_div').show();
        }

        jQuery('#drone_run_imaging_vehicle_add_new_modal').modal('show');
    });

    jQuery('#drone_run_new_imaging_vehicle_submit').click(function(e){
        e.preventDefault();
        var vehicle_name = jQuery('#drone_run_new_imaging_vehicle_name').val();
        var vehicle_desc = jQuery('#drone_run_new_imaging_vehicle_desc').val();
        var vehicle_batteries = jQuery('#drone_run_new_imaging_vehicle_battery_names').val();

        if (!private_company_id) {
            private_company_id = jQuery('#drone_run_new_imaging_vehicle_company_id').val();
        }

        if (vehicle_name == '' || vehicle_desc == '') {
            alert('Please give a vehicle name and description!');
            return false;
        }
        if (vehicle_batteries == '') {
            alert('Please give at least default battery name!');
            return false;
        }

        jQuery.ajax({
            url : '/api/drone_imagery/new_imaging_vehicle',
            type : 'POST',
            contentType: 'application/json',
            data : JSON.stringify({
                'vehicle_name': vehicle_name,
                'vehicle_description': vehicle_desc,
                'battery_names': vehicle_batteries,
                'private_company_id': private_company_id
            }),
            success: function(response){
                console.log(response);
                if (response.error) {
                    alert(response.error);
                }
                else if (response.success) {
                    alert('Vehicle added!');
                    get_select_box('imaging_event_vehicles', 'drone_run_imaging_vehicle_div', {'id':'drone_run_imaging_vehicle_id', 'name':'drone_run_imaging_vehicle_id', 'private_company_id':private_company_id});
                    upload_drone_imagery_vehicle_id = response.new_vehicle_id;
                    _show_vehicle_battery_select();
                }

                return false;
            },
            error: function(response){
                console.log(response);
                alert('Error adding new imaging vehicle!');
            }
        });
    });

    jQuery(document).on('change', '#drone_run_imaging_vehicle_id', function(){
        upload_drone_imagery_vehicle_id = jQuery(this).val();
        _show_vehicle_battery_select();
    });

    jQuery('#drone_image_upload_drone_run_continue').click(function(e){
        e.preventDefault();

        var selected = [];
        jQuery('input[name="upload_drone_imagery_drone_run_select"]:checked').each(function() {
            selected.push(jQuery(this).val());
        });
        if (selected.length > 1){
            alert('Only select one drone run!');
        } else {
            if (selected.length == 0 && jQuery('#drone_run_name').val() == ''){
                alert('Select an imaging event or create a new one!');
            } else if (selected.length == 1 && jQuery('#drone_run_name').val() != ''){
                alert('If you selected an imaging event, do not try to make a new one at the same time!');
            } else if (selected.length == 1 && jQuery('#drone_run_name').val() == ''){
                jQuery('#drone_run_id').val(selected[0]);
                Workflow.complete('#drone_image_upload_drone_run_continue');
                Workflow.focus('#drone_imagery_upload_workflow', 3);
            } else if (selected.length == 0 && jQuery('#drone_run_name').val() != '') {
                if (jQuery('#drone_run_description').val() == ''){
                    alert('Please give an imaging event description.');
                } else if (jQuery('#drone_run_date').val() == ''){
                    alert('Please give an imaging event date.');
                } else if (jQuery('#drone_run_type').val() == ''){
                    alert('Please select an imaging event type');
                } else if (jQuery('#drone_image_upload_camera_info').val() == ''){
                    alert('Please select an imaging event sensor type');
                } else if (jQuery('#drone_run_imaging_vehicle_id').val() == '' || jQuery('#drone_run_imaging_vehicle_battery_name').val() == '') {
                    alert('Please select an imaging event vehicle and the associated battery! You can create a new vehicle if needed e.g. default_uav');
                    return false;
                } else {
                    jQuery('#drone_run_id').val('');

                    Workflow.complete('#drone_image_upload_drone_run_continue');
                    Workflow.focus('#drone_imagery_upload_workflow', 3);
                    return false;
                }
            }
        }
        return false;
    });

    jQuery('#drone_image_upload_drone_run_band_stitching').change(function() {
        if (jQuery(this).val() == 'no') {
            jQuery('#drone_run_upload_drone_run_band_number_div').show();
            jQuery('#drone_run_upload_drone_run_band_image_type_div').show();
        }
        else {
            jQuery('#drone_run_upload_drone_run_band_number_div').hide();
            jQuery('#drone_run_upload_drone_run_band_image_type_div').hide();
        }
    });

    var drone_run_band_unstitched = '';
    var drone_run_band_image_type = '';
    var new_drone_run_band_stitching_odm_more_images = '';
    jQuery('#drone_image_upload_drone_run_band_continue').click(function(e){
        e.preventDefault();

        var drone_run_band_number = jQuery('#drone_run_band_number').val();
        drone_run_band_unstitched = jQuery('#drone_image_upload_drone_run_band_stitching').val();
        drone_run_band_image_type = jQuery('#drone_run_upload_drone_run_band_image_type').val();
        var drone_run_camera_info = jQuery('#drone_image_upload_camera_info').val();
        var drone_run_id = jQuery('#drone_run_id').val();
        var drone_run_name = jQuery('#drone_run_name').val();
        var drone_run_company_id = jQuery('#drone_run_company_id').val();
        var drone_run_description = jQuery('#drone_run_description').val();
        var drone_run_date = jQuery('#drone_run_date').val();
        var drone_run_type = jQuery('#drone_run_type').val();
        var drone_run_vehicle_id = jQuery('#drone_run_imaging_vehicle_id').val();
        var drone_run_vehicle_battery_name = jQuery('#drone_run_imaging_vehicle_battery_name').val();
        var drone_run_camera_rig_description = jQuery('#drone_run_camera_rig_description').val();
        var drone_run_base_date = jQuery('#drone_run_base_date').val();

        if (drone_run_band_unstitched == '') {
            alert('Please select whether you are uploading orthomosaic images.');
            return false;
        }
        if (drone_run_id == '' && drone_run_camera_info == '') {
            alert('Please select the sensor type used.');
            return false;
        }

        if (drone_run_vehicle_id == '' || drone_run_vehicle_battery_name == '') {
            alert('Please select an imaging event vehicle and the associated battery! You can create a new vehicle if needed e.g. default_battery');
            return false;
        }
        if (drone_run_camera_info == '') {
            alert('Please select the camera type used.');
            return false;
        }

        console.log(drone_run_band_unstitched);
        console.log(drone_run_band_number);
        console.log(drone_run_camera_info);

        jQuery('input[name="drone_run_field_trial_id"]').val(upload_drone_imagery_field_trial_ids_string);
        jQuery('input[name="private_company_id"]').val(drone_run_company_id);
        jQuery('input[name="drone_run_name"]').val(drone_run_name);
        jQuery('input[name="drone_run_type"]').val(drone_run_type);
        jQuery('input[name="drone_image_upload_camera_info"]').val(drone_run_camera_info);
        jQuery('input[name="drone_run_imaging_vehicle_id"]').val(drone_run_vehicle_id);
        jQuery('input[name="drone_run_imaging_vehicle_battery_name"]').val(drone_run_vehicle_battery_name);
        jQuery('input[name="drone_run_description"]').val(drone_run_description);
        jQuery('input[name="drone_run_date"]').val(drone_run_date);
        jQuery('input[name="drone_run_camera_rig_description"]').val(drone_run_camera_rig_description);
        jQuery('input[name="drone_run_base_date"]').val(drone_run_base_date);
        jQuery('input[name="drone_image_upload_drone_run_band_stitching"]').val(drone_run_band_unstitched);
        jQuery('input[name="drone_image_upload_drone_run_band_type"]').val(drone_run_band_image_type);
        jQuery('input[name="drone_run_band_number"]').val(drone_run_band_number);

        if (drone_run_band_unstitched == 'no') {
            if (drone_run_band_number == '') {
                alert('Please select the number of imaging event bands you will upload!');
                return false;
            }
            else if (drone_run_band_image_type == '') {
                alert('Please select an option for how the orthophotomosaic was produced.');
                return false;
            }
            else {
                if (drone_run_band_number == 5 && drone_run_camera_info == 'micasense_5'){
                    jQuery('select[name="drone_run_band_type_1"] option[value="Blue (450-520nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_2"] option[value="Green (515-600nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_3"] option[value="Red (600-690nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_4"] option[value="NIR (780-3000nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_5"] option[value="Red Edge (690-750nm)"]').attr('selected','selected');
                }
                else if (drone_run_band_number == 10 && drone_run_camera_info == 'micasense_10'){
                    jQuery('select[name="drone_run_band_type_1"] option[value="Blue (450-520nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_2"] option[value="Green (515-600nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_3"] option[value="Red (600-690nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_4"] option[value="NIR (780-3000nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_5"] option[value="Red Edge (690-750nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_6"] option[value="Coastal Blue (410-480nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_7"] option[value="Green (510-550nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_8"] option[value="Red (590-670nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_9"] option[value="Red Edge (680-720nm)"]').attr('selected','selected');
                    jQuery('select[name="drone_run_band_type_10"] option[value="Red Edge (720-760nm)"]').attr('selected','selected');
                }
            }

            if (drone_run_band_number == 1 || drone_run_band_number == 'one_bw' || drone_run_band_number == 'one_rgb') {
                jQuery('#upload_drone_imagery_dialog_one_band').modal('show');
            }
            if (drone_run_band_number == 2) {
                jQuery('#upload_drone_imagery_dialog_two_band').modal('show');
            }
            if (drone_run_band_number == 3) {
                jQuery('#upload_drone_imagery_dialog_three_band').modal('show');
            }
            if (drone_run_band_number == 4) {
                jQuery('#upload_drone_imagery_dialog_four_band').modal('show');
            }
            if (drone_run_band_number == 5) {
                if (drone_run_band_image_type == 'ODM') {
                    jQuery('#upload_drone_imagery_dialog_five_band_ODM').modal('show');
                }
                else if (drone_run_band_image_type == 'Agisoft') {
                    jQuery('#upload_drone_imagery_dialog_five_or_ten_band_agisoft').modal('show');
                }
                else {
                    jQuery('#upload_drone_imagery_dialog_five_band').modal('show');
                }
            }
            if (drone_run_band_number == 6) {
                jQuery('#upload_drone_imagery_dialog_six_band').modal('show');
            }
            if (drone_run_band_number == 7) {
                jQuery('#upload_drone_imagery_dialog_seven_band').modal('show');
            }
            if (drone_run_band_number == 8) {
                jQuery('#upload_drone_imagery_dialog_eight_band').modal('show');
            }
            if (drone_run_band_number == 9) {
                jQuery('#upload_drone_imagery_dialog_nine_band').modal('show');
            }
            if (drone_run_band_number == 10) {
                if (drone_run_band_image_type == 'Agisoft') {
                    jQuery('#upload_drone_imagery_dialog_five_or_ten_band_agisoft').modal('show');
                }
                else {
                    jQuery('#upload_drone_imagery_dialog_ten_band').modal('show');
                }
            }
            if (drone_run_band_number == 11) {
                jQuery('#upload_drone_imagery_dialog_eleven_band').modal('show');
            }
        }
        else if (drone_run_band_unstitched == 'yes_open_data_map_stitch') {
            if (drone_run_camera_info == 'micasense_5') {
                jQuery('#upload_drone_imagery_dialog_odm_micasense').modal('show');
            }
            else if (drone_run_camera_info == 'ccd_color') {
                jQuery('#upload_drone_imagery_dialog_odm').modal('show');
            }
            else {
                alert('ODM can only stitch MicaSense 5-channel Images or RGB Color Images. Please only select one of those camera sensors to use ODM.');
            }
        }

        return false;
    });

    jQuery('#upload_drone_imagery_select_images_one').click(function(e){
        e.preventDefault();
        if (jQuery('#drone_run_band_description_one_1').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_one_1').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_one_1').val() == '') {
            alert('Please select an image');
            return;
        }

        Workflow.complete('#upload_drone_imagery_select_images_one');
        Workflow.focus('#drone_imagery_upload_workflow_one_band', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_select_images_two').click(function(e){
        e.preventDefault();
        if (jQuery('#drone_run_band_description_two_1').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_two_1').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_two_1').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_two_2').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_two_2').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_two_2').val() == '') {
            alert('Please select an image');
            return;
        }

        Workflow.complete('#upload_drone_imagery_select_images_two');
        Workflow.focus('#drone_imagery_upload_workflow_two_band', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_select_images_three').click(function(e){
        e.preventDefault();
        if (jQuery('#drone_run_band_description_three_1').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_three_1').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_three_1').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_three_2').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_three_2').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_three_2').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_three_3').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_three_3').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_three_3').val() == '') {
            alert('Please select an image');
            return;
        }

        Workflow.complete('#upload_drone_imagery_select_images_three');
        Workflow.focus('#drone_imagery_upload_workflow_three_band', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_select_images_four').click(function(e){
        e.preventDefault();
        if (jQuery('#drone_run_band_description_four_1').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_four_1').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_four_1').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_four_2').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_four_2').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_four_2').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_four_3').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_four_3').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_four_3').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_four_4').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_four_4').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_four_4').val() == '') {
            alert('Please select an image');
            return;
        }

        Workflow.complete('#upload_drone_imagery_select_images_four');
        Workflow.focus('#drone_imagery_upload_workflow_four_band', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_select_images_five').click(function(e){
        e.preventDefault();
        if (jQuery('#drone_run_band_description_five_1').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_five_1').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_five_1').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_five_2').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_five_2').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_five_2').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_five_3').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_five_3').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_five_3').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_five_4').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_five_4').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_five_4').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_five_5').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_five_5').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_five_5').val() == '') {
            alert('Please select an image');
            return;
        }

        Workflow.complete('#upload_drone_imagery_select_images_five');
        Workflow.focus('#drone_imagery_upload_workflow_five_band', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_select_images_five_odm').click(function(e){
        e.preventDefault();
        if (jQuery('#drone_run_band_stitched_ortho_image_five_odm').val() == '') {
            alert('Please select an image');
            return;
        }
        Workflow.complete('#upload_drone_imagery_select_images_five_odm');
        Workflow.focus('#drone_imagery_upload_workflow_five_band_odm', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_select_images_five_or_ten_agisoft').click(function(e){
        e.preventDefault();
        if (jQuery('#drone_run_band_stitched_ortho_image_five_or_ten_agisoft').val() == '') {
            alert('Please select an image');
            return;
        }
        Workflow.complete('#upload_drone_imagery_select_images_five_or_ten_agisoft');
        Workflow.focus('#drone_imagery_upload_workflow_five_or_ten_band_agisoft', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_select_images_six').click(function(e){
        e.preventDefault();
        if (jQuery('#drone_run_band_description_six_1').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_six_1').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_six_1').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_six_2').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_six_2').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_six_2').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_six_3').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_six_3').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_six_3').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_six_4').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_six_4').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_six_4').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_six_5').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_six_5').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_six_5').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_six_6').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_six_6').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_six_6').val() == '') {
            alert('Please select an image');
            return;
        }

        Workflow.complete('#upload_drone_imagery_select_images_six');
        Workflow.focus('#drone_imagery_upload_workflow_six_band', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_select_images_seven').click(function(e){
        e.preventDefault();
        if (jQuery('#drone_run_band_description_seven_1').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_seven_1').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_seven_1').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_seven_2').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_seven_2').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_seven_2').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_seven_3').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_seven_3').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_seven_3').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_seven_4').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_seven_4').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_seven_4').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_seven_5').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_seven_5').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_seven_5').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_seven_6').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_seven_6').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_seven_6').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_seven_7').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_seven_7').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_seven_7').val() == '') {
            alert('Please select an image');
            return;
        }

        Workflow.complete('#upload_drone_imagery_select_images_seven');
        Workflow.focus('#drone_imagery_upload_workflow_seven_band', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_select_images_eight').click(function(e){
        e.preventDefault();
        if (jQuery('#drone_run_band_description_eight_1').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_eight_1').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_eight_1').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_eight_2').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_eight_2').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_eight_2').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_eight_3').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_eight_3').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_eight_3').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_eight_4').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_eight_4').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_eight_4').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_eight_5').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_eight_5').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_eight_5').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_eight_6').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_eight_6').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_eight_6').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_eight_7').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_eight_7').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_eight_7').val() == '') {
            alert('Please select an image');
            return;
        }
        if (jQuery('#drone_run_band_description_eight_8').val() == ''){
            alert('Please give a drone run band description.');
            return;
        } else if (jQuery('#drone_run_band_type_eight_8').val() == ''){
            alert('Please select a drone run band type.');
            return;
        }
        if (jQuery('#drone_run_band_stitched_ortho_image_eight_8').val() == '') {
            alert('Please select an image');
            return;
        }

        Workflow.complete('#upload_drone_imagery_select_images_eight');
        Workflow.focus('#drone_imagery_upload_workflow_eight_band', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_select_images_odm').click(function(e){
        e.preventDefault();
        if (jQuery('#upload_drone_images_zipfile_odm').val() == ''){
            alert('Please select a zipfile of images');
            return;
        }

        var file_input = document.getElementById('upload_drone_images_zipfile_odm');
        if (!file_input.files[0] || file_input.files.length > 1) {
            alert('Please select only a single zipfile.');
            return;
        }

        Workflow.complete('#upload_drone_imagery_select_images_odm');
        Workflow.focus('#drone_imagery_upload_workflow_odm', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_select_images_odm_micasense').click(function(e){
        e.preventDefault();
        if (jQuery('#upload_drone_images_zipfile_odm_micasense').val() == ''){
            alert('Please select a zipfile of images');
            return;
        }

        var file_input = document.getElementById('upload_drone_images_zipfile_odm_micasense');
        if (!file_input.files[0] || file_input.files.length > 1) {
            alert('Please select only a single zipfile.');
            return;
        }

        if (jQuery('#upload_drone_images_panel_zipfile_odm_micasense').val() == ''){
            alert('Please select a zipfile of Micasense radiocalibration panel images');
            return;
        }

        Workflow.complete('#upload_drone_imagery_select_images_odm_micasense');
        Workflow.focus('#drone_imagery_upload_workflow_odm_micasense', 1);
        return false;
    });

    jQuery('#upload_drone_imagery_odm_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_odm_micasense_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_bulk_previous_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_bulk_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_one_band_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_two_band_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_three_band_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_four_band_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_five_band_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_five_band_odm_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_six_band_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_seven_band_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    jQuery('#upload_drone_imagery_eight_band_form').submit(function() {
        jQuery('#working_msg').html('This can potentially take time to complete. Ensure the file(s) have completely transferred to the server before closing this tab.');
        jQuery('#working_modal').modal('show');
        return true;
    });

    // Now handled non-AJAX to get around 2GB file limit

    // jQuery('#upload_drone_imagery_submit').click(function(){
    //    upload_drone_imagery_form();
    // });

    // function upload_drone_imagery_form() {
    //    jQuery('#upload_drone_imagery_form').submit(function(e) {
    //        jQuery(':disabled').each(function(e) {
    //            jQuery(this).removeAttr('disabled');
    //        })
    //    });
    //    jQuery('#upload_drone_imagery_form').attr("action", "/api/drone_imagery/upload_drone_imagery");
    //    jQuery("#upload_drone_imagery_form").submit();
    // }

    // jQuery('#upload_drone_imagery_form').iframePostForm({
    //    json: true,
    //    post: function () {
    //        jQuery('#working_modal').modal("show");
    //        if (drone_run_band_unstitched == 'yes_open_data_map_stitch' && new_drone_run_band_stitching_odm_more_images == 'No') {
    //            jQuery('#working_msg').html("It can take a very long time to assemble the orthophotomosaic depending on the number of images uploaded. Times range from 15 minutes to 6 hours depending on the number of images, not including upload time.");
    //        }
    //    },
    //    complete: function (response) {
    //        console.log(response);
    //        jQuery('#working_msg').html("");
    //
    //        jQuery('#working_modal').modal("hide");
    //        if (response.error) {
    //            jQuery('#drone_run_id').val(response.drone_run_project_id);
    //            jQuery('#drone_image_upload_drone_run_band_stitching_odm_image_count').val(response.current_image_count);
    //            alert(response.error);
    //            return;
    //        }
    //        if (drone_run_band_unstitched == 'no' || (drone_run_band_unstitched == 'yes_open_data_map_stitch' && new_drone_run_band_stitching_odm_more_images == 'No')) {
    //            location.reload();
    //        }
    //        else if (drone_run_band_unstitched == 'yes_open_data_map_stitch' && new_drone_run_band_stitching_odm_more_images == 'Yes') {
    //            jQuery('#drone_run_id').val(response.drone_run_project_id);
    //            jQuery('#drone_image_upload_drone_run_band_stitching_odm_image_count').val(response.current_image_count);
    //
    //            alert('Select another zip file and submit! If this is your last file to upload, make sure to change the select to No.');
    //            return;
    //        }
    //    }
    // });

});

</script>





<!-- LOAD WORKING MODAL, LIST MODAL, AND CALENDAR MODAL AT END SO THAT THEY ALWAYS APPEAR ON TOP -->


<!-- Lists dialog -->

<div class="modal fade" id="list_dialog" name="list_dialog" tabindex="-1" role="dialog" aria-labelledby="listDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h3 class="modal-title" id="listDialog">Your Lists</h3>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="list_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="view_public_lists_button" type="button" class="btn btn-primary" >View Public Lists</button>
        <button id="close_list_dialog_button" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="public_list_dialog" name="public_list_dialog" tabindex="-1" role="dialog" aria-labelledby="publicListDialog">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="publicListDialog">Public Lists</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="public_list_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="close_public_list_item_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="list_item_dialog" name="list_item_dialog" tabindex="-1" role="dialog" aria-labelledby="listItemDialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="listItemDialog">List Contents</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="list_item_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="close_list_item_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="validate_accession_error_display" name="validate_accession_error_display" tabindex="-1" role="dialog" aria-labelledby="listValidationErrorDialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="listValidationErrorDialog">List Validation Failed</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div id="validate_stock_add_missing_accessions_html">
                    </div>
                    <div class="well">
                    <h3>Elements not found:</h3>
                    <table>
                        <tbody></tbody>
                    </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close_missing_accessions_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="fuzzy_search_result_display" name="fuzzy_search_result_display" tabindex="-1" role="dialog" aria-labelledby="fuzzySearchResultDialog">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="fuzzySearchResultDialog">Fuzzy Search Results</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div id="fuzzy_search_result_display_html">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="download_fuzzy_search_result" type="button" class="btn btn-primary" onclick="javascript:downloadFuzzyResponse()" >Download</button>
                <button id="close_fuzzy_search_result_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="synonym_search_result_display" name="synonym_search_result_display" tabindex="-1" role="dialog" aria-labelledby="synonymSearchResultDialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="synonymSearchResultDialog">Synonym Search Results</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div id="synonym_search_result_display_html">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
              <form id="new-list-from-unames" class="form-inline" style="float:left">
                <label>Create a New List from Unique Names:</label>
                <input name="name" type="text" class="form-control" placeholder="List Name...">
                <button class="btn btn-primary" type="submit">Save</button>
              </form>
              <form class="form-inline" style="float:right">
                <button id="close_fuzzy_search_result_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="availible_seedlots_modal" name="availible_seedlots_modal" tabindex="-1" role="dialog" aria-labelledby="availible_seedlots_modal">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4>Available Seedlots</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    
<form id="available-seedlots">
  <table class="table table-hover table-bordered">
    <thead>
      <tr>
        <th rowspan="2" style="text-align: center;">Accessions</th><th colspan="7" style="text-align: center;">Seedlots</th>
      </tr>
      <tr>
        <th></th>
        <th style="text-align: center;">Breeding Program</th>
        <th style="text-align: center;">Seedlot Name</th>
        <th style="text-align: center;">Contents</th>
        <th style="text-align: center;">Seedlot Location</th>
        <th style="text-align: center;">Count</th>
        <th style="text-align: center;">Weight(g)</th>
      </tr>
    </thead>
  </table>
</form>
<script type="text/javascript">
  (function(global){
    var mainFormSelector = "#available-seedlots";
    var d3 = global.d3v4;
    var ex = {};
    ex.build_table = function(accession_names, list_type){
      jQuery('#working_modal').modal('show');
      jQuery.ajax({
        type: 'POST',
        url: '/ajax/accessions/possible_seedlots',
        data: {'names': accession_names, 'type': list_type},
        dataType: "json",
        success: function(response) {
          _build_table(accession_names,response.seedlots,response.synonyms);
          jQuery('#working_modal').modal('hide');
        },
        error: function(response) {
          jQuery('#working_modal').modal('hide');
          console.log(response);
          alert("Something went wrong in the available-seedlots AJAX call. See console for more information.")
        }
      });
    };
    ex.get_selected = function(){
      return jQuery(mainFormSelector).serializeArray();
    };
    var empty_placeholder = new Object();
    function _build_table(accession_list,seedlot_obj,synonyms){
      console.log(seedlot_obj);
      synonymized = {};
      for (var acc_uname in seedlot_obj) {
        if (seedlot_obj.hasOwnProperty(acc_uname)) {
          var name;
          if (accession_list.indexOf(acc_uname)>-1){
            name = acc_uname;
          } else {
            for (var i = 0; i < synonyms[acc_uname].length; i++) {
              if (accession_list.indexOf(synonyms[acc_uname][i])>-1){
                name = synonyms[acc_uname][i];
                break;
              }
            }
          }
          synonymized[name] = seedlot_obj[acc_uname];
        }
      }
      var row_data = accession_list.map(function(acc){
        return {'name':acc,'seedlots':synonymized[acc]?synonymized[acc]:[]};
      });
      var table = d3.select(mainFormSelector).select("table");
      var groups = table.selectAll("tbody").data(row_data,function(d){return d.name;});
      groups.exit().remove();
      var newGroups = groups.enter().append("tbody");
      var newInitRows = newGroups.append("tr");
      newInitRows.append("th").classed("as-acc-name",true)
        .style("text-align","center")
        .style("vertical-align","middle");
      var allGroups = newGroups.merge(groups);
      allGroups.style("border-top","2px solid #999")
      allGroups.select(".as-acc-name")
        .attr("rowspan",function(d){return Math.max(1,d.seedlots.length);})
        .text(function(d){return d.name;});
      var optionRows = allGroups.selectAll("tr")
        .data(function(d){
          return d.seedlots.length>0 ? d.seedlots : [empty_placeholder];
        });
      optionRows.exit().remove();
      newOptionRows = optionRows.enter().append("tr");
      allOptionRows = newOptionRows.merge(optionRows);
      var optionRowCells = allOptionRows.selectAll("td").data(function(d){
          if (d==empty_placeholder){
            return ['<input disabled type="checkbox">'," ","No Available Seedlots"," "," "," "," "]
          }
          var cells = [];
          cells.push('<input value="'+d.seedlot[0]+'" name="'+d.seedlot[0]+'" type="checkbox">');
          cells.push(d.program);
          cells.push('<a href="/breeders/seedlot/'+d.seedlot[1]+'">'+d.seedlot[0]+'</a>');
          cells.push('<a href="/stock/'+d.contents[1]+'/view">'+d.contents[0]+'</a>');
          cells.push(d.location);
          cells.push(d.count);
          cells.push(d.weight_gram);
          return cells;
        });
      var newOptionRowCells = optionRowCells.enter().append("td");
      optionRowCells.exit().remove();
      var allOptionRowCells = newOptionRowCells.merge(optionRowCells);
      allOptionRowCells.html(function(d){return d;});
      allOptionRows.select("td") //select the checkbox cells
        .style("text-align","center")
        .style("vertical-align","middle");
    };
    global.available_seedlots = ex;
  }(window));
</script>

                </div>
            </div>
            <div class="modal-footer">
              <form id="new-list-from-seedlots" class="form-inline" style="float:left">
                <label>Create a New List from Selected Seedlots:</label>
                <input name="name" type="text" class="form-control" placeholder="List Name...">
                <button class="btn btn-primary" type="submit">Save</button>
              </form>
              <form class="form-inline" style="float:right">
                <a href="/breeders/seedlots/" class="btn btn-primary">Manage Seedlots</a>
                <button id="close_availible_seedlots_modal" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </form>
            </div>
        </div>
    </div>
</div>


<!-- Datasets dialog -->

<div class="modal fade" id="dataset_dialog" name="dataset_dialog" tabindex="-1" role="dialog" aria-labelledby="datasetDialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h3 class="modal-title" id="datasetDialog">Your Datasets</h3>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="dataset_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="view_public_datasets_button" type="button" class="btn btn-primary" >View Public Datasets</button>
        <button id="close_dataset_dialog_button" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="public_dataset_dialog" name="public_dataset_dialog" tabindex="-1" role="dialog" aria-labelledby="publicListDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="publicListDialog">Public Datasets</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="public_dataset_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="close_public_dataset_item_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="dataset_item_dialog" name="dataset_item_dialog" tabindex="-1" role="dialog" aria-labelledby="datasetItemDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="datasetItemDialog">Dataset Contents</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <div id="dataset_item_dialog_div">
	  </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="close_dataset_item_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="validate_accession_error_display" name="validate_accession_error_display" tabindex="-1" role="dialog" aria-labelledby="datasetValidationErrorDialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="datasetValidationErrorDialog">Dataset Validation Failed</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div id="validate_stock_add_missing_accessions_html">
                    </div>

                    <h3>Elements not found:</h3>
                    <table>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close_missing_accessions_dialog" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>  

<script>

jQuery("#dataset_item_dialog").draggable();
jQuery("#dataset_dialog").draggable();
jQuery("#public_dataset_dialog").draggable();

</script>





<style>
.fc-center h2 {
    font-size:1.4em;
 }

.fc-day-header {
    font-size: 0.9em;
}
.datepicker{z-index:1151 !important;}
</style>

<div class="modal fade" id="calendar_modal" name="calendar_modal"  tabindex="-1" role="dialog" aria-labelledby="calendarDialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="calendarDialog">Your Calendar</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id='calendar' style="background:#f9f9f9; padding:2px; width:100%">
            </div>
            <br/><br/>

            <div class="well well-sm">
                <center>
                    <p><b>Having trouble viewing events on the calendar?</b> <br/>Are you associated with the breeding program you are interested in viewing?</p>
                    <a class="btn btn-primary" id="calendar_bp_user_roles_show" href="/breeders/manage_roles/">Calendar Permissions</a>
                </center>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>



<div class="modal fade" id="day_dialog" name="day_dialog"  tabindex="-1" role="dialog" aria-labelledby="addEventDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="addEventDialog">Add New Event</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
  	  <form class="form-horizontal" role="form" name="day_dialog_add_event_form" id="day_dialog_add_event_form">
    	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Project: </label>
      	      <div class="col-sm-10">
		<select class="form-control" name="event_project_select" id="event_project_select"></select>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Event Type: </label>
      	      <div class="col-sm-10">
	        <select class="form-control" name="event_type_select" id="event_type_select" ></select>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Start: </label>
      	      <div class="col-sm-10">
	        <div class="input-group date">
    		  <input type="text" class="form-control datepicker" name="event_start" id="event_start">
    		  <div class="input-group-addon">
        	    <span class="glyphicon glyphicon-th"></span>
    		  </div>
		</div>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">End: </label>
      	      <div class="col-sm-10">
	        <div class="input-group date">
    		  <input type="text" class="form-control datepicker" name="event_end" id="event_end" placeholder="Leave Blank if Not Applicable">
    		  <div class="input-group-addon">
        	    <span class="glyphicon glyphicon-th"></span>
    		  </div>
		</div>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Description: </label>
      	      <div class="col-sm-10">
		<input class="form-control" name="event_description" id="event_description" type="text" >
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Web URL: </label>
      	      <div class="col-sm-10">
	        <div class="input-group">
		  <span class="input-group-addon" id="basic-addon2">http://www.</span>
  		  <input type="text" name="event_url" id="event_url" class="form-control" placeholder="example.com" aria-describedby="basic-addon2" />
  		</div>
              </div>
	    </div>
          </form>      
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" name="add_event_submit" id="add_event_submit">Add Event</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="event_dialog" name="event_dialog"  tabindex="-1" role="dialog" aria-labelledby="eventDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="eventDialog">Event Info</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <table class="table table-hover">
	    <thead>
	      <tr>
	        <th>Attribute</th>
	        <th>Value</th>
	      </tr>
	    </thead>
	    <tbody>
    	      <tr>
      	        <td>Project Name: </td>
      	        <td id="event_info_title"></td>
    	      <tr>
    	      <tr>
      	        <td>Start Date: </td>
      	        <td id="event_info_start_display"></td>
		<input id="event_info_start" type="hidden" />
    	      </tr>
    	      <tr>
      	        <td>End Date: </td>
      	        <td id="event_info_end_display"></td>
		<input id="event_info_end" type="hidden" />
    	      </tr>
    	      <tr>
      	        <td>Event Type: </td>
      	        <td id="event_info_property"></td>
		<input id="event_info_cvterm_id" type="hidden" />
    	      </tr>
    	      <tr>
      	        <td>Event Description: </td>
      	        <td id="event_info_description"></td>
    	      </tr>
    	      <tr>
      	        <td>Event Web URL: </td>
      	        <td id="event_info_url"></td>
		<input id="event_info_url_raw" type="hidden" />
    	      </tr>
	    </tbody>
  	  </table>
        </div>
      </div>
      <div class="modal-footer">
        <form name="event_dialog_more_info_form" id="event_dialog_more_info_form">
          <input type="hidden" name="event_project_id" id="event_project_id" />
	  <input type="hidden" name="event_project_title" id="event_project_title" />
        </form>
	<form name="event_dialog_delete_event_form" id="event_dialog_delete_event_form">
          <input type="hidden" name="event_projectprop_id" id="event_projectprop_id" />
        </form>
	<button type="button" class="btn btn-primary" name="event_edit_display" id="event_edit_display">Edit Event</button>
	<button type="button" class="btn btn-danger" name="delete_event_submit" id="delete_event_submit">Delete Event</button>
	<button type="button" class="btn btn-info" name="export_event_display" id="export_event_display">Export Event</button>
	<button type="button" class="btn btn-default" data-dismiss="modal" id="event_dialog_dismiss">Close</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="edit_event_dialog" name="edit_event_dialog" tabindex="-1" role="dialog" aria-labelledby="editEventDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="editEventDialog">Edit Event</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
  	  <form class="form-horizontal" role="form" name="edit_event_form" id="edit_event_form">
    	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Project: </label>
      	      <div class="col-sm-10">
		<select class="form-control" name="edit_event_project_select" id="edit_event_project_select"></select>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Event Type: </label>
      	      <div class="col-sm-10">
		<select class="form-control" name="edit_event_type_select" id="edit_event_type_select" ></select>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Start: </label>
      	      <div class="col-sm-10">
	        <div class="input-group date">
    		  <input type="text" class="form-control datepicker" name="edit_event_start" id="edit_event_start">
    		  <div class="input-group-addon">
        	    <span class="glyphicon glyphicon-th"></span>
    		  </div>
		</div>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">End: </label>
      	      <div class="col-sm-10">
	        <div class="input-group date">
    		  <input type="text" class="form-control datepicker" name="edit_event_end" id="edit_event_end" placeholder="Leave Blank if Not Applicable">
    		  <div class="input-group-addon">
        	    <span class="glyphicon glyphicon-th"></span>
    		  </div>
		</div>
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Description: </label>
      	      <div class="col-sm-10">
		<input class="form-control" name="edit_event_description" id="edit_event_description" type="text" >
              </div>
	    </div>
	    <div class="form-group">
      	      <label class="col-sm-2 control-label">Web URL: </label>
      	      <div class="col-sm-10">
		<input type="hidden" id="edit_event_projectprop_id" name="edit_event_projectprop_id" />
  		<input type="text" name="edit_event_url" id="edit_event_url" class="form-control" placeholder="example.com">
              </div>
	    </div>
          </form>      
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" name="edit_event_submit" id="edit_event_submit">Save</button>
      </div>
    </div>
  </div>
</div>



<script>

jQuery(document).ready(function() {

    jQuery(document).on('click', "button[name='personal_calendar_link']", function() {
        jQuery("#calendar_modal").modal("show");
    });

    //If a date is given in the url, using the query parameter currentDate=<timestamp>
    var captured = /currentDate=([^&]+)/.exec(window.location.href);
    var result = captured ? captured[1] : Date.now();
    var valid = (new Date(result)).getTime() > 0;
    if (valid && captured) {
      jQuery('#calendar').fullCalendar('gotoDate', result);
      jQuery("#calendar_modal").modal("show");
    }

    jQuery('#calendar_modal').on('shown.bs.modal', function () {
        jQuery("#calendar").fullCalendar('render');
    });

    jQuery('.datepicker').datepicker({
        format: 'yyyy-mm-dd',
    });

    var fcSources = {
        //month_view: {
        //    url: '/ajax/calendar/populate/personal/month',
        //    error: function() {window.location.replace('/solpeople/login.pl');},
        //    className: 'bg-info',
        //    textColor: '#000',
        //    borderColor: '#FFF',
        //},
        agendaWeek_view: {
            url: '/ajax/calendar/populate/personal/agendaWeek',
            error: function() {window.location.replace('/user/login');},
            className: 'bg-info',
            textColor: '#000',
            borderColor: '#FFF',
        },
        //gcal_cassbase: {
        //    googleCalendarId: 'mtm2tg9p10nvqttdjas4v0n0sg@group.calendar.google.com',
        //    className: 'bg-success',
        //    textColor: '#000',
        //    borderColor: '#FFF',
        //},
        //gcal_holidays: {
        //    googleCalendarId: 'en.usa#holiday@group.v.calendar.google.com',
        //    className: 'bg-danger',
        //    textColor: '#000',
        //    borderColor: '#FFF',
        //}
    };

    var lastView;
    jQuery('#calendar').fullCalendar({
        editable: true,
        eventLimit: true,
        lazyFetching: false,
        header: {
            left:   'title',
            center: 'month,agendaWeek',
            right:  'prevYear,prev,today,next,nextYear'
        },
        views: {
            month: {
                titleFormat: 'MMM YYYY'
            },
            agendaWeek: {
                titleFormat: 'MMM D YYYY'
            }
        },
        eventSources: [fcSources.month_view, fcSources.agendaWeek_view, fcSources.gcal_cassbase, fcSources.gcal_holidays],
        defaultView: 'month',
        googleCalendarApiKey: 'AIzaSyDHH6NGHEYJcYRcxr5mHBWKcqNlKyu-L-Q',
        eventRender: function(event, element, view) {
            if (!event.url) {
                element.find('.fc-title').html(event.title + ": " + event.property ); 
            }
        },
        dayClick: function(date, jsEvent, view) {
            jQuery.ajax({
                url: "/ajax/calendar/dayclick/personal",
                type: "GET",
                dataType: "json",
                success: function(data) {
                    jQuery("input#event_start").val(date.format());
                    var options = jQuery("#event_project_select");
                    options.empty();
                    jQuery.each(data.project_list, function () {
                        options.append(jQuery("<option />").val(this.project_id).text(this.project_name));
                    });
                    var options = jQuery("#event_type_select");
                    options.empty();
                    jQuery.each(data.projectprop_list, function () {
                        options.append(jQuery("<option />").val(this.cvterm_id).text(this.cvterm_name));
                    });
                    return;
                },
                error: function() {
                    alert("Error preparing Day dialog!");
                }
            });
            jQuery('#day_dialog').modal('show');
            // jQuery(this).css('background-color', '#A9F5F2');
        },
        eventClick: function(event) {
            if (event.url) {
                window.open(event.url);
                return false;
            } else {
                jQuery("#event_info_title").html("<a href='" + event.project_url + "'>" + event.title + "</a>");
                jQuery("#event_info_start_display").html(event.start_display);
                jQuery("#event_info_end_display").html(event.end_display);
                jQuery("input#event_info_start").val(event.start_drag);
                jQuery("input#event_info_end").val(event.end_drag);
                jQuery("input#event_info_cvterm_id").val(event.cvterm_id);
                jQuery("#event_info_property").html("<a href='" + event.cvterm_url + "'>" + event.property + "</a>");
                jQuery("#event_info_description").html(event.event_description);
                jQuery("input#event_info_url_raw").val(event.event_url);
                jQuery("#event_info_url").html("<a href='" + event.event_url + "'>" + event.event_url + "</a>");
                jQuery("input#event_project_title").val(event.title);
                jQuery("input#event_project_id").val(event.project_id);
                jQuery("input#event_projectprop_id").val(event.projectprop_id);
                jQuery('#event_dialog').modal('show');
                return false;
            }
        },
        eventMouseover: function(event, jsEvent) {
            if (event.url) {
                jQuery(this).popover({html:true, title:event.title, placement:'right', container:'body', content: 'Location: ' + event.location + '<br/>Description: ' + event.description,}).popover('show');
                return false;
            } else {
                jQuery(this).popover({html:true, title:event.title, placement:'right', container:'body', content: 'Start: ' + event.start_display + '<br/>End: ' + event.end_display + '<br/>Type: ' + event.property + '<br/>Description: ' + event.event_description + '<br/>URL: ' + event.event_url,}).popover('show');
                return false;
              }
        },
        eventMouseout: function(event) {
            jQuery(this).popover("hide");
            return false;
        },
        eventDrop: function(event, delta, revertFunc, jsEvent, ui, view) {
            if (!confirm("Are you sure about this change?")) {
                revertFunc();
                return;
            }
            jQuery.ajax({
                url: "/ajax/calendar/drag_or_resize",
                type: "POST",
                dataType: "json",
                data: ({
                    id: event.id,
                    start_drag: event.start_drag,
                    end_drag: event.end_drag,
                    description: event.event_description,
                    url: event.event_url,
                    projectprop_id: event.projectprop_id,
                    delta: delta.asSeconds(),
                    view: view.name,
                    allday: +event.allDay,
                    drag: 1,
                }),
                success: function(data) {
                    if (data.status ==3) {
                        alert("You do not have the permissions to edit this event.");
                    } else if (data.error ==1) {
                        alert("The was a problem editing this event.");
                    } else if (data.success == 1) {
                        event.start = data.start;
                        event.start_drag = data.start_drag;
                        event.start_display = data.start_display;
                        event.end = data.end;
                        event.end_drag = data.end_drag;
                        event.end_display = data.end_display;
                    }
                    jQuery('#calendar').fullCalendar('updateEvent', event);
                    return;
                },
                error: function() {
                    revertFunc();
                    alert("Error! Did Not Update Event! E.001");
                }
            });
        },
        eventResize: function(event, delta, revertFunc, jsEvent, ui, view) {
            if (!confirm("Are you sure about this change?")) {
                revertFunc();
                return;
            }
            jQuery.ajax({
                url: "/ajax/calendar/drag_or_resize",
                type: "POST",
                dataType: "json",
                data: ({
                    id: event.id,
                    start_drag: event.start_drag,
                    end_drag: event.end_drag,
                    description: event.event_description,
                    url: event.event_url,
                    projectprop_id: event.projectprop_id,
                    delta: delta.asSeconds(),
                    view: view.name,
                    allday: +event.allDay,
                    drag: 0,
                }),
                success: function(data) {
                    if (data.status ==3) {
                        alert("You do not have the permissions to edit this event.");
                    } else if (data.error ==1) {
                        alert("The was a problem editing this event.");
                    } else if (data.success == 1) {
                        event.start = data.start;
                        event.start_drag = data.start_drag;
                        event.start_display = data.start_display;
                        event.end = data.end;
                        event.end_drag = data.end_drag;
                        event.end_display = data.end_display;
                    }
                    jQuery('#calendar').fullCalendar('updateEvent', event);
                    return;
                },
                error: function() {
                    revertFunc();
                    alert("Error! Did Not Update Event! E.001");
                }
            });
        },
    });

    jQuery('button#add_event_submit').click( function(event) {
        event.preventDefault();
        jQuery.ajax({
            url: "/ajax/calendar/add_event",
            type: "POST",
            dataType: "json",
            data: jQuery('form#day_dialog_add_event_form').serialize(),
            success: function(data) {
                if(data.status == 1){
                    alert("Event Successfully Added!");
                    jQuery('#day_dialog').modal('hide');
                    jQuery('#calendar').fullCalendar('refetchEvents');
                }else if(data.status == 2){
                    alert("Error! Event Not Added! E.002");
                }else if(data.status == 3){
                    alert("You do not have the permissions to add an event.");
                }
            },
            error: function() {
                alert("Error! Event Not Added! E.001");
            }
        });
    });

    jQuery('button#delete_event_submit').click( function(event) {
        event.preventDefault();
        jQuery('button#export_event_display').popover('hide');
        if (!confirm("Are you sure you want to delete this event?")) {
            return;
        }
        jQuery.ajax({
            url: "/ajax/calendar/delete_event",
            type: "POST",
            dataType: "json",
            data: jQuery('form#event_dialog_delete_event_form').serialize(),
            success: function(data) {
                jQuery('#event_dialog').modal('hide');
                jQuery('#calendar').fullCalendar( 'refetchEvents' );
                if (data.status==3){
                    alert("You do not have the permissions to delete an event.");
                } else if (data.status==0){
                    alert("The event was not deleted!");
                }
            },
            error: function() {
                alert("Did Not Delete Event! E.001");
            }
        });
    });
    
    jQuery('button#event_edit_display').click( function(event) {
        event.preventDefault();
        jQuery.ajax({
            url: "/ajax/calendar/dayclick/personal",
            type: "GET",
            dataType: "json",
            success: function(data) {
                var options = jQuery("#edit_event_project_select");
                options.empty();
         	      jQuery.each(data.project_list, function () {
                    options.append(jQuery("<option />").val(this.project_id).text(this.project_name));
         	      });
                options.val(jQuery("input#event_project_id").val());
                var options = jQuery("#edit_event_type_select");
                options.empty();
         	      jQuery.each(data.projectprop_list, function () {
                    options.append(jQuery("<option />").val(this.cvterm_id).text(this.cvterm_name));
         	      });
                options.val(jQuery("input#event_info_cvterm_id").val());
                return;
            },
            error: function() {
                alert("Error Preparing Edit Event Dialog!");
            }
        });

      	jQuery("#edit_event_projectprop_id").val(jQuery("#event_projectprop_id").val());
      	jQuery("#edit_event_start").val(jQuery("#event_info_start").val());
      	jQuery("#edit_event_end").val(jQuery("#event_info_end").val());
      	jQuery("#edit_event_description").val(jQuery("#event_info_description").html());
      	jQuery("#edit_event_url").val(jQuery("#event_info_url_raw").val());
      	jQuery("#edit_event_dialog").modal("show");
    });

    jQuery('button#edit_event_submit').click( function(event) {
        event.preventDefault();
        if (!confirm("Are you sure you want to save this edit?")) {
            return;
        }
        jQuery.ajax({
            url: "/ajax/calendar/edit_event",
            type: "POST",
            dataType: "json",
            data: jQuery('form#edit_event_form').serialize(),
            success: function(data) {
                if (data.status == 1) {
                    jQuery('#event_dialog').modal('hide');
                    jQuery('#edit_event_dialog').modal('hide');
                    jQuery('#calendar').fullCalendar( 'refetchEvents' );
                } else if (data.status == 0) {
                    alert("Event Already Existed! Your Edit Was Not Saved!");
                } else if (data.status == 3) {
                    alert("You do not have the permissions to edit thie event.");
                }
            },
            error: function() {
                alert("Did Not Save Edit! E.001");
            }
        });
    });

    jQuery('button#export_event_display').click( function() {
    	jQuery(this).popover({html:true, title:"Export Event", placement:'right', container:'body', content: "Google Calendar: <a href='http://www.google.com/calendar' target='_blank' >Export</a>"}).popover('toggle');
    });

    jQuery('#event_dialog').on('hide.bs.modal', function (e) {
       jQuery('button#export_event_display').popover('hide');
    });

});



</script>


<!-- Login Dialog -->



<div class="modal fade" id="site_login_dialog" name="site_login_dialog" tabindex="-1" role="dialog" aria-labelledby="site_login_dialog_title">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title" id="site_login_dialog_title">Login</h3>
            </div>
            <div class="modal-body">
                <form id="login_form" name="login_form">
                    <div class="container-fluid">

                        <div class="input-group">
                            <input class="form-control" id="username" name="username" placeholder="Username" type="text" tabindex="1" />
                            <span class="input-group-btn">
                                <button id="forgot_username_modal_show" class="btn btn-default" type="button" tabindex="4">&nbsp;<span class="glyphicon glyphicon-question-sign"></span>&nbsp;</button>
                            </span>
                        </div>
                        <br />
                        <div class="input-group">
                            <input class="form-control" id="password" name="password" placeholder="Password" type="password" tabindex="2" />
                            <span class="input-group-btn">
                                <button id="reset_password_modal_show" class="btn btn-default" type="button" tabindex="5">&nbsp;<span class="glyphicon glyphicon-question-sign"></span>&nbsp;</button>
                            </span>
                        </div>
                        <br />

                        <input type="hidden" value="/" id="goto_url" name="goto_url" />

                        <div>
                            <button class="btn btn-default" id="new_user_modal_show" style="float:left" tabindex="6">New User</button>
                            <button class="btn btn-primary" id="submit_password" name="submit_password" type="submit" style="float:right" tabindex="3">Login</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="close_site_login_dialog_button" type="button" class="btn btn-default" data-dismiss="modal" style="float:left">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="site_login_forgot_username_dialog" name="site_login_forgot_username_dialog" tabindex="-1" role="dialog" aria-labelledby="site_login_forgot_username_dialog_title">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title" id="site_login_forgot_username_dialog_title">Forgot Username</h3>
            </div>
            <div class="modal-body">
                <div>
                    If you've forgotten your username, enter your email address below. An email will be sent with any account username(s) associated with your email address.
                </div>
                <br />
                <div style="white-space:nowrap">
                    <form id="forgot_username_form" name="forgot_username_form" style="white-space:nowrap">
                        <div style="white-space:nowrap; align:center">
                            <label class="textlabel">Email Address</label>
                            <input class="form-control" style="width:200px; white-space:nowrap; float:center" id="forgot_username_email" name="forgot_username_email" /><br />
                            <button type="submit" class="btn btn-primary" id="submit_forgot_username_email" style="float:center" >Get Username(s)</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close_site_login_forgot_username_dialog_button" type="button" class="btn btn-default" data-dismiss="modal" style="float:left">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="site_login_reset_password_dialog" name="site_login_reset_password_dialog" tabindex="-1" role="dialog" aria-labelledby="site_login_reset_password_dialog_title">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title" id="site_login_reset_password_dialog_title">Reset Password</h3>
            </div>
            <div class="modal-body">
                <div>
                    To reset your password, please enter your email address. A link will be sent to that address with a link that will enable you to reset your password.
                </div>
                <br />
                <div style="white-space:nowrap">
                    <form id="password_reset_form" name="password_reset_form" style="white-space:nowrap">
                        <div style="white-space:nowrap; align:center">
                            <label class="textlabel">Email Address</label>
                            <input class="form-control" style="width:200px; white-space:nowrap; float:center" id="password_reset_email" name="password_reset_email" /><br />
                            <button type="submit" class="btn btn-primary" id="submit_password_reset_email" style="float:center" >Get link</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close_site_login_reset_password_dialog_button" type="button" class="btn btn-default" data-dismiss="modal" style="float:left">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="site_login_new_user_dialog" name="site_login_new_user_dialog" tabindex="-1" role="dialog" aria-labelledby="site_login_new_user_dialog_title">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title" id="site_login_new_user_dialog_title">Create New User</h3>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-10 col-sm-offset-1">

                        <form id="new_account_form">
                            <div class="container-fluid">
                                <div class="panel panel-danger">
                                    <div class="panel-heading">Notice</div>
                                    <div class="panel-body">
                                        <ul>
                                            <li><b>Before</b> creating a new account, please check if you <b>already have an account</b> using the <a href="/search/direct_search.pl?search=directory">directory search</a>. </li>
                                            <li>A link will be emailed to you. Please click on it to activate the account.</li>
                                            <li><b>All fields are required.</b></li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">First Name: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="text" name="first_name" value="" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Last Name: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="text" name="last_name" value="" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Join Public Companies(s): </label>
                                        <div class="col-sm-9">
                                            <div id="private_companies_div"></div>
                                      </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Join Public Breeding Program(s): </label>
                                        <div class="col-sm-9">
                                            <div id="breeding_programs_div"></div>
                                      </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Username: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="text" name="username" value="" />
                                            <p class="help-block">Username must be at least 7 characters long.</p>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Password: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="password" name="password" value="" />
                                            <p class="help-block">Password must be at least 7 characters long and different from your username.</p>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Confirm Password: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="password" name="confirm_password" value="" />
                                            <p class="help-block">Password must be at least 7 characters long and different from your username.</p>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Email Address: </label>
                                        <div class="col-sm-9">
                                            <input class="form-control" type="text" name="email_address" value="" />
                                            <p class="help-block">An email will be sent to this address requiring you to confirm its receipt to activate your account.</p>
                                        </div>
                                    </div>

                                    <div align="right">
                                        <button class="btn btn-default btn-lg" type="reset" >Reset</button>
                                        <button class="btn btn-primary btn-lg" type="submit" name="create_account" >Create Account</button>
                                    </div>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close_site_login_new_user_dialog_button" type="button" class="btn btn-default" data-dismiss="modal" style="float:left">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
jQuery(document).ready( function() {

    jQuery("#site_login_dialog").on('shown.bs.modal', function() {
        jQuery("#username").focus();
    });

    jQuery('#forgot_username_modal_show').click(function() {
        jQuery('#site_login_forgot_username_dialog').modal('show');
    });

    jQuery('#forgot_username_form').submit(function(event) {
        event.preventDefault();
        var form_data = jQuery('#forgot_username_form').serialize();
        jQuery.ajax( {
            url: '/ajax/user/forgot_username',
            data: form_data,
            error: function(r) { alert('An error occurred! Sorry!');  },
            success: function(r) {
                if (r.error) { alert(r.error); }
                else {
                    alert(r.message);
                    jQuery('#site_login_forgot_username_dialog').modal('hide');
                }
            }
        });
    });

    jQuery('#reset_password_modal_show').click(function(){
        event.preventDefault();
        jQuery('#site_login_reset_password_dialog').modal('show');
    });

    jQuery('#password_reset_form').submit( function(event) {
        event.preventDefault();
        var form_data = jQuery('#password_reset_form').serialize();
        jQuery.ajax( {
            url: '/ajax/user/reset_password',
            data: form_data,
            error: function(r) { alert('An error occurred! Sorry!');  },
            success: function(r) {
                if (r.error) { alert(r.error); }
                else {
                    alert(r.message);
                    jQuery('#site_login_reset_password_dialog').modal('hide');
                }
            }
        });
    });

    jQuery('#new_user_modal_show').click(function(){
        event.preventDefault();
        jQuery('#site_login_new_user_dialog').modal('show');
    });
    jQuery("#site_login_new_user_dialog").on('shown.bs.modal', function() {
        get_select_box('breeding_programs', 'breeding_programs_div', { 'name': 'breeding_programs', 'id': 'breeding_programs', 'default': -1, 'multiple': 1, 'is_new_user':1 });
        get_select_box('private_companies', 'private_companies_div', { 'name': 'private_companies', 'id': 'private_companies', 'default': -1, 'multiple': 1, 'is_new_user':1 });
    });

    jQuery('#new_account_form').submit(function(event) {
        event.preventDefault();
        var form_data = jQuery('#new_account_form').serialize();
        //alert(JSON.stringify(form_data));
        jQuery.ajax({
            url: '/ajax/user/new',
            beforeSend: function(){
                jQuery('#working_modal').modal('show');
            },
            data: form_data,
            success: function(r) {
                jQuery('#working_modal').modal('hide');
                console.log(r);
                if (r.error) { alert(r.error); }
                else {
                    let message = r.message || 'New account added. Check your email for the confirmation link - you must confirm your account before you can login.';
                    alert(message);
                    jQuery('#site_login_new_user_dialog').modal('hide');
                    jQuery('#site_login_dialog').modal('hide');
                }
            }
        });
    });

    jQuery("#username, #password").keydown(function(event) {
        var key = event.keyCode ? event.keyCode : event.which;
        if ( key === 13 ) {
            jQuery("#login_form").submit();
            event.preventDefault();
        }
    });
    jQuery('#login_form').submit( function(event) {
        event.preventDefault();
        var form_data = jQuery('#login_form').serialize();
        if (!jQuery('#username').val() || !jQuery('#password').val()) {
            alert('Please enter a username and password');
            return;
        }
        jQuery.ajax( {
            url: '/ajax/user/login',
            data: form_data,
            error: function(r) { alert('An error occurred! Sorry!');  },
            success: function(r) {
                if (r.error) {
                    alert(r.error);
                    return;
                }
                if (r.goto_url && r.goto_url !== "" ) {
                    location.href=r.goto_url;
                }
                else {
                    location.href='/';
                }
            }
        });
    });

    // Display New User Dialog if `new_user` query param set
    url = new URL(window.location.href);
    if ( url.searchParams.get('new_user') ) {
        jQuery('#site_login_new_user_dialog').modal('show');
    }
});
</script>


<!-- End login dialog -->


<!--
<div id="working" style="text-align : center;">
  <img src="/img/wheel.gif" />
  <div id="working_msg"></div>
</div>
-->

<div class="modal fade" id="working_modal" name="working_modal" tabindex="-1" role="dialog" aria-labelledby="workingModalDialog" data-controls-modal="your_div_id" data-backdrop="static" data-keyboard="false" href="#">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
	      <center>
          <h4 class="modal-title" id="workingModalDialog">Working</h4>
	      </center>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	        <center>
	          <img src="/img/wheel.gif" />
    	      <div id="working_msg"></div>
	        </center>
          <div id="working_modal_progress_div" style="display: none">
            <br /><br />
            <div class="progress">
              <div id="working_modal_progress" class="progress-bar progress-bar-success" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" style="width: 0"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer"></div>
    </div>
  </div>
</div>

<div class="modal fade" id="progress_modal" name="progress_modal" tabindex="-1" role="dialog" aria-labelledby="progressModalDialog" data-controls-modal="your_div_id" data-backdrop="static" data-keyboard="false" href="#">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
	<center>
          <h4 class="modal-title" id="progressModalDialog">Progress</h4>
	</center>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
	  <center>
		  <div id="progress_msg"></div>
		  <div class="progress">
		    <div id="progress_bar" class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
		  </div>
	  </center>
	  <ul id="current_task" class="form-group list-unstyled"></ul>
        </div>
      </div>
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>

<!-- END CONTENT WRAPPER -->

</div>
<div class="col-md-1 col-lg-1 col-xl-2">
</div>
</div>
</div>


<!-- END CONTENT WRAPPER -->

      </div>
      <div class="col-sm-1 col-md-1 col-lg-2">
      </div>
    </div>
  </div>

<!-- BEGIN FOOTER -->
<br/>
<!-- div id="pagefooter" class="navbar navbar-default" style="margin-bottom:0px;">


</div -->

<div class="well well-sm">

    <div class="panel panel-default">
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-1">
                </div>
                <div class="col-sm-2">
                    <center>
                        <a href="https://btiscience.org"><img src="/static/documents/img/bti_logo_2016.png" width="140" /></a>
                    </center>
                </div>
                <div class="col-sm-2">
                    <center>
                        <a href="https://foundationfar.org/"><img src="/static/documents/img/FFARlogo.jpg" width="140" /></a>
                    </center>
                </div>
                <div class="col-sm-2">
                    <center>
                        <a href="https://nifa.usda.gov/"><img src="/static/documents/img/USDANIFAlogo.png" width="140" /></a>
                    </center>
                </div>
                <div class="col-sm-2">
                    <center>
                        <a href="https://www.cornell.edu/"><img src="/static/documents/img/cu_logo.png" width="200" /></a>
                    </center>
                </div>
                <div class="col-sm-2">
                    <center>
                        <a href="https://www.iowacorn.org/iowa-corn-home/"><img src="/static/documents/img/IowaCornBoardlogo.png" width="200" /></a>
                    </center>
                </div>
                <div class="col-sm-1">
                </div>
            </div>
        </div>
    </div>

    <hr>

    <center>
        <p>Please cite <a href="https://acsess.onlinelibrary.wiley.com/doi/full/10.1002/ppj2.20004">ImageBreed</a> if you find this software useful in your research.</p>
        <p>Please show your support for this open-source software by <a href="https://www.patreon.com/nmorales">subscribing</a> or <a href="https://www.buymeacoffee.com/imagebreed" target=_blank><img src="/static/img/imagebreed/imagebreedbuyacoffee.png" width="180" alt="Buy ImageBreed a Coffee" title="Buy ImageBreed a Coffee"></a></p>
        <a href="https://www.youtube.com/channel/UC1FYqz6kz9pE72sSHhG7ocQ" target=_blank><img src="/static/img/imagebreed/imagebreed_tutorials.png" width="180" alt="Watch ImageBreed Tutorials" title="Watch ImageBreed Tutorials"></a>
        <hr>
        <p><small><b>ImageBreed v10.1</b></small></p>
    </center>
</div>

</body>
</html>


<style>
.ui-autocomplete { z-index:2147483647; }
</style>
